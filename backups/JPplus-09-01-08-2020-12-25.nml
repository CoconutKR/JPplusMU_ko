# 1 "JPplus.pnml"
/*---HEADER--*/

//Define the GRF
# 1 "src/header.pnml" 1
grf {
	grfid:	"BS\13\20";
	name:	string(STR_GRF_NAME);
	desc:	string(STR_GRF_DESC);
	version:	7;
	min_compatible_version: 7;
		//basecosts
		param 0 {
				param_basecostbuy {
						type: int;
						name: string(STR_PARAM_NAME_BASECOSTMODBUY);
						desc: string(STR_PARAM_DESC_BASECOSTMODBUY);
						min_value: 0;
						max_value: 2;
						def_value: 1;
						names: {
												0: string(STR_PARAM_LOW);
												1: string(STR_PARAM_NORMAL);
												2: string(STR_PARAM_HIGH);
						};
				}
		}
		//runningcosts
		param 1 {
				param_basecostrun {
						type: int;
						name: string(STR_PARAM_NAME_BASECOSTMODRUN);
						desc: string(STR_PARAM_DESC_BASECOSTMODRUN);
						min_value: 0;
						max_value: 4;
						def_value: 2;
						names: {
												0: string(STR_PARAM_VLOW);
												1: string(STR_PARAM_LOW);
												2: string(STR_PARAM_NORMAL);
												3: string(STR_PARAM_HIGH);
												4: string(STR_PARAM_VHIGH);
						};
				}
		}
		//pax capacity
		param 2 {
				param_basecapacity {
						type: int;
						name: string(STR_PARAM_NAME_BASECAPACITY);
						desc: string(STR_PARAM_DESC_BASECAPACITY);
						min_value: 0;
						max_value: 4;
						def_value: 1;
						names: {
												0: string(STR_PARAM_LOW);
												1: string(STR_PARAM_NORMAL);
												2: string(STR_PARAM_HIGH);
												3: string(STR_PARAM_VHIGH);
												//4: string(STR_PARAM_REAL);
						};
				}
		}
		param 3 {
			 param_boostcapacity {
					name: string(STR_PARAM_NAME_BOOSTCAPACITY);
					desc: string(STR_PARAM_DESC_BOOSTCAPACITY);
					type: bool;
					bit:  0;
			 }
		}
				param 4 {
			 param_japansetdisable {
					name: string(STR_PARAM_NAME_JAPANSETDISABLE);
					desc: string(STR_PARAM_DESC_JAPANSETDISABLE);
					type: bool;
					bit:  0;
					def_value: 0;
			 }
		}
}
# 1 "JPplus.pnml" 4

//Helpers
# 1 "src/basecosts.pnml" 1
basecost {
		 PR_BUILD_VEHICLE : param_basecostbuy -1;
		 PR_BUILD_VEHICLE_WAGON: param_basecostbuy +3;
		 PR_RUNNING: param_basecostrun +1; //3
}
# 1 "JPplus.pnml" 4
# 1 "src/railtypetable.pnml" 1
/*railtypetable {
    "3RDR", "3RDC", RLOW, ELOW, RHIG, EHIG, HSTR, NGRL, ELNG, NLOW, ENLW, ENHI, RAIL, ELRL,
}*/

railtypetable {
	RAIL,
	ELRL,
	NARROW_NOEL: [NAAN, RAIL],
	NARROW_3RDR: [NAA3, RAIL],
	NARROW_OHLE: [NABE, NAAE, ELRL],
	STANDARD_NOEL: [SAAN, RAIL],
	STANDARD_3RDR: [SAB3, SAA3, RAIL],
	STANDARD_OHLE: [SAAE, ELRL],
}
# 1 "JPplus.pnml" 4
# 1 "src/cargotable.pnml" 1
cargotable {
	PASS,
}
# 1 "JPplus.pnml" 4
# 1 "src/parameters.pnml" 1
/*	CAPCITY BOOST	*/
if (param_boostcapacity == 1)
{
boostlocal = 15;
}
else
{
boostlocal = 0;
}

/*	PAX CAPACITIES	*/
if (param_basecapacity == 0) {
	param_capacity_local = 60 + boostlocal;
	param_capacity_rapid = 50;
	param_capacity_express = 40;
}

if (param_basecapacity == 1) {
param_capacity_local = 75 + boostlocal;
param_capacity_rapid = 65;
param_capacity_express = 50;
}

if (param_basecapacity == 2) {
param_capacity_local = 90 + boostlocal;
param_capacity_rapid = 75;
param_capacity_express = 60;
}

if (param_basecapacity == 3) {
param_capacity_local = 105 + boostlocal;
param_capacity_rapid = 90;
param_capacity_express = 70;
}
if (param_basecapacity == 4) {
param_capacity_local = 1;
param_capacity_rapid = 1;
param_capacity_express = 1;
}

/*	LOADING SPEEDS	*/
if (param_basecapacity == 0) {
	param_loading_1D = 5; // 1 door //
	param_loading_2D = 10; // 2 doors //
	param_loading_3D = 20; // 3 doors //
	param_loading_4D = 40; // 4 doors //
	param_loading_5D = 45; // 5 doors //
	param_loading_6D = 55; // 6 doors //
}

if (param_basecapacity == 1) {
	param_loading_1D = 10; // 1 door //
	param_loading_2D = 20; // 2 doors //
	param_loading_3D = 30; // 3 doors //
	param_loading_4D = 50; // 4 doors //
	param_loading_5D = 55; // 5 doors //
	param_loading_6D = 65; // 6 doors //
}

if (param_basecapacity == 2) {
	param_loading_1D = 20; // 1 door //
	param_loading_2D = 30; // 2 doors //
	param_loading_3D = 40; // 3 doors //
	param_loading_4D = 60; // 4 doors //
	param_loading_5D = 65; // 5 doors //
	param_loading_6D = 75; // 6 doors //
}

if (param_basecapacity >= 3) {
	param_loading_1D = 30; // 1 door //
	param_loading_2D = 40; // 2 doors //
	param_loading_3D = 50; // 3 doors //
	param_loading_4D = 80; // 4 doors //
	param_loading_5D = 85; // 5 doors //
	param_loading_6D = 95; // 6 doors //
}
# 1 "JPplus.pnml" 4
# 1 "src/template.pnml" 1


template tmpl_purchase (x, y) {
		[1 , 1, 1, 1, 0, 0, "gfx/empty.png"]
	 	[1 , 1, 1, 1, 0, 0, "gfx/empty.png"]
	 	[1 , 1, 1, 1, 0, 0, "gfx/empty.png"]
	 	[1 , 1, 1, 1, 0, 0, "gfx/empty.png"]
	 	[1 , 1, 1, 1, 0, 0, "gfx/empty.png"]
	 	[1 , 1, 1, 1, 0, 0, "gfx/empty.png"]
    [x, y, 76, 15, -28, -10]
		[1 , 1, 1, 1, 0, 0, "gfx/empty.png"]
}
template tmpl_purchase_32bpp (x, y) {
		[1 , 1, 1, 1, 0, 0, "gfx/empty_32bpp.png"]
	 	[1 , 1, 1, 1, 0, 0, "gfx/empty_32bpp.png"]
	 	[1 , 1, 1, 1, 0, 0, "gfx/empty_32bpp.png"]
	 	[1 , 1, 1, 1, 0, 0, "gfx/empty_32bpp.png"] 
	 	[1 , 1, 1, 1, 0, 0, "gfx/empty_32bpp.png"]
	 	[1 , 1, 1, 1, 0, 0, "gfx/empty_32bpp.png"]
    [x, y, 65, 15, -28, -10]
		[1 , 1, 1, 1, 0, 0, "gfx/empty_32bpp.png"]
}


template tmpl_purchase_dh (x, y) {
		[1 , 1, 1, 1, 0, 0, "gfx/empty.png"]
	 	[1 , 1, 1, 1, 0, 0, "gfx/empty.png"]
	 	[1 , 1, 1, 1, 0, 0, "gfx/empty.png"]
	 	[1 , 1, 1, 1, 0, 0, "gfx/empty.png"]
	 	[1 , 1, 1, 1, 0, 0, "gfx/empty.png"]
	 	[1 , 1, 1, 1, 0, 0, "gfx/empty.png"]
    [x, y, 76, 15, -14, -10]
		[1 , 1, 1, 1, 0, 0, "gfx/empty.png"]
}
template tmpl_purchase_dh_32bpp (x, y) {
		[1 , 1, 1, 1, 0, 0, "gfx/empty_32bpp.png"]
	 	[1 , 1, 1, 1, 0, 0, "gfx/empty_32bpp.png"]
	 	[1 , 1, 1, 1, 0, 0, "gfx/empty_32bpp.png"]
	 	[1 , 1, 1, 1, 0, 0, "gfx/empty_32bpp.png"]
	 	[1 , 1, 1, 1, 0, 0, "gfx/empty_32bpp.png"]
	 	[1 , 1, 1, 1, 0, 0, "gfx/empty_32bpp.png"]
    [x, y, 75, 15, -14, -10]
		[1 , 1, 1, 1, 0, 0, "gfx/empty_32bpp.png"]
}


template tmpl_std(x,y){
[x, 	 y,	8, 	24,		-3, 	-16] //short
[x +9, 	 y,	22,	20,		-13,	-13] //dia1
[x +32,  y,	32,	17,		-14,	-13] //long
[x +65,  y,	22,	20,		-5, 	-12] //dia2
[x +88,  y,	8, 	24,		-3, 	-16] //short
[x +97,  y,	22,	20,		-13,	-13] //dia1
[x +120, y,	32,	17,		-14,	-13] //long
[x+153,  y,	22,	20,		-5, 	-12] //dia2
}

template tmpl_std_rev(x,y){
[x +88,  y,	8, 	24,		-3, 	-16] //short
[x +97,  y,	22,	20,		-13,	-13] //dia1
[x +120, y,	32,	17,		-14,	-13] //long
[x+153,  y,	22,	20,		-5, 	-12] //dia2
[x, 	 y,	8, 	24,		-3, 	-16] //short
[x +9, 	 y,	22,	20,		-13,	-13] //dia1
[x +32,  y,	32,	17,		-14,	-13] //long
[x +65,  y,	22,	20,		-5, 	-12] //dia2
}

//25 high on the short sides for the pantograph
template tmpl_std_panto25(x,y){
[x, 		 y,	8, 	25,		-3, 	-17] //short25
[x +9, 	 y,	22,	20,		-13,	-13] //dia1
[x +32,  y,	32,	17,		-14,	-13] //long
[x +65,  y,	22,	20,		-5, 	-12] //dia2
[x +88,  y,	8, 	25,		-3, 	-17] //short25
[x +97,  y,	22,	20,		-13,	-13] //dia1
[x +120, y,	32,	17,		-14,	-13] //long
[x+153,  y,	22,	20,		-5, 	-12] //dia2
}

template tmpl_std_panto25_rev(x,y){
[x +88,  y,	8, 	25,		-3, 	-17] //short25
[x +97,  y,	22,	20,		-13,	-13] //dia1
[x +120, y,	32,	17,		-14,	-13] //long
[x+153,  y,	22,	20,		-5, 	-12] //dia2
[x, 		 y,	8, 	25,		-3, 	-17] //short25
[x +9, 	 y,	22,	20,		-13,	-13] //dia1
[x +32,  y,	32,	17,		-14,	-13] //long
[x +65,  y,	22,	20,		-5, 	-12] //dia2
}

template tmpl_dhloco(x,y){
[x, 		 y,	8, 	24,		-3, 	-13] //short
[x +9, 	 y,	22,	20,		-13,	-14] //dia1
[x +32,  y,	32,	17,		-16,	-13] //long
[x +65,  y,	22,	20,		-6, 	-13] //dia2
[x +88,  y,	8, 	24,		-3, 	-13] //short
[x +97,  y,	22,	20,		-13,	-14] //dia1
[x +120, y,	32,	17,		-16,	-13] //long
[x+153,  y,	22,	20,		-6, 	-13] //dia2
}

template tmpl_dhloco_short(x,y){
[x, 		 y,	8, 	24,		-3, 	-12] //short
[x +9, 	 y,	22,	20,		-15,	-12] //dia1
[x +32,  y,	28,	17,		-16,	-13] //long
[x +65,  y,	22,	20,		-7, 	-14] //dia2
[x +88,  y,	8, 	24,		-3, 	-15] //short
[x +97,  y,	22,	20,		-12,	-14] //dia1
[x +120, y,	28,	17,		-12,	-13] //long
[x+153,  y,	22,	20,		-6, 	-13] //dia2
}

template tmpl_std_orginal(x,y){
[x, 		 y,	8, 	24,		0, 		-13]
[x +9, 	 y,	22,	20,		-13,	-11]
[x +32,  y,	32,	17,		-16,	-12]
[x +65,  y,	22,	20,		-5, 	-11]
[x +88,  y,	8, 	24,		-3, 	-11]
[x +97,  y,	22,	20,		-13,	-11]
[x +120, y,	32,	17,		-16,	-12]
[x+153,  y,	22,	20,		-5, 	-11]
}



template tmpl_28px_7l(x,y){
[x, 	 y,	8, 	23,		-3, 	-19] //short A
[x +9, 	 y,	20,	19,		-13,	-12] //dia1 
[x +30,  y,	28,	15,		-14,	-11] //long C
[x +59,  y,	20,	19,		-5, 	-12] //dia2
[x +80,  y,	8, 	23,		-3, 	-19] //short E
[x +89,  y,	20,	19,		-13,	-12] //dia1
[x +110, y,	28,	15,		-14,	-11] //long
[x +139, y,	20,	19,		-5, 	-12] //dia2
}

template tmpl_20px_5l(x,y){
[x, 	 y,	8, 	19,		-3, 	-19] //short A
[x +9, 	 y,	16,	17,		-9,	    -12] //dia1 
[x +26,  y,	20,	15,		-6,	    -11] //long 
[x +47,  y,	16,	17,		-1, 	-10] //dia2 
[x +64,  y,	8, 	19,		-3, 	-15] //short E
[x +73,  y,	16,	17,		-13,	-10] //dia1 
[x +90, y,	20,	15,		-14,	-11] //long 
[x+111,  y,	16,	17,		-5, 	-12] //dia2 
}

template tmpl_28px_7l_rev(x,y){
[x +80,  y,	8, 	23,		-3, 	-19] //short E
[x +89,  y,	20,	19,		-13,	-12] //dia1
[x +110, y,	28,	15,		-14,	-11] //long
[x +139, y,	20,	19,		-5, 	-12] //dia2
[x, 	 y,	8, 	23,		-3, 	-19] //short A
[x +9, 	 y,	20,	19,		-13,	-12] //dia1 
[x +30,  y,	28,	15,		-14,	-11] //long C
[x +59,  y,	20,	19,		-5, 	-12] //dia2
}

template tmpl_20px_5l_rev(x,y){
[x +64,  y,	8, 	19,		-3, 	-19] //short E
[x +73,  y,	16,	17,		-9,	    -12] //dia1 
[x +90, y,	20,	15,		-6,	    -11] //long 
[x+111,  y,	16,	17,		-1, 	-10] //dia2 
[x, 	 y,	8, 	19,		-3, 	-15] //short A
[x +9, 	 y,	16,	17,		-13,    -10] //dia1 
[x +26,  y,	20,	15,		-14,    -11] //long 
[x +47,  y,	16,	17,		-5, 	-12] //dia2 
}
# 1 "JPplus.pnml" 4

//IDs
# 1 "src/vehicleid.pnml" 1

item(FEAT_TRAINS, mu_car, 1000) {} //mucar 				0x3E8
item(FEAT_TRAINS, mu_cardd, 1001) {} //mucardd 		0x3E9
item(FEAT_TRAINS, mu_cab, 1002) {} //mucab 				0x3EA

item(FEAT_TRAINS, dmu_kiha40, 1500) {} //kiha40    0x5DC
item(FEAT_TRAINS, dmu_kiha201, 1501) {} //kiha201  0x5DD
item(FEAT_TRAINS, dmu_kiha261, 1502) {} //kiha261  0x5DE
item(FEAT_TRAINS, dmu_kiha281, 1503) {} //kiha281  0x5DF
item(FEAT_TRAINS, dmu_kiha48, 1504) {} //kiha281 	 0x5E0
item(FEAT_TRAINS, dmu_kiha54, 1505) {} //kiha281	 0x5E1
item(FEAT_TRAINS, dmu_kiha58, 1506) {} //kiha281	 0x5E2
item(FEAT_TRAINS, dmu_kiha141, 1507) {} //kiha281	 0x5E3
item(FEAT_TRAINS, dmu_kiha150, 1508) {} //kiha281  0x5E4
item(FEAT_TRAINS, dmu_KH110, 1509) {} //kiha281  0x5E5
item(FEAT_TRAINS, dmu_KH111, 1510) {} //kiha281  0x5E6
item(FEAT_TRAINS, dmu_KHE120, 1511) {} //kiha281  0x5E6
item(FEAT_TRAINS, dmu_KHE130, 1512) {} //kiha281  0x5E6
item(FEAT_TRAINS, dmu_KHE131, 1513) {} //kiha281  0x5E6


item(FEAT_TRAINS, emu_107, 2018) {} //107emu 0x7E2
item(FEAT_TRAINS, emu_205, 2019) {} //205emu 0x7E2
item(FEAT_TRAINS, emu_209, 2021) {} //107emu 0x7E3
item(FEAT_TRAINS, emu_211, 2000) {} //211emu 0x7D0
item(FEAT_TRAINS, emu_E217, 2001) {} //E217emu 0x7D1
item(FEAT_TRAINS, emu_711, 2002) {} //711emu 0x7D2
item(FEAT_TRAINS, emu_721, 2003) {} //721emu 0x7D3
item(FEAT_TRAINS, emu_731, 2004) {} //731emu 0x7D4
item(FEAT_TRAINS, emu_733, 2005) {} //733emu 0x7D5
item(FEAT_TRAINS, emu_735, 2006) {} //735emu 0x7D6
item(FEAT_TRAINS, emu_781, 2007) {} //781emu 0x7D7
item(FEAT_TRAINS, emu_785, 2008) {} //785emu 0x7D8
item(FEAT_TRAINS, emu_789, 2009) {} //789emu 0x7D9
item(FEAT_TRAINS, emu_213, 2010) {} //213emu 0x7DA
item(FEAT_TRAINS, emu_6000, 2011) {} //213emu 0x7DB
item(FEAT_TRAINS, emu_719, 2012) {} //213emu 0x7DC
item(FEAT_TRAINS, emu_E231, 2020) {} //107emu 0x7E4
item(FEAT_TRAINS, emu_E235, 2013) {} //213emu 0x7DD
item(FEAT_TRAINS, emu_7195000, 2014) {} //213emu 0x7DE
item(FEAT_TRAINS, emu_21156, 2015) {} //211emu 0x7DF
item(FEAT_TRAINS, emu_E233, 2016) {} //211emu 0x7E0
item(FEAT_TRAINS, emu_jrw207, 2017) {} //211emu 0x7E1
item(FEAT_TRAINS, emu_E331, 2022) {} //211emu 0x7E1
item(FEAT_TRAINS, emu_311, 2023) {} //211emu 0x7E1
item(FEAT_TRAINS, emu_313, 2024) {} //211emu 0x7E1
item(FEAT_TRAINS, emu_115, 2025) {} //107emu 0x7E2
item(FEAT_TRAINS, emu_113, 2026) {} //107emu 0x7E2
item(FEAT_TRAINS, emu_6340, 2027) {} //107emu 0x7E2
item(FEAT_TRAINS, emu_101, 2028) {} //107emu 0x7E2
item(FEAT_TRAINS, emu_103, 2029) {} //107emu 0x7E2
item(FEAT_TRAINS, emu_201, 2030) {} //107emu 0x7E2
item(FEAT_TRAINS, emu_181, 2031) {} //107emu 0x7E2
item(FEAT_TRAINS, emu_80, 2032) {} //107emu 0x7E2
item(FEAT_TRAINS, emu_165, 2033) {} //107emu 0x7E2
item(FEAT_TRAINS, emu_223_0, 2034) {} //107emu 0x7E2
item(FEAT_TRAINS, emu_223_1000, 2035) {} //107emu 0x7E2
item(FEAT_TRAINS, emu_221, 2036) {} //107emu 0x7E2
item(FEAT_TRAINS, emu_811, 2037) {} //107emu 0x7E2
item(FEAT_TRAINS, emu_813, 2038) {} //107emu 0x7E2
item(FEAT_TRAINS, emu_303, 2039) {} //107emu 0x7E2
item(FEAT_TRAINS, emu_E127, 2040) {} //107emu 0x7E2

item(FEAT_TRAINS, DH_E851, 4000) {} //E851
item(FEAT_TRAINS, DH_EF210, 4001) {} //EF210
item(FEAT_TRAINS, DH_ED75, 4002) {} //ED75
# 1 "JPplus.pnml" 4

//Coupliung Rules
//#include "src/attach_kiha_group.pnml"
//#include "src/attach_211_213_group.pnml"

//Sorting
# 1 "src/sorting.pnml" 1
sort(FEAT_TRAINS, [

/* **EMU** */

/*JGR*/
emu_6340,
/*JNR*/
dmu_kiha40,
dmu_kiha48,
dmu_kiha54,
dmu_kiha58,
emu_80,
emu_101,
emu_103,
emu_113,
emu_115,
emu_165,
emu_181,
emu_201,
emu_205,
emu_211,
emu_213,
emu_711,
/*JR East*/
dmu_KH110,
dmu_KH111,
dmu_KHE120,
dmu_KHE130,
dmu_KHE131,
emu_107,
emu_209,
emu_E127,
emu_E217,
emu_E231,
emu_E233,
emu_E235,
emu_E331,
emu_719,
emu_7195000,
/*JR West*/
emu_jrw207,
emu_221,
emu_223_0,
emu_223_1000,
/*JR Central*/
emu_21156,
emu_311,
emu_313,
/*JR Kyushu*/
emu_303,
emu_811,
emu_813,
/*JR Hokkaido*/
dmu_kiha141,
dmu_kiha150,
dmu_kiha201,
dmu_kiha261,
dmu_kiha281,
emu_721,
emu_731,
emu_733,
emu_735,
emu_781,
emu_785,
emu_789,
/*JR Shikoku*/
emu_6000,
/*MU Cars*/
mu_car,
mu_cab,
mu_cardd,

]);
# 1 "JPplus.pnml" 4

//Final Settings
# 1 "src/grfintegration.pnml" 1
//set depot vehicle width to 32px to avoid overlap
train_width_32_px = 1;
//align train properly in depot window
traininfo_y_offset = 2;

// TTD check //
if (ttd_platform != PLATFORM_OPENTTD || openttd_version < version_openttd(1, 2, 0, 22723)) {
	error(FATAL, REQUIRES_OPENTTD, string(GRF_OTTDVER));
}

// Warn if "JapanSet3: Trains isn't optimal" //
/*
if (((grf_current_status("SZ\0D\00") == 0) && (grf_current_status("DP\30\00") == 0)) || ((grf_future_status("SZ\0D\00") == 0) && (grf_future_status("DP\30\00") == 0)) || ((grf_order_behind("SZ\0D\00") == 0) && (grf_order_behind("DP\30\00") == 0))) {
	error( WARNING, string(GRF_JAPANSET));
}
*/
if (grf_order_behind("BS\42\13") == 0) {
	error(FATAL, string(GRF_JPPLUSSET));
}
/*
if (((grf_order_behind("EN\21\01") == 0) && (grf_order_behind("BS\07\20") != 0)) || ((grf_future_status("EN\21\01") == 0) && (grf_future_status("BS\07\20") == 0)) || ((grf_current_status("EN\21\01") != 0) && (grf_current_status("BS\07\20") == 0))) {
	error(WARNING, string(GRF_NATSSET));
}*/

if (grf_order_behind("SZ\0D\00") == 0) {
	error(WARNING, string(GRF_JAPANSETTRAINS));
}

if (grf_order_behind("JD\A1\E1") == 0) {
	error(WARNING, string(GRF_JAPANSECRETORDER));
}
# 1 "JPplus.pnml" 4

//Reversing
# 1 "src/reversing/reversing_211_213_311_313_group.pnml" 1


/*---GFX: Spritesets---*/

/*---211---*/
//211 Purchase Sprites
spriteset (spriteset_211_purchase,	                                                     "gfx/JNR/emu211/211_purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_211_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,         "gfx/JNR/emu211/211_purchase_32bpp.png")         {tmpl_purchase_dh_32bpp(0, 0)}

//211 Chukyo
spriteset (spriteset_211_front_chukyo,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_back_chukyo,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_mid_chukyo,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_211_rev_front_chukyo,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_rev_back_chukyo,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_rev_mid_chukyo,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_211_revflip_front_chukyo,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_revflip_back_chukyo,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_revflip_mid_chukyo,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_211_front_chukyo, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/chukyo/211-2-1_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_back_chukyo,  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/chukyo/211-2-2_32bpp.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_211_mid_chukyo,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/chukyo/211-2-3_32bpp.png")        {tmpl_std(0, 1)}

alternative_sprites(spriteset_211_rev_front_chukyo, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/chukyo/211-2-1_32bpp.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_211_rev_back_chukyo,  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/chukyo/211-2-2_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_rev_mid_chukyo,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/chukyo/211-2-3_32bpp.png")        {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_211_revflip_front_chukyo, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/chukyo/211-2-1_32bpp.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_211_revflip_back_chukyo,  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/chukyo/211-2-2_32bpp.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_211_revflip_mid_chukyo,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/chukyo/211-2-3_32bpp.png")        {tmpl_std(0, 1)}


//211 Shonan
spriteset (spriteset_211_front_shonan,    	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_back_shonan,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_back_darm_shonan,    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_back_sarm_shonan,    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_back_dual_shonan,    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_mid_shonan,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_mid_darm_shonan,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_mid_sarm_shonan,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_mid_sdgrcar_shonan,    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_mid_ddgrold_shonan,    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_mid_ddgrnew_shonan,    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_211_rev_front_shonan,    	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_rev_back_shonan,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_rev_back_darm_shonan,    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_rev_back_sarm_shonan,    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_rev_back_dual_shonan,    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_rev_mid_shonan,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_rev_mid_darm_shonan,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_rev_mid_sarm_shonan,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_rev_mid_sdgrcar_shonan,    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_rev_mid_ddgrold_shonan,    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_rev_mid_ddgrnew_shonan,    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_211_revflip_front_shonan,    	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_revflip_back_shonan,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_revflip_back_darm_shonan,    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_revflip_back_sarm_shonan,    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_revflip_back_dual_shonan,    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_revflip_mid_shonan,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_revflip_mid_darm_shonan,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_revflip_mid_sarm_shonan,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_revflip_mid_sdgrcar_shonan,    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_revflip_mid_ddgrold_shonan,    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_revflip_mid_ddgrnew_shonan,    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_211_front_shonan,       ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-1_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_back_shonan,        ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-1_32bpp.png")         {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_211_back_darm_shonan,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-2_32bpp.png")         {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_211_back_sarm_shonan,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-3_32bpp.png")         {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_211_back_dual_shonan,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-4_32bpp.png")         {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_211_mid_shonan,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-5_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_mid_darm_shonan,    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-6_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_mid_sarm_shonan,    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-7_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_mid_sdgrcar_shonan, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-8_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_mid_ddgrold_shonan, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-9_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_mid_ddgrnew_shonan, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-10_32bpp.png")        {tmpl_std(0, 1)}

alternative_sprites(spriteset_211_rev_front_shonan,       ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-1_32bpp.png")         {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_211_rev_back_shonan,        ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-1_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_rev_back_darm_shonan,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-2_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_rev_back_sarm_shonan,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-3_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_rev_back_dual_shonan,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-4_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_rev_mid_shonan,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-5_32bpp.png")         {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_211_rev_mid_darm_shonan,    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-6_32bpp.png")         {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_211_rev_mid_sarm_shonan,    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-7_32bpp.png")         {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_211_rev_mid_sdgrcar_shonan, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-8_32bpp.png")         {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_211_rev_mid_ddgrold_shonan, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-9_32bpp.png")         {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_211_rev_mid_ddgrnew_shonan, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-10_32bpp.png")        {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_211_revflip_front_shonan,       ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-1_32bpp.png")         {tmpl_std(0, 26)}
alternative_sprites(spriteset_211_revflip_back_shonan,        ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-1_32bpp.png")         {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_211_revflip_back_darm_shonan,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-2_32bpp.png")         {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_211_revflip_back_sarm_shonan,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-3_32bpp.png")         {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_211_revflip_back_dual_shonan,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-4_32bpp.png")         {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_211_revflip_mid_shonan,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-5_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_revflip_mid_darm_shonan,    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-6_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_revflip_mid_sarm_shonan,    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-7_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_revflip_mid_sdgrcar_shonan, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-8_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_revflip_mid_ddgrold_shonan, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-9_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_revflip_mid_ddgrnew_shonan, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-10_32bpp.png")        {tmpl_std(0, 1)}


//211 Boso
spriteset (spriteset_211_front_boso,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_back_darm_boso,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_back_dual_boso,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_mid_boso,    	        	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_211_rev_front_boso,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_rev_back_darm_boso,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_rev_back_dual_boso,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_rev_mid_boso,    	        	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_211_revflip_front_boso,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_revflip_back_darm_boso,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_revflip_back_dual_boso,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_revflip_mid_boso,    	        	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_211_front_boso,       ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/boso/211-3-1_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_back_darm_boso,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/boso/211-3-2_32bpp.png")         {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_211_back_dual_boso,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/boso/211-3-3_32bpp.png")         {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_211_mid_boso,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/boso/211-3-4_32bpp.png")         {tmpl_std(0, 1)}

alternative_sprites(spriteset_211_rev_front_boso,       ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/boso/211-3-1_32bpp.png")         {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_211_rev_back_darm_boso,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/boso/211-3-2_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_rev_back_dual_boso,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/boso/211-3-3_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_rev_mid_boso,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/boso/211-3-4_32bpp.png")         {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_211_revflip_front_boso,       ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/boso/211-3-1_32bpp.png")         {tmpl_std(0, 26)}
alternative_sprites(spriteset_211_revflip_back_darm_boso,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/boso/211-3-2_32bpp.png")         {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_211_revflip_back_dual_boso,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/boso/211-3-3_32bpp.png")         {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_211_revflip_mid_boso,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/boso/211-3-4_32bpp.png")         {tmpl_std(0, 1)}

//211 Nagano
spriteset (spriteset_211_front_nagano,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_back_nagano,    	       	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_back_sarm_nagano,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_mid_nagano,    	      	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_mid_sarm_nagano,    	      	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_211_rev_front_nagano,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_rev_back_nagano,    	       	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_rev_back_sarm_nagano,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_rev_mid_nagano,    	      	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_rev_mid_sarm_nagano,    	      	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_211_revfilp_front_nagano,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_revfilp_back_nagano,    	       	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_revflip_back_sarm_nagano,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_revflip_mid_nagano,    	      	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_revflip_mid_sarm_nagano,    	      	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_211_front_nagano,       ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/nagano/211-4-1_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_back_nagano,        ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/nagano/211-4-1_32bpp.png")         {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_211_back_sarm_nagano,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/nagano/211-4-2_32bpp.png")         {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_211_mid_nagano,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/nagano/211-4-3_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_mid_sarm_nagano,    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/nagano/211-4-4_32bpp.png")         {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_211_rev_front_nagano,       ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/nagano/211-4-1_32bpp.png")         {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_211_rev_back_nagano,        ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/nagano/211-4-1_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_rev_back_sarm_nagano,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/nagano/211-4-2_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_rev_mid_nagano,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/nagano/211-4-3_32bpp.png")         {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_211_rev_mid_sarm_nagano,    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/nagano/211-4-4_32bpp.png")         {tmpl_std(0, 1)}

alternative_sprites(spriteset_211_revfilp_front_nagano,       ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/nagano/211-4-1_32bpp.png")         {tmpl_std(0, 26)}
alternative_sprites(spriteset_211_revfilp_back_nagano,        ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/nagano/211-4-1_32bpp.png")         {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_211_revflip_back_sarm_nagano,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/nagano/211-4-2_32bpp.png")         {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_211_revflip_mid_nagano,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/nagano/211-4-3_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_revflip_mid_sarm_nagano,    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/nagano/211-4-4_32bpp.png")         {tmpl_std_rev(0, 1)}

/*---211_5000_6000---*/
//211-56 Purchase Sprites
spriteset (spriteset_21156_purchase,	                                                     "gfx/JNR/emu211/211_purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_21156_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,         "gfx/JNR/emu211/211_5000_Purchase_32bpp.png")         {tmpl_purchase_dh_32bpp(0, 0)}

//211-56 Tokai
spriteset (spriteset_21156_front,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_21156_back_darm,   	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_21156_back_sarm,       "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_21156_mid,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_21156_rev_front,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_21156_rev_mid,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_21156_rev_back_darm,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_21156_rev_back_sarm,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_21156_revflip_front,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_21156_revflip_mid,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_21156_revflip_back_darm,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_21156_revflip_back_sarm,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }


alternative_sprites(spriteset_21156_front,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/tokai/211-5-1_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_21156_back_darm, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/tokai/211-5-2_32bpp.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_21156_back_sarm, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/tokai/211-5-3_32bpp.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_21156_mid,       ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/tokai/211-5-4_32bpp.png")        {tmpl_std(0, 1)}

alternative_sprites(spriteset_21156_rev_front,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/tokai/211-5-1_32bpp.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_21156_rev_mid,       ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/tokai/211-5-4_32bpp.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_21156_rev_back_darm, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/tokai/211-5-2_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_21156_rev_back_sarm, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/tokai/211-5-3_32bpp.png")        {tmpl_std(0, 1)}

alternative_sprites(spriteset_21156_revflip_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/tokai/211-5-1_32bpp.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_21156_revflip_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/tokai/211-5-4_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_21156_revflip_back_darm,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/tokai/211-5-2_32bpp.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_21156_revflip_back_sarm,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/tokai/211-5-3_32bpp.png")        {tmpl_std_rev(0, 1)}

/*---213---*/
//213 Purchase Sprites
spriteset (spriteset_213_purchase,	                                                     "gfx/JNR/emu213/213_purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_213_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,         "gfx/JNR/emu213/213_purchase_32bpp.png")         {tmpl_purchase_dh_32bpp(0, 0)}

//213 JRwest
spriteset (spriteset_213_front_jrw,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_back_jrw,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_mid_jrw,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_213_rev_front_jrw,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_rev_back_jrw,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_rev_mid_jrw,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_213_revflip_front_jrw,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_revflip_back_jrw,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_revflip_mid_jrw,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_213_front_jrw, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/west/213-1-1_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_213_back_jrw,  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/west/213-1-2_32bpp.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_213_mid_jrw,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/west/213-1-3_32bpp.png")        {tmpl_std(0, 1)}

alternative_sprites(spriteset_213_rev_front_jrw, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/west/213-1-1_32bpp.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_213_rev_back_jrw,  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/west/213-1-2_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_213_rev_mid_jrw,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/west/213-1-3_32bpp.png")        {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_213_revflip_front_jrw, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/west/213-1-1_32bpp.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_213_revflip_back_jrw,  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/west/213-1-2_32bpp.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_213_revflip_mid_jrw,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/west/213-1-3_32bpp.png")        {tmpl_std(0, 1)}

//213 Shonan
spriteset (spriteset_213_front_old_shonan,    	   	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_front_new_shonan,    	   	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_back_darm_shonan,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_back_sarm_shonan,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_213_rev_front_old_shonan,    	   	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_rev_front_new_shonan,    	   	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_rev_back_darm_shonan,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_rev_back_sarm_shonan,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_213_revflip_front_old_shonan,    	   	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_revflip_front_new_shonan,    	   	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_revflip_back_darm_shonan,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_revflip_back_sarm_shonan,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_213_front_old_shonan,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/tokai/213-2-1_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_213_front_new_shonan,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/tokai/213-4-1_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_213_back_darm_shonan,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/tokai/213-2-2_32bpp.png")         {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_213_back_sarm_shonan,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/tokai/213-4-2_32bpp.png")         {tmpl_std_rev(0, 26)}

alternative_sprites(spriteset_213_rev_front_old_shonan,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/tokai/213-2-1_32bpp.png")         {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_213_rev_front_new_shonan,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/tokai/213-4-1_32bpp.png")         {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_213_rev_back_darm_shonan,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/tokai/213-2-2_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_213_rev_back_sarm_shonan,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/tokai/213-4-2_32bpp.png")         {tmpl_std(0, 1)}

alternative_sprites(spriteset_213_revflip_front_old_shonan,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/tokai/213-2-1_32bpp.png")         {tmpl_std(0, 26)}
alternative_sprites(spriteset_213_revflip_front_new_shonan,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/tokai/213-4-1_32bpp.png")         {tmpl_std(0, 26)}
alternative_sprites(spriteset_213_revflip_back_darm_shonan,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/tokai/213-2-2_32bpp.png")         {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_213_revflip_back_sarm_shonan,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/tokai/213-4-2_32bpp.png")         {tmpl_std_rev(0, 1)}

//213 JRwest Super Saloon Yumeji
spriteset (spriteset_213_front_s1,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_front_s2,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_front_s3,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_front_s4,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_front_s5,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_213_rev_front_s1,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_rev_front_s2,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_rev_front_s3,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_rev_front_s4,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_rev_front_s5,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_213_revflip_front_s1,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_revflip_front_s2,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_revflip_front_s3,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_revflip_front_s4,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_revflip_front_s5,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_213_front_s1,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/west/213-3-1_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_213_front_s2,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/west/213-3-2_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_213_front_s3,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/west/213-3-3_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_213_front_s4,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/west/213-3-4_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_213_front_s5,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/west/213-3-5_32bpp.png")         {tmpl_std(0, 1)}

alternative_sprites(spriteset_213_rev_front_s1,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/west/213-3-1_32bpp.png")         {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_213_rev_front_s2,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/west/213-3-2_32bpp.png")         {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_213_rev_front_s3,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/west/213-3-3_32bpp.png")         {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_213_rev_front_s4,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/west/213-3-4_32bpp.png")         {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_213_rev_front_s5,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/west/213-3-5_32bpp.png")         {tmpl_std_rev(0, 26)}

alternative_sprites(spriteset_213_revflip_front_s1,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/west/213-3-1_32bpp.png")         {tmpl_std(0, 26)}
alternative_sprites(spriteset_213_revflip_front_s2,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/west/213-3-2_32bpp.png")         {tmpl_std(0, 26)}
alternative_sprites(spriteset_213_revflip_front_s3,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/west/213-3-3_32bpp.png")         {tmpl_std(0, 26)}
alternative_sprites(spriteset_213_revflip_front_s4,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/west/213-3-4_32bpp.png")         {tmpl_std(0, 26)}
alternative_sprites(spriteset_213_revflip_front_s5,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/west/213-3-5_32bpp.png")         {tmpl_std(0, 26)}

/*---311---*/
//311 Purchase Sprites
spriteset (spriteset_311_purchase,	                                                    "gfx/JRC/emu311/311_Purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_311_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,         "gfx/JRC/emu311/311_Purchase_32bpp.png")         {tmpl_purchase_dh_32bpp(0, 0)}

//311 Tokai
spriteset (spriteset_311_front,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_311_back_darm,   "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_311_back_sarm,   "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_311_mid,    		  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_311_rev_mid,    		  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_311_rev_front,    		  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_311_rev_back_darm,    		  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_311_rev_back_sarm,    		  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_311_revflip_mid,    		  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_311_revflip_front,    		  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_311_revflip_back_darm,    		  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_311_revflip_back_sarm,    		  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_311_front,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu311/311-1-1_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_311_back_darm, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu311/311-1-2_32bpp.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_311_back_sarm, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu311/311-1-3_32bpp.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_311_mid,       ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu311/311-1-4_32bpp.png")        {tmpl_std(0, 1)}

alternative_sprites(spriteset_311_rev_front,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu311/311-1-1_32bpp.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_311_rev_mid,       ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu311/311-1-4_32bpp.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_311_rev_back_darm, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu311/311-1-2_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_311_rev_back_sarm, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu311/311-1-3_32bpp.png")        {tmpl_std(0, 1)}

alternative_sprites(spriteset_311_revflip_front,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu311/311-1-1_32bpp.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_311_revflip_mid,       ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu311/311-1-4_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_311_revflip_back_darm, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu311/311-1-2_32bpp.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_311_revflip_back_sarm, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu311/311-1-3_32bpp.png")        {tmpl_std_rev(0, 1)}

/*---313---*/
//313 Purchase Sprites
spriteset (spriteset_313_purchase,	  "gfx/JRC/emu313/313_Purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_313_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,         "gfx/JRC/emu313/313_Purchase_32bpp.png")         {tmpl_purchase_dh_32bpp(0, 0)}

//313 Tokai
spriteset (spriteset_313_front,    		  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_313_back_onep,     "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_313_back_twop,     "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_313_mid_onep,      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_313_mid,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_313_rev_front,    		  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_313_rev_back_onep,     "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_313_rev_back_twop,     "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_313_rev_mid_onep,      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_313_rev_mid,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_313_revflip_front,    		  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_313_revflip_back_onep,     "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_313_revflip_back_twop,     "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_313_revflip_mid_onep,      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_313_revflip_mid,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_313_front,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu313/313-1-1_32bpp.png")        {tmpl_std(0, 0)}
alternative_sprites(spriteset_313_back_onep, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu313/313-1-2_32bpp.png")        {tmpl_std_panto25_rev(0, 27)}
alternative_sprites(spriteset_313_back_twop, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu313/313-1-3_32bpp.png")        {tmpl_std_panto25_rev(0, 27)}
alternative_sprites(spriteset_313_mid_onep,  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu313/313-1-4_32bpp.png")        {tmpl_std_panto25(0, 0)}
alternative_sprites(spriteset_313_mid,       ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu313/313-1-5_32bpp.png")        {tmpl_std(0, 0)}

alternative_sprites(spriteset_313_rev_front,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu313/313-1-1_32bpp.png")        {tmpl_std_rev(0, 27)}
alternative_sprites(spriteset_313_rev_back_onep, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu313/313-1-2_32bpp.png")        {tmpl_std_panto25(0, 0)}
alternative_sprites(spriteset_313_rev_back_twop, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu313/313-1-3_32bpp.png")        {tmpl_std_panto25(0, 0)}
alternative_sprites(spriteset_313_rev_mid_onep,  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu313/313-1-4_32bpp.png")        {tmpl_std_panto25_rev(0, 0)}
alternative_sprites(spriteset_313_rev_mid,       ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu313/313-1-5_32bpp.png")        {tmpl_std_rev(0, 0)}

alternative_sprites(spriteset_313_revflip_front,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu313/313-1-1_32bpp.png")        {tmpl_std(0, 27)}
alternative_sprites(spriteset_313_revflip_back_onep, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu313/313-1-2_32bpp.png")        {tmpl_std_panto25_rev(0, 0)}
alternative_sprites(spriteset_313_revflip_back_twop, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu313/313-1-3_32bpp.png")        {tmpl_std_panto25_rev(0, 0)}
alternative_sprites(spriteset_313_revflip_mid_onep,  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu313/313-1-4_32bpp.png")        {tmpl_std_panto25(0, 0)}
alternative_sprites(spriteset_313_revflip_mid,       ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu313/313-1-5_32bpp.png")        {tmpl_std(0, 0)}



/*---END OF SECTION---*/



/*---GFX: GROUPED Train Reversing Switch for 211, 213, 311 and 313 Series EMUs---*/






/*---211---*/
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_211_rev_back_shonan_year_pantograph, current_year){
 0..2007: spriteset_211_back_darm_shonan;
 default: spriteset_211_back_sarm_shonan;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_211_revflip_back_shonan_year_pantograph, current_year){
 0..2007: spriteset_211_revflip_back_darm_shonan;
 default: spriteset_211_revflip_back_sarm_shonan;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_211_back_nopan_nagano_flipcheck, vehicle_is_flipped) {
1:spriteset_211_revfilp_back_nagano;
default: spriteset_211_rev_back_nagano;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_211_back_yespan_nagano_flipcheck, vehicle_is_flipped) {
1:spriteset_211_revflip_back_sarm_nagano;
default: spriteset_211_rev_back_sarm_nagano;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_211_back_yespan_shonan_flipcheck, vehicle_is_flipped) {
1:spriteset_211_revflip_back_darm_shonan;
default: spriteset_211_rev_back_darm_shonan;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_211_back_nopan_shonan_flipcheck, vehicle_is_flipped) {
1:spriteset_211_revflip_back_shonan;
default: spriteset_211_rev_back_shonan;
}
switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_211_yespanto, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  11:sw_211group_gfx_rev_211_back_yespan_nagano_flipcheck;
  4:sw_211group_gfx_rev_211_back_yespan_shonan_flipcheck;
  3:sw_211group_gfx_rev_211_back_yespan_shonan_flipcheck;
}
switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_211_nopanto, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  11:sw_211group_gfx_rev_211_back_nopan_nagano_flipcheck;
  4:sw_211group_gfx_rev_211_back_nopan_shonan_flipcheck;
  3:sw_211group_gfx_rev_211_back_nopan_shonan_flipcheck;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_211_gfx_back_lengthcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 16, 0x000000FF, 0x41]]){
0..3:   sw_211group_gfx_rev_211_yespanto;
4..255: sw_211group_gfx_rev_211_nopanto;
}
switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_211_rev_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
11: sw_211group_gfx_rev_211_gfx_back_lengthcheck;
10: spriteset_211_rev_back_dual_boso;
9:  spriteset_211_rev_back_darm_boso;
8:  sw_211group_gfx_rev_211_rev_back_shonan_year_pantograph;
7:  sw_211group_gfx_rev_211_rev_back_shonan_year_pantograph;
6:  sw_211group_gfx_rev_211_rev_back_shonan_year_pantograph;
5:  sw_211group_gfx_rev_211_rev_back_shonan_year_pantograph;
4:  sw_211group_gfx_rev_211_gfx_back_lengthcheck;
3:  sw_211group_gfx_rev_211_gfx_back_lengthcheck;
2:  spriteset_211_rev_back_dual_shonan;
1:  sw_211group_gfx_rev_211_rev_back_shonan_year_pantograph;
0:  spriteset_211_rev_back_chukyo;
}
switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_211_revflip_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
11: sw_211group_gfx_rev_211_gfx_back_lengthcheck;
10: spriteset_211_revflip_back_dual_boso;
9:  spriteset_211_revflip_back_darm_boso;
8:  sw_211group_gfx_rev_211_revflip_back_shonan_year_pantograph;
7:  sw_211group_gfx_rev_211_revflip_back_shonan_year_pantograph;
6:  sw_211group_gfx_rev_211_revflip_back_shonan_year_pantograph;
5:  sw_211group_gfx_rev_211_revflip_back_shonan_year_pantograph;
4:  sw_211group_gfx_rev_211_gfx_back_lengthcheck;
3:  sw_211group_gfx_rev_211_gfx_back_lengthcheck;
2:  spriteset_211_revflip_back_dual_shonan;
1:  sw_211group_gfx_rev_211_revflip_back_shonan_year_pantograph;
0:  spriteset_211_revflip_back_chukyo;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_211_back_flipcheck, vehicle_is_flipped) {
1:sw_211group_gfx_rev_211_revflip_back_livery;
default: sw_211group_gfx_rev_211_rev_back_livery;
}




switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_211_rev_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
11: spriteset_211_revflip_mid_nagano;
10: spriteset_211_revflip_mid_boso;
9:  spriteset_211_revflip_mid_boso;
8:  spriteset_211_revflip_mid_shonan;
7:  spriteset_211_revflip_mid_shonan;
6:  spriteset_211_revflip_mid_shonan;
5:  spriteset_211_revflip_mid_shonan;
4:  spriteset_211_revflip_mid_shonan;
3:  spriteset_211_revflip_mid_shonan;
2:  spriteset_211_revflip_mid_shonan;
1:  spriteset_211_revflip_mid_shonan;
0:  spriteset_211_revflip_mid_chukyo;
}
switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_211_revflip_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
11: spriteset_211_rev_mid_nagano;
10: spriteset_211_rev_mid_boso;
9:  spriteset_211_rev_mid_boso;
8:  spriteset_211_rev_mid_shonan;
7:  spriteset_211_rev_mid_shonan;
6:  spriteset_211_rev_mid_shonan;
5:  spriteset_211_rev_mid_shonan;
4:  spriteset_211_rev_mid_shonan;
3:  spriteset_211_rev_mid_shonan;
2:  spriteset_211_rev_mid_shonan;
1:  spriteset_211_rev_mid_shonan;
0:  spriteset_211_rev_mid_chukyo;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_211_mid_flipcheck, vehicle_is_flipped) {
 1: sw_211group_gfx_rev_211_revflip_mid_livery;
 default: sw_211group_gfx_rev_211_rev_mid_livery;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_211_mid_sarm_nagano_flipcheck, vehicle_is_flipped) {
 1: spriteset_211_revflip_mid_sarm_nagano;
 default: spriteset_211_rev_mid_sarm_nagano;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_211_mid_darm_shonan_flipcheck, vehicle_is_flipped) {
 1: spriteset_211_revflip_mid_darm_shonan;
 default: spriteset_211_rev_mid_darm_shonan;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_211_mid_ddgrnew_shonan_flipcheck, vehicle_is_flipped) {
 1: spriteset_211_revflip_mid_ddgrnew_shonan;
 default: spriteset_211_rev_mid_ddgrnew_shonan;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_211_mid_ddgrold_shonan_flipcheck, vehicle_is_flipped) {
 1: spriteset_211_revflip_mid_ddgrold_shonan;
 default: spriteset_211_rev_mid_ddgrold_shonan;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_211_mid_sdgrcar_shonan_flipcheck, vehicle_is_flipped) {
 1: spriteset_211_revflip_mid_sdgrcar_shonan;
 default: spriteset_211_rev_mid_sdgrcar_shonan;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_211_mid_front_shonan_flipcheck, vehicle_is_flipped) {
 1: spriteset_211_rev_front_shonan;
 default: spriteset_211_revflip_front_shonan;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_211_mid_back_darm_shonan_flipcheck, vehicle_is_flipped) {
 1: spriteset_211_revflip_back_darm_shonan;
 default: spriteset_211_rev_back_darm_shonan;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_211_mid_back_sarm_shonan_flipcheck, vehicle_is_flipped) {
 1: spriteset_211_revflip_back_sarm_shonan;
 default: spriteset_211_rev_back_sarm_shonan;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_211_gfx_year_mid_back_shonan_check, current_year){
 0..2007: sw_211group_gfx_rev_211_mid_back_darm_shonan_flipcheck;
 default: sw_211group_gfx_rev_211_mid_back_sarm_shonan_flipcheck;
}
switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_211_gfx_pantograph_pos_shonan_tk, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%8]){
1:sw_211group_gfx_rev_211_mid_darm_shonan_flipcheck;
6:sw_211group_gfx_rev_211_mid_darm_shonan_flipcheck;
default: sw_211group_gfx_rev_211_mid_flipcheck;
}
switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_211_gfx_pantograph_pos_shonan_tk_ddsd, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){
1:sw_211group_gfx_rev_211_mid_darm_shonan_flipcheck;
2:sw_211group_gfx_rev_211_mid_ddgrnew_shonan_flipcheck;
3:sw_211group_gfx_rev_211_mid_sdgrcar_shonan_flipcheck;
6:sw_211group_gfx_rev_211_mid_darm_shonan_flipcheck;
default: sw_211group_gfx_rev_211_mid_flipcheck;
}
switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_211_gfx_pantograph_pos_shonan_tk_dddd, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){
1:sw_211group_gfx_rev_211_mid_darm_shonan_flipcheck;
2:sw_211group_gfx_rev_211_mid_ddgrnew_shonan_flipcheck;
3:sw_211group_gfx_rev_211_mid_ddgrnew_shonan_flipcheck;
6:sw_211group_gfx_rev_211_mid_darm_shonan_flipcheck;
default: sw_211group_gfx_rev_211_mid_flipcheck;
}
switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_211_gfx_pantograph_pos_shonan_ty_ddsd, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){
1:sw_211group_gfx_rev_211_gfx_year_mid_back_shonan_check;
2:sw_211group_gfx_rev_211_mid_ddgrnew_shonan_flipcheck;
3:sw_211group_gfx_rev_211_mid_sdgrcar_shonan_flipcheck;
4:sw_211group_gfx_rev_211_mid_front_shonan_flipcheck;
default: sw_211group_gfx_rev_211_mid_flipcheck;
}
switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_211_gfx_pantograph_pos_shonan_ty_dddd, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){
1:sw_211group_gfx_rev_211_gfx_year_mid_back_shonan_check;
2:sw_211group_gfx_rev_211_mid_ddgrnew_shonan_flipcheck;
3:sw_211group_gfx_rev_211_mid_ddgrnew_shonan_flipcheck;
4:sw_211group_gfx_rev_211_mid_front_shonan_flipcheck;
default: sw_211group_gfx_rev_211_mid_flipcheck;
}
switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_211_gfx_pantograph_pos_shonan_ty_ddddold, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){
1:sw_211group_gfx_rev_211_gfx_year_mid_back_shonan_check;
2:sw_211group_gfx_rev_211_mid_ddgrnew_shonan_flipcheck;
3:sw_211group_gfx_rev_211_mid_ddgrold_shonan_flipcheck;
4:sw_211group_gfx_rev_211_mid_front_shonan_flipcheck;
default: sw_211group_gfx_rev_211_mid_flipcheck;
}
switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_211_gfx_pantograph_pos_shonan_ty_ddolddd, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){
1:sw_211group_gfx_rev_211_gfx_year_mid_back_shonan_check;
2:sw_211group_gfx_rev_211_mid_ddgrold_shonan_flipcheck;
3:sw_211group_gfx_rev_211_mid_ddgrnew_shonan_flipcheck;
4:sw_211group_gfx_rev_211_mid_front_shonan_flipcheck;
default: sw_211group_gfx_rev_211_mid_flipcheck;
}
switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_211_mid_shonan_typecheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
8:  sw_211group_gfx_rev_211_gfx_pantograph_pos_shonan_ty_ddsd;
7:  sw_211group_gfx_rev_211_gfx_pantograph_pos_shonan_ty_ddolddd;
6:  sw_211group_gfx_rev_211_gfx_pantograph_pos_shonan_ty_ddddold;
5:  sw_211group_gfx_rev_211_gfx_pantograph_pos_shonan_ty_dddd;
4:  sw_211group_gfx_rev_211_gfx_pantograph_pos_shonan_tk_ddsd;
3:  sw_211group_gfx_rev_211_gfx_pantograph_pos_shonan_tk_dddd;
2:  sw_211group_gfx_rev_211_gfx_pantograph_pos_shonan_tk;
1:  sw_211group_gfx_rev_211_gfx_pantograph_pos_shonan_tk;
}
switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_211_mid_shonan_pantocheck,  [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 16, 0x000000FF, 0x41]]){
  0..3: sw_211group_gfx_rev_211_mid_flipcheck;
  4..7: sw_211group_gfx_rev_211_gfx_pantograph_pos_shonan_tk;
  default: sw_211group_gfx_rev_211_mid_shonan_typecheck;
}
switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_211_gfx_pantograph_pos_nagano, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%4]){
  1: sw_211group_gfx_rev_211_mid_sarm_nagano_flipcheck;
  3: sw_211group_gfx_rev_211_mid_sarm_nagano_flipcheck;
  default: sw_211group_gfx_rev_211_mid_flipcheck;
}
switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_211_mid_nagano_pantocheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 16, 0x000000FF, 0x41]]){
  0..3: sw_211group_gfx_rev_211_mid_flipcheck;
  default: sw_211group_gfx_rev_211_gfx_pantograph_pos_nagano;
}
switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_211_mid_refitconsistcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
11: sw_211group_gfx_rev_211_mid_nagano_pantocheck;
10: sw_211group_gfx_rev_211_mid_flipcheck;
9:  sw_211group_gfx_rev_211_mid_flipcheck;
8:  sw_211group_gfx_rev_211_mid_shonan_pantocheck;
7:  sw_211group_gfx_rev_211_mid_shonan_pantocheck;
6:  sw_211group_gfx_rev_211_mid_shonan_pantocheck;
5:  sw_211group_gfx_rev_211_mid_shonan_pantocheck;
4:  sw_211group_gfx_rev_211_mid_shonan_pantocheck;
3:  sw_211group_gfx_rev_211_mid_shonan_pantocheck;
2:  sw_211group_gfx_rev_211_mid_shonan_pantocheck;
1:  sw_211group_gfx_rev_211_mid_shonan_pantocheck;
0:  sw_211group_gfx_rev_211_mid_flipcheck;
}

switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_211_rev_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
11: spriteset_211_rev_front_nagano;
10: spriteset_211_rev_front_boso;
9:  spriteset_211_rev_front_boso;
8:  spriteset_211_rev_front_shonan;
7:  spriteset_211_rev_front_shonan;
6:  spriteset_211_rev_front_shonan;
5:  spriteset_211_rev_front_shonan;
4:  spriteset_211_rev_front_shonan;
3:  spriteset_211_rev_front_shonan;
2:  spriteset_211_rev_front_shonan;
1:  spriteset_211_rev_front_shonan;
0:  spriteset_211_rev_front_chukyo;
}
switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_211_revflip_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
11: spriteset_211_revfilp_front_nagano;
10: spriteset_211_revflip_front_boso;
9:  spriteset_211_revflip_front_boso;
8:  spriteset_211_revflip_front_shonan;
7:  spriteset_211_revflip_front_shonan;
6:  spriteset_211_revflip_front_shonan;
5:  spriteset_211_revflip_front_shonan;
4:  spriteset_211_revflip_front_shonan;
3:  spriteset_211_revflip_front_shonan;
2:  spriteset_211_revflip_front_shonan;
1:  spriteset_211_revflip_front_shonan;
0:  spriteset_211_revflip_front_chukyo;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_211_front_flipcheck, vehicle_is_flipped) {
  1: sw_211group_gfx_rev_211_rev_front_livery;
 default: sw_211group_gfx_rev_211_revflip_front_livery;
}

switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_211_frontback_nomucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_211group_gfx_rev_211_front_flipcheck;
  0:sw_211group_gfx_rev_211_back_flipcheck;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_211_frontback_aftermucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_211group_gfx_rev_211_back_flipcheck;
  0:sw_211group_gfx_rev_211_front_flipcheck;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_211_frontback_mucarcheck, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F),STORE_TEMP(var[0x61, 0, 0x000000FF, 0x41],0),  //look at opposite position_in_vehID_chain
STORE_TEMP((position_in_consist_from_end-position_in_consist-1)-LOAD_TEMP(0), 0x10F),                               //look at what is ahead of the first vehicle in the vehID_chain
var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000:sw_211group_gfx_rev_211_frontback_aftermucars;
  default:sw_211group_gfx_rev_211_frontback_nomucars;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_211_sameid, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist+1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle behind of opposite vehicle
  2000:sw_211group_gfx_rev_211_frontback_mucarcheck;
  1000:sw_211group_gfx_rev_211_front_flipcheck;
  default:sw_211group_gfx_rev_211_back_flipcheck;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_211_frontback, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle infront of opposite vehicle
  2000:sw_211group_gfx_rev_211_sameid;
  1000:sw_211group_gfx_rev_211_back_flipcheck;
  default:sw_211group_gfx_rev_211_front_flipcheck;
}

/*---211_50006000--*/
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_21156_back_darm_flipcheck, vehicle_is_flipped) {
  1: spriteset_21156_revflip_back_darm;
 default: spriteset_21156_rev_back_darm;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_21156_back_sarm_flipcheck, vehicle_is_flipped) {
  1: spriteset_21156_revflip_back_sarm;
 default: spriteset_21156_rev_back_sarm;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_21156_front_flipcheck, vehicle_is_flipped) {
  1: spriteset_21156_rev_front;
 default: spriteset_21156_revflip_front;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_21156_mid_flipcheck, vehicle_is_flipped) {
  1: spriteset_21156_revflip_mid;
 default: spriteset_21156_rev_mid;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_21156_frontback_year_back_pantograph, current_year){
 0..2005: sw_211group_gfx_rev_21156_back_darm_flipcheck;
 default: sw_211group_gfx_rev_21156_back_sarm_flipcheck;
}

switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_21156_frontback_nomucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_211group_gfx_rev_21156_front_flipcheck;
  0:sw_211group_gfx_rev_21156_frontback_year_back_pantograph;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_21156_frontback_aftermucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_211group_gfx_rev_21156_frontback_year_back_pantograph;
  0:sw_211group_gfx_rev_21156_front_flipcheck;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_21156_frontback_mucarcheck, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F),STORE_TEMP(var[0x61, 0, 0x000000FF, 0x41],0),  //look at opposite position_in_vehID_chain
STORE_TEMP((position_in_consist_from_end-position_in_consist-1)-LOAD_TEMP(0), 0x10F),                               //look at what is ahead of the first vehicle in the vehID_chain
var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000:sw_211group_gfx_rev_21156_frontback_aftermucars;
  default:sw_211group_gfx_rev_21156_frontback_nomucars;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_21156_sameid, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist+1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle behind of opposite vehicle
  2015:sw_211group_gfx_rev_21156_frontback_mucarcheck;
  1000:sw_211group_gfx_rev_21156_front_flipcheck;
  default:sw_211group_gfx_rev_21156_frontback_year_back_pantograph;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_21156_frontback, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle infront of opposite vehicle
  2015:sw_211group_gfx_rev_21156_sameid;
  1000:sw_211group_gfx_rev_21156_frontback_year_back_pantograph;
  default:sw_211group_gfx_rev_21156_front_flipcheck;
}

/*---213---*/
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_213_rev_back_year_pantograph, current_year){
 0..2007: spriteset_213_back_darm_shonan;
 default: spriteset_213_back_sarm_shonan;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_213_revflip_back_year_pantograph, current_year){
 0..2007: spriteset_213_revflip_back_darm_shonan;
 default: spriteset_213_revflip_back_sarm_shonan;
}
switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_213_rev_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
1:sw_211group_gfx_rev_213_rev_back_year_pantograph;
default:spriteset_213_rev_back_jrw;
}
switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_213_revflip_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
1:sw_211group_gfx_rev_213_revflip_back_year_pantograph;
default:spriteset_213_revflip_back_jrw;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_213_back_flipcheck, vehicle_is_flipped) {
1:sw_211group_gfx_rev_213_revflip_back_livery;
default: sw_211group_gfx_rev_213_rev_back_livery;
}
switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_213_rev_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
6:spriteset_213_rev_mid_jrw;
5:spriteset_213_rev_mid_jrw;
4:spriteset_213_rev_mid_jrw;
3:spriteset_213_rev_mid_jrw;
2:spriteset_213_rev_mid_jrw;
1:spriteset_213_rev_mid_jrw;
0:spriteset_213_rev_mid_jrw;
}
switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_213_revflip_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
6:spriteset_213_revflip_mid_jrw;
5:spriteset_213_revflip_mid_jrw;
4:spriteset_213_revflip_mid_jrw;
3:spriteset_213_revflip_mid_jrw;
2:spriteset_213_revflip_mid_jrw;
1:spriteset_213_revflip_mid_jrw;
0:spriteset_213_revflip_mid_jrw;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_213_mid_flipcheck, vehicle_is_flipped) {
 1: sw_211group_gfx_rev_213_revflip_mid_livery;
 default: sw_211group_gfx_rev_213_rev_mid_livery;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_213_rev_front_year, current_year){
 0..2007: spriteset_213_rev_front_old_shonan;
 default: spriteset_213_rev_front_new_shonan;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_213_revflip_front_year, current_year){
 0..2007: spriteset_213_revflip_front_old_shonan;
 default: spriteset_213_revflip_front_new_shonan;
}
switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_213_rev_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
6:spriteset_213_rev_front_s5;
5:spriteset_213_rev_front_s4;
4:spriteset_213_rev_front_s3;
3:spriteset_213_rev_front_s2;
2:spriteset_213_rev_front_s1;
1:sw_211group_gfx_rev_213_rev_front_year;
0:spriteset_213_rev_front_jrw;
}
switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_213_revflip_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
6:spriteset_213_revflip_front_s5;
5:spriteset_213_revflip_front_s4;
4:spriteset_213_revflip_front_s3;
3:spriteset_213_revflip_front_s2;
2:spriteset_213_revflip_front_s1;
1:sw_211group_gfx_rev_213_revflip_front_year;
0:spriteset_213_revflip_front_jrw;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_213_front_flipcheck, vehicle_is_flipped) {
  1: sw_211group_gfx_rev_213_rev_front_livery;
 default: sw_211group_gfx_rev_213_revflip_front_livery;
}

switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_213_frontback_nomucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_211group_gfx_rev_213_front_flipcheck;
  0:sw_211group_gfx_rev_213_back_flipcheck;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_213_frontback_aftermucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_211group_gfx_rev_213_back_flipcheck;
  0:sw_211group_gfx_rev_213_front_flipcheck;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_213_frontback_mucarcheck, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F),STORE_TEMP(var[0x61, 0, 0x000000FF, 0x41],0),  //look at opposite position_in_vehID_chain
STORE_TEMP((position_in_consist_from_end-position_in_consist-1)-LOAD_TEMP(0), 0x10F),                               //look at what is ahead of the first vehicle in the vehID_chain
var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000:sw_211group_gfx_rev_213_frontback_aftermucars;
  default:sw_211group_gfx_rev_213_frontback_nomucars;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_213_sameid, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist+1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle behind of opposite vehicle
  2010:sw_211group_gfx_rev_213_frontback_mucarcheck;
  1000:sw_211group_gfx_rev_213_front_flipcheck;
  default:sw_211group_gfx_rev_213_back_flipcheck;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_213_frontback, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle infront of opposite vehicle
  2010:sw_211group_gfx_rev_213_sameid;
  1000:sw_211group_gfx_rev_213_back_flipcheck;
  default:sw_211group_gfx_rev_213_front_flipcheck;
}

/*---311---*/
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_311_back_darm_flipcheck, vehicle_is_flipped) {
  1: spriteset_311_revflip_back_darm;
 default: spriteset_311_rev_back_darm;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_311_back_sarm_flipcheck, vehicle_is_flipped) {
  1: spriteset_311_revflip_back_sarm;
 default: spriteset_311_rev_back_sarm;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_311_front_flipcheck, vehicle_is_flipped) {
  1: spriteset_311_rev_front;
 default: spriteset_311_revflip_front;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_311_mid_flipcheck, vehicle_is_flipped) {
  1: spriteset_311_revflip_mid;
 default: spriteset_311_rev_mid;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_311_frontback_year_back_pantograph, current_year){
 0..2007: sw_211group_gfx_rev_311_back_darm_flipcheck;
 default: sw_211group_gfx_rev_311_back_sarm_flipcheck;
}


switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_311_frontback_nomucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_211group_gfx_rev_311_front_flipcheck;
  0:sw_211group_gfx_rev_311_frontback_year_back_pantograph;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_311_frontback_aftermucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_211group_gfx_rev_311_frontback_year_back_pantograph;
  0:sw_211group_gfx_rev_311_front_flipcheck;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_311_frontback_mucarcheck, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F),STORE_TEMP(var[0x61, 0, 0x000000FF, 0x41],0),  //look at opposite position_in_vehID_chain
STORE_TEMP((position_in_consist_from_end-position_in_consist-1)-LOAD_TEMP(0), 0x10F),                               //look at what is ahead of the first vehicle in the vehID_chain
var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000:sw_211group_gfx_rev_311_frontback_aftermucars;
  default:sw_211group_gfx_rev_311_frontback_nomucars;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_311_sameid, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist+1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle behind of opposite vehicle
  2023:sw_211group_gfx_rev_311_frontback_mucarcheck;
  1000:sw_211group_gfx_rev_311_front_flipcheck;
  default:sw_211group_gfx_rev_311_frontback_year_back_pantograph;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_311_frontback, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle infront of opposite vehicle
  2023:sw_211group_gfx_rev_311_sameid;
  1000:sw_211group_gfx_rev_311_frontback_year_back_pantograph;
  default:sw_211group_gfx_rev_311_front_flipcheck;
}

/*---313---*/
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_313_back_onep_flipcheck, vehicle_is_flipped) {
  1: spriteset_313_revflip_back_onep;
 default: spriteset_313_rev_back_onep;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_313_back_twop_flipcheck, vehicle_is_flipped) {
  1: spriteset_313_revflip_back_twop;
 default: spriteset_313_rev_back_twop;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_313_front_flipcheck, vehicle_is_flipped) {
  1: spriteset_313_rev_front;
 default: spriteset_313_revflip_front;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_313_mid_flipcheck, vehicle_is_flipped) {
  1: spriteset_313_revflip_mid;
 default: spriteset_313_rev_mid;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_313_mid_onep_flipcheck, vehicle_is_flipped) {
  1: spriteset_313_revflip_mid_onep;
 default: spriteset_313_rev_mid_onep;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_313_pantograph_pos, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){
  0: sw_211group_gfx_rev_313_mid_onep_flipcheck;
  default: sw_211group_gfx_rev_313_mid_flipcheck;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_313_pantograph_check, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 16, 0x000000FF, 0x41]]){ 
  0..1: sw_211group_gfx_rev_313_mid_flipcheck;
  default: sw_211group_gfx_rev_313_pantograph_pos;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_313_frontback_refit_pantograph, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
 1: sw_211group_gfx_rev_313_back_twop_flipcheck;
 0: sw_211group_gfx_rev_313_back_onep_flipcheck;
}


switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_313_frontback_nomucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_211group_gfx_rev_313_front_flipcheck;
  0:sw_211group_gfx_rev_313_frontback_refit_pantograph;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_313_frontback_aftermucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_211group_gfx_rev_313_frontback_refit_pantograph;
  0:sw_211group_gfx_rev_313_front_flipcheck;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_313_frontback_mucarcheck, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F),STORE_TEMP(var[0x61, 0, 0x000000FF, 0x41],0),  //look at opposite position_in_vehID_chain
STORE_TEMP((position_in_consist_from_end-position_in_consist-1)-LOAD_TEMP(0), 0x10F),                               //look at what is ahead of the first vehicle in the vehID_chain
var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000:sw_211group_gfx_rev_313_frontback_aftermucars;
  default:sw_211group_gfx_rev_313_frontback_nomucars;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_313_sameid, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist+1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle behind of opposite vehicle
  2024:sw_211group_gfx_rev_313_frontback_mucarcheck;
  1000:sw_211group_gfx_rev_313_front_flipcheck;
  default:sw_211group_gfx_rev_313_frontback_refit_pantograph;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_313_frontback, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle infront of opposite vehicle
  2024:sw_211group_gfx_rev_313_sameid;
  1000:sw_211group_gfx_rev_313_frontback_refit_pantograph;
  default:sw_211group_gfx_rev_313_front_flipcheck;
}

/*---Main ID Sorting and Detection---*/
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_mucar_idcheck, [
  STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F),                //look at opposite vehicle
  STORE_TEMP(var[0x61, 0, 0x000000FF, 0x41]+1,1),                                     //go to the head car of the opposite vehicle
  STORE_TEMP((position_in_consist_from_end-position_in_consist)-LOAD_TEMP(1), 0x10F), //look at the head car of the opposite vehicle
  var[0x61, 0, 0x0000FFFF, 0xC6]                                                      //determine the ID of the opposite vehicle head car
]){
  2000: sw_211group_gfx_rev_211_mid_refitconsistcheck;
  2010: sw_211group_gfx_rev_213_mid_flipcheck;
  2015: sw_211group_gfx_rev_21156_mid_flipcheck;
  2023: sw_211group_gfx_rev_311_mid_flipcheck;
  2024: sw_211group_gfx_rev_313_pantograph_check;
}

switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_idcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000: sw_211group_gfx_rev_mucar_idcheck;
  2000: sw_211group_gfx_rev_211_frontback;
  2010: sw_211group_gfx_rev_213_frontback; 
  2015: sw_211group_gfx_rev_21156_frontback;
  2023: sw_211group_gfx_rev_311_frontback;
  2024: sw_211group_gfx_rev_313_frontback;
}
/*---END OF SECTION---*/
# 1 "JPplus.pnml" 4
# 1 "src/reversing/reversing_KH_110_111_E120_E130_E131_group.pnml" 1


/*---GFX: Spritesets---*/

/*---KH110---*/
//Purchase Sprites
spriteset (spriteset_KH110_purchase,	                                                    "gfx/JRE/dmuKH110/purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_KH110_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,          "gfx/JRE/dmuKH110/purchase_32bpp.png")         {tmpl_purchase_32bpp(0, 0)}

//KH110 JR Green
spriteset (spriteset_KH110_green,    	      	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }
spriteset (spriteset_KH110_rev_green,    	   	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }
spriteset (spriteset_KH110_revflip_green,    	   	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_KH110_green,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKH110/110-2.png")           {tmpl_std(0, 0)}
alternative_sprites(spriteset_KH110_rev_green,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKH110/110-2.png")           {tmpl_std(0, 25)}
alternative_sprites(spriteset_KH110_revflip_green, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKH110/110-2.png")           {tmpl_std_rev(0, 25)}

//KH110 JR Green Black Front
spriteset (spriteset_KH110_greenblack,    	      	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }
spriteset (spriteset_KH110_rev_greenblack,    	   	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }
spriteset (spriteset_KH110_revflip_greenblack,    	   	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_KH110_greenblack,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKH110/110-1.png")           {tmpl_std(0, 0)}
alternative_sprites(spriteset_KH110_rev_greenblack,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKH110/110-1.png")           {tmpl_std_rev(0, 25)}
alternative_sprites(spriteset_KH110_revflip_greenblack, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKH110/110-1.png")           {tmpl_std(0, 25)}

//KH110 Rikku East Line
spriteset (spriteset_KH110_rikku,    	      	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }
spriteset (spriteset_KH110_rev_rikku,    	   	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }
spriteset (spriteset_KH110_revflip_rikku,    	   	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_KH110_rikku,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKH110/110-3.png")           {tmpl_std(0, 0)}
alternative_sprites(spriteset_KH110_rev_rikku,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKH110/110-3.png")           {tmpl_std_rev(0, 25)}
alternative_sprites(spriteset_KH110_revflip_rikku, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKH110/110-3.png")           {tmpl_std(0, 25)}

//KH110 Akita Relay
spriteset (spriteset_KH110_akita,    	      	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }
spriteset (spriteset_KH110_rev_akita,    	   	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }
spriteset (spriteset_KH110_revflip_akita,    	   	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_KH110_akita,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKH110/110-4.png")           {tmpl_std(0, 0)}
alternative_sprites(spriteset_KH110_rev_akita,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKH110/110-4.png")           {tmpl_std_rev(0, 25)}
alternative_sprites(spriteset_KH110_revflip_akita, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKH110/110-4.png")           {tmpl_std(0, 25)}

//KH110 VOITURE AMITIE
spriteset (spriteset_KH110_voitami,    	      	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }
spriteset (spriteset_KH110_rev_voitami,    	   	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }
spriteset (spriteset_KH110_revflip_voitami,    	   	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_KH110_voitami,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKH110/110-5.png")           {tmpl_std(0, 0)}
alternative_sprites(spriteset_KH110_rev_voitami,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKH110/110-5.png")           {tmpl_std_rev(0, 25)}
alternative_sprites(spriteset_KH110_revflip_voitami, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKH110/110-5.png")           {tmpl_std(0, 25)}

//KH110 Metropolitan Koumi Line Special
spriteset (spriteset_KH110_metrored,    	      	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }
spriteset (spriteset_KH110_rev_metrored,    	   	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }
spriteset (spriteset_KH110_revflip_metrored,    	   	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_KH110_metrored,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKH110/110-6.png")           {tmpl_std(0, 0)}
alternative_sprites(spriteset_KH110_rev_metrored,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKH110/110-6.png")           {tmpl_std_rev(0, 25)}
alternative_sprites(spriteset_KH110_revflip_metrored, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKH110/110-6.png")           {tmpl_std(0, 25)}

/*---KH111---*/
//Purchase Sprites
spriteset (spriteset_KH111_purchase,	                                                    "gfx/JRE/dmuKH111/purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_KH111_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,          "gfx/JRE/dmuKH111/purchase_32bpp.png")         {tmpl_purchase_dh_32bpp(0, 0)}

//KH111 Green
spriteset (spriteset_KH111_front_green,    	      	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }
spriteset (spriteset_KH111_back_green,    	      	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }

spriteset (spriteset_KH111_rev_front_green,    	   	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }
spriteset (spriteset_KH111_rev_back_green,    	   	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }

spriteset (spriteset_KH111_revflip_front_green,    	   	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }
spriteset (spriteset_KH111_revflip_back_green,    	   	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_KH111_front_green,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKH111/kiha111_32bpp.png")           {tmpl_std(0, 0)}
alternative_sprites(spriteset_KH111_back_green,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKH111/kiha111_32bpp.png")           {tmpl_std_rev(0, 25)}
 
alternative_sprites(spriteset_KH111_rev_front_green,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKH111/kiha111_32bpp.png")           {tmpl_std_rev(0, 25)}
alternative_sprites(spriteset_KH111_rev_back_green,      ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKH111/kiha111_32bpp.png")           {tmpl_std(0, 0)}

alternative_sprites(spriteset_KH111_revflip_front_green, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKH111/kiha111_32bpp.png")           {tmpl_std(0, 25)}
alternative_sprites(spriteset_KH111_revflip_back_green,  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKH111/kiha111_32bpp.png")           {tmpl_std(0, 0)}


//KH111 Hachiko Line
spriteset (spriteset_KH111_front_hachiko,           	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }
spriteset (spriteset_KH111_back_hachiko,    	      	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }

spriteset (spriteset_KH111_rev_front_hachiko,       	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }
spriteset (spriteset_KH111_rev_back_hachiko,    	   	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }

spriteset (spriteset_KH111_revflip_front_hachiko,       	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }
spriteset (spriteset_KH111_revflip_back_hachiko,    	   	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_KH111_front_hachiko,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKH111/kiha111_32bpp.png")           {tmpl_std(0, 50)}
alternative_sprites(spriteset_KH111_back_hachiko,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKH111/kiha111_32bpp.png")           {tmpl_std_rev(0, 75)}
 
alternative_sprites(spriteset_KH111_rev_front_hachiko,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKH111/kiha111_32bpp.png")           {tmpl_std_rev(0, 75)}
alternative_sprites(spriteset_KH111_rev_back_hachiko,      ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKH111/kiha111_32bpp.png")           {tmpl_std(0, 50)}

alternative_sprites(spriteset_KH111_revflip_front_hachiko, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKH111/kiha111_32bpp.png")           {tmpl_std(0, 75)}
alternative_sprites(spriteset_KH111_revflip_back_hachiko,  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKH111/kiha111_32bpp.png")           {tmpl_std(0, 50)}

//KH111 Rikuu Line
spriteset (spriteset_KH111_front_rikuu,           	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }
spriteset (spriteset_KH111_back_rikuu,    	      	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }

spriteset (spriteset_KH111_rev_front_rikuu,       	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }
spriteset (spriteset_KH111_rev_back_rikuu,    	   	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }

spriteset (spriteset_KH111_revflip_front_rikuu,       	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }
spriteset (spriteset_KH111_revflip_back_rikuu,    	   	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_KH111_front_rikuu,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKH111/kiha111_32bpp.png")           {tmpl_std(0, 100)}
alternative_sprites(spriteset_KH111_back_rikuu,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKH111/kiha111_32bpp.png")           {tmpl_std_rev(0, 125)}
 
alternative_sprites(spriteset_KH111_rev_front_rikuu,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKH111/kiha111_32bpp.png")           {tmpl_std_rev(0, 125)}
alternative_sprites(spriteset_KH111_rev_back_rikuu,      ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKH111/kiha111_32bpp.png")           {tmpl_std(0, 100)}

alternative_sprites(spriteset_KH111_revflip_front_rikuu, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKH111/kiha111_32bpp.png")           {tmpl_std(0, 125)}
alternative_sprites(spriteset_KH111_revflip_back_rikuu,  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKH111/kiha111_32bpp.png")           {tmpl_std(0, 100)}

//KH111 Akita Relay
spriteset (spriteset_KH111_front_akita,           	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }
spriteset (spriteset_KH111_back_akita,    	      	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }

spriteset (spriteset_KH111_rev_front_akita,       	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }
spriteset (spriteset_KH111_rev_back_akita,    	   	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }

spriteset (spriteset_KH111_revflip_front_akita,       	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }
spriteset (spriteset_KH111_revflip_back_akita,    	   	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_KH111_front_akita,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKH111/kiha111_32bpp.png")           {tmpl_std(0, 150)}
alternative_sprites(spriteset_KH111_back_akita,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKH111/kiha111_32bpp.png")           {tmpl_std_rev(0, 175)}
 
alternative_sprites(spriteset_KH111_rev_front_akita,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKH111/kiha111_32bpp.png")           {tmpl_std_rev(0, 175)}
alternative_sprites(spriteset_KH111_rev_back_akita,      ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKH111/kiha111_32bpp.png")           {tmpl_std(0, 150)}

alternative_sprites(spriteset_KH111_revflip_front_akita, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKH111/kiha111_32bpp.png")           {tmpl_std(0, 175)}
alternative_sprites(spriteset_KH111_revflip_back_akita,  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKH111/kiha111_32bpp.png")           {tmpl_std(0, 150)}

//KH111 Express Koumi Line Special
spriteset (spriteset_KH111_front_koumi,           	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }
spriteset (spriteset_KH111_back_koumi,    	      	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }

spriteset (spriteset_KH111_rev_front_koumi,       	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }
spriteset (spriteset_KH111_rev_back_koumi,    	   	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }

spriteset (spriteset_KH111_revflip_front_koumi,       	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }
spriteset (spriteset_KH111_revflip_back_koumi,    	   	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_KH111_front_koumi,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKH111/kiha111_32bpp.png")           {tmpl_std(0, 200)}
alternative_sprites(spriteset_KH111_back_koumi,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKH111/kiha111_32bpp.png")           {tmpl_std_rev(0, 225)}
 
alternative_sprites(spriteset_KH111_rev_front_koumi,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKH111/kiha111_32bpp.png")           {tmpl_std_rev(0, 225)}
alternative_sprites(spriteset_KH111_rev_back_koumi,      ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKH111/kiha111_32bpp.png")           {tmpl_std(0, 200)}

alternative_sprites(spriteset_KH111_revflip_front_koumi, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKH111/kiha111_32bpp.png")           {tmpl_std(0, 225)}
alternative_sprites(spriteset_KH111_revflip_back_koumi,  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKH111/kiha111_32bpp.png")           {tmpl_std(0, 200)}

/*---KHE120---*/
//Purchase Sprites
spriteset (spriteset_KHE120_purchase,	                                                    "gfx/JRE/dmuKHE120/purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_KHE120_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,          "gfx/JRE/dmuKHE120/purchase_32bpp.png")         {tmpl_purchase_32bpp(0, 0)}

//KHE120 Orginal Orange
spriteset (spriteset_KHE120_orange,    	      	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }
spriteset (spriteset_KHE120_rev_orange,    	   	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }
spriteset (spriteset_KHE120_revflip_orange,    	   	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_KHE120_orange,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKHE120/kihaE120.png")           {tmpl_std(0, 25)}
alternative_sprites(spriteset_KHE120_rev_orange,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKHE120/kihaE120.png")           {tmpl_std(0, 0)}
alternative_sprites(spriteset_KHE120_revflip_orange, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKHE120/kihaE120.png")           {tmpl_std_rev(0, 0)}

//KHE120 New Green
spriteset (spriteset_KHE120_green,    	      	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }
spriteset (spriteset_KHE120_rev_green,    	   	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }
spriteset (spriteset_KHE120_revflip_green,    	   	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_KHE120_green,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKHE120/kihaE120.png")           {tmpl_std(0, 75)}
alternative_sprites(spriteset_KHE120_rev_green,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKHE120/kihaE120.png")           {tmpl_std_rev(0, 50)}
alternative_sprites(spriteset_KHE120_revflip_green, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKHE120/kihaE120.png")           {tmpl_std(0, 50)}

/*---KHE130---*/
//Purchase Sprites
spriteset (spriteset_KHE130_purchase,	                                                    "gfx/JRE/dmuKHE130/purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_KHE130_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,          "gfx/JRE/dmuKHE130/purchase_32bpp.png")         {tmpl_purchase_32bpp(0, 0)}

//KHE130 -0 Orginal Red Suigun Line
spriteset (spriteset_KHE130_suigun,    	      	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }
spriteset (spriteset_KHE130_rev_suigun,    	   	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }
spriteset (spriteset_KHE130_revflip_suigun,    	   	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_KHE130_suigun,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKHE130/kihaE130.png")           {tmpl_std(0, 25)}
alternative_sprites(spriteset_KHE130_rev_suigun,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKHE130/kihaE130.png")           {tmpl_std(0, 0)}
alternative_sprites(spriteset_KHE130_revflip_suigun, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKHE130/kihaE130.png")           {tmpl_std_rev(0, 0)}

//KHE130 -100 Kurui Line
spriteset (spriteset_KHE130_kurui,    	      	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }
spriteset (spriteset_KHE130_rev_kurui,    	   	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }
spriteset (spriteset_KHE130_revflip_kurui,    	   	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_KHE130_kurui,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKHE130/kihaE130.png")           {tmpl_std(0, 75)}
alternative_sprites(spriteset_KHE130_rev_kurui,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKHE130/kihaE130.png")           {tmpl_std_rev(0, 50)}
alternative_sprites(spriteset_KHE130_revflip_kurui, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKHE130/kihaE130.png")           {tmpl_std(0, 50)}

//KHE130 -500 Hachinohe Line
spriteset (spriteset_KHE130_hachi,    	      	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }
spriteset (spriteset_KHE130_rev_hachi,    	   	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }
spriteset (spriteset_KHE130_revflip_hachi,    	   	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_KHE130_hachi,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKHE130/kihaE130.png")           {tmpl_std(0, 125)}
alternative_sprites(spriteset_KHE130_rev_hachi,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKHE130/kihaE130.png")           {tmpl_std_rev(0, 100)}
alternative_sprites(spriteset_KHE130_revflip_hachi, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKHE130/kihaE130.png")           {tmpl_std(0, 100)}

/*---KHE131---*/
//Purchase Sprites
spriteset (spriteset_KHE131_purchase,	                                                    "gfx/JRE/dmuKHE131/purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_KHE131_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,          "gfx/JRE/dmuKHE131/purchase_32bpp.png")         {tmpl_purchase_dh_32bpp(0, 0)}

//KHE131 -0 Orginal Turquoise Suigun Line
spriteset (spriteset_KHE131_front_suigun,    	      	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }
spriteset (spriteset_KHE131_back_suigun,    	      	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }

spriteset (spriteset_KHE131_rev_front_suigun,    	   	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }
spriteset (spriteset_KHE131_rev_back_suigun,    	   	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }

spriteset (spriteset_KHE131_revflip_front_suigun,    	   	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }
spriteset (spriteset_KHE131_revflip_back_suigun,    	   	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_KHE131_front_suigun,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKHE131/KihaE131-kihaE132.png")           {tmpl_std(0, 25)}
alternative_sprites(spriteset_KHE131_back_suigun,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKHE131/KihaE131-kihaE132.png")           {tmpl_std(0, 75)}
 
alternative_sprites(spriteset_KHE131_rev_front_suigun,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKHE131/KihaE131-kihaE132.png")           {tmpl_std_rev(0, 0)}
alternative_sprites(spriteset_KHE131_rev_back_suigun,      ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKHE131/KihaE131-kihaE132.png")           {tmpl_std(0, 50)}

alternative_sprites(spriteset_KHE131_revflip_front_suigun, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKHE131/KihaE131-kihaE132.png")           {tmpl_std(0, 0)}
alternative_sprites(spriteset_KHE131_revflip_back_suigun,  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKHE131/KihaE131-kihaE132.png")           {tmpl_std_rev(0, 50)}


//KHE131 -500 Hachinohe Line
spriteset (spriteset_KHE131_front_hachi,         	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }
spriteset (spriteset_KHE131_back_hachi,    	      	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }

spriteset (spriteset_KHE131_rev_front_hachi,       	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }
spriteset (spriteset_KHE131_rev_back_hachi,    	   	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }

spriteset (spriteset_KHE131_revflip_front_hachi,       	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }
spriteset (spriteset_KHE131_revflip_back_hachi,    	   	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_KHE131_front_hachi,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKHE131/KihaE131-kihaE132.png")           {tmpl_std(0, 125)}
alternative_sprites(spriteset_KHE131_back_hachi,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKHE131/KihaE131-kihaE132.png")           {tmpl_std(0, 175)}
 
alternative_sprites(spriteset_KHE131_rev_front_hachi,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKHE131/KihaE131-kihaE132.png")           {tmpl_std_rev(0, 100)}
alternative_sprites(spriteset_KHE131_rev_back_hachi,      ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKHE131/KihaE131-kihaE132.png")           {tmpl_std(0, 150)}

alternative_sprites(spriteset_KHE131_revflip_front_hachi, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKHE131/KihaE131-kihaE132.png")           {tmpl_std(0, 100)}
alternative_sprites(spriteset_KHE131_revflip_back_hachi,  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/dmuKHE131/KihaE131-kihaE132.png")           {tmpl_std_rev(0, 150)}



/*---END OF SECTION---*/



/*---GFX: GROUPED Train Reversing Switch for KiHa 110, 111/112, E120, E130, E131/E132 Series DMUs---*/



/*---KH110---*/
//Livery Selection
switch(FEAT_TRAINS,SELF, sw_KH110_gfx_rev_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  5: spriteset_KH110_rev_metrored;  
  4: spriteset_KH110_rev_voitami;
  3: spriteset_KH110_rev_akita;
  2: spriteset_KH110_rev_rikku;
  1: spriteset_KH110_rev_greenblack;
  0: spriteset_KH110_rev_green;
}
switch(FEAT_TRAINS,SELF, sw_KH110_gfx_revflip_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  5: spriteset_KH110_revflip_metrored;  
  4: spriteset_KH110_revflip_voitami;
  3: spriteset_KH110_revflip_akita;
  2: spriteset_KH110_revflip_rikku;
  1: spriteset_KH110_revflip_greenblack;
  0: spriteset_KH110_revflip_green;
}

//Check for flipped vehicles (dual_headed)
switch(FEAT_TRAINS, SELF, sw_KH110_gfx_rev_flippedcheck, vehicle_is_flipped) {
  1: sw_KH110_gfx_rev_livery;
 default: sw_KH110_gfx_revflip_livery;
}

/*---KH111---*/
//Livery Selection
switch(FEAT_TRAINS,SELF, sw_KH111_gfx_rev_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  4: spriteset_KH111_rev_front_koumi;
  3: spriteset_KH111_rev_front_akita;
  2: spriteset_KH111_rev_front_rikuu;
  1: spriteset_KH111_rev_front_hachiko;
  0: spriteset_KH111_rev_front_green;
}
switch(FEAT_TRAINS,SELF, sw_KH111_gfx_revflip_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  4: spriteset_KH111_revflip_front_koumi;
  3: spriteset_KH111_revflip_front_akita;
  2: spriteset_KH111_revflip_front_rikuu;
  1: spriteset_KH111_revflip_front_hachiko;
  0: spriteset_KH111_revflip_front_green;
}

switch(FEAT_TRAINS,SELF, sw_KH111_gfx_rev_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  4: spriteset_KH111_rev_back_koumi;
  3: spriteset_KH111_rev_back_akita;
  2: spriteset_KH111_rev_back_rikuu;
  1: spriteset_KH111_rev_back_hachiko;
  0: spriteset_KH111_rev_back_green;
}
switch(FEAT_TRAINS,SELF, sw_KH111_gfx_revflip_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  4: spriteset_KH111_revflip_back_koumi;
  3: spriteset_KH111_revflip_back_akita;
  2: spriteset_KH111_revflip_back_rikuu;
  1: spriteset_KH111_revflip_back_hachiko;
  0: spriteset_KH111_revflip_back_green;
}

//Check for flipped vehicles (dual_headed)
switch(FEAT_TRAINS, SELF, sw_KH111_gfx_rev_front_flippedcheck, vehicle_is_flipped) {
  1: sw_KH111_gfx_rev_front_livery;
 default: sw_KH111_gfx_revflip_front_livery;
}
switch(FEAT_TRAINS, SELF, sw_KH111_gfx_rev_back_flippedcheck, vehicle_is_flipped) {
  1: sw_KH111_gfx_rev_back_livery;
 default: sw_KH111_gfx_revflip_back_livery;
}

//Front/Back Car Position Testing
switch(FEAT_TRAINS, SELF, sw_KH111_gfx_rev_frontback_nomucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_KH111_gfx_rev_front_flippedcheck;
  0:sw_KH111_gfx_rev_back_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_KH111_gfx_rev_frontback_sameid, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist+1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle behind of opposite vehicle
  1510:sw_KH111_gfx_rev_frontback_nomucars;
  default:sw_KH111_gfx_rev_back_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_KH111_gfx_rev_frontback, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle infront of opposite vehicle
  1510:sw_KH111_gfx_rev_frontback_sameid;
  default:sw_KH111_gfx_rev_front_flippedcheck;
}

/*---KHE120---*/
//Livery Selection
switch(FEAT_TRAINS,SELF, sw_KHE120_gfx_rev_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
1: spriteset_KHE120_rev_green;
0: spriteset_KHE120_rev_orange;
}
switch(FEAT_TRAINS,SELF, sw_KHE120_gfx_revflip_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
1: spriteset_KHE120_revflip_green;
0: spriteset_KHE120_revflip_orange;
}

//Check for flipped vehicles (dual_headed)
switch(FEAT_TRAINS, SELF, sw_KHE120_gfx_rev_flippedcheck, vehicle_is_flipped) {
  1: sw_KHE120_gfx_rev_livery;
 default: sw_KHE120_gfx_revflip_livery;
}

/*---KHE130---*/

//Livery Selection
switch(FEAT_TRAINS,SELF, sw_KHE130_gfx_rev_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  2: spriteset_KHE130_rev_hachi;
  1: spriteset_KHE130_rev_kurui;
  0: spriteset_KHE130_rev_suigun;
}
switch(FEAT_TRAINS,SELF, sw_KHE130_gfx_revflip_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  2: spriteset_KHE130_revflip_hachi;
  1: spriteset_KHE130_revflip_kurui;
  0: spriteset_KHE130_revflip_suigun;
}

//Check for flipped vehicles (dual_headed)
switch(FEAT_TRAINS, SELF, sw_KHE130_gfx_rev_flippedcheck, vehicle_is_flipped) {
  1: sw_KHE130_gfx_rev_livery;
 default: sw_KHE130_gfx_revflip_livery;
}

/*---KHE131---*/

//Livery Selection
switch(FEAT_TRAINS,SELF, sw_KHE131_gfx_rev_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  1: spriteset_KHE131_rev_front_hachi;
  0: spriteset_KHE131_rev_front_suigun;
}
switch(FEAT_TRAINS,SELF, sw_KHE131_gfx_revflip_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  1: spriteset_KHE131_revflip_front_hachi;
  0: spriteset_KHE131_revflip_front_suigun;
}

switch(FEAT_TRAINS,SELF, sw_KHE131_gfx_rev_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  1: spriteset_KHE131_rev_back_hachi;
  0: spriteset_KHE131_rev_back_suigun;
}
switch(FEAT_TRAINS,SELF, sw_KHE131_gfx_revflip_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  1: spriteset_KHE131_revflip_back_hachi;
  0: spriteset_KHE131_revflip_back_suigun;
}

//Check for flipped vehicles (dual_headed)
switch(FEAT_TRAINS, SELF, sw_KHE131_gfx_rev_front_flippedcheck, vehicle_is_flipped) {
  1: sw_KHE131_gfx_rev_front_livery;
 default: sw_KHE131_gfx_revflip_front_livery;
}
switch(FEAT_TRAINS, SELF, sw_KHE131_gfx_rev_back_flippedcheck, vehicle_is_flipped) {
  1: sw_KHE131_gfx_rev_back_livery;
 default: sw_KHE131_gfx_revflip_back_livery;
}

//Front/Back Car Position Testing
switch(FEAT_TRAINS, SELF, sw_KHE131_gfx_rev_frontback_nomucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_KHE131_gfx_rev_front_flippedcheck;
  0:sw_KHE131_gfx_rev_back_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_KHE131_gfx_rev_frontback_sameid, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist+1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle behind of opposite vehicle
  1513:sw_KHE131_gfx_rev_frontback_nomucars;
  default:sw_KHE131_gfx_rev_back_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_KHE131_gfx_rev_frontback, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle infront of opposite vehicle
  1513:sw_KHE131_gfx_rev_frontback_sameid;
  default:sw_KHE131_gfx_rev_front_flippedcheck;
}



/*---Main ID Sorting and Detection---*/
switch(FEAT_TRAINS, SELF, sw_JREKHgroup_gfx_rev_idcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1509: sw_KH110_gfx_rev_flippedcheck;
  1510: sw_KH111_gfx_rev_frontback;
  1511: sw_KHE120_gfx_rev_flippedcheck;
  1512: sw_KHE130_gfx_rev_flippedcheck;
  1513: sw_KHE131_gfx_rev_frontback;
}
/*---END OF SECTION---*/


# 1 "JPplus.pnml" 4

/*---TRAINS---*/

//Wagons
# 1 "src/OTHER/mucar.pnml" 1
/*---GFX: Spritesets---*/
spriteset (set_mu_car_purchase,	    "gfx/OTHER/mucarbuy.png") 	{tmpl_purchase(0, 0)}
spriteset (set_mu_car_base,       	"gfx/OTHER/mucar.png")     	{tmpl_std(0, 0)}



item(FEAT_TRAINS, mu_car) {
    /* Define properties first, make sure to set all of them */
    property {
        name:                         string(MUCAR);
        introduction_date: date(1800,1,1);
        climates_available: ALL_CLIMATES;
                model_life: VEHICLE_NEVER_EXPIRES;
                vehicle_life: 60;
                loading_speed: 0;
                cost_factor: 64;
                running_cost_factor: 6;
                speed: 0 km/h;
                power: 0 hp;
                cargo_capacity: 1;
                weight: 0 ton;
                tractive_effort_coefficient: 0.3;
                air_drag_coefficient: 0;
                reliability_decay: 20;
                refittable_cargo_classes: bitmask(CC_PASSENGERS);
                cargo_age_period: 185;
                refit_cost: 0;
                track_type: NARROW_NOEL;
                ai_special_flag: AI_FLAG_PASSENGER;
                running_cost_base: RUNNING_COST_DIESEL;
                engine_class: ENGINE_CLASS_STEAM;
                visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
                sprite_id: SPRITE_ID_NEW_TRAIN;
                dual_headed: 0;
                length: 8;
                extra_power_per_wagon: 0;
                bitmask_vehicle_info: 0;
    }
    /* Define graphics and callbacks
     * Setting all callbacks is not needed, only define what is used */
    graphics {
		purchase:                     set_mu_car_purchase;
    additional_text:			        return string(MUCAR_DESC);
    set_mu_car_base;
    }

}
# 1 "JPplus.pnml" 4

//JGR
# 1 "src/JGR/EMU/6340_series.pnml" 1
/*---GFX: Spritesets---*/

//Purchase Sprites
spriteset (spriteset_6340_purchase,	                                                     "gfx/JGR/emu6340/purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_6340_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,         "gfx/JGR/emu6340/purchase_32bpp.png")         {tmpl_purchase_dh_32bpp(0, 0)}

//6340 Yamanote
spriteset (spriteset_6340_front,       "gfx/OTHER/mucar.png")          { tmpl_std(0, 0) }
spriteset (spriteset_6340_back,	  	   "gfx/OTHER/mucar.png")          { tmpl_std(0, 0) }
spriteset (spriteset_6340_mid,	       "gfx/OTHER/mucar.png")          { tmpl_std(0, 0) }

spriteset (spriteset_6340_rev_front,      "gfx/OTHER/mucar.png")          { tmpl_std(0, 0) }
spriteset (spriteset_6340_rev_back,	  	  "gfx/OTHER/mucar.png")          { tmpl_std(0, 0) }
spriteset (spriteset_6340_rev_mid,		  "gfx/OTHER/mucar.png")          { tmpl_std(0, 0) }

spriteset (spriteset_6340_revflip_front,	  "gfx/OTHER/mucar.png")          { tmpl_std(0, 0) }
spriteset (spriteset_6340_revflip_back,	  	  "gfx/OTHER/mucar.png")          { tmpl_std(0, 0) }
spriteset (spriteset_6340_revflip_mid,		  "gfx/OTHER/mucar.png")          { tmpl_std(0, 0) }

alternative_sprites(spriteset_6340_front,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JGR/emu6340/6340.png")        {tmpl_28px_7l_rev(0, 0)}
alternative_sprites(spriteset_6340_back,            ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JGR/emu6340/6340.png")        {tmpl_28px_7l_rev(0, 96)}
alternative_sprites(spriteset_6340_mid,             ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JGR/emu6340/6340.png")        {tmpl_28px_7l(0, 48)}

alternative_sprites(spriteset_6340_rev_front,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JGR/emu6340/6340.png")        {tmpl_28px_7l_rev(0, 24)}
alternative_sprites(spriteset_6340_rev_back,            ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JGR/emu6340/6340.png")        {tmpl_28px_7l_rev(0, 72)}
alternative_sprites(spriteset_6340_rev_mid,             ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JGR/emu6340/6340.png")        {tmpl_28px_7l_rev(0, 48)}

alternative_sprites(spriteset_6340_revflip_front,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JGR/emu6340/6340.png")        {tmpl_28px_7l(0, 24)}
alternative_sprites(spriteset_6340_revflip_back,            ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JGR/emu6340/6340.png")        {tmpl_28px_7l(0, 72)}
alternative_sprites(spriteset_6340_revflip_mid,             ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JGR/emu6340/6340.png")        {tmpl_28px_7l(0, 48)}
/*---END OF SECTION---*/



/*---GFX: Train Reversing Switches---*/
//Livery Selection
switch(FEAT_TRAINS,SELF, sw_6340_gfx_rev_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0: spriteset_6340_rev_front;
}
switch(FEAT_TRAINS,SELF, sw_6340_gfx_revflip_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0: spriteset_6340_revflip_front;
}

switch(FEAT_TRAINS,SELF, sw_6340_gfx_rev_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0: spriteset_6340_rev_mid;
}
switch(FEAT_TRAINS,SELF, sw_6340_gfx_revflip_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0: spriteset_6340_revflip_mid;
}

switch(FEAT_TRAINS,SELF, sw_6340_gfx_rev_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0: spriteset_6340_rev_back;
}
switch(FEAT_TRAINS,SELF, sw_6340_gfx_revflip_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0: spriteset_6340_revflip_back;
}

//Check for flipped vehicles (dual_headed)
switch(FEAT_TRAINS, SELF, sw_6340_gfx_rev_front_flippedcheck, vehicle_is_flipped) {
  1: sw_6340_gfx_rev_front_livery;
 default: sw_6340_gfx_revflip_front_livery;
}
switch(FEAT_TRAINS, SELF, sw_6340_gfx_rev_mid_flippedcheck, vehicle_is_flipped) {
  1: sw_6340_gfx_revflip_mid_livery;
 default: sw_6340_gfx_rev_mid_livery;
}
switch(FEAT_TRAINS, SELF, sw_6340_gfx_rev_back_flippedcheck, vehicle_is_flipped) {
  1: sw_6340_gfx_revflip_back_livery;
 default: sw_6340_gfx_rev_back_livery;
}

//Front/Back Car Position Testing
switch(FEAT_TRAINS, SELF, sw_6340_gfx_rev_frontback_nomucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_6340_gfx_rev_front_flippedcheck;
  0:sw_6340_gfx_rev_back_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_6340_gfx_rev_frontback_aftermucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_6340_gfx_rev_back_flippedcheck;
  0:sw_6340_gfx_rev_front_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_6340_gfx_rev_frontback_mucarcheck, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F),STORE_TEMP(var[0x61, 0, 0x000000FF, 0x41],0),  //look at opposite position_in_vehID_chain
STORE_TEMP((position_in_consist_from_end-position_in_consist-1)-LOAD_TEMP(0), 0x10F),                               //look at what is ahead of the first vehicle in the vehID_chain
var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000:sw_6340_gfx_rev_frontback_aftermucars;
  default:sw_6340_gfx_rev_frontback_nomucars;
}
switch(FEAT_TRAINS, SELF, sw_6340_gfx_rev_frontback_sameid, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist+1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle behind of opposite vehicle
  2027:sw_6340_gfx_rev_frontback_mucarcheck;
  1000:sw_6340_gfx_rev_front_flippedcheck;
  default:sw_6340_gfx_rev_back_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_6340_gfx_rev_frontback, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle infront of opposite vehicle
  2027:sw_6340_gfx_rev_frontback_sameid;
  1000:sw_6340_gfx_rev_back_flippedcheck;
  default:sw_6340_gfx_rev_front_flippedcheck;
}

//ID Testing
switch(FEAT_TRAINS, SELF, sw_6340_gfx_rev_idcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of opposite vehicle
  1000: sw_6340_gfx_rev_mid_flippedcheck;
  2027: sw_6340_gfx_rev_frontback;
}
/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/
switch(FEAT_TRAINS, PARENT, sw_6340_gfx_front_revcheck, vehicle_is_reversed){
   0: spriteset_6340_front;
   default: sw_6340_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, PARENT, sw_6340_gfx_back_revcheck, vehicle_is_reversed){
 0: spriteset_6340_back;
 default: sw_6340_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, SELF, sw_6340_gfx_frontback, vehicle_is_flipped) {
  1: sw_6340_gfx_back_revcheck;
 default: sw_6340_gfx_front_revcheck;
}
/*---END OF SECTION---*/



/*---GFX: Middle Car Switches---*/
switch(FEAT_TRAINS, PARENT, sw_6340_gfx_mucar_revcheck_mid, vehicle_is_reversed){
 0: spriteset_6340_mid;
 default: sw_6340_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Livery Refitting Switches---*/

//Main Switches
switch(FEAT_TRAINS, SELF, sw_6340_gfx_mucar,  cargo_subtype) {
  0: sw_6340_gfx_mucar_revcheck_mid;
}
switch(FEAT_TRAINS, SELF, sw_6340_gfx_main,  cargo_subtype) {
  0: sw_6340_gfx_frontback;
}
/*---END OF SECTION---*/



//Coupling
  switch(FEAT_TRAINS, SELF, sw_6340_attach_vehid, [vehicle_type_id == emu_6340 || vehicle_type_id == mu_car]) {
  0: return string(MU_UNIQUE);
  }



item(FEAT_TRAINS, emu_6340) {
    property {
        name:                         string(JGR_6340);
        introduction_date:            date(1914, 05, 22);
        model_life:                   5;
        vehicle_life:                 38;
        reliability_decay:            12;

        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_4D;
        cost_factor:                  19;
        running_cost_factor:          55;

        speed:                        65 km/h;
        track_type:                   NARROW_OHLE;
        power:                        420 kW;
        weight:                       34 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  1;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_ELECTRIC;
        engine_class:                 ENGINE_CLASS_ELECTRIC;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 7;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                      sw_6340_gfx_main;
		    purchase:                 spriteset_6340_purchase;
		    additional_text:	      return string(JGR_6340_DESC);
        //cargo_subtype_text:           sw_6340_subtypetext_main;
        can_attach_wagon:			  sw_6340_attach_vehid;
        //start_stop:                   ;
    }
    /*Multiple Unit Car*/
      livery_override(mu_car){
        default:                      sw_6340_gfx_mucar;
        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_4D;
        //cargo_subtype_text:           sw_6340_subtypetext_mucar;
        power: 120;
        weight: 23;
        length: 7;
      }

}
# 1 "JPplus.pnml" 4


//JNR
# 1 "src/JNR/EMU/80_series.pnml" 1
/*---GFX: Spritesets---*/
//Purchase Sprites
spriteset (spriteset_80_purchase,	                                                     "gfx/JNR/emu80/purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_80_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,         "gfx/JNR/emu80/purchase_32bpp.png")         {tmpl_purchase_dh_32bpp(0, 0)}

//80 Series
spriteset (spriteset_80_front_1,    	      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_back_1,             "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_front_2,          	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_back_2,             "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_front_3,    	      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_back_3,             "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_mid_panto,     		  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_midgr,    		      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_80_rev_front_1,    	        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_rev_back_1,               "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_rev_front_2,    	        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_rev_back_2,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_rev_front_3,     		      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_rev_back_3,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_rev_mid,    		          "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_rev_mid_panto,    	  	  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_rev_midgr,    	      	  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_80_revflip_front_1,    	        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_revflip_back_1,               "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_revflip_front_2,    	        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_revflip_back_2,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_revflip_front_3,     		      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_revflip_back_3,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_revflip_mid,    		          "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_revflip_mid_panto,    	  	  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_revflip_midgr,    	      	  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_80_back_panto1,                        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_back_panto2,                        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_rev_back_panto1,                    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_rev_back_panto2,    		            "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_revflip_back_panto1,                "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_revflip_back_panto2,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_80_front_1,                 ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std(0, 0)}
alternative_sprites(spriteset_80_back_1,                  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std_rev(0, 25)}
alternative_sprites(spriteset_80_front_2,                 ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std(0, 125)}
alternative_sprites(spriteset_80_back_2,                  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std_rev(0, 150)}
alternative_sprites(spriteset_80_front_3,                 ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std(0, 175)}
alternative_sprites(spriteset_80_back_3,                  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std_rev(0, 200)}
alternative_sprites(spriteset_80_mid,                     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std(0, 75)}
alternative_sprites(spriteset_80_mid_panto,               ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std(0, 50)}
alternative_sprites(spriteset_80_midgr,                   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std(0, 100)}

alternative_sprites(spriteset_80_rev_front_1,                 ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std(0, 25)}
alternative_sprites(spriteset_80_rev_back_1,                  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std(0, 0)}
alternative_sprites(spriteset_80_rev_front_2,                 ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std(0, 150)}
alternative_sprites(spriteset_80_rev_back_2,                  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std(0, 125)}
alternative_sprites(spriteset_80_rev_front_3,                 ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std(0, 200)}
alternative_sprites(spriteset_80_rev_back_3,                  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std(0, 175)}
alternative_sprites(spriteset_80_rev_mid,                     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std_rev(0, 75)}
alternative_sprites(spriteset_80_rev_mid_panto,               ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std_rev(0, 50)}
alternative_sprites(spriteset_80_rev_midgr,                   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std_rev(0, 100)}

alternative_sprites(spriteset_80_revflip_front_1,             ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std_rev(0, 25)}
alternative_sprites(spriteset_80_revflip_back_1,              ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std_rev(0, 0)}
alternative_sprites(spriteset_80_revflip_front_2,             ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std_rev(0, 150)}
alternative_sprites(spriteset_80_revflip_back_2,              ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std_rev(0, 125)}
alternative_sprites(spriteset_80_revflip_front_3,             ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std_rev(0, 200)}
alternative_sprites(spriteset_80_revflip_back_3,              ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std(0, 175)}
alternative_sprites(spriteset_80_revflip_mid,                 ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std(0, 75)}
alternative_sprites(spriteset_80_revflip_mid_panto,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std(0, 50)}
alternative_sprites(spriteset_80_revflip_midgr,               ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std(0, 100)}

alternative_sprites(spriteset_80_back_panto1,                          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80-cabpantographs.png")             {tmpl_std_rev(0, 25)}
alternative_sprites(spriteset_80_back_panto2,                          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80-cabpantographs.png")             {tmpl_std_rev(0, 75)}
alternative_sprites(spriteset_80_rev_back_panto1,                      ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80-cabpantographs.png")             {tmpl_std(0, 0)}
alternative_sprites(spriteset_80_rev_back_panto2,                      ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80-cabpantographs.png")             {tmpl_std(0, 50)}
alternative_sprites(spriteset_80_revflip_back_panto1,                  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80-cabpantographs.png")             {tmpl_std_rev(0, 0)}
alternative_sprites(spriteset_80_revflip_back_panto2,                  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80-cabpantographs.png")             {tmpl_std_rev(0, 50)}

//80 Series Kansai
spriteset (spriteset_80_front_kansai,    	           "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_back_kansai,                 "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_mid_kansai,                  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_mid_panto_kansai,            "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_80_rev_front_kansai,    	           "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_rev_back_kansai,                 "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_rev_mid_kansai,                  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_rev_mid_panto_kansai,            "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_80_revflip_front_kansai,    	           "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_revflip_back_kansai,                 "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_revflip_mid_kansai,                  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_revflip_mid_panto_kansai,            "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_80_back_panto_kansai,                         "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_rev_back_panto_kansai,                     "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_revflip_back_panto_kansai,                 "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_80_front_kansai,                   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80_kansai.png")             {tmpl_std(0, 0)}
alternative_sprites(spriteset_80_back_kansai,                    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80_kansai.png")             {tmpl_std_rev(0, 25)}
alternative_sprites(spriteset_80_mid_kansai,                     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80_kansai.png")             {tmpl_std(0, 75)}
alternative_sprites(spriteset_80_mid_panto_kansai,               ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80_kansai.png")             {tmpl_std(0, 50)}

alternative_sprites(spriteset_80_rev_front_kansai,                   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80_kansai.png")             {tmpl_std(0, 25)}
alternative_sprites(spriteset_80_rev_back_kansai,                    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80_kansai.png")             {tmpl_std(0, 0)}
alternative_sprites(spriteset_80_rev_mid_kansai,                     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80_kansai.png")             {tmpl_std_rev(0, 75)}
alternative_sprites(spriteset_80_rev_mid_panto_kansai,               ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80_kansai.png")             {tmpl_std_rev(0, 50)}

alternative_sprites(spriteset_80_revflip_front_kansai,                   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80_kansai.png")             {tmpl_std_rev(0, 25)}
alternative_sprites(spriteset_80_revflip_back_kansai,                    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80_kansai.png")             {tmpl_std_rev(0, 0)}
alternative_sprites(spriteset_80_revflip_mid_kansai,                     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80_kansai.png")             {tmpl_std(0, 75)}
alternative_sprites(spriteset_80_revflip_mid_panto_kansai,               ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80_kansai.png")             {tmpl_std(0, 50)}

alternative_sprites(spriteset_80_back_panto_kansai,                    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80_kansai-cabpantographs.png")             {tmpl_std_rev(0, 25)}
alternative_sprites(spriteset_80_rev_back_panto_kansai,                ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80_kansai-cabpantographs.png")             {tmpl_std(0, 0)}
alternative_sprites(spriteset_80_revflip_back_panto_kansai,            ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80_kansai-cabpantographs.png")             {tmpl_std_rev(0, 0)}


/*---END OF SECTION---*/



/*---GFX: Pantograph Positions---*/

//80
switch(FEAT_TRAINS,SELF, sw_80_gfx_pantograph_mid, position_in_vehid_chain_from_end%2){
  0: spriteset_80_mid_panto;
  default:spriteset_80_mid;
}
switch(FEAT_TRAINS,SELF, sw_80_gfx_pantograph_midgr1, position_in_vehid_chain){
  1: spriteset_80_mid;
  3: spriteset_80_midgr;
  default:spriteset_80_mid_panto;
}
switch(FEAT_TRAINS,SELF, sw_80_gfx_pantograph_midgr2, position_in_vehid_chain){
  1: spriteset_80_mid;
  2: spriteset_80_mid_panto;
  3..4: spriteset_80_midgr;
  default:sw_80_gfx_pantograph_mid;
}
switch(FEAT_TRAINS,SELF, sw_80_gfx_pantograph_middlesw, num_vehs_in_vehid_chain){
  0..4: sw_80_gfx_pantograph_mid;
  5: sw_80_gfx_pantograph_midgr1;
  default: sw_80_gfx_pantograph_midgr2;
}
switch(FEAT_TRAINS,SELF, sw_80_gfx_pantograph_pos_back, position_in_vehid_chain_from_end){
  0: spriteset_80_mid_panto;
  default:sw_80_gfx_pantograph_middlesw;
}
switch(FEAT_TRAINS,SELF, sw_80_gfx_pantograph_pos_front, position_in_vehid_chain){
  0: spriteset_80_mid_panto;
  default:sw_80_gfx_pantograph_pos_back;
}
switch(FEAT_TRAINS,SELF, sw_80_gfx_pantograph_pos, num_vehs_in_vehid_chain){
  default: sw_80_gfx_pantograph_pos_front;
}

switch(FEAT_TRAINS,SELF, sw_80_gfx_kansai_pantograph_mid, position_in_vehid_chain_from_end%2){
  0: spriteset_80_mid_panto_kansai;
  default:spriteset_80_mid_kansai;
}
switch(FEAT_TRAINS,SELF, sw_80_gfx_kansai_pantograph_pos_back, position_in_vehid_chain_from_end){
  0: spriteset_80_mid_panto_kansai;
  default:sw_80_gfx_kansai_pantograph_mid;
}
switch(FEAT_TRAINS,SELF, sw_80_gfx_kansai_pantograph_pos_front, position_in_vehid_chain){
  0: spriteset_80_mid_panto_kansai;
  default:sw_80_gfx_kansai_pantograph_pos_back;
}
switch(FEAT_TRAINS,SELF, sw_80_gfx_kansai_pantograph_pos, num_vehs_in_vehid_chain){
  default: sw_80_gfx_kansai_pantograph_pos_front;
}
/*---END OF SECTION---*/



/*---GFX: Train Reversing Switches---*/
//Livery Selection
switch(FEAT_TRAINS,SELF, sw_80_gfx_rev_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
3:spriteset_80_rev_front_kansai;
2:spriteset_80_rev_front_3;
1:spriteset_80_rev_front_2;
0:spriteset_80_rev_front_1;
}
switch(FEAT_TRAINS,SELF, sw_80_gfx_revflip_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
3:spriteset_80_revflip_front_kansai;
2:spriteset_80_revflip_front_3;
1:spriteset_80_revflip_front_2;
0:spriteset_80_revflip_front_1;
}

switch(FEAT_TRAINS,SELF, sw_80_gfx_rev_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
3:spriteset_80_rev_back_kansai;
2:spriteset_80_rev_back_2;
1:spriteset_80_rev_back_2;
0:spriteset_80_rev_back_1;
}
switch(FEAT_TRAINS,SELF, sw_80_gfx_revflip_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
3:spriteset_80_revflip_back_kansai;
2:spriteset_80_revflip_back_2;
1:spriteset_80_revflip_back_2;  
0:spriteset_80_revflip_back_1;
}

switch(FEAT_TRAINS,SELF, sw_80_gfx_rev_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
10:spriteset_80_rev_mid_kansai;
9:spriteset_80_rev_mid_panto_kansai;
  8:spriteset_80_rev_mid_kansai;
7:spriteset_80_rev_midgr;
6:spriteset_80_rev_mid_panto;
5:spriteset_80_rev_mid;
  4:spriteset_80_rev_mid;

3:spriteset_80_rev_mid_kansai;
2:spriteset_80_rev_mid;
1:spriteset_80_rev_mid;
0:spriteset_80_rev_mid;
}
switch(FEAT_TRAINS,SELF, sw_80_gfx_revflip_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
10:spriteset_80_revflip_mid_kansai;
9:spriteset_80_revflip_mid_panto_kansai;
  8:spriteset_80_revflip_mid_kansai;
7:spriteset_80_revflip_midgr;
6:spriteset_80_revflip_mid_panto;
5:spriteset_80_revflip_mid;
  4:spriteset_80_revflip_mid;

3:spriteset_80_revflip_mid_kansai;
2:spriteset_80_revflip_mid;
1:spriteset_80_revflip_mid;
0:spriteset_80_revflip_mid;
}

switch(FEAT_TRAINS,PARENT, sw_80_gfx_rev_mid_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
10:spriteset_80_rev_mid_kansai;
9:spriteset_80_rev_mid_panto_kansai;
  8:spriteset_80_rev_mid_panto_kansai;
7:spriteset_80_rev_midgr;
6:spriteset_80_rev_mid_panto;
5:spriteset_80_rev_mid;
  4:spriteset_80_rev_mid_panto;

3:spriteset_80_rev_mid_panto_kansai;
2:spriteset_80_rev_mid_panto;
1:spriteset_80_rev_mid_panto;
0:spriteset_80_rev_mid_panto;
}
switch(FEAT_TRAINS,PARENT, sw_80_gfx_revflip_mid_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
10:spriteset_80_revflip_mid_kansai;
9:spriteset_80_revflip_mid_panto_kansai;
  8:spriteset_80_revflip_mid_panto_kansai;
7:spriteset_80_revflip_midgr;
6:spriteset_80_revflip_mid_panto;
5:spriteset_80_revflip_mid;
  4:spriteset_80_revflip_mid_panto;

3:spriteset_80_revflip_mid_panto_kansai;
2:spriteset_80_revflip_mid_panto;
1:spriteset_80_revflip_mid_panto;
0:spriteset_80_revflip_mid_panto;
}

switch(FEAT_TRAINS,SELF, sw_80_gfx_rev_midgr_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
10:spriteset_80_rev_mid_kansai;
9:spriteset_80_rev_mid_panto_kansai;
  8:spriteset_80_rev_mid_kansai;
7:spriteset_80_rev_midgr;
6:spriteset_80_rev_mid_panto;
5:spriteset_80_rev_mid;
  4:spriteset_80_rev_midgr;

3:spriteset_80_rev_mid_kansai;
2:spriteset_80_rev_midgr;
1:spriteset_80_rev_midgr;
0:spriteset_80_rev_midgr;
}
switch(FEAT_TRAINS,SELF, sw_80_gfx_revflip_midgr_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
10:spriteset_80_revflip_mid_kansai;
9:spriteset_80_revflip_mid_panto_kansai;
  8:spriteset_80_revflip_mid_kansai;
7:spriteset_80_revflip_midgr;
6:spriteset_80_revflip_mid_panto;
5:spriteset_80_revflip_mid;
  4:spriteset_80_revflip_midgr;

3:spriteset_80_revflip_mid_kansai;
2:spriteset_80_revflip_midgr;
1:spriteset_80_revflip_midgr;
0:spriteset_80_revflip_midgr;
}

switch(FEAT_TRAINS,SELF, sw_80_gfx_rev_back_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
3:spriteset_80_rev_back_panto_kansai;
2:spriteset_80_rev_back_panto2;
1:spriteset_80_rev_back_panto2;
0:spriteset_80_rev_back_panto1;
}
switch(FEAT_TRAINS,SELF, sw_80_gfx_revflip_back_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
3:spriteset_80_revflip_back_panto_kansai;
2:spriteset_80_revflip_back_panto2;
1:spriteset_80_revflip_back_panto2;  
0:spriteset_80_revflip_back_panto1;
}


//Check for flipped vehicles (dual_headed)
switch(FEAT_TRAINS, SELF, sw_80_gfx_rev_front_flippedcheck, vehicle_is_flipped) {
  1: sw_80_gfx_revflip_front_livery;
 default: sw_80_gfx_rev_front_livery;
}
switch(FEAT_TRAINS, SELF, sw_80_gfx_rev_back_flippedcheck, vehicle_is_flipped) {
  1: sw_80_gfx_revflip_back_livery;
 default: sw_80_gfx_rev_back_livery;
}
switch(FEAT_TRAINS, SELF, sw_80_gfx_rev_mid_flippedcheck, vehicle_is_flipped) {
  1: sw_80_gfx_revflip_mid_livery;
 default: sw_80_gfx_rev_mid_livery;
}
switch(FEAT_TRAINS, SELF, sw_80_gfx_rev_mid_panto_flippedcheck, vehicle_is_flipped) {
  1: sw_80_gfx_revflip_mid_panto_livery;
 default: sw_80_gfx_rev_mid_panto_livery;
}
switch(FEAT_TRAINS, SELF, sw_80_gfx_rev_midgr_flippedcheck, vehicle_is_flipped) {
  1: sw_80_gfx_revflip_midgr_livery;
 default: sw_80_gfx_rev_midgr_livery;
}
switch(FEAT_TRAINS, SELF, sw_80_gfx_rev_back_panto_flippedcheck, vehicle_is_flipped) {
  1: sw_80_gfx_revflip_back_panto_livery;
 default: sw_80_gfx_rev_back_panto_livery;
}


//Pantograph Position Testing
switch(FEAT_TRAINS, SELF, sw_80_gfx_rev_pantograph_pos_mid, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 8, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain_from_end
  0: sw_80_gfx_rev_mid_panto_flippedcheck;
  default: sw_80_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_80_gfx_rev_pantograph_pos_midgr1, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  1: sw_80_gfx_rev_mid_flippedcheck;
  3: sw_80_gfx_rev_midgr_flippedcheck;
  default: sw_80_gfx_rev_mid_panto_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_80_gfx_rev_pantograph_pos_midgr2, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  1: sw_80_gfx_rev_mid_flippedcheck;
  2: sw_80_gfx_rev_mid_panto_flippedcheck;
  3..4: sw_80_gfx_rev_midgr_flippedcheck;
  default: sw_80_gfx_rev_pantograph_pos_mid;
}
switch(FEAT_TRAINS, SELF, sw_80_gfx_rev_pantograph_pos_middlesw, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 16, 0x000000FF, 0x41]]){ //look at opposite num_vehs_in_vehid_chain
  0..4: sw_80_gfx_rev_pantograph_pos_mid;
  5: sw_80_gfx_rev_pantograph_pos_midgr1;
  default: sw_80_gfx_rev_pantograph_pos_midgr2;
}
switch(FEAT_TRAINS, SELF, sw_80_gfx_rev_pantograph_pos_back, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 8, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain_from_end
  0: sw_80_gfx_rev_mid_panto_flippedcheck;
  default: sw_80_gfx_rev_pantograph_pos_middlesw;
}
switch(FEAT_TRAINS, SELF, sw_80_gfx_rev_pantograph_pos_front, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  0: sw_80_gfx_rev_mid_panto_flippedcheck;
  default: sw_80_gfx_rev_pantograph_pos_back;
}
switch(FEAT_TRAINS, SELF, sw_80_gfx_rev_pantograph_pos, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 16, 0x000000FF, 0x41]]){ //look at opposite num_vehs_in_vehid_chain
  default: sw_80_gfx_rev_pantograph_pos_front;
}

switch(FEAT_TRAINS, SELF, sw_80_gfx_rev_kansai_pantograph_pos_mid, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 8, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain_from_end
  0: sw_80_gfx_rev_mid_panto_flippedcheck;
  default: sw_80_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_80_gfx_rev_kansai_pantograph_pos_back, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 8, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain_from_end
  0: sw_80_gfx_rev_mid_panto_flippedcheck;
  default: sw_80_gfx_rev_kansai_pantograph_pos_mid;
}
switch(FEAT_TRAINS, SELF, sw_80_gfx_rev_kansai_pantograph_pos_front, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  0: sw_80_gfx_rev_mid_panto_flippedcheck;
  default: sw_80_gfx_rev_kansai_pantograph_pos_back;
}
switch(FEAT_TRAINS, SELF, sw_80_gfx_rev_kansai_pantograph_pos, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 16, 0x000000FF, 0x41]]){ //look at opposite num_vehs_in_vehid_chain
  default: sw_80_gfx_rev_kansai_pantograph_pos_front;
}

switch(FEAT_TRAINS,SELF, sw_80_gfx_rev_mid_refitcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){ //look at opposite refit livery id
    10: sw_80_gfx_rev_mid_panto_flippedcheck;
    9:  sw_80_gfx_rev_mid_flippedcheck;
  8: sw_80_gfx_rev_kansai_pantograph_pos;
    7: sw_80_gfx_rev_midgr_flippedcheck;
    6: sw_80_gfx_rev_mid_panto_flippedcheck;
    5: sw_80_gfx_rev_mid_flippedcheck;
  4: sw_80_gfx_rev_pantograph_pos;
  3: sw_80_gfx_rev_kansai_pantograph_pos;
  2: sw_80_gfx_rev_pantograph_pos;
  1: sw_80_gfx_rev_pantograph_pos;
  0: sw_80_gfx_rev_pantograph_pos;
}


//Back Car Pantograph Testing
switch(FEAT_TRAINS, SELF, sw_80_gfx_rev_back_pantocheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
 0: sw_80_gfx_rev_back_flippedcheck;
 default: sw_80_gfx_rev_back_panto_flippedcheck;
}


//Front/Back Car Position Testing
switch(FEAT_TRAINS, SELF, sw_80_gfx_rev_frontback_nomucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_80_gfx_rev_front_flippedcheck;
  0:sw_80_gfx_rev_back_pantocheck;
}
switch(FEAT_TRAINS, SELF, sw_80_gfx_rev_frontback_aftermucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_80_gfx_rev_back_pantocheck;
  0:sw_80_gfx_rev_front_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_80_gfx_rev_frontback_mucarcheck, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F),STORE_TEMP(var[0x61, 0, 0x000000FF, 0x41],0),  //look at opposite position_in_vehID_chain
STORE_TEMP((position_in_consist_from_end-position_in_consist-1)-LOAD_TEMP(0), 0x10F),                               //look at what is ahead of the first vehicle in the vehID_chain
var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000:sw_80_gfx_rev_frontback_aftermucars;
  default:sw_80_gfx_rev_frontback_nomucars;
}
switch(FEAT_TRAINS, SELF, sw_80_gfx_rev_frontback_sameid, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist+1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle behind of opposite vehicle
  2032:sw_80_gfx_rev_frontback_mucarcheck;
  1000:sw_80_gfx_rev_front_flippedcheck;
  default:sw_80_gfx_rev_back_pantocheck;
}
switch(FEAT_TRAINS, SELF, sw_80_gfx_rev_frontback, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle infront of opposite vehicle
  2032:sw_80_gfx_rev_frontback_sameid;
  1000:sw_80_gfx_rev_back_pantocheck;
  default:sw_80_gfx_rev_front_flippedcheck;
}


//ID Testing
switch(FEAT_TRAINS, SELF, sw_80_gfx_rev_idcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of opposite vehicle
  1000: sw_80_gfx_rev_mid_refitcheck;
  2032: sw_80_gfx_rev_frontback;
}
/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/
//80 series 86-1 front
switch(FEAT_TRAINS, SELF, sw_80_gfx_861_pantocheck, position_in_vehid_chain){
 0: spriteset_80_back_1;
 default: spriteset_80_back_panto1;
}
switch(FEAT_TRAINS, SELF, sw_80_gfx_861_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_80_front_1;
 default: sw_80_gfx_861_pantocheck;
}
switch(FEAT_TRAINS, PARENT, sw_80_gfx_861_frontback_revcheck, vehicle_is_reversed){
 0: sw_80_gfx_861_frontback_flipcheck;
 default: sw_80_gfx_rev_idcheck;
}

//80 series 86-2 front
switch(FEAT_TRAINS, SELF, sw_80_gfx_862_pantocheck, position_in_vehid_chain){
 0: spriteset_80_back_2;
 default: spriteset_80_back_panto2;
}
switch(FEAT_TRAINS, SELF, sw_80_gfx_862_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_80_front_2;
 default: sw_80_gfx_862_pantocheck;
}
switch(FEAT_TRAINS, PARENT, sw_80_gfx_862_frontback_revcheck, vehicle_is_reversed){
 0: sw_80_gfx_862_frontback_flipcheck;
 default: sw_80_gfx_rev_idcheck;
}

//80 series 85 front
switch(FEAT_TRAINS, SELF, sw_80_gfx_85_pantocheck, position_in_vehid_chain){
 0: spriteset_80_back_2;
 default: spriteset_80_back_panto2;
}
switch(FEAT_TRAINS, SELF, sw_80_gfx_85_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_80_front_3;
 default: sw_80_gfx_85_pantocheck;
}
switch(FEAT_TRAINS, PARENT, sw_80_gfx_85_frontback_revcheck, vehicle_is_reversed){
 0: sw_80_gfx_85_frontback_flipcheck;
 default: sw_80_gfx_rev_idcheck;
}

//80 series kansai 86-2 front
switch(FEAT_TRAINS, SELF, sw_80_gfx_862_kansai_pantocheck, position_in_vehid_chain){
 0: spriteset_80_back_kansai;
 default: spriteset_80_back_panto_kansai;
}
switch(FEAT_TRAINS, SELF, sw_80_gfx_862_kansai_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_80_front_kansai;
 default: sw_80_gfx_862_kansai_pantocheck;
}
switch(FEAT_TRAINS, PARENT, sw_80_gfx_862_kansai_frontback_revcheck, vehicle_is_reversed){
 0: sw_80_gfx_862_kansai_frontback_flipcheck;
 default: sw_80_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Middle Car Switches---*/
//80
switch(FEAT_TRAINS, SELF, sw_80_gfx_cargosubtype, cargo_subtype){
  10: spriteset_80_mid_panto_kansai;
  9: spriteset_80_mid_kansai;
  8: sw_80_gfx_kansai_pantograph_pos;
  7: spriteset_80_midgr;
  6: spriteset_80_mid_panto;
  5: spriteset_80_mid;
  4: sw_80_gfx_pantograph_pos;
  3: sw_80_gfx_kansai_pantograph_pos;
  2: sw_80_gfx_pantograph_pos;
  1: sw_80_gfx_pantograph_pos;
  0: sw_80_gfx_pantograph_pos;
}

switch(FEAT_TRAINS, PARENT, sw_80_gfx_mucar_revcheck_mid, vehicle_is_reversed){
    0: sw_80_gfx_cargosubtype;
    default: sw_80_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Livery Refitting Switches---*/
//Main Switches
switch(FEAT_TRAINS, SELF, sw_80_gfx_mucar,  cargo_subtype) {
  default: sw_80_gfx_mucar_revcheck_mid;
}
switch(FEAT_TRAINS, SELF, sw_80_gfx_main,  cargo_subtype) {
  3: sw_80_gfx_862_kansai_frontback_revcheck;
  2: sw_80_gfx_85_frontback_revcheck;
  1: sw_80_gfx_862_frontback_revcheck;
  0: sw_80_gfx_861_frontback_revcheck;
}


//Menu Switches
switch(FEAT_TRAINS, SELF, sw_80_subtypetext_mucar, cargo_subtype) {
  10: string(jnr80_kansai_pt);
  9: string(jnr80_kansai_mu);
  8: string(jnr_80_DIV_kansai);
  7: string(jnr80_shonan_gr);
  6: string(jnr80_shonan_pt);
  5: string(jnr80_shonan_mu);
  4: string(jnr_80_DIV_shonan);
  3: string(jnr80_ka);
  2: string(jnr80_85); 
  1: string(jnr80_861);
  0: string(jnr80_862);
}
switch(FEAT_TRAINS, SELF, sw_80_subtypetext_main, cargo_subtype) {
  3: string(jnr80_ka); 
  2: string(jnr80_85); 
  1: string(jnr80_861);
  0: string(jnr80_862);
}
/*---END OF SECTION---*/



//Coupling
  switch(FEAT_TRAINS, SELF, sw_80_attach_vehid, [vehicle_type_id == emu_80 || vehicle_type_id == mu_car]) {
  0: return string(MU_UNIQUE);
  }



item(FEAT_TRAINS, emu_80) {
    property {
        name:                         string(JNR_80);
        introduction_date:            date(1950, 11, 12);
        model_life:                   20;
        vehicle_life:                 39;
        reliability_decay:            11;

        cargo_capacity:               param_capacity_rapid;
        loading_speed:                param_loading_2D;
        cost_factor:                  17;
        running_cost_factor:          51;

        speed:                        110 km/h;
        track_type:                   NARROW_OHLE;
        power:                        480 kW;
        weight:                       37 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  1;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_ELECTRIC;
        engine_class:                 ENGINE_CLASS_ELECTRIC;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                      sw_80_gfx_main;
		    purchase:                 spriteset_80_purchase;
		    additional_text:	      return string(JNR_80_DESC);
        cargo_subtype_text:           sw_80_subtypetext_main;
        can_attach_wagon:			  sw_80_attach_vehid;
        //start_stop:                   ;
    }
    /*Multiple Unit Car*/
      livery_override(mu_car){
        default:                      sw_80_gfx_mucar;
        cargo_capacity:               param_capacity_rapid;
        loading_speed:                param_loading_2D;
        cargo_subtype_text:           sw_80_subtypetext_mucar;
        power: 120;
        weight: 27;
      }

}
# 1 "JPplus.pnml" 4

//#include "src/JNR/EMU/101_series.pnml"
//#include "src/JNR/EMU/103_series.pnml"
//#include "src/JNR/EMU/111_113_series.pnml"
//#include "src/JNR/EMU/115_series.pnml"
//#include "src/JNR/EMU/151_161_181_series.pnml"
# 1 "src/JNR/EMU/165_169_series.pnml" 1
/*---GFX: Spritesets---*/
//Purchase Sprites
spriteset (spriteset_165_purchase,	                                                     "gfx/JNR/emu165_169/purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_165_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,         "gfx/JNR/emu165_169/purchase_32bpp.png")         {tmpl_purchase_dh_32bpp(0, 0)}

//165 Series
spriteset (spriteset_165_front,    	               "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_165_back,                     "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_165_mid,          	           "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_165_mid_panto,                "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_165_midgr_belt,    	         "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_165_midgr_nobelt,             "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_165_mid_sashashi,    		     "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_165_front,                      ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu165_169/Shonan/165-1-1.png")             {tmpl_std(0, 1)}
alternative_sprites(spriteset_165_back,                       ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu165_169/Shonan/165-1-1.png")             {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_165_mid,                        ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu165_169/Shonan/165-1-2.png")             {tmpl_std(0, 1)}
alternative_sprites(spriteset_165_mid_panto,                  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu165_169/Shonan/165-1-3.png")             {tmpl_std(0, 1)}
alternative_sprites(spriteset_165_midgr_belt,                 ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu165_169/Shonan/165-1-4.png")             {tmpl_std(0, 1)}
alternative_sprites(spriteset_165_midgr_nobelt,               ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu165_169/Shonan/165-1-5.png")             {tmpl_std(0, 1)}
alternative_sprites(spriteset_165_mid_sashashi,               ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu165_169/Shonan/165-1-6.png")             {tmpl_std(0, 1)}

spriteset (spriteset_165_rev_front,    	               "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_165_rev_back,                     "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_165_rev_mid,          	           "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_165_rev_mid_panto,                "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_165_rev_midgr_belt,    	         "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_165_rev_midgr_nobelt,             "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_165_rev_mid_sashashi,    		     "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_165_rev_front,                      ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu165_169/Shonan/165-1-1.png")             {tmpl_std(0, 26)}
alternative_sprites(spriteset_165_rev_back,                       ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu165_169/Shonan/165-1-1.png")             {tmpl_std(0, 1)}
alternative_sprites(spriteset_165_rev_mid,                        ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu165_169/Shonan/165-1-2.png")             {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_165_rev_mid_panto,                  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu165_169/Shonan/165-1-3.png")             {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_165_rev_midgr_belt,                 ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu165_169/Shonan/165-1-4.png")             {tmpl_std(0, 1)}
alternative_sprites(spriteset_165_rev_midgr_nobelt,               ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu165_169/Shonan/165-1-5.png")             {tmpl_std(0, 1)}
alternative_sprites(spriteset_165_rev_mid_sashashi,               ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu165_169/Shonan/165-1-6.png")             {tmpl_std(0, 1)}

spriteset (spriteset_165_revflip_front,    	               "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_165_revflip_back,                     "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_165_revflip_mid,          	           "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_165_revflip_mid_panto,                "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_165_revflip_midgr_belt,    	         "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_165_revflip_midgr_nobelt,             "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_165_revflip_mid_sashashi,    		     "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_165_revflip_front,                      ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu165_169/Shonan/165-1-1.png")             {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_165_revflip_back,                       ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu165_169/Shonan/165-1-1.png")             {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_165_revflip_mid,                        ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu165_169/Shonan/165-1-2.png")             {tmpl_std(0, 1)}
alternative_sprites(spriteset_165_revflip_mid_panto,                  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu165_169/Shonan/165-1-3.png")             {tmpl_std(0, 1)}
alternative_sprites(spriteset_165_revflip_midgr_belt,                 ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu165_169/Shonan/165-1-4.png")             {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_165_revflip_midgr_nobelt,               ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu165_169/Shonan/165-1-5.png")             {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_165_revflip_mid_sashashi,               ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu165_169/Shonan/165-1-6.png")             {tmpl_std_rev(0, 1)}

spriteset (spriteset_165_back_panto,                     "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_165_rev_back_panto,                     "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_165_revflip_back_panto,                     "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_165_back_panto,                 ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu165_169/Shonan/165-1-extra.png")             {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_165_rev_back_panto,             ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu165_169/Shonan/165-1-extra.png")             {tmpl_std(0, 1)}
alternative_sprites(spriteset_165_revflip_back_panto,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu165_169/Shonan/165-1-extra.png")             {tmpl_std_rev(0, 1)}



/*---END OF SECTION---*/



/*---GFX: Pantograph Positions---*/
//165
switch(FEAT_TRAINS,SELF, sw_165_gfx_pantograph_middle_default_extra, position_in_vehid_chain%3){
  0: spriteset_165_front;
  1: spriteset_165_mid_panto;
  2: spriteset_165_revflip_back;
}
switch(FEAT_TRAINS,SELF, sw_165_gfx_pantograph_middle_default_main, position_in_vehid_chain){
  0: spriteset_165_mid_panto;
  1: spriteset_165_revflip_back;
  2..3: spriteset_165_midgr_belt;
  4: spriteset_165_mid_sashashi;
  5: spriteset_165_mid;
  6: spriteset_165_front;
  default: sw_165_gfx_pantograph_middle_default_extra;
}
switch(FEAT_TRAINS,SELF, sw_165_gfx_pantograph_middle_idchain8, position_in_vehid_chain){
  1: spriteset_165_revflip_back;
  2..3: spriteset_165_midgr_belt;
  4: spriteset_165_mid_sashashi;
  5: spriteset_165_mid;
  6: spriteset_165_front;
  default: spriteset_165_mid_panto;
}
switch(FEAT_TRAINS,SELF, sw_165_gfx_pantograph_middle_idchain7, position_in_vehid_chain){
  1: spriteset_165_revflip_back;
  2..3: spriteset_165_midgr_belt;
  4: spriteset_165_mid_sashashi;
  5: spriteset_165_front;
  default: spriteset_165_mid_panto;
}
switch(FEAT_TRAINS,SELF, sw_165_gfx_pantograph_middle_idchain6, position_in_vehid_chain){
  1..2: spriteset_165_midgr_belt;
  3: spriteset_165_mid_sashashi;
  4: spriteset_165_front;
  default: spriteset_165_mid_panto;
}
switch(FEAT_TRAINS,SELF, sw_165_gfx_pantograph_middle_idchain5, position_in_vehid_chain){
  1: spriteset_165_mid;
  2..3: spriteset_165_midgr_belt;
  default: spriteset_165_mid_panto;
}
switch(FEAT_TRAINS,SELF, sw_165_gfx_pantograph_middle_idchain4, position_in_vehid_chain){
  1..2: spriteset_165_midgr_belt;
  default: spriteset_165_mid_panto;
}
switch(FEAT_TRAINS,SELF, sw_165_gfx_pantograph_pos, num_vehs_in_vehid_chain){
  0..4: sw_165_gfx_pantograph_middle_idchain4;
  5: sw_165_gfx_pantograph_middle_idchain5;
  6: sw_165_gfx_pantograph_middle_idchain6;
  7: sw_165_gfx_pantograph_middle_idchain7;
  8: sw_165_gfx_pantograph_middle_idchain8;
  default: sw_165_gfx_pantograph_middle_default_main;
}

/*---END OF SECTION---*/



/*---GFX: Train Reversing Switches---*/
//Livery Selection
switch(FEAT_TRAINS,SELF, sw_165_gfx_rev_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
8:spriteset_165_rev_back;
7:spriteset_165_rev_front;
6:spriteset_165_rev_mid_sashashi;
5:spriteset_165_rev_mid;
4:spriteset_165_rev_mid_panto;
3:spriteset_165_rev_midgr_nobelt;
2:spriteset_165_rev_midgr_belt;

1:spriteset_165_rev_front;
0:spriteset_165_rev_front;
}
switch(FEAT_TRAINS,SELF, sw_165_gfx_revflip_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
8:spriteset_165_revflip_back;
7:spriteset_165_revflip_front;
6:spriteset_165_revflip_mid_sashashi;
5:spriteset_165_revflip_mid;
4:spriteset_165_revflip_mid_panto;
3:spriteset_165_revflip_midgr_nobelt;
2:spriteset_165_revflip_midgr_belt;

1:spriteset_165_revflip_front;
0:spriteset_165_revflip_front;
}

switch(FEAT_TRAINS,SELF, sw_165_gfx_rev_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
8:spriteset_165_rev_back;
7:spriteset_165_rev_front;
6:spriteset_165_rev_mid_sashashi;
5:spriteset_165_rev_mid;
4:spriteset_165_rev_mid_panto;
3:spriteset_165_rev_midgr_nobelt;
2:spriteset_165_rev_midgr_belt;

1:spriteset_165_rev_back;
0:spriteset_165_rev_back;
}
switch(FEAT_TRAINS,SELF, sw_165_gfx_revflip_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
8:spriteset_165_revflip_back;
7:spriteset_165_revflip_front;
6:spriteset_165_revflip_mid_sashashi;
5:spriteset_165_revflip_mid;
4:spriteset_165_revflip_mid_panto;
3:spriteset_165_revflip_midgr_nobelt;
2:spriteset_165_revflip_midgr_belt;

1:spriteset_165_revflip_back;
0:spriteset_165_revflip_back;
}

switch(FEAT_TRAINS,SELF, sw_165_gfx_rev_back_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
8:spriteset_165_rev_back;
7:spriteset_165_rev_front;
6:spriteset_165_rev_mid_sashashi;
5:spriteset_165_rev_mid;
4:spriteset_165_rev_mid_panto;
3:spriteset_165_rev_midgr_nobelt;
2:spriteset_165_rev_midgr_belt;

1:spriteset_165_rev_back_panto;
0:spriteset_165_rev_back_panto;
}
switch(FEAT_TRAINS,SELF, sw_165_gfx_revflip_back_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
8:spriteset_165_revflip_back;
7:spriteset_165_revflip_front;
6:spriteset_165_revflip_mid_sashashi;
5:spriteset_165_revflip_mid;
4:spriteset_165_revflip_mid_panto;
3:spriteset_165_revflip_midgr_nobelt;
2:spriteset_165_revflip_midgr_belt;

1:spriteset_165_revflip_back_panto;
0:spriteset_165_revflip_back_panto;
}

switch(FEAT_TRAINS,SELF, sw_165_gfx_rev_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
8:spriteset_165_rev_back;
7:spriteset_165_rev_front;
6:spriteset_165_rev_mid_sashashi;
5:spriteset_165_rev_mid;
4:spriteset_165_rev_mid_panto;
3:spriteset_165_rev_midgr_nobelt;
2:spriteset_165_rev_midgr_belt;

1:spriteset_165_rev_mid;
0:spriteset_165_rev_mid;
}
switch(FEAT_TRAINS,SELF, sw_165_gfx_revflip_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
8:spriteset_165_revflip_back;
7:spriteset_165_revflip_front;
6:spriteset_165_revflip_mid_sashashi;
5:spriteset_165_revflip_mid;
4:spriteset_165_revflip_mid_panto;
3:spriteset_165_revflip_midgr_nobelt;
2:spriteset_165_revflip_midgr_belt;

1:spriteset_165_revflip_mid;
0:spriteset_165_revflip_mid;
}

switch(FEAT_TRAINS,PARENT, sw_165_gfx_rev_mid_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
8:spriteset_165_rev_back;
7:spriteset_165_rev_front;
6:spriteset_165_rev_mid_sashashi;
5:spriteset_165_rev_mid;
4:spriteset_165_rev_mid_panto;
3:spriteset_165_rev_midgr_nobelt;
2:spriteset_165_rev_midgr_belt;

1:spriteset_165_rev_mid_panto;
0:spriteset_165_rev_mid_panto;
}
switch(FEAT_TRAINS,PARENT, sw_165_gfx_revflip_mid_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
8:spriteset_165_revflip_back;
7:spriteset_165_revflip_front;
6:spriteset_165_revflip_mid_sashashi;
5:spriteset_165_revflip_mid;
4:spriteset_165_revflip_mid_panto;
3:spriteset_165_revflip_midgr_nobelt;
2:spriteset_165_revflip_midgr_belt;

1:spriteset_165_revflip_mid_panto;
0:spriteset_165_revflip_mid_panto;
}

switch(FEAT_TRAINS,SELF, sw_165_gfx_rev_midgr_belt_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
8:spriteset_165_rev_back;
7:spriteset_165_rev_front;
6:spriteset_165_rev_mid_sashashi;
5:spriteset_165_rev_mid;
4:spriteset_165_rev_mid_panto;
3:spriteset_165_rev_midgr_nobelt;
2:spriteset_165_rev_midgr_belt;

1:spriteset_165_rev_midgr_belt;
0:spriteset_165_rev_midgr_belt;
}
switch(FEAT_TRAINS,SELF, sw_165_gfx_revflip_midgr_belt_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
8:spriteset_165_revflip_back;
7:spriteset_165_revflip_front;
6:spriteset_165_revflip_mid_sashashi;
5:spriteset_165_revflip_mid;
4:spriteset_165_revflip_mid_panto;
3:spriteset_165_revflip_midgr_nobelt;
2:spriteset_165_revflip_midgr_belt;

1:spriteset_165_revflip_midgr_belt;
0:spriteset_165_revflip_midgr_belt;
}

switch(FEAT_TRAINS,SELF, sw_165_gfx_rev_midgr_nobelt_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
8:spriteset_165_rev_back;
7:spriteset_165_rev_front;
6:spriteset_165_rev_mid_sashashi;
5:spriteset_165_rev_mid;
4:spriteset_165_rev_mid_panto;
3:spriteset_165_rev_midgr_nobelt;
2:spriteset_165_rev_midgr_belt;

1:spriteset_165_rev_midgr_nobelt;
0:spriteset_165_rev_midgr_nobelt;
}
switch(FEAT_TRAINS,SELF, sw_165_gfx_revflip_midgr_nobelt_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
8:spriteset_165_revflip_back;
7:spriteset_165_revflip_front;
6:spriteset_165_revflip_mid_sashashi;
5:spriteset_165_revflip_mid;
4:spriteset_165_revflip_mid_panto;
3:spriteset_165_revflip_midgr_nobelt;
2:spriteset_165_revflip_midgr_belt;

1:spriteset_165_revflip_midgr_nobelt;
0:spriteset_165_revflip_midgr_nobelt;
}

switch(FEAT_TRAINS,SELF, sw_165_gfx_rev_mid_sashashi_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
8:spriteset_165_rev_back;
7:spriteset_165_rev_front;
6:spriteset_165_rev_mid_sashashi;
5:spriteset_165_rev_mid;
4:spriteset_165_rev_mid_panto;
3:spriteset_165_rev_midgr_nobelt;
2:spriteset_165_rev_midgr_belt;

1:spriteset_165_rev_mid_sashashi;
0:spriteset_165_rev_mid_sashashi;
}
switch(FEAT_TRAINS,SELF, sw_165_gfx_revflip_mid_sashashi_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
8:spriteset_165_revflip_back;
7:spriteset_165_revflip_front;
6:spriteset_165_revflip_mid_sashashi;
5:spriteset_165_revflip_mid;
4:spriteset_165_revflip_mid_panto;
3:spriteset_165_revflip_midgr_nobelt;
2:spriteset_165_revflip_midgr_belt;
1:spriteset_165_revflip_mid_sashashi;
0:spriteset_165_revflip_mid_sashashi;
}

//Check for flipped vehicles (dual_headed)
switch(FEAT_TRAINS, SELF, sw_165_gfx_rev_front_flippedcheck, vehicle_is_flipped) {
  1: sw_165_gfx_revflip_front_livery;
 default: sw_165_gfx_rev_front_livery;
}
switch(FEAT_TRAINS, SELF, sw_165_gfx_rev_back_flippedcheck, vehicle_is_flipped) {
  1: sw_165_gfx_revflip_back_livery;
 default: sw_165_gfx_rev_back_livery;
}
switch(FEAT_TRAINS, SELF, sw_165_gfx_rev_mid_flippedcheck, vehicle_is_flipped) {
  1: sw_165_gfx_revflip_mid_livery;
 default: sw_165_gfx_rev_mid_livery;
}
switch(FEAT_TRAINS, SELF, sw_165_gfx_rev_mid_panto_flippedcheck, vehicle_is_flipped) {
  1: sw_165_gfx_revflip_mid_panto_livery;
 default: sw_165_gfx_rev_mid_panto_livery;
}
switch(FEAT_TRAINS, SELF, sw_165_gfx_rev_midgr_belt_flippedcheck, vehicle_is_flipped) {
  1: sw_165_gfx_rev_midgr_belt_livery;
 default: sw_165_gfx_revflip_midgr_belt_livery;
}
switch(FEAT_TRAINS, SELF, sw_165_gfx_rev_midgr_nobelt_flippedcheck, vehicle_is_flipped) {
  1: sw_165_gfx_rev_midgr_nobelt_livery;
 default: sw_165_gfx_revflip_midgr_nobelt_livery;
}
switch(FEAT_TRAINS, SELF, sw_165_gfx_rev_mid_sashashi_flippedcheck, vehicle_is_flipped) {
  1: sw_165_gfx_rev_mid_sashashi_livery;
 default: sw_165_gfx_revflip_mid_sashashi_livery;
}
switch(FEAT_TRAINS, SELF, sw_165_gfx_rev_back_panto_flippedcheck, vehicle_is_flipped) {
  1: sw_165_gfx_revflip_back_panto_livery;
 default: sw_165_gfx_rev_back_panto_livery;
}


//Pantograph Position Testing
switch(FEAT_TRAINS, SELF, sw_165_gfx_rev_pantograph_pos_default_extra, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%3]){ //look at opposite position_in_vehID_chain
  0: sw_165_gfx_rev_front_flippedcheck;
  1: sw_165_gfx_rev_mid_panto_flippedcheck;
  2: sw_165_gfx_rev_back_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_165_gfx_rev_pantograph_pos_default_main, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  0: sw_165_gfx_rev_mid_panto_flippedcheck;
  1: sw_165_gfx_rev_back_flippedcheck;
  2..3: sw_165_gfx_rev_midgr_belt_flippedcheck;
  4: sw_165_gfx_rev_mid_sashashi_flippedcheck;
  5: sw_165_gfx_rev_mid_flippedcheck;
  6: sw_165_gfx_rev_front_flippedcheck;
  default: sw_165_gfx_rev_pantograph_pos_default_extra;
}
switch(FEAT_TRAINS, SELF, sw_165_gfx_rev_pantograph_pos_idchain8, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  1: sw_165_gfx_rev_back_flippedcheck;
  2..3: sw_165_gfx_rev_midgr_belt_flippedcheck;
  4: sw_165_gfx_rev_mid_sashashi_flippedcheck;
  5: sw_165_gfx_rev_mid_flippedcheck;
  6: sw_165_gfx_rev_front_flippedcheck;
  default: sw_165_gfx_rev_mid_panto_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_165_gfx_rev_pantograph_pos_idchain7, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  1: sw_165_gfx_rev_back_flippedcheck;
  2..3: sw_165_gfx_rev_midgr_belt_flippedcheck;
  4: sw_165_gfx_rev_mid_sashashi_flippedcheck;
  5: sw_165_gfx_rev_front_flippedcheck;
  default: sw_165_gfx_rev_mid_panto_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_165_gfx_rev_pantograph_pos_idchain6, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  1..2: sw_165_gfx_rev_midgr_belt_flippedcheck;
  3: sw_165_gfx_rev_mid_sashashi_flippedcheck;
  4: sw_165_gfx_rev_front_flippedcheck;
  default: sw_165_gfx_rev_mid_panto_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_165_gfx_rev_pantograph_pos_idchain5, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  1: sw_165_gfx_rev_mid_flippedcheck;
  2..3: sw_165_gfx_rev_midgr_belt_flippedcheck;
  default: sw_165_gfx_rev_mid_panto_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_165_gfx_rev_pantograph_pos_idchain4, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  1..2: sw_165_gfx_rev_midgr_belt_flippedcheck;
  default: sw_165_gfx_rev_mid_panto_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_165_gfx_rev_pantograph_pos, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 16, 0x000000FF, 0x41]]){ //look at opposite num_vehs_in_vehid_chain
  0..4: sw_165_gfx_rev_pantograph_pos_idchain4;
  5: sw_165_gfx_rev_pantograph_pos_idchain5;
  6: sw_165_gfx_rev_pantograph_pos_idchain6;
  7: sw_165_gfx_rev_pantograph_pos_idchain7;
  8: sw_165_gfx_rev_pantograph_pos_idchain8;
  default: sw_165_gfx_rev_pantograph_pos_default_main;
}
switch(FEAT_TRAINS,SELF, sw_165_gfx_rev_mid_refitcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){ //look at opposite refit livery id
  8: sw_165_gfx_rev_back_flippedcheck;
  7: sw_165_gfx_rev_front_flippedcheck;
  6: sw_165_gfx_rev_mid_sashashi_flippedcheck;
  5: sw_165_gfx_rev_mid_flippedcheck;
  4: sw_165_gfx_rev_mid_panto_flippedcheck;
  3: sw_165_gfx_rev_midgr_nobelt_flippedcheck;
  2: sw_165_gfx_rev_midgr_belt_flippedcheck;

  1: sw_165_gfx_rev_pantograph_pos;
  0: sw_165_gfx_rev_pantograph_pos;
}


//Back Car Pantograph Testing
switch(FEAT_TRAINS, SELF, sw_165_gfx_rev_back_pantocheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
 0: sw_165_gfx_rev_back_flippedcheck;
 default: sw_165_gfx_rev_back_panto_flippedcheck;
}

//Front/Back Car Position Testing
switch(FEAT_TRAINS, SELF, sw_165_gfx_rev_frontback_nomucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_165_gfx_rev_front_flippedcheck;
  0:sw_165_gfx_rev_back_pantocheck;
}
switch(FEAT_TRAINS, SELF, sw_165_gfx_rev_frontback_aftermucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_165_gfx_rev_back_pantocheck;
  0:sw_165_gfx_rev_front_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_165_gfx_rev_frontback_mucarcheck, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F),STORE_TEMP(var[0x61, 0, 0x000000FF, 0x41],0),  //look at opposite position_in_vehID_chain
STORE_TEMP((position_in_consist_from_end-position_in_consist-1)-LOAD_TEMP(0), 0x10F),                               //look at what is ahead of the first vehicle in the vehID_chain
var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000:sw_165_gfx_rev_frontback_aftermucars;
  default:sw_165_gfx_rev_frontback_nomucars;
}
switch(FEAT_TRAINS, SELF, sw_165_gfx_rev_frontback_sameid, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist+1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle behind of opposite vehicle
  2033:sw_165_gfx_rev_frontback_mucarcheck;
  1000:sw_165_gfx_rev_front_flippedcheck;
  default:sw_165_gfx_rev_back_pantocheck;
}
switch(FEAT_TRAINS, SELF, sw_165_gfx_rev_frontback, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle infront of opposite vehicle
  2033:sw_165_gfx_rev_frontback_sameid;
  1000:sw_165_gfx_rev_back_pantocheck;
  default:sw_165_gfx_rev_front_flippedcheck;
}

//ID Testing
switch(FEAT_TRAINS, SELF, sw_165_gfx_rev_idcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of opposite vehicle
  1000: sw_165_gfx_rev_mid_refitcheck;
  2033: sw_165_gfx_rev_frontback;
}
/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/
//165 series shonan
switch(FEAT_TRAINS, SELF, sw_165_gfx_pantocheck, position_in_vehid_chain){
 0: spriteset_165_back;
 default: spriteset_165_back_panto;
}
switch(FEAT_TRAINS, SELF, sw_165_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_165_front;
 default: sw_165_gfx_pantocheck;
}
switch(FEAT_TRAINS, PARENT, sw_165_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_165_gfx_frontback_flipcheck;
 default: sw_165_gfx_rev_idcheck;
}

/*---END OF SECTION---*/



/*---GFX: Middle Car Switches---*/
//165
switch(FEAT_TRAINS, SELF, sw_165_gfx_cargosubtype, cargo_subtype){
  8: spriteset_165_revflip_back;
  7: spriteset_165_front;
  6: spriteset_165_mid_sashashi;
  5: spriteset_165_mid;
  4: spriteset_165_mid_panto;
  3: spriteset_165_midgr_nobelt;
  2: spriteset_165_midgr_belt;
  1: sw_165_gfx_pantograph_pos;
  0: sw_165_gfx_pantograph_pos;
}

switch(FEAT_TRAINS, PARENT, sw_165_gfx_mucar_revcheck_mid, vehicle_is_reversed){
    0: sw_165_gfx_cargosubtype;
    default: sw_165_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Livery Refitting Switches---*/
//Main Switches
switch(FEAT_TRAINS, SELF, sw_165_gfx_mucar,  cargo_subtype) {
  default: sw_165_gfx_mucar_revcheck_mid;
}
switch(FEAT_TRAINS, PARENT, sw_165_gfx_main,  cargo_subtype) {
  0: sw_165_gfx_frontback_revcheck;
}

//Menu Switches
switch(FEAT_TRAINS, SELF, sw_165_subtypetext_mucar, cargo_subtype) {
  8: string(jnr165_shonan_cabbk);
  7: string(jnr165_shonan_cabfr);
  6: string(jnr165_shonan_sashashi);
  5: string(jnr165_shonan_mu);
  4: string(jnr165_shonan_pt);
  3: string(jnr165_shonan_grnb);
  2: string(jnr165_shonan_grb);
  1: string(jnr165_DIV_shonan);
  0: string(jnr165_SHONAN);
}
switch(FEAT_TRAINS, SELF, sw_165_subtypetext_main, cargo_subtype) {
  0: string(jnr165_SHONAN);
}
/*---END OF SECTION---*/



//Coupling
  switch(FEAT_TRAINS, SELF, sw_165_attach_vehid, [vehicle_type_id == emu_165 || vehicle_type_id == mu_car]) {
  0: return string(MU_UNIQUE);
  }



item(FEAT_TRAINS, emu_165) {
    property {
        name:                         string(JNR_165);
        introduction_date:            date(1963, 02, 22);
        model_life:                   7;
        vehicle_life:                 39;
        reliability_decay:            11;

        cargo_capacity:               param_capacity_rapid;
        loading_speed:                param_loading_2D;
        cost_factor:                  17;
        running_cost_factor:          51;

        speed:                        110 km/h;
        track_type:                   NARROW_OHLE;
        power:                        480 kW;
        weight:                       37 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  1;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_ELECTRIC;
        engine_class:                 ENGINE_CLASS_ELECTRIC;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                      sw_165_gfx_main;
		    purchase:                 spriteset_165_purchase;
		    additional_text:	      return string(JNR_165_DESC);
        cargo_subtype_text:           sw_165_subtypetext_main;
        can_attach_wagon:			  sw_165_attach_vehid;
        //start_stop:                   ;
    }
    /*Multiple Unit Car*/
      livery_override(mu_car){
        default:                      sw_165_gfx_mucar;
        cargo_capacity:               param_capacity_rapid;
        loading_speed:                param_loading_2D;
        cargo_subtype_text:           sw_165_subtypetext_mucar;
        power: 120;
        weight: 27;
      }

}
# 1 "JPplus.pnml" 4

//#include "src/JNR/EMU/201_series.pnml"
//#include "src/JNR/EMU/205_series.pnml"
//#include "src/JNR/EMU/211_series.pnml"
# 1 "src/JNR/EMU/213_series.pnml" 1


/*---GFX: Year Dependent Graphics---*/

//213 Shonan
switch(FEAT_TRAINS, SELF, sw_213_gfx_year_back_shonan_pantograph, current_year){
 0..2007: spriteset_213_back_darm_shonan;
 default: spriteset_213_back_sarm_shonan;
}
switch(FEAT_TRAINS, SELF, sw_213_gfx_year_front_shonan, current_year){
 0..2010: spriteset_213_front_old_shonan;
 default: spriteset_213_front_new_shonan;
}
/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/

//213 JRwest
switch(FEAT_TRAINS, SELF, sw_213_gfx_front_liverycheck_jrw, cargo_subtype) {
6:spriteset_213_front_s5;
5:spriteset_213_front_s4;
4:spriteset_213_front_s3;
3:spriteset_213_front_s2;
2:spriteset_213_front_s1;
default:spriteset_213_front_jrw;
}
switch(FEAT_TRAINS, SELF, sw_213_gfx_frontback_flipcheck_jrw, vehicle_is_flipped){
 0: sw_213_gfx_front_liverycheck_jrw;
 default: spriteset_213_back_jrw;
}
switch(FEAT_TRAINS, PARENT, sw_213_gfx_frontback_revcheck_jrw, vehicle_is_reversed){
 0: sw_213_gfx_frontback_flipcheck_jrw;
 default: sw_211group_gfx_rev_idcheck;
}

//213 Shonan
switch(FEAT_TRAINS, SELF, sw_213_gfx_frontback_flipcheck_shonan, vehicle_is_flipped){
 0: sw_213_gfx_year_front_shonan;
 default: sw_213_gfx_year_back_shonan_pantograph;
}
switch(FEAT_TRAINS, PARENT, sw_213_gfx_frontback_revcheck_shonan, vehicle_is_reversed){
 0: sw_213_gfx_frontback_flipcheck_shonan;
 default: sw_211group_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Middle Car Switches---*/

//213 JRwest
switch(FEAT_TRAINS, PARENT, sw_213_gfx_mucar_revcheck_jrw, vehicle_is_reversed){
 0: spriteset_213_mid_jrw;
 default: sw_211group_gfx_rev_idcheck;
}

//213 Shonan
switch(FEAT_TRAINS, PARENT, sw_213_gfx_mucar_revcheck_shonan, vehicle_is_reversed){
 0: spriteset_213_mid_jrw;
 default: sw_211group_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Livery Refitting Switches---*/

//Main Switches
switch(FEAT_TRAINS, SELF, sw_213_gfx_mucar,  cargo_subtype) {
1:  sw_213_gfx_mucar_revcheck_shonan;
default:  sw_213_gfx_mucar_revcheck_jrw;
}
switch(FEAT_TRAINS, SELF, sw_213_gfx_main,  cargo_subtype) {
1:  sw_213_gfx_frontback_revcheck_shonan;
default:  sw_213_gfx_frontback_revcheck_jrw;
}

//Menu Switches
switch(FEAT_TRAINS, SELF, sw_213_subtypetext_mucar, cargo_subtype) {
6: string(JRWyumeji5_LV);
5: string(JRWyumeji4_LV);
4: string(JRWyumeji3_LV);
3: string(JRWyumeji2_LV);
2: string(JRWyumeji1_LV);
1: string(SHONAN_LV);
0: string(JRWbluestd_LV);
}
switch(FEAT_TRAINS, SELF, sw_213_subtypetext_main, cargo_subtype) {
6: string(JRWyumeji5_LV);
5: string(JRWyumeji4_LV);
4: string(JRWyumeji3_LV);
3: string(JRWyumeji2_LV);
2: string(JRWyumeji1_LV);
1: string(SHONAN_LV);
0: string(JRWbluestd_LV);
}
/*---END OF SECTION---*/


//Coupling
  switch(FEAT_TRAINS, SELF, sw_213_attach_vehid, [vehicle_type_id == emu_211 || vehicle_type_id == emu_21156 ||vehicle_type_id == emu_213 || vehicle_type_id == emu_313 || vehicle_type_id == emu_311 || vehicle_type_id == mu_car]) {
  0: return string(MU_UNIQUE);
  }


item(FEAT_TRAINS, emu_213) {
    property {
        name:                         string(JNR_213);
        introduction_date:            date(1987, 03, 11);
        model_life:                   4;
        vehicle_life:                 40;
        reliability_decay:            14;

        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_2D;
        cost_factor:                  17;
        running_cost_factor:          51;

        speed:                        110 km/h;
        track_type:                   NARROW_OHLE;
        power:                        480 kW;
        weight:                       35 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  1;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_ELECTRIC;
        engine_class:                 ENGINE_CLASS_ELECTRIC;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                      sw_213_gfx_main;
		    purchase:                 spriteset_213_purchase;
		    additional_text:	      return string(JNR_213_DESC);
        cargo_subtype_text:           sw_213_subtypetext_main;
        can_attach_wagon:			  sw_213_attach_vehid;
        //start_stop:                   ;
    }
    /*Multiple Unit Car*/
      livery_override(mu_car){
        default:                      sw_213_gfx_mucar;
        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_2D;
        cargo_subtype_text:           sw_213_subtypetext_mucar;
        power: 120;
        weight: 25;
      }

}
# 1 "JPplus.pnml" 4

//#include "src/JNR/EMU/711_series.pnml"


//JR-Hokkaido


//JR-East
# 1 "src/JRE/DMU/KH110_series.pnml" 1
/*---GFX: Spritesets---*/

/*---END OF SECTION---*/



/*---GFX: Pantograph Positions---*/

/*---END OF SECTION---*/



/*---GFX: Train Reversing Switches---*/

/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/
//KH110 JR Green
switch(FEAT_TRAINS, PARENT, sw_KH110_green_gfx_frontback_revcheck, vehicle_is_reversed){
 0: spriteset_KH110_green;
 default: sw_JREKHgroup_gfx_rev_idcheck;
}
//KH110 JR Green Black Front
switch(FEAT_TRAINS, PARENT, sw_KH110_greenblack_gfx_frontback_revcheck, vehicle_is_reversed){
 0: spriteset_KH110_greenblack;
 default: sw_JREKHgroup_gfx_rev_idcheck;
}
//KH110 Rikku East Line
switch(FEAT_TRAINS, PARENT, sw_KH110_rikku_gfx_frontback_revcheck, vehicle_is_reversed){
 0: spriteset_KH110_rikku;
 default: sw_JREKHgroup_gfx_rev_idcheck;
}
//KH110 Akita Relay
switch(FEAT_TRAINS, PARENT, sw_KH110_akita_gfx_frontback_revcheck, vehicle_is_reversed){
 0: spriteset_KH110_akita;
 default: sw_JREKHgroup_gfx_rev_idcheck;
}
//KH110 VOITURE AMITIE
switch(FEAT_TRAINS, PARENT, sw_KH110_voitami_gfx_frontback_revcheck, vehicle_is_reversed){
 0: spriteset_KH110_voitami;
 default: sw_JREKHgroup_gfx_rev_idcheck;
}
//KH110 Metropolitan Koumi Line Special
switch(FEAT_TRAINS, PARENT, sw_KH110_metrored_gfx_frontback_revcheck, vehicle_is_reversed){
 0: spriteset_KH110_metrored;
 default: sw_JREKHgroup_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Middle Car Switches---*/

/*---END OF SECTION---*/



/*---GFX: Livery Refitting Switches---*/
//Main Switches
switch(FEAT_TRAINS, SELF, sw_KH110_gfx_main, cargo_subtype) {
  5: sw_KH110_metrored_gfx_frontback_revcheck;
  4: sw_KH110_voitami_gfx_frontback_revcheck;
  3: sw_KH110_akita_gfx_frontback_revcheck;
  2: sw_KH110_rikku_gfx_frontback_revcheck;
  1: sw_KH110_greenblack_gfx_frontback_revcheck;
  0: sw_KH110_green_gfx_frontback_revcheck;
}

//Menu Switches
switch(FEAT_TRAINS, SELF, sw_KH110_subtypetext_main, cargo_subtype) {
  5: string(JREKH110_METRORED);
  4: string(JREKH110_VOITAMI);
  3: string(JREKH110_AKITA);
  2: string(JREKH110_RIKKU);
  1: string(JREKH110_GREENBL);
  0: string(JREKH110_GREEN);
}

/*---END OF SECTION---*/



//Coupling
  switch(FEAT_TRAINS, SELF, sw_KH110_attach_vehid, [vehicle_type_id == dmu_KH110 || vehicle_type_id == dmu_KH111 || vehicle_type_id == dmu_KHE120 || vehicle_type_id == dmu_KHE130 || vehicle_type_id == dmu_KHE131]) {
  0: return string(MU_UNIQUE);
  }



item(FEAT_TRAINS, dmu_KH110) {
    property {
        name:                         string(JRE_KH110);
        introduction_date:            date(1989, 02, 02);
        model_life:                   10;
        vehicle_life:                 35;
        reliability_decay:            12;

        cargo_capacity:               param_capacity_rapid;
        loading_speed:                param_loading_2D;
        cost_factor:                  17;
        running_cost_factor:          51;

        speed:                        100 km/h;
        track_type:                   NARROW_NOEL;
        power:                        235 kW;
        weight:                       39 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  0;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_DIESEL;
        engine_class:                 ENGINE_CLASS_DIESEL;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_DIESEL, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                      sw_KH110_gfx_main;
		    purchase:                 spriteset_KH110_purchase;
		    additional_text:	      return string(JRE_KH110_DESC);
        cargo_subtype_text:           sw_KH110_subtypetext_main;
        can_attach_wagon:			  sw_KH110_attach_vehid;
        //start_stop:                   ;
    }
}
# 1 "JPplus.pnml" 4
# 1 "src/JRE/DMU/KH111_series.pnml" 1
/*---GFX: Spritesets---*/

/*---END OF SECTION---*/



/*---GFX: Pantograph Positions---*/

/*---END OF SECTION---*/



/*---GFX: Train Reversing Switches---*/

/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/
//KH111 Green
switch(FEAT_TRAINS, SELF, sw_KH111_green_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_KH111_front_green;
 default: spriteset_KH111_back_green;
}
switch(FEAT_TRAINS, PARENT, sw_KH111_green_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_KH111_green_gfx_frontback_flipcheck;
 default: sw_JREKHgroup_gfx_rev_idcheck;
}
//KH111 Hachiko Line
switch(FEAT_TRAINS, SELF, sw_KH111_hachiko_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_KH111_front_hachiko;
 default: spriteset_KH111_back_hachiko;
}
switch(FEAT_TRAINS, PARENT, sw_KH111_hachiko_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_KH111_hachiko_gfx_frontback_flipcheck;
 default: sw_JREKHgroup_gfx_rev_idcheck;
}
//KH111 Rikuu Line
switch(FEAT_TRAINS, SELF, sw_KH111_rikuu_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_KH111_front_rikuu;
 default: spriteset_KH111_back_rikuu;
}
switch(FEAT_TRAINS, PARENT, sw_KH111_rikuu_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_KH111_rikuu_gfx_frontback_flipcheck;
 default: sw_JREKHgroup_gfx_rev_idcheck;
}
//KH111 Akita Relay
switch(FEAT_TRAINS, SELF, sw_KH111_akita_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_KH111_front_akita;
 default: spriteset_KH111_back_akita;
}
switch(FEAT_TRAINS, PARENT, sw_KH111_akita_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_KH111_akita_gfx_frontback_flipcheck;
 default: sw_JREKHgroup_gfx_rev_idcheck;
}
//KH111 Express Koumi Line Special
switch(FEAT_TRAINS, SELF, sw_KH111_koumi_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_KH111_front_koumi;
 default: spriteset_KH111_back_koumi;
}
switch(FEAT_TRAINS, PARENT, sw_KH111_koumi_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_KH111_koumi_gfx_frontback_flipcheck;
 default: sw_JREKHgroup_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Middle Car Switches---*/

/*---END OF SECTION---*/



/*---GFX: Livery Refitting Switches---*/
//Main Switches
switch(FEAT_TRAINS, SELF, sw_KH111_gfx_main, cargo_subtype) {
  4: sw_KH111_koumi_gfx_frontback_revcheck;   
  3: sw_KH111_akita_gfx_frontback_revcheck;
  2: sw_KH111_rikuu_gfx_frontback_revcheck;
  1: sw_KH111_hachiko_gfx_frontback_revcheck;
  0: sw_KH111_green_gfx_frontback_revcheck;
}

//Menu Switches
switch(FEAT_TRAINS, SELF, sw_KH111_subtypetext_main, cargo_subtype) {
  4: string(JREKH111_EXPRED);
  3: string(JREKH110_AKITA);
  2: string(JREKH110_RIKKU);
  1: string(JREKH111_HACHIKO);
  0: string(JREKH110_GREEN);
}

/*---END OF SECTION---*/



//Coupling
  switch(FEAT_TRAINS, SELF, sw_KH111_attach_vehid, [vehicle_type_id == dmu_KH110 || vehicle_type_id == dmu_KH111 || vehicle_type_id == dmu_KHE120 || vehicle_type_id == dmu_KHE130 || vehicle_type_id == dmu_KHE131]) {
  0: return string(MU_UNIQUE);
  }



item(FEAT_TRAINS, dmu_KH111) {
    property {
        name:                         string(JRE_KH111);
        introduction_date:            date(1990, 06, 02);
        model_life:                   10;
        vehicle_life:                 35;
        reliability_decay:            12;

        cargo_capacity:               param_capacity_rapid;
        loading_speed:                param_loading_2D;
        cost_factor:                  17;
        running_cost_factor:          51;

        speed:                        100 km/h;
        track_type:                   NARROW_NOEL;
        power:                        235 kW;
        weight:                       39 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  1;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_DIESEL;
        engine_class:                 ENGINE_CLASS_DIESEL;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_DIESEL, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                      sw_KH111_gfx_main;
		    purchase:                 spriteset_KH111_purchase;
		    additional_text:	      return string(JRE_KH111_DESC);
        cargo_subtype_text:           sw_KH111_subtypetext_main;
        can_attach_wagon:			  sw_KH111_attach_vehid;
        //start_stop:                   ;
    }
}
# 1 "JPplus.pnml" 4

# 1 "src/JRE/DMU/KHE120_series.pnml" 1
/*---GFX: Spritesets---*/

/*---END OF SECTION---*/



/*---GFX: Pantograph Positions---*/

/*---END OF SECTION---*/



/*---GFX: Train Reversing Switches---*/

/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/
//KHE120 Orange
switch(FEAT_TRAINS, PARENT, sw_KHE120_orange_gfx_frontback_revcheck, vehicle_is_reversed){
 0: spriteset_KHE120_orange;
 default: sw_JREKHgroup_gfx_rev_idcheck;
}
//KHE120 Green
switch(FEAT_TRAINS, PARENT, sw_KHE120_green_gfx_frontback_revcheck, vehicle_is_reversed){
 0: spriteset_KHE120_green;
 default: sw_JREKHgroup_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Middle Car Switches---*/

/*---END OF SECTION---*/



/*---GFX: Livery Refitting Switches---*/
//Main Switches
switch(FEAT_TRAINS, SELF, sw_KHE120_gfx_main, cargo_subtype) {
  1: sw_KHE120_green_gfx_frontback_revcheck;
  0: sw_KHE120_orange_gfx_frontback_revcheck;
}

//Menu Switches
switch(FEAT_TRAINS, SELF, sw_KHE120_subtypetext_main, cargo_subtype) {
  1: string(JREKHE120_GR);
  0: string(JREKHE120_OR);
}

/*---END OF SECTION---*/



//Coupling
  switch(FEAT_TRAINS, SELF, sw_KHE120_attach_vehid, [vehicle_type_id == dmu_KH110 || vehicle_type_id == dmu_KH111 || vehicle_type_id == dmu_KHE120 || vehicle_type_id == dmu_KHE130 || vehicle_type_id == dmu_KHE131]) {
  0: return string(MU_UNIQUE);
  }



item(FEAT_TRAINS, dmu_KHE120) {
    property {
        name:                         string(JRE_KHE120);
        introduction_date:            date(2008, 11, 13);
        model_life:                   1;
        vehicle_life:                 35;
        reliability_decay:            12;

        cargo_capacity:               param_capacity_rapid;
        loading_speed:                param_loading_2D;
        cost_factor:                  17;
        running_cost_factor:          51;

        speed:                        100 km/h;
        track_type:                   NARROW_NOEL;
        power:                        331 kW;
        weight:                       38 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  0;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_DIESEL;
        engine_class:                 ENGINE_CLASS_DIESEL;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_DIESEL, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                      sw_KHE120_gfx_main;
		    purchase:                 spriteset_KHE120_purchase;
		    additional_text:	      return string(JRE_KHE120_DESC);
        cargo_subtype_text:           sw_KHE120_subtypetext_main;
        can_attach_wagon:			  sw_KHE120_attach_vehid;
        //start_stop:                   ;
    }
}
# 1 "JPplus.pnml" 4
# 1 "src/JRE/DMU/KHE130_series.pnml" 1
/*---GFX: Spritesets---*/

/*---END OF SECTION---*/



/*---GFX: Pantograph Positions---*/

/*---END OF SECTION---*/



/*---GFX: Train Reversing Switches---*/

/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/
//KHE130 Suigun
switch(FEAT_TRAINS, PARENT, sw_KHE130_suigun_gfx_frontback_revcheck, vehicle_is_reversed){
 0: spriteset_KHE130_suigun;
 default: sw_JREKHgroup_gfx_rev_idcheck;
}
//KHE130 Kurui
switch(FEAT_TRAINS, PARENT, sw_KHE130_kurui_gfx_frontback_revcheck, vehicle_is_reversed){
 0: spriteset_KHE130_kurui;
 default: sw_JREKHgroup_gfx_rev_idcheck;
}
//KHE130 Hachi
switch(FEAT_TRAINS, PARENT, sw_KHE130_hachi_gfx_frontback_revcheck, vehicle_is_reversed){
 0: spriteset_KHE130_hachi;
 default: sw_JREKHgroup_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Middle Car Switches---*/

/*---END OF SECTION---*/



/*---GFX: Livery Refitting Switches---*/
//Main Switches
switch(FEAT_TRAINS, SELF, sw_KHE130_gfx_main, cargo_subtype) {
  2: sw_KHE130_hachi_gfx_frontback_revcheck;
  1: sw_KHE130_kurui_gfx_frontback_revcheck;
  0: sw_KHE130_suigun_gfx_frontback_revcheck;
}

//Menu Switches
switch(FEAT_TRAINS, SELF, sw_KHE130_subtypetext_main, cargo_subtype) {
  2: string(JREKHE130_HA);
  1: string(JREKHE130_KU);
  0: string(JREKHE130_SU);
}

/*---END OF SECTION---*/



//Coupling
  switch(FEAT_TRAINS, SELF, sw_KHE130_attach_vehid, [vehicle_type_id == dmu_KH110 || vehicle_type_id == dmu_KH111 || vehicle_type_id == dmu_KHE120 || vehicle_type_id == dmu_KHE130 || vehicle_type_id == dmu_KHE131]) {
  0: return string(MU_UNIQUE);
  }



item(FEAT_TRAINS, dmu_KHE130) {
    property {
        name:                         string(JRE_KHE130);
        introduction_date:            date(2007, 01, 19);
        model_life:                   10;
        vehicle_life:                 35;
        reliability_decay:            12;

        cargo_capacity:               param_capacity_rapid;
        loading_speed:                param_loading_3D;
        cost_factor:                  17;
        running_cost_factor:          51;

        speed:                        100 km/h;
        track_type:                   NARROW_NOEL;
        power:                        331 kW;
        weight:                       39 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  0;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_DIESEL;
        engine_class:                 ENGINE_CLASS_DIESEL;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_DIESEL, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                      sw_KHE130_gfx_main;
		    purchase:                 spriteset_KHE130_purchase;
		    additional_text:	      return string(JRE_KHE130_DESC);
        cargo_subtype_text:           sw_KHE130_subtypetext_main;
        can_attach_wagon:			  sw_KHE130_attach_vehid;
        //start_stop:                   ;
    }
}
# 1 "JPplus.pnml" 4
# 1 "src/JRE/DMU/KHE131_series.pnml" 1
/*---GFX: Spritesets---*/

/*---END OF SECTION---*/



/*---GFX: Pantograph Positions---*/

/*---END OF SECTION---*/



/*---GFX: Train Reversing Switches---*/

/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/
//KHE131 Suigun
switch(FEAT_TRAINS, SELF, sw_KHE131_suigun_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_KHE131_front_suigun;
 default: spriteset_KHE131_back_suigun;
}
switch(FEAT_TRAINS, PARENT, sw_KHE131_suigun_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_KHE131_suigun_gfx_frontback_flipcheck;
 default: sw_JREKHgroup_gfx_rev_idcheck;
}
//KHE131 Hachi
switch(FEAT_TRAINS, SELF, sw_KHE131_hachi_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_KHE131_front_hachi;
 default: spriteset_KHE131_back_hachi;
}
switch(FEAT_TRAINS, PARENT, sw_KHE131_hachi_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_KHE131_hachi_gfx_frontback_flipcheck;
 default: sw_JREKHgroup_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Middle Car Switches---*/

/*---END OF SECTION---*/



/*---GFX: Livery Refitting Switches---*/
//Main Switches
switch(FEAT_TRAINS, SELF, sw_KHE131_gfx_main, cargo_subtype) {
  1: sw_KHE131_hachi_gfx_frontback_revcheck;
  0: sw_KHE131_suigun_gfx_frontback_revcheck;
}

//Menu Switches
switch(FEAT_TRAINS, SELF, sw_KHE131_subtypetext_main, cargo_subtype) {
  1: string(JREKHE130_HA);
  0: string(JREKHE130_SU);
}

/*---END OF SECTION---*/



//Coupling
  switch(FEAT_TRAINS, SELF, sw_KHE131_attach_vehid, [vehicle_type_id == dmu_KH110 || vehicle_type_id == dmu_KH111 || vehicle_type_id == dmu_KHE120 || vehicle_type_id == dmu_KHE130 || vehicle_type_id == dmu_KHE131]) {
  0: return string(MU_UNIQUE);
  }



item(FEAT_TRAINS, dmu_KHE131) {
    property {
        name:                         string(JRE_KHE131);
        introduction_date:            date(2007, 01, 19);
        model_life:                   10;
        vehicle_life:                 35;
        reliability_decay:            12;

        cargo_capacity:               param_capacity_rapid;
        loading_speed:                param_loading_3D;
        cost_factor:                  17;
        running_cost_factor:          51;

        speed:                        100 km/h;
        track_type:                   NARROW_NOEL;
        power:                        331 kW;
        weight:                       39 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  1;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_DIESEL;
        engine_class:                 ENGINE_CLASS_DIESEL;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_DIESEL, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                      sw_KHE131_gfx_main;
		    purchase:                 spriteset_KHE131_purchase;
		    additional_text:	      return string(JRE_KHE131_DESC);
        cargo_subtype_text:           sw_KHE131_subtypetext_main;
        can_attach_wagon:			  sw_KHE131_attach_vehid;
        //start_stop:                   ;
    }
}
# 1 "JPplus.pnml" 4

//#include "src/JRE/EMU/E331_series.pnml"
//#include "src/JRE/EMU/E235_series.pnml"
//#include "src/JRE/EMU/E233_series.pnml"
//#include "src/JRE/EMU/E231_series.pnml"
//#include "src/JRE/EMU/E217_series.pnml"
# 1 "src/JRE/EMU/E127_series.pnml" 1
/*---GFX: Spritesets---*/

//Purchase Sprites
spriteset (spriteset_E127_purchase,	                                                     "gfx/JRE/emuE127/purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_E127_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,         "gfx/JRE/emuE127/purchase_32bpp.png")         {tmpl_purchase_dh_32bpp(0, 0)}

//E127-0 Niigata Livery
spriteset (spriteset_E127_front_niigata,    	          	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_E127_back_niigata,        	          "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_E127_frontpan_niigata,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_E127_rev_front_niigata,   	        	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_E127_rev_back_niigata,        	      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_E127_rev_frontpan_niigata,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_E127_revflip_front_niigata,    	      	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_E127_revflip_back_niigata,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_E127_revflip_frontpan_niigata,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_E127_front_niigata,              ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRE/emuE127/E127_0.png")           {tmpl_std(0, 0)}
alternative_sprites(spriteset_E127_back_niigata,               ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRE/emuE127/E127_0.png")           {tmpl_std_rev(0, 75)}
alternative_sprites(spriteset_E127_frontpan_niigata,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRE/emuE127/E127_0.png")           {tmpl_std(0, 100)}

alternative_sprites(spriteset_E127_rev_front_niigata,              ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRE/emuE127/E127_0.png")           {tmpl_std_rev(0, 25)}
alternative_sprites(spriteset_E127_rev_back_niigata,               ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRE/emuE127/E127_0.png")           {tmpl_std_rev(0, 50)}
alternative_sprites(spriteset_E127_rev_frontpan_niigata,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRE/emuE127/E127_0.png")           {tmpl_std_rev(0, 125)}

alternative_sprites(spriteset_E127_revflip_front_niigata,              ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRE/emuE127/E127_0.png")       {tmpl_std(0, 25)}
alternative_sprites(spriteset_E127_revflip_back_niigata,               ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRE/emuE127/E127_0.png")       {tmpl_std(0, 50)}
alternative_sprites(spriteset_E127_revflip_frontpan_niigata,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRE/emuE127/E127_0.png")       {tmpl_std(0, 125)}

//E127-100 Matsumoto Livery
spriteset (spriteset_E127_front_matsum,    	          	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_E127_back_matsum,        	          "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_E127_frontpan_matsum,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_E127_rev_front_matsum,   	        	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_E127_rev_back_matsum,        	      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_E127_rev_frontpan_matsum,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_E127_revflip_front_matsum,    	      	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_E127_revflip_back_matsum,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_E127_revflip_frontpan_matsum,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_E127_front_matsum,              ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRE/emuE127/E127_100.png")           {tmpl_std(0, 0)}
alternative_sprites(spriteset_E127_back_matsum,               ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRE/emuE127/E127_100.png")           {tmpl_std_rev(0, 75)}
alternative_sprites(spriteset_E127_frontpan_matsum,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRE/emuE127/E127_100.png")           {tmpl_std(0, 100)}

alternative_sprites(spriteset_E127_rev_front_matsum,              ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRE/emuE127/E127_100.png")           {tmpl_std_rev(0, 25)}
alternative_sprites(spriteset_E127_rev_back_matsum,               ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRE/emuE127/E127_100.png")           {tmpl_std_rev(0, 50)}
alternative_sprites(spriteset_E127_rev_frontpan_matsum,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRE/emuE127/E127_100.png")           {tmpl_std_rev(0, 125)}

alternative_sprites(spriteset_E127_revflip_front_matsum,              ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRE/emuE127/E127_100.png")       {tmpl_std(0, 25)}
alternative_sprites(spriteset_E127_revflip_back_matsum,               ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRE/emuE127/E127_100.png")       {tmpl_std(0, 50)}
alternative_sprites(spriteset_E127_revflip_frontpan_matsum,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRE/emuE127/E127_100.png")       {tmpl_std(0, 125)}

/*---END OF SECTION---*/



/*---GFX: Pantograph Positions---*/

/*---END OF SECTION---*/



/*---GFX: Train Reversing Switches---*/
//Livery Selection
switch(FEAT_TRAINS,SELF, sw_E127_gfx_rev_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  3: spriteset_E127_rev_frontpan_matsum;
  2: spriteset_E127_rev_front_matsum;
  1: spriteset_E127_rev_frontpan_niigata;
  0: spriteset_E127_rev_front_niigata;
}
switch(FEAT_TRAINS,SELF, sw_E127_gfx_revflip_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  3: spriteset_E127_revflip_frontpan_matsum;
  2: spriteset_E127_revflip_front_matsum;
  1: spriteset_E127_revflip_frontpan_niigata;
  0: spriteset_E127_revflip_front_niigata;
}

switch(FEAT_TRAINS,SELF, sw_E127_gfx_rev_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  3: spriteset_E127_rev_back_matsum;
  2: spriteset_E127_rev_back_matsum;
  1: spriteset_E127_rev_back_niigata;
  0: spriteset_E127_rev_back_niigata;
}
switch(FEAT_TRAINS,SELF, sw_E127_gfx_revflip_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  3: spriteset_E127_revflip_back_matsum;
  2: spriteset_E127_revflip_back_matsum;
  1: spriteset_E127_revflip_back_niigata;
  0: spriteset_E127_revflip_back_niigata;
}

//Check for flipped vehicles (dual_headed)
switch(FEAT_TRAINS, SELF, sw_E127_gfx_rev_front_flippedcheck, vehicle_is_flipped) {
  1: sw_E127_gfx_rev_front_livery;
 default: sw_E127_gfx_revflip_front_livery;
}
switch(FEAT_TRAINS, SELF, sw_E127_gfx_rev_back_flippedcheck, vehicle_is_flipped) {
  1: sw_E127_gfx_rev_back_livery;
 default: sw_E127_gfx_revflip_back_livery;
}

//Front/Back Car Position Testing
switch(FEAT_TRAINS, SELF, sw_E127_gfx_rev_frontback_nomucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_E127_gfx_rev_front_flippedcheck;
  0:sw_E127_gfx_rev_back_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_E127_gfx_rev_frontback_sameid, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist+1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle behind of opposite vehicle
  2040:sw_E127_gfx_rev_frontback_nomucars;
  default:sw_E127_gfx_rev_back_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_E127_gfx_rev_frontback, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle infront of opposite vehicle
  2040:sw_E127_gfx_rev_frontback_sameid;
  default:sw_E127_gfx_rev_front_flippedcheck;
}

//ID Testing
switch(FEAT_TRAINS, SELF, sw_E127_gfx_rev_idcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of opposite vehicle
  2040: sw_E127_gfx_rev_frontback;
}
/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/
//E127-0 Niigata
switch(FEAT_TRAINS, SELF, sw_E127_niigata_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_E127_front_niigata;
 default: spriteset_E127_back_niigata;
}
switch(FEAT_TRAINS, PARENT, sw_E127_niigata_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_E127_niigata_gfx_frontback_flipcheck;
 default: sw_E127_gfx_rev_idcheck;
}
//E127-0 Niigata Extra Pantogaph
switch(FEAT_TRAINS, SELF, sw_E127_niigata2_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_E127_frontpan_niigata;
 default: spriteset_E127_back_niigata;
}
switch(FEAT_TRAINS, PARENT, sw_E127_niigata2_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_E127_niigata2_gfx_frontback_flipcheck;
 default: sw_E127_gfx_rev_idcheck;
}
//E127-100 Matsumoto
switch(FEAT_TRAINS, SELF, sw_E127_matsum_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_E127_front_matsum;
 default: spriteset_E127_back_matsum;
}
switch(FEAT_TRAINS, PARENT, sw_E127_matsum_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_E127_matsum_gfx_frontback_flipcheck;
 default: sw_E127_gfx_rev_idcheck;
}
//E127-100 Matsumoto Extra Pantogaph
switch(FEAT_TRAINS, SELF, sw_E127_matsum2_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_E127_frontpan_matsum;
 default: spriteset_E127_back_matsum;
}
switch(FEAT_TRAINS, PARENT, sw_E127_matsum2_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_E127_matsum2_gfx_frontback_flipcheck;
 default: sw_E127_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Middle Car Switches---*/

/*---END OF SECTION---*/



/*---GFX: Livery Refitting Switches---*/
//Main Switches
switch(FEAT_TRAINS, SELF, sw_E127_gfx_main, cargo_subtype) {
  3: sw_E127_matsum2_gfx_frontback_revcheck;
  2: sw_E127_matsum_gfx_frontback_revcheck;
  1: sw_E127_niigata2_gfx_frontback_revcheck;
  0: sw_E127_niigata_gfx_frontback_revcheck;
}

//Menu Switches
switch(FEAT_TRAINS, SELF, sw_E127_subtypetext_main, cargo_subtype) {
  3: string(E127_MSMT2);
  2: string(E127_MSMT);
  1: string(E127_NIIG2);
  0: string(E127_NIIG);
}

/*---END OF SECTION---*/



//Coupling
  switch(FEAT_TRAINS, SELF, sw_E127_attach_vehid, [vehicle_type_id == emu_E127]) {
  0: return string(MU_UNIQUE);
  }



item(FEAT_TRAINS, emu_E127) {
    property {
        name:                         string(JRE_E127);
        introduction_date:            date(1995, 05, 08);
        model_life:                   3;
        vehicle_life:                 35;
        reliability_decay:            12;

        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_3D;
        cost_factor:                  17;
        running_cost_factor:          51;

        speed:                        110 km/h;
        track_type:                   NARROW_OHLE;
        power:                        240 kW;
        weight:                       31 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  1;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_ELECTRIC;
        engine_class:                 ENGINE_CLASS_ELECTRIC;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                      sw_E127_gfx_main;
		    purchase:                 spriteset_E127_purchase;
		    additional_text:	      return string(JRE_E127_DESC);
        cargo_subtype_text:           sw_E127_subtypetext_main;
        can_attach_wagon:			  sw_E127_attach_vehid;
        //start_stop:                   ;
    }
}
# 1 "JPplus.pnml" 4
//#include "src/JRE/EMU/209_series.pnml"
# 1 "src/JRE/EMU/107_series.pnml" 1
/*---GFX: Spritesets---*/

//Purchase Sprites
spriteset (spriteset_107_purchase,	                                                     "gfx/JRE/emu107/purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_107_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,          "gfx/JRE/emu107/purchase_32bpp.png")         {tmpl_purchase_dh_32bpp(0, 0)}

//107 Standard "Sandwich Train" Livery
spriteset (spriteset_107_front_std,	 	"gfx/JRE/emu107/emu107.png")     	{ tmpl_std(0, 0) }
spriteset (spriteset_107_back_std,	   	"gfx/JRE/emu107/emu107.png")     	{ tmpl_std_rev(0, 25) }
alternative_sprites(spriteset_107_front_std, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "gfx/JRE/emu107/emu107_32bpp.png") {tmpl_std(0, 0)}
alternative_sprites(spriteset_107_back_std, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "gfx/JRE/emu107/emu107_32bpp.png") {tmpl_std_rev(0, 25)}

spriteset (spriteset_107_front_std_rev,	 	"gfx/JRE/emu107/emu107_rev.png")     	{ tmpl_std(0, 0) }
spriteset (spriteset_107_back_std_rev,	   	"gfx/JRE/emu107/emu107_rev.png")     	{ tmpl_std_rev(0, 25) }
alternative_sprites(spriteset_107_front_std_rev, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "gfx/JRE/emu107/emu107_rev_32bpp.png") {tmpl_std(0, 0)}
alternative_sprites(spriteset_107_back_std_rev, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "gfx/JRE/emu107/emu107_rev_32bpp.png") {tmpl_std_rev(0, 25)}
//107 Joshin Electric Railway
spriteset (spriteset_107_front_joshin,    	"gfx/JRE/emu107/emu107.png")          	{ tmpl_std(0, 50) }
spriteset (spriteset_107_back_joshin,   	  "gfx/JRE/emu107/emu107.png")          	{ tmpl_std_rev(0, 75) }
alternative_sprites(spriteset_107_front_joshin, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "gfx/JRE/emu107/emu107_32bpp.png") {tmpl_std(0, 50)}
alternative_sprites(spriteset_107_back_joshin, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "gfx/JRE/emu107/emu107_32bpp.png") {tmpl_std_rev(0, 75)}

spriteset (spriteset_107_front_joshin_rev,    	"gfx/JRE/emu107/emu107_rev.png")          	{ tmpl_std(0, 50) }
spriteset (spriteset_107_back_joshin_rev,   	  "gfx/JRE/emu107/emu107_rev.png")          	{ tmpl_std_rev(0, 75) }
alternative_sprites(spriteset_107_front_joshin_rev, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "gfx/JRE/emu107/emu107_rev_32bpp.png") {tmpl_std(0, 50)}
alternative_sprites(spriteset_107_back_joshin_rev, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "gfx/JRE/emu107/emu107_rev_32bpp.png") {tmpl_std_rev(0, 75)}
//107 Nikko Line Red
spriteset (spriteset_107_front_nikkored,	 	"gfx/JRE/emu107/emu107.png")   	{ tmpl_std(0, 100) }
spriteset (spriteset_107_back_nikkored,	 	"gfx/JRE/emu107/emu107.png")   	{ tmpl_std_rev(0, 125) }
alternative_sprites(spriteset_107_front_nikkored, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "gfx/JRE/emu107/emu107_32bpp.png") {tmpl_std(0, 100)}
alternative_sprites(spriteset_107_back_nikkored, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "gfx/JRE/emu107/emu107_32bpp.png") {tmpl_std_rev(0, 125)}

spriteset (spriteset_107_front_nikkored_rev,	 	"gfx/JRE/emu107/emu107_rev.png")   	{ tmpl_std(0, 100) }
spriteset (spriteset_107_back_nikkored_rev,	 	"gfx/JRE/emu107/emu107_rev.png")   	{ tmpl_std_rev(0, 125) }
alternative_sprites(spriteset_107_front_nikkored_rev, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "gfx/JRE/emu107/emu107_rev_32bpp.png") {tmpl_std(0, 100)}
alternative_sprites(spriteset_107_back_nikkored_rev, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "gfx/JRE/emu107/emu107_rev_32bpp.png") {tmpl_std_rev(0, 125)}
//107 Nikko Line "N"
spriteset (spriteset_107_front_nikko,	 	"gfx/JRE/emu107/emu107.png")   	{ tmpl_std(0, 150) }
spriteset (spriteset_107_back_nikko,	 	"gfx/JRE/emu107/emu107.png")   	{ tmpl_std_rev(0, 175) }
alternative_sprites(spriteset_107_front_nikko, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "gfx/JRE/emu107/emu107_32bpp.png") {tmpl_std(0, 150)}
alternative_sprites(spriteset_107_back_nikko, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "gfx/JRE/emu107/emu107_32bpp.png") {tmpl_std_rev(0, 175)}

spriteset (spriteset_107_front_nikko_rev,	 	"gfx/JRE/emu107/emu107_rev.png")   	{ tmpl_std(0, 150) }
spriteset (spriteset_107_back_nikko_rev,	 	"gfx/JRE/emu107/emu107_rev.png")   	{ tmpl_std_rev(0, 175) }
alternative_sprites(spriteset_107_front_nikko_rev, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "gfx/JRE/emu107/emu107_rev_32bpp.png") {tmpl_std(0, 150)}
alternative_sprites(spriteset_107_back_nikko_rev, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "gfx/JRE/emu107/emu107_rev_32bpp.png") {tmpl_std_rev(0, 175)}
/*---END OF SECTION---*/



/*---GFX: Train Reversing Switches---*/
//Livery Selection
switch(FEAT_TRAINS,SELF, sw_107_gfx_rev_cab_livery_back, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  3: spriteset_107_back_joshin_rev;
  2: spriteset_107_back_nikkored_rev;
  1: spriteset_107_back_nikko_rev;
  0: spriteset_107_back_std_rev;
}
switch(FEAT_TRAINS,SELF, sw_107_gfx_rev_cab_livery_front, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  3: spriteset_107_front_joshin_rev;
  2: spriteset_107_front_nikkored_rev;
  1: spriteset_107_front_nikko_rev;
  0: spriteset_107_front_std_rev;
}
switch(FEAT_TRAINS,SELF, sw_107_gfx_rev_cab_livery_front_flipped, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  3: spriteset_107_back_joshin_rev;
  2: spriteset_107_back_nikkored_rev;
  1: spriteset_107_back_nikko_rev;
  0: spriteset_107_back_std_rev;
}

//ID Testing
switch(FEAT_TRAINS, SELF, sw_107_gfx_rev_poscheck, position_in_consist%2){
  0: sw_107_gfx_rev_cab_livery_back;
  1: sw_107_gfx_rev_cab_livery_front;
}
/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/
//107 Standard "Sandwich Train" Livery
switch(FEAT_TRAINS, PARENT, sw_107_gfx_front_revcheck_std, vehicle_is_reversed){
   0: spriteset_107_front_std;
   default: sw_107_gfx_rev_poscheck;
}
switch(FEAT_TRAINS, PARENT, sw_107_gfx_back_revcheck_std, vehicle_is_reversed){
 0: spriteset_107_back_std;
 default: sw_107_gfx_rev_poscheck;
}
switch(FEAT_TRAINS, SELF, sw_107_gfx_frontback_std, vehicle_is_flipped) {
  1: sw_107_gfx_back_revcheck_std;
 default: sw_107_gfx_front_revcheck_std;
}

//107 Joshin Electric Railway
switch(FEAT_TRAINS, PARENT, sw_107_gfx_front_revcheck_joshin, vehicle_is_reversed){
   0: spriteset_107_front_joshin;
   default: sw_107_gfx_rev_poscheck;
}
switch(FEAT_TRAINS, PARENT, sw_107_gfx_back_revcheck_joshin, vehicle_is_reversed){
 0: spriteset_107_back_joshin;
 default: sw_107_gfx_rev_poscheck;
}
switch(FEAT_TRAINS, SELF, sw_107_gfx_frontback_joshin, vehicle_is_flipped) {
  1: sw_107_gfx_back_revcheck_joshin;
 default: sw_107_gfx_front_revcheck_joshin;
}

//107 Nikko Line Red
switch(FEAT_TRAINS, PARENT, sw_107_gfx_front_revcheck_nikkored, vehicle_is_reversed){
   0: spriteset_107_front_nikkored;
   default: sw_107_gfx_rev_poscheck;
}
switch(FEAT_TRAINS, PARENT, sw_107_gfx_back_revcheck_nikkored, vehicle_is_reversed){
 0: spriteset_107_back_nikkored;
 default: sw_107_gfx_rev_poscheck;
}
switch(FEAT_TRAINS, SELF, sw_107_gfx_frontback_nikkored, vehicle_is_flipped) {
  1: sw_107_gfx_back_revcheck_nikkored;
 default: sw_107_gfx_front_revcheck_nikkored;
}

//107 Nikko Line "N"
switch(FEAT_TRAINS, PARENT, sw_107_gfx_front_revcheck_nikko, vehicle_is_reversed){
   0: spriteset_107_front_nikko;
   default: sw_107_gfx_rev_poscheck;
}
switch(FEAT_TRAINS, PARENT, sw_107_gfx_back_revcheck_nikko, vehicle_is_reversed){
 0: spriteset_107_back_nikko;
 default: sw_107_gfx_rev_poscheck;
}
switch(FEAT_TRAINS, SELF, sw_107_gfx_frontback_nikko, vehicle_is_flipped) {
  1: sw_107_gfx_back_revcheck_nikko;
 default: sw_107_gfx_front_revcheck_nikko;
}
/*---END OF SECTION---*/



/*---GFX: Livery Refitting Switches---*/

//Main Switches
switch(FEAT_TRAINS, SELF, sw_107_gfx_main,  cargo_subtype) {
  3: sw_107_gfx_frontback_joshin;
  2: sw_107_gfx_frontback_nikkored;
  1: sw_107_gfx_frontback_nikko;
  0: sw_107_gfx_frontback_std;
}

//Menu Switches
switch(FEAT_TRAINS, SELF, sw_107_subtypetext_main, cargo_subtype) {
  3: return string(JOSHIN_LV);
  2: return string(NIKKORED_LV);
  1: return string(NIKKO_LV);
	0: string(SANDWICH_LV);
}
/*---END OF SECTION---*/



//Coupling
  switch(FEAT_TRAINS, SELF, sw_107_attach_vehid, [vehicle_type_id == emu_107]) {
  0: return string(SAME_UNIQUE);
  }



item(FEAT_TRAINS, emu_107) {
    property {
        name:                         string(JRE_107);
        introduction_date:            date(1988, 05, 01);
        model_life:                   3;
        vehicle_life:                 37;
        reliability_decay:            13;

        cargo_capacity:               param_capacity_rapid;
        loading_speed:                param_loading_3D;
        cost_factor:                  17;
        running_cost_factor:          51;

        speed:                        100 km/h;
        track_type:                   NARROW_OHLE;
        power:                        480 kW;
        weight:                       37 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  1;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_ELECTRIC;
        engine_class:                 ENGINE_CLASS_ELECTRIC;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                sw_107_gfx_main;
		    purchase:               spriteset_107_purchase;
		    additional_text:	      return string(JRE_107_DESC);
        cargo_subtype_text:     sw_107_subtypetext_main;
        can_attach_wagon:			  sw_107_attach_vehid;
        //start_stop:                   ;
    }
}
# 1 "JPplus.pnml" 4


//JR-Central
# 1 "src/JRC/EMU/211_56_series.pnml" 1


/*---GFX: Year Dependent Graphics---*/

//211-56 Tokai
switch(FEAT_TRAINS, SELF, sw_21156_gfx_year_back_pantograph, current_year){
 0..2005: spriteset_21156_back_darm;
 default: spriteset_21156_back_sarm;
}
/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/

//211-56 Tokai
switch(FEAT_TRAINS, SELF, sw_21156_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_21156_front;
 default: sw_21156_gfx_year_back_pantograph;
}
switch(FEAT_TRAINS, PARENT, sw_21156_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_21156_gfx_frontback_flipcheck;
 default: sw_211group_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Middle Car Switches---*/

//211-56 Tokai
switch(FEAT_TRAINS, PARENT, sw_21156_gfx_mucar_revcheck, vehicle_is_reversed){
 0: spriteset_21156_mid;
 default: sw_211group_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



//Coupling
  switch(FEAT_TRAINS, SELF, sw_21156_attach_vehid, [vehicle_type_id == emu_211 || vehicle_type_id == emu_21156 ||vehicle_type_id == emu_213 || vehicle_type_id == emu_313 || vehicle_type_id == emu_311 || vehicle_type_id == mu_car]) {
  0: return string(MU_UNIQUE);
  }



item(FEAT_TRAINS, emu_21156) {
    property {
        name:                         string(JNR_21156);
        introduction_date:            date(1988, 02, 11);
        model_life:                   10;
        vehicle_life:                 40;
        reliability_decay:            14;

        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_3D;
        cost_factor:                  17;
        running_cost_factor:          51;

        speed:                        120 km/h;
        track_type:                   NARROW_OHLE;
        power:                        480 kW;
        weight:                       35 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  1;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_ELECTRIC;
        engine_class:                 ENGINE_CLASS_ELECTRIC;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                      sw_21156_gfx_frontback_revcheck;
		    purchase:                 spriteset_21156_purchase;
		    additional_text:	      return string(JNR_21156_DESC);
        //cargo_subtype_text:           sw_21156_subtypetext_main;
        can_attach_wagon:			  sw_21156_attach_vehid;
        //start_stop:                   ;
    }
    /*Multiple Unit Car*/
      livery_override(mu_car){
        default:                      sw_21156_gfx_mucar_revcheck;
        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_3D;
        //cargo_subtype_text:           sw_21156_subtypetext_mucar;
        power: 120;
        weight: 25;
      }

}
# 1 "JPplus.pnml" 4
# 1 "src/JRC/EMU/311_series.pnml" 1


/*---GFX: Year Dependent Graphics---*/

//311 Tokai
switch(FEAT_TRAINS, SELF, sw_311_gfx_year_back_pantograph, current_year){
 0..2007: spriteset_311_back_darm;
 default: spriteset_311_back_sarm;
}
/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/

//311 Tokai
switch(FEAT_TRAINS, SELF, sw_311_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_311_front;
 default: sw_311_gfx_year_back_pantograph;
}
switch(FEAT_TRAINS, PARENT, sw_311_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_311_gfx_frontback_flipcheck;
 default: sw_211group_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Middle Car Switches---*/

//311 Tokai
switch(FEAT_TRAINS, PARENT, sw_311_gfx_mucar_revcheck, vehicle_is_reversed){
 0: spriteset_311_mid;
 default: sw_211group_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



//Coupling
  switch(FEAT_TRAINS, SELF, sw_311_attach_vehid, [vehicle_type_id == emu_211 || vehicle_type_id == emu_21156 ||vehicle_type_id == emu_213 || vehicle_type_id == emu_313 || vehicle_type_id == emu_311 || vehicle_type_id == mu_car]) {
  0: return string(MU_UNIQUE);
  }



item(FEAT_TRAINS, emu_311) {
    property {
        name:                         string(JRC_311);
        introduction_date:            date(1989, 07, 12);
        model_life:                   2;
        vehicle_life:                 40;
        reliability_decay:            14;

        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_3D;
        cost_factor:                  17;
        running_cost_factor:          51;

        speed:                        120 km/h;
        track_type:                   NARROW_OHLE;
        power:                        480 kW;
        weight:                       35 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  1;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_ELECTRIC;
        engine_class:                 ENGINE_CLASS_ELECTRIC;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                      sw_311_gfx_frontback_revcheck;
		    purchase:                 spriteset_311_purchase;
		    additional_text:	      return string(JRC_311_DESC);
        //cargo_subtype_text:           sw_311_subtypetext_main;
        can_attach_wagon:			  sw_311_attach_vehid;
        //start_stop:                   ;
    }
    /*Multiple Unit Car*/
      livery_override(mu_car){
        default:                      sw_311_gfx_mucar_revcheck;
        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_3D;
        //cargo_subtype_text:           sw_311_subtypetext_mucar;
        power: 120;
        weight: 25;
      }

}
# 1 "JPplus.pnml" 4
# 1 "src/JRC/EMU/313_series.pnml" 1

/*---GFX: Pantograph Positions---*/

//313 Tokai
switch(FEAT_TRAINS,SELF, sw_313_gfx_pantograph_pos_midpanto, position_in_vehid_chain%2){
  0: spriteset_313_mid_onep;
  default: spriteset_313_mid; 
}
switch(FEAT_TRAINS,SELF, sw_313_gfx_pantograph_pos_check, num_vehs_in_vehid_chain){
  0..1: spriteset_313_mid;
  default: sw_313_gfx_pantograph_pos_midpanto;
}
/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/
//313 Tokai
switch(FEAT_TRAINS, SELF, sw_313_gfx_back_livery,  cargo_subtype) {
  1:spriteset_313_back_twop;
  0:spriteset_313_back_onep;
}
switch(FEAT_TRAINS, SELF, sw_313_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_313_front;
 default: sw_313_gfx_back_livery;
}
switch(FEAT_TRAINS, PARENT, sw_313_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_313_gfx_frontback_flipcheck;
 default: sw_211group_gfx_rev_idcheck;
}



/*---END OF SECTION---*/



/*---GFX: Middle Car Switches---*/

//313 Tokai
switch(FEAT_TRAINS, PARENT, sw_313_gfx_mucar_revcheck, vehicle_is_reversed){
 0: sw_313_gfx_pantograph_pos_check;
 default: sw_211group_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Livery Refitting Switches---*/
//Menu Switches
switch(FEAT_TRAINS, SELF, sw_313_subtypetext_mucar, cargo_subtype) {
1: string(TOKAI_313_TWOPANTO);
0: string(TOKAI_313_PANTO);
}
switch(FEAT_TRAINS, SELF, sw_313_subtypetext_main, cargo_subtype) {
1: string(TOKAI_313_TWOPANTO);
0: string(TOKAI_313_PANTO);
}
/*---END OF SECTION---*/

//Coupling
  switch(FEAT_TRAINS, SELF, sw_313_attach_vehid, [vehicle_type_id == emu_211 || vehicle_type_id == emu_21156 ||vehicle_type_id == emu_213 || vehicle_type_id == emu_313 || vehicle_type_id == emu_311 || vehicle_type_id == mu_car]) {
  0: return string(MU_UNIQUE);
  }


item(FEAT_TRAINS, emu_313) {
    property {
        name:                         string(JRC_313);
        introduction_date:            date(1999, 07, 25);
        model_life:                   20;
        vehicle_life:                 40;
        reliability_decay:            12;

        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_3D;
        cost_factor:                  17;
        running_cost_factor:          51;

        speed:                        130 km/h;
        track_type:                   NARROW_OHLE;
        power:                        740 kW;
        weight:                       34 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  1;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_ELECTRIC;
        engine_class:                 ENGINE_CLASS_ELECTRIC;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                sw_313_gfx_frontback_revcheck;
		    purchase:               spriteset_313_purchase;
		    additional_text:	      return string(JRC_313_DESC);
        cargo_subtype_text:     sw_313_subtypetext_main;
        can_attach_wagon:			  sw_313_attach_vehid;
        //start_stop:                   ;
    }
    /*Multiple Unit Car*/
      livery_override(mu_car){
        default:                      sw_313_gfx_mucar_revcheck;
        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_3D;
        cargo_subtype_text:           sw_313_subtypetext_mucar;
        power: 185;
        weight: 24;
      }

}
# 1 "JPplus.pnml" 4


//JR-West
//#include "src/JRW/EMU/207_series.pnml"
# 1 "src/JRW/EMU/221_series.pnml" 1
/*---GFX: Spritesets---*/
//Purchase Sprites
spriteset (spriteset_221_purchase,	                                                     "gfx/JRW/emu207/purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_221_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,         "gfx/JRW/emu221/purchase_32bpp.png")         {tmpl_purchase_dh_32bpp(0, 0)}

//221 Orginal
spriteset (spriteset_221_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_221_grfront,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_221_back_sp,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_221_back_dp,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_221_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_221_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_221_rev_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_221_rev_grfront,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_221_rev_back_sp,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_221_rev_back_dp,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_221_rev_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_221_rev_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_221_revflip_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_221_revflip_grfront,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_221_revflip_back_sp,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_221_revflip_back_dp,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_221_revflip_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_221_revflip_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_221_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu221/221-1-1.png")           {tmpl_std(0, 1)}
alternative_sprites(spriteset_221_back_sp,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu221/221-1-2.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_221_back_dp,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu221/221-1-3.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_221_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu221/221-1-4.png")           {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_221_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu221/221-1-5.png")           {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_221_rev_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu221/221-1-1.png")          {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_221_rev_back_sp,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu221/221-1-2.png")       {tmpl_std(0, 1)}
alternative_sprites(spriteset_221_rev_back_dp,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu221/221-1-3.png")       {tmpl_std(0, 1)}
alternative_sprites(spriteset_221_rev_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu221/221-1-4.png")          {tmpl_std(0, 1)}
alternative_sprites(spriteset_221_rev_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu221/221-1-5.png")          {tmpl_std(0, 1)}

alternative_sprites(spriteset_221_revflip_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu221/221-1-1.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_221_revflip_back_sp,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu221/221-1-2.png")     {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_221_revflip_back_dp,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu221/221-1-3.png")     {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_221_revflip_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu221/221-1-4.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_221_revflip_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu221/221-1-5.png")        {tmpl_std_rev(0, 1)}
/*---END OF SECTION---*/



/*---GFX: Pantograph Positions---*/
switch(FEAT_TRAINS,SELF, sw_221_gfx_pantograph_pos_long, position_in_vehid_chain%5){
  1: spriteset_221_mid_panto;
  3: spriteset_221_mid_panto;
  default:spriteset_221_mid;
}
switch(FEAT_TRAINS,SELF, sw_221_gfx_pantograph_pos_short, position_in_vehid_chain){
  1: spriteset_221_mid_panto;
  default:spriteset_221_mid;
}
switch(FEAT_TRAINS,SELF, sw_221_gfx_pantograph_pos, num_vehs_in_vehid_chain){
  0..4: sw_221_gfx_pantograph_pos_short;
  default: sw_221_gfx_pantograph_pos_long;
}
/*---END OF SECTION---*/



/*---GFX: Train Reversing Switches---*/
//Livery Selection
switch(FEAT_TRAINS,SELF, sw_221_gfx_rev_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
1: spriteset_221_rev_front;
0: spriteset_221_rev_front;
}
switch(FEAT_TRAINS,SELF, sw_221_gfx_revflip_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
1: spriteset_221_revflip_front;
0: spriteset_221_revflip_front;
}

switch(FEAT_TRAINS,SELF, sw_221_gfx_rev_mid_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
1: spriteset_221_rev_mid_panto;
0: spriteset_221_rev_mid_panto;
}
switch(FEAT_TRAINS,SELF, sw_221_gfx_revflip_mid_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
1: spriteset_221_revflip_mid_panto;
0: spriteset_221_revflip_mid_panto;
}

switch(FEAT_TRAINS,SELF, sw_221_gfx_rev_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
1: spriteset_221_rev_mid;
0: spriteset_221_rev_mid;
}
switch(FEAT_TRAINS,SELF, sw_221_gfx_revflip_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
1: spriteset_221_revflip_mid;
0: spriteset_221_revflip_mid;
}

switch(FEAT_TRAINS,SELF, sw_221_gfx_rev_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
1: spriteset_221_rev_back_dp;
0: spriteset_221_rev_back_sp;
}
switch(FEAT_TRAINS,SELF, sw_221_gfx_revflip_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
1: spriteset_221_revflip_back_dp;
0: spriteset_221_revflip_back_sp;
}

//Check for flipped vehicles (dual_headed)
switch(FEAT_TRAINS, SELF, sw_221_gfx_rev_front_flippedcheck, vehicle_is_flipped) {
  1: sw_221_gfx_rev_front_livery;
 default: sw_221_gfx_revflip_front_livery;
}
switch(FEAT_TRAINS, SELF, sw_221_gfx_rev_mid_panto_flippedcheck, vehicle_is_flipped) {
  1: sw_221_gfx_revflip_mid_panto_livery;
 default: sw_221_gfx_rev_mid_panto_livery;
}
switch(FEAT_TRAINS, SELF, sw_221_gfx_rev_mid_flippedcheck, vehicle_is_flipped) {
  1: sw_221_gfx_revflip_mid_livery;
 default: sw_221_gfx_rev_mid_livery;
}
switch(FEAT_TRAINS, SELF, sw_221_gfx_rev_back_flippedcheck, vehicle_is_flipped) {
  1: sw_221_gfx_revflip_back_livery;
 default: sw_221_gfx_rev_back_livery;
}

//Pantograph Position Testing
switch(FEAT_TRAINS, SELF, sw_221_gfx_rev_pantograph_pos_long, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%5]){ //look at opposite position_in_vehID_chain
  1: sw_221_gfx_rev_mid_panto_flippedcheck;
  3: sw_221_gfx_rev_mid_panto_flippedcheck;
  default: sw_221_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_221_gfx_rev_pantograph_pos_short, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  1: sw_221_gfx_rev_mid_panto_flippedcheck;
  default: sw_221_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_221_gfx_rev_pantograph_pos, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 16, 0x000000FF, 0x41]]){ //look at opposite num_vehs_in_vehid_chain
  0..4: sw_221_gfx_rev_pantograph_pos_short;
  default: sw_221_gfx_rev_pantograph_pos_long;
}

//Front/Back Car Position Testing
switch(FEAT_TRAINS, SELF, sw_221_gfx_rev_frontback_nomucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_221_gfx_rev_front_flippedcheck;
  0:sw_221_gfx_rev_back_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_221_gfx_rev_frontback_aftermucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_221_gfx_rev_back_flippedcheck;
  0:sw_221_gfx_rev_front_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_221_gfx_rev_frontback_mucarcheck, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F),STORE_TEMP(var[0x61, 0, 0x000000FF, 0x41],0),  //look at opposite position_in_vehID_chain
STORE_TEMP((position_in_consist_from_end-position_in_consist-1)-LOAD_TEMP(0), 0x10F),                               //look at what is ahead of the first vehicle in the vehID_chain
var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000:sw_221_gfx_rev_frontback_aftermucars;
  default:sw_221_gfx_rev_frontback_nomucars;
}
switch(FEAT_TRAINS, SELF, sw_221_gfx_rev_frontback_sameid, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist+1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle behind of opposite vehicle
  2036:sw_221_gfx_rev_frontback_mucarcheck;
  1000:sw_221_gfx_rev_front_flippedcheck;
  default:sw_221_gfx_rev_back_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_221_gfx_rev_frontback, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle infront of opposite vehicle
  2036:sw_221_gfx_rev_frontback_sameid;
  1000:sw_221_gfx_rev_back_flippedcheck;
  default:sw_221_gfx_rev_front_flippedcheck;
}

//ID Testing
switch(FEAT_TRAINS, SELF, sw_221_gfx_rev_idcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of opposite vehicle
  1000: sw_221_gfx_rev_pantograph_pos;
  2036: sw_221_gfx_rev_frontback;
}
/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/
//221 Sinlge-Pantograph
switch(FEAT_TRAINS, SELF, sw_221_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_221_front;
 default: spriteset_221_back_sp;
}
switch(FEAT_TRAINS, PARENT, sw_221_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_221_gfx_frontback_flipcheck;
 default: sw_221_gfx_rev_idcheck;
}
//221 Dual-Pantograph
switch(FEAT_TRAINS, SELF, sw_221dp_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_221_front;
 default: spriteset_221_back_dp;
}
switch(FEAT_TRAINS, PARENT, sw_221dp_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_221dp_gfx_frontback_flipcheck;
 default: sw_221_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Middle Car Switches---*/
//221
switch(FEAT_TRAINS, PARENT, sw_221_gfx_mucar_revcheck_mid, vehicle_is_reversed){
    0: sw_221_gfx_pantograph_pos;
    default: sw_221_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Livery Refitting Switches---*/
//Main Switches
switch(FEAT_TRAINS, SELF, sw_221_gfx_mucar, cargo_subtype){
  1: sw_221_gfx_mucar_revcheck_mid;
  0: sw_221_gfx_mucar_revcheck_mid;
}
switch(FEAT_TRAINS, SELF, sw_221_gfx_main, cargo_subtype) {
  1: sw_221dp_gfx_frontback_revcheck;
  0: sw_221_gfx_frontback_revcheck;
}

//Menu Switches
switch(FEAT_TRAINS, SELF, sw_221_subtypetext_mucar, cargo_subtype) {
  1: string(JRW221_DP_LV);
  0: string(JRW221_SP_LV);
}
switch(FEAT_TRAINS, SELF, sw_221_subtypetext_main, cargo_subtype) {
  1: string(JRW221_DP_LV);
  0: string(JRW221_SP_LV);
}
/*---END OF SECTION---*/



//Coupling
  switch(FEAT_TRAINS, SELF, sw_221_attach_vehid, [vehicle_type_id == emu_221 || vehicle_type_id == mu_car]) {
  0: return string(MU_UNIQUE);
  }



item(FEAT_TRAINS, emu_221) {
    property {
        name:                         string(JRW_221);
        introduction_date:            date(1989, 02, 02);
        model_life:                   3;
        vehicle_life:                 39;
        reliability_decay:            11;

        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_3D;
        cost_factor:                  17;
        running_cost_factor:          51;

        speed:                        120 km/h;
        track_type:                   NARROW_OHLE;
        power:                        480 kW;
        weight:                       37 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  1;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_ELECTRIC;
        engine_class:                 ENGINE_CLASS_ELECTRIC;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                      sw_221_gfx_main;
		    purchase:                 spriteset_221_purchase;
		    additional_text:	      return string(JRW_221_DESC);
        cargo_subtype_text:           sw_221_subtypetext_main;
        can_attach_wagon:			  sw_221_attach_vehid;
        //start_stop:                   ;
    }
    /*Multiple Unit Car*/
      livery_override(mu_car){
        default:                      sw_221_gfx_mucar;
        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_3D;
        cargo_subtype_text:           sw_221_subtypetext_mucar;
        power: 120;
        weight: 27;
      }

}
# 1 "JPplus.pnml" 4
# 1 "src/JRW/EMU/223_0_series.pnml" 1
/*---GFX: Spritesets---*/
//Purchase Sprites
spriteset (spriteset_223_0_purchase,	                                                  "gfx/JRW/emu207/purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_223_0_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,         "gfx/JRW/emu223/purchase_32bpp.png")         {tmpl_purchase_dh_32bpp(0, 0)}

//223_0 Orginal
spriteset (spriteset_223_0_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_0_back,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_0_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_0_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_223_0_rev_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_0_rev_back,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_0_rev_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_0_rev_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_223_0_revflip_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_0_revflip_back,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_0_revflip_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_0_revflip_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_223_0_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-1-1.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_0_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-1-2.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_223_0_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-1-3.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_223_0_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-1-4.png")        {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_223_0_rev_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-1-1.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_223_0_rev_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-1-2.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_0_rev_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-1-3.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_0_rev_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-1-4.png")        {tmpl_std(0, 1)}

alternative_sprites(spriteset_223_0_revflip_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-1-1.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_223_0_revflip_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-1-2.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_223_0_revflip_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-1-3.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_223_0_revflip_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-1-4.png")        {tmpl_std_rev(0, 1)}

//223_0 Refurb
spriteset (spriteset_223_0refurb_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_0refurb_back,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_0refurb_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_0refurb_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_223_0refurb_rev_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_0refurb_rev_back,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_0refurb_rev_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_0refurb_rev_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_223_0refurb_revflip_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_0refurb_revflip_back,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_0refurb_revflip_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_0refurb_revflip_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_223_0refurb_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-2-1.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_0refurb_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-2-2.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_223_0refurb_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-2-3.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_223_0refurb_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-2-4.png")        {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_223_0refurb_rev_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-2-1.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_223_0refurb_rev_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-2-2.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_0refurb_rev_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-2-3.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_0refurb_rev_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-2-4.png")        {tmpl_std(0, 1)}

alternative_sprites(spriteset_223_0refurb_revflip_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-2-1.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_223_0refurb_revflip_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-2-2.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_223_0refurb_revflip_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-2-3.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_223_0refurb_revflip_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-2-4.png")        {tmpl_std_rev(0, 1)}

//223_2500
spriteset (spriteset_223_2500_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_2500_back,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_2500_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_2500_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_223_2500_rev_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_2500_rev_back,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_2500_rev_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_2500_rev_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_223_2500_revflip_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_2500_revflip_back,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_2500_revflip_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_2500_revflip_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_223_2500_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2500/223-2500-1-1.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_2500_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2500/223-2500-1-2.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_223_2500_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2500/223-2500-1-3.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_223_2500_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2500/223-2500-1-4.png")        {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_223_2500_rev_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2500/223-2500-1-1.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_223_2500_rev_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2500/223-2500-1-2.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_2500_rev_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2500/223-2500-1-3.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_2500_rev_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2500/223-2500-1-4.png")        {tmpl_std(0, 1)}

alternative_sprites(spriteset_223_2500_revflip_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2500/223-2500-1-1.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_223_2500_revflip_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2500/223-2500-1-2.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_223_2500_revflip_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2500/223-2500-1-3.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_223_2500_revflip_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2500/223-2500-1-4.png")        {tmpl_std_rev(0, 1)}

//223_5500
spriteset (spriteset_223_5500_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_5500_back,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_5500_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_5500_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_223_5500_rev_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_5500_rev_back,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_5500_rev_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_5500_rev_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_223_5500_revflip_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_5500_revflip_back,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_5500_revflip_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_5500_revflip_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_223_5500_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2500/223-2500-1-1.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_5500_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2500/223-2500-1-2.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_223_5500_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2500/223-2500-1-3.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_223_5500_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2500/223-2500-1-4.png")        {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_223_5500_rev_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2500/223-2500-1-1.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_223_5500_rev_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2500/223-2500-1-2.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_5500_rev_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2500/223-2500-1-3.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_5500_rev_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2500/223-2500-1-4.png")        {tmpl_std(0, 1)}

alternative_sprites(spriteset_223_5500_revflip_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2500/223-2500-1-1.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_223_5500_revflip_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2500/223-2500-1-2.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_223_5500_revflip_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2500/223-2500-1-3.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_223_5500_revflip_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2500/223-2500-1-4.png")        {tmpl_std_rev(0, 1)}

//223_6000
spriteset (spriteset_223_6000_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_6000_back,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_6000_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_6000_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_223_6000_rev_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_6000_rev_back,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_6000_rev_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_6000_rev_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_223_6000_revflip_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_6000_revflip_back,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_6000_revflip_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_6000_revflip_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_223_6000_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-6000/223-6000-1-1.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_6000_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-6000/223-6000-1-2.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_223_6000_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-6000/223-6000-1-3.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_223_6000_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-6000/223-6000-1-4.png")        {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_223_6000_rev_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-6000/223-6000-1-1.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_223_6000_rev_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-6000/223-6000-1-2.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_6000_rev_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-6000/223-6000-1-3.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_6000_rev_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-6000/223-6000-1-4.png")        {tmpl_std(0, 1)}

alternative_sprites(spriteset_223_6000_revflip_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-6000/223-6000-1-1.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_223_6000_revflip_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-6000/223-6000-1-2.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_223_6000_revflip_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-6000/223-6000-1-3.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_223_6000_revflip_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-6000/223-6000-1-4.png")        {tmpl_std_rev(0, 1)}

/*---END OF SECTION---*/



/*---GFX: Pantograph Positions---*/
//223_0
switch(FEAT_TRAINS,SELF, sw_223_0_gfx_pantograph_pos_6car, position_in_vehid_chain){
  1: spriteset_223_0_mid_panto;
  default:spriteset_223_0_mid;
}
switch(FEAT_TRAINS,SELF, sw_223_0_gfx_pantograph_pos_std, position_in_vehid_chain%3){
  0: spriteset_223_0_mid_panto;
  default:spriteset_223_0_mid;
}
switch(FEAT_TRAINS,SELF, sw_223_0_gfx_pantograph_pos, num_vehs_in_vehid_chain){
  4: sw_223_0_gfx_pantograph_pos_6car;
  default: sw_223_0_gfx_pantograph_pos_std;
}

//223_0 Refurb
switch(FEAT_TRAINS,SELF, sw_223_0refurb_gfx_pantograph_pos_6car, position_in_vehid_chain){
  1: spriteset_223_0refurb_mid_panto;
  default:spriteset_223_0refurb_mid;
}
switch(FEAT_TRAINS,SELF, sw_223_0refurb_gfx_pantograph_pos_std, position_in_vehid_chain%3){
  0: spriteset_223_0refurb_mid_panto;
  default:spriteset_223_0refurb_mid;
}
switch(FEAT_TRAINS,SELF, sw_223_0refurb_gfx_pantograph_pos, num_vehs_in_vehid_chain){
  4: sw_223_0refurb_gfx_pantograph_pos_6car;
  default: sw_223_0refurb_gfx_pantograph_pos_std;
}

//223_2500
switch(FEAT_TRAINS,SELF, sw_223_2500_gfx_pantograph_pos_6car, position_in_vehid_chain){
  1: spriteset_223_2500_mid_panto;
  default:spriteset_223_2500_mid;
}
switch(FEAT_TRAINS,SELF, sw_223_2500_gfx_pantograph_pos_std, position_in_vehid_chain%3){
  0: spriteset_223_2500_mid_panto;
  default:spriteset_223_2500_mid;
}
switch(FEAT_TRAINS,SELF, sw_223_2500_gfx_pantograph_pos, num_vehs_in_vehid_chain){
  4: sw_223_2500_gfx_pantograph_pos_6car;
  default: sw_223_2500_gfx_pantograph_pos_std;
}

//223_5500
switch(FEAT_TRAINS,SELF, sw_223_5000_gfx_pantograph_pos_6car, position_in_vehid_chain){
  1: spriteset_223_5500_mid_panto;
  default:spriteset_223_5500_mid;
}
switch(FEAT_TRAINS,SELF, sw_223_5000_gfx_pantograph_pos_std, position_in_vehid_chain%3){
  0: spriteset_223_5500_mid_panto;
  default:spriteset_223_5500_mid;
}
switch(FEAT_TRAINS,SELF, sw_223_5000_gfx_pantograph_pos, num_vehs_in_vehid_chain){
  4: sw_223_5000_gfx_pantograph_pos_6car;
  default: sw_223_5000_gfx_pantograph_pos_std;
}

//223_6000
switch(FEAT_TRAINS,SELF, sw_223_6000_gfx_pantograph_pos_6car, position_in_vehid_chain){
  1: spriteset_223_6000_mid_panto;
  default:spriteset_223_6000_mid;
}
switch(FEAT_TRAINS,SELF, sw_223_6000_gfx_pantograph_pos_std, position_in_vehid_chain%3){
  0: spriteset_223_6000_mid_panto;
  default:spriteset_223_6000_mid;
}
switch(FEAT_TRAINS,SELF, sw_223_6000_gfx_pantograph_pos, num_vehs_in_vehid_chain){
  4: sw_223_6000_gfx_pantograph_pos_6car;
  default: sw_223_6000_gfx_pantograph_pos_std;
}
/*---END OF SECTION---*/



/*---GFX: Train Reversing Switches---*/
//Livery Selection
switch(FEAT_TRAINS,SELF, sw_223_0_gfx_rev_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
3: spriteset_223_6000_rev_front;
2: spriteset_223_5500_rev_front;
1: spriteset_223_2500_rev_front;
0: spriteset_223_0_rev_front;
}
switch(FEAT_TRAINS,SELF, sw_223_0_gfx_revflip_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
3: spriteset_223_6000_revflip_front;
2: spriteset_223_5500_revflip_front;
1: spriteset_223_2500_revflip_front;
0: spriteset_223_0_revflip_front;
}

switch(FEAT_TRAINS,SELF, sw_223_0_gfx_rev_mid_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
3: spriteset_223_6000_rev_mid_panto;
2: spriteset_223_5500_rev_mid_panto;
1: spriteset_223_2500_rev_mid_panto;
0: spriteset_223_0_rev_mid_panto;
}
switch(FEAT_TRAINS,SELF, sw_223_0_gfx_revflip_mid_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
3: spriteset_223_6000_revflip_mid_panto;
2: spriteset_223_5500_revflip_mid_panto;
1: spriteset_223_2500_revflip_mid_panto;
0: spriteset_223_0_revflip_mid_panto;
}

switch(FEAT_TRAINS,SELF, sw_223_0_gfx_rev_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
3: spriteset_223_6000_rev_mid;
2: spriteset_223_5500_rev_mid;
1: spriteset_223_2500_rev_mid;
0: spriteset_223_0_rev_mid;
}
switch(FEAT_TRAINS,SELF, sw_223_0_gfx_revflip_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
3: spriteset_223_6000_revflip_mid;
2: spriteset_223_5500_revflip_mid;
1: spriteset_223_2500_revflip_mid;
0: spriteset_223_0_revflip_mid;
}

switch(FEAT_TRAINS,SELF, sw_223_0_gfx_rev_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
3: spriteset_223_6000_rev_back;
2: spriteset_223_5500_rev_back;
1: spriteset_223_2500_rev_back;
0: spriteset_223_0_rev_back;
}
switch(FEAT_TRAINS,SELF, sw_223_0_gfx_revflip_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
3: spriteset_223_6000_revflip_back;
2: spriteset_223_5500_revflip_back;
1: spriteset_223_2500_revflip_back;
0: spriteset_223_0_revflip_back;
}

//Check for flipped vehicles (dual_headed)
switch(FEAT_TRAINS, SELF, sw_223_0_gfx_rev_front_flippedcheck, vehicle_is_flipped) {
  1: sw_223_0_gfx_rev_front_livery;
 default: sw_223_0_gfx_revflip_front_livery;
}
switch(FEAT_TRAINS, SELF, sw_223_0_gfx_rev_mid_panto_flippedcheck, vehicle_is_flipped) {
  1: sw_223_0_gfx_revflip_mid_panto_livery;
 default: sw_223_0_gfx_rev_mid_panto_livery;
}
switch(FEAT_TRAINS, SELF, sw_223_0_gfx_rev_mid_flippedcheck, vehicle_is_flipped) {
  1: sw_223_0_gfx_revflip_mid_livery;
 default: sw_223_0_gfx_rev_mid_livery;
}
switch(FEAT_TRAINS, SELF, sw_223_0_gfx_rev_back_flippedcheck, vehicle_is_flipped) {
  1: sw_223_0_gfx_revflip_back_livery;
 default: sw_223_0_gfx_rev_back_livery;
}

//Pantograph Position Testing
switch(FEAT_TRAINS, SELF, sw_223_0_gfx_rev_pantograph_pos_6car, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  1: sw_223_0_gfx_rev_mid_panto_flippedcheck;
  default: sw_223_0_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_223_0_gfx_rev_pantograph_pos_std, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%3]){ //look at opposite position_in_vehID_chain
  0: sw_223_0_gfx_rev_mid_panto_flippedcheck;
  default: sw_223_0_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_223_0_gfx_rev_pantograph_pos, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 16, 0x000000FF, 0x41]]){ //look at opposite num_vehs_in_vehid_chain
  4: sw_223_0_gfx_rev_pantograph_pos_6car;
  default: sw_223_0_gfx_rev_pantograph_pos_std;
}

//Front/Back Car Position Testing
switch(FEAT_TRAINS, SELF, sw_223_0_gfx_rev_frontback_nomucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_223_0_gfx_rev_front_flippedcheck;
  0:sw_223_0_gfx_rev_back_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_223_0_gfx_rev_frontback_aftermucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_223_0_gfx_rev_back_flippedcheck;
  0:sw_223_0_gfx_rev_front_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_223_0_gfx_rev_frontback_mucarcheck, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F),STORE_TEMP(var[0x61, 0, 0x000000FF, 0x41],0),  //look at opposite position_in_vehID_chain
STORE_TEMP((position_in_consist_from_end-position_in_consist-1)-LOAD_TEMP(0), 0x10F),                               //look at what is ahead of the first vehicle in the vehID_chain
var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000:sw_223_0_gfx_rev_frontback_aftermucars;
  default:sw_223_0_gfx_rev_frontback_nomucars;
}
switch(FEAT_TRAINS, SELF, sw_223_0_gfx_rev_frontback_sameid, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist+1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle behind of opposite vehicle
  2034:sw_223_0_gfx_rev_frontback_mucarcheck;
  1000:sw_223_0_gfx_rev_front_flippedcheck;
  default:sw_223_0_gfx_rev_back_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_223_0_gfx_rev_frontback, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle infront of opposite vehicle
  2034:sw_223_0_gfx_rev_frontback_sameid;
  1000:sw_223_0_gfx_rev_back_flippedcheck;
  default:sw_223_0_gfx_rev_front_flippedcheck;
}

//ID Testing
switch(FEAT_TRAINS, SELF, sw_223_0_gfx_rev_idcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of opposite vehicle
  1000: sw_223_0_gfx_rev_pantograph_pos;
  2034: sw_223_0_gfx_rev_frontback;
}
/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/
//223_0
switch(FEAT_TRAINS, SELF, sw_223_0_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_223_0_front;
 default: spriteset_223_0_back;
}
switch(FEAT_TRAINS, PARENT, sw_223_0_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_223_0_gfx_frontback_flipcheck;
 default: sw_223_0_gfx_rev_idcheck;
}
//223_2500
switch(FEAT_TRAINS, SELF, sw_223_2500_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_223_2500_front;
 default: spriteset_223_2500_back;
}
switch(FEAT_TRAINS, PARENT, sw_223_2500_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_223_0_gfx_rev_idcheck;
 default: sw_223_0_gfx_rev_idcheck;
}
//223_5500
switch(FEAT_TRAINS, SELF, sw_223_5500_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_223_5500_front;
 default: spriteset_223_5500_back;
}
switch(FEAT_TRAINS, PARENT, sw_223_5500_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_223_5500_gfx_frontback_flipcheck;
 default: sw_223_0_gfx_rev_idcheck;
}
//223_6000
switch(FEAT_TRAINS, SELF, sw_223_6000_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_223_6000_front;
 default: spriteset_223_6000_back;
}
switch(FEAT_TRAINS, PARENT, sw_223_6000_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_223_6000_gfx_frontback_flipcheck;
 default: sw_223_0_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Middle Car Switches---*/
//223_0
switch(FEAT_TRAINS, PARENT, sw_223_0_gfx_mucar_revcheck_mid, vehicle_is_reversed){
    0: sw_223_0_gfx_pantograph_pos;
    default: sw_223_0_gfx_rev_idcheck;
}
//223_2500
switch(FEAT_TRAINS, PARENT, sw_223_2500_gfx_mucar_revcheck_mid, vehicle_is_reversed){
    0: sw_223_2500_gfx_pantograph_pos;
    default: sw_223_0_gfx_rev_idcheck;
}
//223_5500
switch(FEAT_TRAINS, PARENT, sw_223_5500_gfx_mucar_revcheck_mid, vehicle_is_reversed){
    0: sw_223_5000_gfx_pantograph_pos;
    default: sw_223_0_gfx_rev_idcheck;
}
//223_6000
switch(FEAT_TRAINS, PARENT, sw_223_6000_gfx_mucar_revcheck_mid, vehicle_is_reversed){
    0: sw_223_6000_gfx_pantograph_pos;
    default: sw_223_0_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Livery Refitting Switches---*/
//Main Switches
switch(FEAT_TRAINS, SELF, sw_223_0_gfx_mucar, cargo_subtype) {
  3: sw_223_6000_gfx_mucar_revcheck_mid;
  2: sw_223_5500_gfx_mucar_revcheck_mid;
  1: sw_223_2500_gfx_mucar_revcheck_mid;
  0: sw_223_0_gfx_mucar_revcheck_mid;
}
switch(FEAT_TRAINS, SELF, sw_223_0_gfx_main, cargo_subtype) {
  3: sw_223_6000_gfx_frontback_revcheck;
  2: sw_223_5500_gfx_frontback_revcheck;
  1: sw_223_2500_gfx_frontback_revcheck;
  0: sw_223_0_gfx_frontback_revcheck;
}

//Menu Switches

switch(FEAT_TRAINS, SELF, sw_223_0_subtypetext_mucar, cargo_subtype) {
  3: string(JRW223_6000_LV);
  2: string(JRW223_5500_LV);
  1: string(JRW223_2500_LV);
  0: string(JRW223_0_LV);
}
switch(FEAT_TRAINS, SELF, sw_223_0_subtypetext_main, cargo_subtype) {
  3: string(JRW223_6000_LV);
  2: string(JRW223_5500_LV);
  1: string(JRW223_2500_LV);
  0: string(JRW223_0_LV);
}
/*---END OF SECTION---*/



//Coupling
  switch(FEAT_TRAINS, SELF, sw_223_0_attach_vehid, [vehicle_type_id == emu_223_0 || vehicle_type_id == mu_car]) {
  0: return string(MU_UNIQUE);
  }



item(FEAT_TRAINS, emu_223_0) {
    property {
        name:                         string(JRW_223_0);
        introduction_date:            date(1994, 04, 01);
        model_life:                   14;
        vehicle_life:                 39;
        reliability_decay:            11;

        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_3D;
        cost_factor:                  17;
        running_cost_factor:          51;

        speed:                        120 km/h;
        track_type:                   NARROW_OHLE;
        power:                        480 kW;
        weight:                       37 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  1;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_ELECTRIC;
        engine_class:                 ENGINE_CLASS_ELECTRIC;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                      sw_223_0_gfx_main;
		    purchase:                 spriteset_223_0_purchase;
		    additional_text:	      return string(JRW_223_0_DESC);
        cargo_subtype_text:           sw_223_0_subtypetext_main;
        can_attach_wagon:			  sw_223_0_attach_vehid;
        //start_stop:                   ;
    }
    /*Multiple Unit Car*/
      livery_override(mu_car){
        default:                      sw_223_0_gfx_mucar;
        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_3D;
        cargo_subtype_text:           sw_223_0_subtypetext_mucar;
        power: 120;
        weight: 27;
      }

}
# 1 "JPplus.pnml" 4
# 1 "src/JRW/EMU/223_1000_series.pnml" 1
/*---GFX: Spritesets---*/
//Purchase Sprites
spriteset (spriteset_223_1000_purchase,	                                                     "gfx/JRW/emu207/purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_223_1000_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,         "gfx/JRW/emu223/purchase_1000_32bpp.png")         {tmpl_purchase_dh_32bpp(0, 0)}

//223_1000 Orginal
spriteset (spriteset_223_1000_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_1000_grfront,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_1000_back,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_1000_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_1000_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_223_1000_rev_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_1000_rev_grfront,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_1000_rev_back,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_1000_rev_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_1000_rev_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_223_1000_revflip_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_1000_revflip_grfront,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_1000_revflip_back,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_1000_revflip_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_1000_revflip_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_223_1000_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-1000/223-1000-1-1.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_1000_grfront,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-1000/223-1000-3-1.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_1000_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-1000/223-1000-1-2.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_223_1000_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-1000/223-1000-1-3.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_223_1000_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-1000/223-1000-1-4.png")        {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_223_1000_rev_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-1000/223-1000-1-1.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_223_1000_rev_grfront,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-1000/223-1000-3-1.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_223_1000_rev_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-1000/223-1000-1-2.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_1000_rev_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-1000/223-1000-1-3.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_1000_rev_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-1000/223-1000-1-4.png")        {tmpl_std(0, 1)}

alternative_sprites(spriteset_223_1000_revflip_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-1000/223-1000-1-1.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_223_1000_revflip_grfront,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-1000/223-1000-3-1.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_223_1000_revflip_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-1000/223-1000-1-2.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_223_1000_revflip_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-1000/223-1000-1-3.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_223_1000_revflip_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-1000/223-1000-1-4.png")        {tmpl_std_rev(0, 1)}

//223_1000 Refurb
spriteset (spriteset_223_1000refurb_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_1000refurb_back,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_1000refurb_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_1000refurb_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_223_1000refurb_rev_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_1000refurb_rev_back,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_1000refurb_rev_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_1000refurb_rev_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_223_1000refurb_revflip_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_1000refurb_revflip_back,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_1000refurb_revflip_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_1000refurb_revflip_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_223_1000refurb_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-1000-2-1.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_1000refurb_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-1000-2-2.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_223_1000refurb_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-1000-2-3.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_223_1000refurb_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-1000-2-4.png")        {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_223_1000refurb_rev_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-1000-2-1.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_223_1000refurb_rev_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-1000-2-2.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_1000refurb_rev_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-1000-2-3.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_1000refurb_rev_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-1000-2-4.png")        {tmpl_std(0, 1)}

alternative_sprites(spriteset_223_1000refurb_revflip_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-1000-2-1.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_223_1000refurb_revflip_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-1000-2-2.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_223_1000refurb_revflip_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-1000-2-3.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_223_1000refurb_revflip_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-1000-2-4.png")        {tmpl_std_rev(0, 1)}

//223_2000
spriteset (spriteset_223_2000_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_2000_back,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_2000_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_2000_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_223_2000_rev_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_2000_rev_back,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_2000_rev_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_2000_rev_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_223_2000_revflip_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_2000_revflip_back,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_2000_revflip_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_2000_revflip_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_223_2000_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2000/223-2000-1-1.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_2000_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2000/223-2000-1-2.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_223_2000_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2000/223-2000-1-3.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_223_2000_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2000/223-2000-1-4.png")        {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_223_2000_rev_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2000/223-2000-1-1.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_223_2000_rev_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2000/223-2000-1-2.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_2000_rev_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2000/223-2000-1-3.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_2000_rev_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2000/223-2000-1-4.png")        {tmpl_std(0, 1)}

alternative_sprites(spriteset_223_2000_revflip_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2000/223-2000-1-1.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_223_2000_revflip_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2000/223-2000-1-2.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_223_2000_revflip_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2000/223-2000-1-3.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_223_2000_revflip_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2000/223-2000-1-4.png")        {tmpl_std_rev(0, 1)}

/*---END OF SECTION---*/



/*---GFX: Pantograph Positions---*/
//223_1000
switch(FEAT_TRAINS,SELF, sw_223_1000_gfx_pantograph_pos_6car, position_in_vehid_chain){
  1: spriteset_223_1000_mid_panto;
  default:spriteset_223_1000_mid;
}
switch(FEAT_TRAINS,SELF, sw_223_1000_gfx_pantograph_pos_std, position_in_vehid_chain%3){
  0: spriteset_223_1000_mid_panto;
  default:spriteset_223_1000_mid;
}
switch(FEAT_TRAINS,SELF, sw_223_1000_gfx_pantograph_pos, num_vehs_in_vehid_chain){
  4: sw_223_1000_gfx_pantograph_pos_6car;
  default: sw_223_1000_gfx_pantograph_pos_std;
}

//223_1000 Refurb
switch(FEAT_TRAINS,SELF, sw_223_1000refurb_gfx_pantograph_pos_6car, position_in_vehid_chain){
  1: spriteset_223_1000refurb_mid_panto;
  default:spriteset_223_1000refurb_mid;
}
switch(FEAT_TRAINS,SELF, sw_223_1000refurb_gfx_pantograph_pos_std, position_in_vehid_chain%3){
  0: spriteset_223_1000refurb_mid_panto;
  default:spriteset_223_1000refurb_mid;
}
switch(FEAT_TRAINS,SELF, sw_223_1000refurb_gfx_pantograph_pos, num_vehs_in_vehid_chain){
  4: sw_223_1000refurb_gfx_pantograph_pos_6car;
  default: sw_223_1000refurb_gfx_pantograph_pos_std;
}

//223_2000
switch(FEAT_TRAINS,SELF, sw_223_2000_gfx_pantograph_pos_6car, position_in_vehid_chain){
  1: spriteset_223_2000_mid_panto;
  default:spriteset_223_2000_mid;
}
switch(FEAT_TRAINS,SELF, sw_223_2000_gfx_pantograph_pos_std, position_in_vehid_chain%3){
  0: spriteset_223_2000_mid_panto;
  default:spriteset_223_2000_mid;
}
switch(FEAT_TRAINS,SELF, sw_223_2000_gfx_pantograph_pos, num_vehs_in_vehid_chain){
  4: sw_223_2000_gfx_pantograph_pos_6car;
  default: sw_223_2000_gfx_pantograph_pos_std;
}
/*---END OF SECTION---*/



/*---GFX: Train Reversing Switches---*/
//Livery Selection
switch(FEAT_TRAINS,SELF, sw_223_1000_gfx_rev_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
2: spriteset_223_2000_rev_front;
1: spriteset_223_1000_rev_grfront;
0: spriteset_223_1000_rev_front;
}
switch(FEAT_TRAINS,SELF, sw_223_1000_gfx_revflip_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
2: spriteset_223_2000_revflip_front;
1: spriteset_223_1000_revflip_grfront;
0: spriteset_223_1000_revflip_front;
}

switch(FEAT_TRAINS,SELF, sw_223_1000_gfx_rev_mid_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
2: spriteset_223_2000_rev_mid_panto;
1: spriteset_223_1000_rev_mid_panto;
0: spriteset_223_1000_rev_mid_panto;
}
switch(FEAT_TRAINS,SELF, sw_223_1000_gfx_revflip_mid_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
2: spriteset_223_2000_revflip_mid_panto;
1: spriteset_223_1000_revflip_mid_panto;
0: spriteset_223_1000_revflip_mid_panto;
}

switch(FEAT_TRAINS,SELF, sw_223_1000_gfx_rev_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
2: spriteset_223_2000_rev_mid;
1: spriteset_223_1000_rev_mid;
0: spriteset_223_1000_rev_mid;
}
switch(FEAT_TRAINS,SELF, sw_223_1000_gfx_revflip_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
2: spriteset_223_2000_revflip_mid;
1: spriteset_223_1000_revflip_mid;
0: spriteset_223_1000_revflip_mid;
}

switch(FEAT_TRAINS,SELF, sw_223_1000_gfx_rev_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
2: spriteset_223_2000_rev_back;
1: spriteset_223_1000_rev_back;
0: spriteset_223_1000_rev_back;
}
switch(FEAT_TRAINS,SELF, sw_223_1000_gfx_revflip_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
2: spriteset_223_2000_revflip_back;
1: spriteset_223_1000_revflip_back;
0: spriteset_223_1000_revflip_back;
}

//Check for flipped vehicles (dual_headed)
switch(FEAT_TRAINS, SELF, sw_223_1000_gfx_rev_front_flippedcheck, vehicle_is_flipped) {
  1: sw_223_1000_gfx_rev_front_livery;
 default: sw_223_1000_gfx_revflip_front_livery;
}
switch(FEAT_TRAINS, SELF, sw_223_1000_gfx_rev_mid_panto_flippedcheck, vehicle_is_flipped) {
  1: sw_223_1000_gfx_revflip_mid_panto_livery;
 default: sw_223_1000_gfx_rev_mid_panto_livery;
}
switch(FEAT_TRAINS, SELF, sw_223_1000_gfx_rev_mid_flippedcheck, vehicle_is_flipped) {
  1: sw_223_1000_gfx_revflip_mid_livery;
 default: sw_223_1000_gfx_rev_mid_livery;
}
switch(FEAT_TRAINS, SELF, sw_223_1000_gfx_rev_back_flippedcheck, vehicle_is_flipped) {
  1: sw_223_1000_gfx_revflip_back_livery;
 default: sw_223_1000_gfx_rev_back_livery;
}

//Pantograph Position Testing
switch(FEAT_TRAINS, SELF, sw_223_1000_gfx_rev_pantograph_pos_6car, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  1: sw_223_1000_gfx_rev_mid_panto_flippedcheck;
  default: sw_223_1000_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_223_1000_gfx_rev_pantograph_pos_std, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%3]){ //look at opposite position_in_vehID_chain
  0: sw_223_1000_gfx_rev_mid_panto_flippedcheck;
  default: sw_223_1000_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_223_1000_gfx_rev_pantograph_pos, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 16, 0x000000FF, 0x41]]){ //look at opposite num_vehs_in_vehid_chain
  4: sw_223_1000_gfx_rev_pantograph_pos_6car;
  default: sw_223_1000_gfx_rev_pantograph_pos_std;
}

//Front/Back Car Position Testing
switch(FEAT_TRAINS, SELF, sw_223_1000_gfx_rev_frontback_nomucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_223_1000_gfx_rev_front_flippedcheck;
  0:sw_223_1000_gfx_rev_back_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_223_1000_gfx_rev_frontback_aftermucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_223_1000_gfx_rev_back_flippedcheck;
  0:sw_223_1000_gfx_rev_front_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_223_1000_gfx_rev_frontback_mucarcheck, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F),STORE_TEMP(var[0x61, 0, 0x000000FF, 0x41],0),  //look at opposite position_in_vehID_chain
STORE_TEMP((position_in_consist_from_end-position_in_consist-1)-LOAD_TEMP(0), 0x10F),                               //look at what is ahead of the first vehicle in the vehID_chain
var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000:sw_223_1000_gfx_rev_frontback_aftermucars;
  default:sw_223_1000_gfx_rev_frontback_nomucars;
}
switch(FEAT_TRAINS, SELF, sw_223_1000_gfx_rev_frontback_sameid, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist+1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle behind of opposite vehicle
  2035:sw_223_1000_gfx_rev_frontback_mucarcheck;
  1000:sw_223_1000_gfx_rev_front_flippedcheck;
  default:sw_223_1000_gfx_rev_back_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_223_1000_gfx_rev_frontback, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle infront of opposite vehicle
  2035:sw_223_1000_gfx_rev_frontback_sameid;
  1000:sw_223_1000_gfx_rev_back_flippedcheck;
  default:sw_223_1000_gfx_rev_front_flippedcheck;
}

//ID Testing
switch(FEAT_TRAINS, SELF, sw_223_1000_gfx_rev_idcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of opposite vehicle
  1000: sw_223_1000_gfx_rev_pantograph_pos;
  2035: sw_223_1000_gfx_rev_frontback;
}
/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/
//223_1000
switch(FEAT_TRAINS, SELF, sw_223_1000_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_223_1000_front;
 default: spriteset_223_1000_back;
}
switch(FEAT_TRAINS, PARENT, sw_223_1000_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_223_1000_gfx_frontback_flipcheck;
 default: sw_223_1000_gfx_rev_idcheck;
}
//223_1000 A-SEAT
switch(FEAT_TRAINS, SELF, sw_223_1000as_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_223_1000_grfront;
 default: spriteset_223_1000_back;
}
switch(FEAT_TRAINS, PARENT, sw_223_1000as_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_223_1000as_gfx_frontback_flipcheck;
 default: sw_223_1000_gfx_rev_idcheck;
}
//223_2000
switch(FEAT_TRAINS, SELF, sw_223_2000_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_223_2000_front;
 default: spriteset_223_2000_back;
}
switch(FEAT_TRAINS, PARENT, sw_223_2000_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_223_2000_gfx_frontback_flipcheck;
 default: sw_223_1000_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Middle Car Switches---*/
//223_1000
switch(FEAT_TRAINS, PARENT, sw_223_1000_gfx_mucar_revcheck_mid, vehicle_is_reversed){
    0: sw_223_1000_gfx_pantograph_pos;
    default: sw_223_1000_gfx_rev_idcheck;
}
//223_2000
switch(FEAT_TRAINS, PARENT, sw_223_2000_gfx_mucar_revcheck_mid, vehicle_is_reversed){
    0: sw_223_2000_gfx_pantograph_pos;
    default: sw_223_1000_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Livery Refitting Switches---*/
//Main Switches
switch(FEAT_TRAINS, SELF, sw_223_1000_gfx_mucar, cargo_subtype){
  2: sw_223_2000_gfx_mucar_revcheck_mid;
  1: sw_223_1000_gfx_mucar_revcheck_mid;
  0: sw_223_1000_gfx_mucar_revcheck_mid;
}
switch(FEAT_TRAINS, SELF, sw_223_1000_gfx_main, cargo_subtype) {
  2: sw_223_2000_gfx_frontback_revcheck;
  1: sw_223_1000as_gfx_frontback_revcheck;
  0: sw_223_1000_gfx_frontback_revcheck;
}

//Menu Switches
switch(FEAT_TRAINS, SELF, sw_223_1000_subtypetext_mucar, cargo_subtype) {
  2: string(JRW223_2000_LV);
  1: string(JRW223_1000as_LV);
  0: string(JRW223_1000_LV);
}
switch(FEAT_TRAINS, SELF, sw_223_1000_subtypetext_main, cargo_subtype) {
  2: string(JRW223_2000_LV);
  1: string(JRW223_1000as_LV);
  0: string(JRW223_1000_LV);
}
/*---END OF SECTION---*/



//Coupling
  switch(FEAT_TRAINS, SELF, sw_223_1000_attach_vehid, [vehicle_type_id == emu_223_1000 || vehicle_type_id == mu_car]) {
  0: return string(MU_UNIQUE);
  }



item(FEAT_TRAINS, emu_223_1000) {
    property {
        name:                         string(JRW_223_1000);
        introduction_date:            date(1995, 12, 08);
        model_life:                   13;
        vehicle_life:                 39;
        reliability_decay:            11;

        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_3D;
        cost_factor:                  17;
        running_cost_factor:          51;

        speed:                        130 km/h;
        track_type:                   NARROW_OHLE;
        power:                        480 kW;
        weight:                       37 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  1;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_ELECTRIC;
        engine_class:                 ENGINE_CLASS_ELECTRIC;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                      sw_223_1000_gfx_main;
		    purchase:                 spriteset_223_1000_purchase;
		    additional_text:	      return string(JRW_223_1000_DESC);
        cargo_subtype_text:           sw_223_1000_subtypetext_main;
        can_attach_wagon:			  sw_223_1000_attach_vehid;
        //start_stop:                   ;
    }
    /*Multiple Unit Car*/
      livery_override(mu_car){
        default:                      sw_223_1000_gfx_mucar;
        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_3D;
        cargo_subtype_text:           sw_223_1000_subtypetext_mucar;
        power: 120;
        weight: 27;
      }

}
# 1 "JPplus.pnml" 4


//JR-Shikoku
# 1 "src/JRS/EMU/6000_series.pnml" 1
/*---GFX: Spritesets---*/
//Purchase Sprites
spriteset (spriteset_6000_purchase,	                                                     "gfx/JRW/emu207/purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_6000_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,         "gfx/JRS/emu6000/purchase_32bpp.png")         {tmpl_purchase_dh_32bpp(0, 0)}

//6000
spriteset (spriteset_6000_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_6000_back,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_6000_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_6000_rev_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_6000_rev_back,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_6000_rev_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_6000_revflip_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_6000_revflip_back,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_6000_revflip_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_6000_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRS/emu6000/6000-1-1.png")           {tmpl_std(0, 1)}
alternative_sprites(spriteset_6000_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRS/emu6000/6000-1-2.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_6000_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRS/emu6000/6000-1-3.png")           {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_6000_rev_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRS/emu6000/6000-1-1.png")          {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_6000_rev_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRS/emu6000/6000-1-2.png")       {tmpl_std(0, 1)}
alternative_sprites(spriteset_6000_rev_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRS/emu6000/6000-1-3.png")          {tmpl_std(0, 1)}

alternative_sprites(spriteset_6000_revflip_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRS/emu6000/6000-1-1.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_6000_revflip_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRS/emu6000/6000-1-2.png")     {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_6000_revflip_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRS/emu6000/6000-1-3.png")        {tmpl_std_rev(0, 1)}
/*---END OF SECTION---*/



/*---GFX: Train Reversing Switches---*/
//Livery Selection
switch(FEAT_TRAINS,SELF, sw_6000_gfx_rev_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0: spriteset_6000_rev_front;
}
switch(FEAT_TRAINS,SELF, sw_6000_gfx_revflip_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0: spriteset_6000_revflip_front;
}

switch(FEAT_TRAINS,SELF, sw_6000_gfx_rev_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0: spriteset_6000_rev_mid;
}
switch(FEAT_TRAINS,SELF, sw_6000_gfx_revflip_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0: spriteset_6000_revflip_mid;
}

switch(FEAT_TRAINS,SELF, sw_6000_gfx_rev_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0: spriteset_6000_rev_back;
}
switch(FEAT_TRAINS,SELF, sw_6000_gfx_revflip_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){

0: spriteset_6000_revflip_back;
}

//Check for flipped vehicles (dual_headed)
switch(FEAT_TRAINS, SELF, sw_6000_gfx_rev_front_flippedcheck, vehicle_is_flipped) {
  1: sw_6000_gfx_rev_front_livery;
 default: sw_6000_gfx_revflip_front_livery;
}
switch(FEAT_TRAINS, SELF, sw_6000_gfx_rev_mid_flippedcheck, vehicle_is_flipped) {
  1: sw_6000_gfx_revflip_mid_livery;
 default: sw_6000_gfx_rev_mid_livery;
}
switch(FEAT_TRAINS, SELF, sw_6000_gfx_rev_back_flippedcheck, vehicle_is_flipped) {
  1: sw_6000_gfx_revflip_back_livery;
 default: sw_6000_gfx_rev_back_livery;
}

//Front/Back Car Position Testing
switch(FEAT_TRAINS, SELF, sw_6000_gfx_rev_frontback_nomucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_6000_gfx_rev_front_flippedcheck;
  0:sw_6000_gfx_rev_back_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_6000_gfx_rev_frontback_aftermucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_6000_gfx_rev_back_flippedcheck;
  0:sw_6000_gfx_rev_front_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_6000_gfx_rev_frontback_mucarcheck, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F),STORE_TEMP(var[0x61, 0, 0x000000FF, 0x41],0),  //look at opposite position_in_vehID_chain
STORE_TEMP((position_in_consist_from_end-position_in_consist-1)-LOAD_TEMP(0), 0x10F),                               //look at what is ahead of the first vehicle in the vehID_chain
var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000:sw_6000_gfx_rev_frontback_aftermucars;
  default:sw_6000_gfx_rev_frontback_nomucars;
}
switch(FEAT_TRAINS, SELF, sw_6000_gfx_rev_frontback_sameid, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist+1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle behind of opposite vehicle
  2011:sw_6000_gfx_rev_frontback_mucarcheck;
  1000:sw_6000_gfx_rev_front_flippedcheck;
  default:sw_6000_gfx_rev_back_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_6000_gfx_rev_frontback, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle infront of opposite vehicle
  2011:sw_6000_gfx_rev_frontback_sameid;
  1000:sw_6000_gfx_rev_back_flippedcheck;
  default:sw_6000_gfx_rev_front_flippedcheck;
}

//ID Testing
switch(FEAT_TRAINS, SELF, sw_6000_gfx_rev_idcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of opposite vehicle
  1000: sw_6000_gfx_rev_mid_flippedcheck;
  2011: sw_6000_gfx_rev_frontback;
}
/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/
//6000
switch(FEAT_TRAINS, SELF, sw_6000_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_6000_front;
 default: spriteset_6000_back;
}
switch(FEAT_TRAINS, PARENT, sw_6000_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_6000_gfx_frontback_flipcheck;
 default: sw_6000_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Middle Car Switches---*/
//6000
switch(FEAT_TRAINS, PARENT, sw_6000_gfx_mucar_revcheck_mid, vehicle_is_reversed){
    0: spriteset_6000_mid;
    default: sw_6000_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Livery Refitting Switches---*/
//Main Switches
switch(FEAT_TRAINS, SELF, sw_6000_gfx_mucar, cargo_subtype){
  0: sw_6000_gfx_mucar_revcheck_mid;
}
switch(FEAT_TRAINS, SELF, sw_6000_gfx_main, cargo_subtype) {
  0: sw_6000_gfx_frontback_revcheck;
}

//Menu Switches
/*
switch(FEAT_TRAINS, SELF, sw_6000_subtypetext_mucar, cargo_subtype) {
  4: string(JRS6000_SPACEWORLD2);
  3: string(JRS6000_SPACEWORLD);
  2: string(JRS6000_GREENLAND);
  1: string(JRS6000_RENEWAL);
  0: string(JRS6000_INITIAL);
}
switch(FEAT_TRAINS, SELF, sw_6000_subtypetext_main, cargo_subtype) {
  4: string(JRS6000_SPACEWORLD2);
  3: string(JRS6000_SPACEWORLD);
  2: string(JRS6000_GREENLAND);
  1: string(JRS6000_RENEWAL);
  0: string(JRS6000_INITIAL);
}
*/
/*---END OF SECTION---*/



//Coupling
  switch(FEAT_TRAINS, SELF, sw_6000_attach_vehid, [vehicle_type_id == emu_6000 || vehicle_type_id == mu_car]) {
  0: return string(MU_UNIQUE);
  }



item(FEAT_TRAINS, emu_6000) {
    property {
        name:                         string(JRS_6000);
        introduction_date:            date(1995, 04, 16);
        model_life:                   2;
        vehicle_life:                 30;
        reliability_decay:            16;

        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_3D;
        cost_factor:                  17;
        running_cost_factor:          51;

        speed:                        110 km/h;
        track_type:                   NARROW_OHLE;
        power:                        520 kW;
        weight:                       37 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  1;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_ELECTRIC;
        engine_class:                 ENGINE_CLASS_ELECTRIC;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                      sw_6000_gfx_main;
		    purchase:                 spriteset_6000_purchase;
		    additional_text:	      return string(JRS_6000_DESC);
        //cargo_subtype_text:           sw_6000_subtypetext_main;
        can_attach_wagon:			  sw_6000_attach_vehid;
        //start_stop:                   ;
    }
    /*Multiple Unit Car*/
      livery_override(mu_car){
        default:                      sw_6000_gfx_mucar;
        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_3D;
        //cargo_subtype_text:           sw_6000_subtypetext_mucar;
        power: 120;
        weight: 27;
      }

}
# 1 "JPplus.pnml" 4

//JR-Kyushu
//#include "src/JRK/EMU/303_series.pnml"
# 1 "src/JRK/EMU/811_series.pnml" 1
/*---GFX: Spritesets---*/
//Purchase Sprites
spriteset (spriteset_811_purchase,	                                                     "gfx/JRW/emu207/purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_811_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,         "gfx/JRK/emu811/purchase_32bpp.png")         {tmpl_purchase_dh_32bpp(0, 0)}

//811 Orginal
spriteset (spriteset_811_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_back,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_811_rev_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_rev_back,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_rev_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_811_revflip_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_revflip_back,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_revflip_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_811_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/Initial/811-1-1.png")           {tmpl_std(0, 1)}
alternative_sprites(spriteset_811_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/Initial/811-1-2.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_811_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/Initial/811-1-3.png")           {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_811_rev_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/Initial/811-1-1.png")          {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_811_rev_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/Initial/811-1-2.png")       {tmpl_std(0, 1)}
alternative_sprites(spriteset_811_rev_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/Initial/811-1-3.png")          {tmpl_std(0, 1)}

alternative_sprites(spriteset_811_revflip_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/Initial/811-1-1.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_811_revflip_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/Initial/811-1-2.png")     {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_811_revflip_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/Initial/811-1-3.png")        {tmpl_std_rev(0, 1)}

//811 Renewal
spriteset (spriteset_811_front_renewal,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_back_renewal,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_mid_renewal,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_811_rev_front_renewal,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_rev_back_renewal,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_rev_mid_renewal,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_811_revflip_front_renewal,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_revflip_back_renewal,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_revflip_mid_renewal,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_811_front_renewal,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/Renewal/811-5-1.png")           {tmpl_std(0, 1)}
alternative_sprites(spriteset_811_back_renewal,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/Renewal/811-5-2.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_811_mid_renewal,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/Renewal/811-5-3.png")           {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_811_rev_front_renewal,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/Renewal/811-5-1.png")          {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_811_rev_back_renewal,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/Renewal/811-5-2.png")       {tmpl_std(0, 1)}
alternative_sprites(spriteset_811_rev_mid_renewal,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/Renewal/811-5-3.png")          {tmpl_std(0, 1)}

alternative_sprites(spriteset_811_revflip_front_renewal,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/Renewal/811-5-1.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_811_revflip_back_renewal,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/Renewal/811-5-2.png")     {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_811_revflip_mid_renewal,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/Renewal/811-5-3.png")        {tmpl_std_rev(0, 1)}

//811 Greenland
spriteset (spriteset_811_front_greenland,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_back_greenland,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_mid_greenland,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_811_rev_front_greenland,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_rev_back_greenland,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_rev_mid_greenland,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_811_revflip_front_greenland,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_revflip_back_greenland,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_revflip_mid_greenland,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_811_front_greenland,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/greenland/811-4-1.png")           {tmpl_std(0, 1)}
alternative_sprites(spriteset_811_back_greenland,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/greenland/811-4-2.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_811_mid_greenland,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/greenland/811-4-3.png")           {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_811_rev_front_greenland,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/greenland/811-4-1.png")          {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_811_rev_back_greenland,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/greenland/811-4-2.png")       {tmpl_std(0, 1)}
alternative_sprites(spriteset_811_rev_mid_greenland,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/greenland/811-4-3.png")          {tmpl_std(0, 1)}

alternative_sprites(spriteset_811_revflip_front_greenland,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/greenland/811-4-1.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_811_revflip_back_greenland,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/greenland/811-4-2.png")     {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_811_revflip_mid_greenland,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/greenland/811-4-3.png")        {tmpl_std_rev(0, 1)}

//811 Spaceworld
spriteset (spriteset_811_front_spaceworld,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_back_spaceworld,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_mid_spaceworld,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_811_rev_front_spaceworld,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_rev_back_spaceworld,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_rev_mid_spaceworld,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_811_revflip_front_spaceworld,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_revflip_back_spaceworld,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_revflip_mid_spaceworld,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_811_front_spaceworld,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/spaceworld/811-2-1.png")           {tmpl_std(0, 1)}
alternative_sprites(spriteset_811_back_spaceworld,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/spaceworld/811-2-2.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_811_mid_spaceworld,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/spaceworld/811-2-3.png")           {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_811_rev_front_spaceworld,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/spaceworld/811-2-1.png")          {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_811_rev_back_spaceworld,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/spaceworld/811-2-2.png")       {tmpl_std(0, 1)}
alternative_sprites(spriteset_811_rev_mid_spaceworld,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/spaceworld/811-2-3.png")          {tmpl_std(0, 1)}

alternative_sprites(spriteset_811_revflip_front_spaceworld,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/spaceworld/811-2-1.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_811_revflip_back_spaceworld,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/spaceworld/811-2-2.png")     {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_811_revflip_mid_spaceworld,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/spaceworld/811-2-3.png")        {tmpl_std_rev(0, 1)}

//811 Spaceworld New
spriteset (spriteset_811_front_spaceworldnew,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_back_spaceworldnew,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_mid_spaceworldnew,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_811_rev_front_spaceworldnew,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_rev_back_spaceworldnew,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_rev_mid_spaceworldnew,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_811_revflip_front_spaceworldnew,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_revflip_back_spaceworldnew,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_revflip_mid_spaceworldnew,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_811_front_spaceworldnew,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/spaceworldnew/811-3-1.png")           {tmpl_std(0, 1)}
alternative_sprites(spriteset_811_back_spaceworldnew,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/spaceworldnew/811-3-2.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_811_mid_spaceworldnew,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/spaceworldnew/811-3-3.png")           {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_811_rev_front_spaceworldnew,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/spaceworldnew/811-3-1.png")          {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_811_rev_back_spaceworldnew,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/spaceworldnew/811-3-2.png")       {tmpl_std(0, 1)}
alternative_sprites(spriteset_811_rev_mid_spaceworldnew,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/spaceworldnew/811-3-3.png")          {tmpl_std(0, 1)}

alternative_sprites(spriteset_811_revflip_front_spaceworldnew,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/spaceworldnew/811-3-1.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_811_revflip_back_spaceworldnew,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/spaceworldnew/811-3-2.png")     {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_811_revflip_mid_spaceworldnew,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/spaceworldnew/811-3-3.png")        {tmpl_std_rev(0, 1)}
/*---END OF SECTION---*/



/*---GFX: Train Reversing Switches---*/
//Livery Selection
switch(FEAT_TRAINS,SELF, sw_811_gfx_rev_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
4: spriteset_811_rev_front_spaceworldnew;
3: spriteset_811_rev_front_spaceworld;
2: spriteset_811_rev_front_greenland;
1: spriteset_811_rev_front_renewal;
0: spriteset_811_rev_front;
}
switch(FEAT_TRAINS,SELF, sw_811_gfx_revflip_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
4: spriteset_811_revflip_front_spaceworldnew;
3: spriteset_811_revflip_front_spaceworld;
2: spriteset_811_revflip_front_greenland;
1: spriteset_811_revflip_front_renewal;
0: spriteset_811_revflip_front;
}

switch(FEAT_TRAINS,SELF, sw_811_gfx_rev_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
4: spriteset_811_rev_mid_spaceworldnew;
3: spriteset_811_rev_mid_spaceworld;
2: spriteset_811_rev_mid_greenland;
1: spriteset_811_rev_mid_renewal;
0: spriteset_811_rev_mid;
}
switch(FEAT_TRAINS,SELF, sw_811_gfx_revflip_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
4: spriteset_811_revflip_mid_spaceworldnew;
3: spriteset_811_revflip_mid_spaceworld;
2: spriteset_811_revflip_mid_greenland;
1: spriteset_811_revflip_mid_renewal;
0: spriteset_811_revflip_mid;
}

switch(FEAT_TRAINS,SELF, sw_811_gfx_rev_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
4: spriteset_811_rev_back_spaceworldnew;
3: spriteset_811_rev_back_spaceworld;
2: spriteset_811_rev_back_greenland;
1: spriteset_811_rev_back_renewal;
0: spriteset_811_rev_back;
}
switch(FEAT_TRAINS,SELF, sw_811_gfx_revflip_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
4: spriteset_811_revflip_back_spaceworldnew;
3: spriteset_811_revflip_back_spaceworld;
2: spriteset_811_revflip_back_greenland;
1: spriteset_811_revflip_back_renewal;
0: spriteset_811_revflip_back;
}

//Check for flipped vehicles (dual_headed)
switch(FEAT_TRAINS, SELF, sw_811_gfx_rev_front_flippedcheck, vehicle_is_flipped) {
  1: sw_811_gfx_rev_front_livery;
 default: sw_811_gfx_revflip_front_livery;
}
switch(FEAT_TRAINS, SELF, sw_811_gfx_rev_mid_flippedcheck, vehicle_is_flipped) {
  1: sw_811_gfx_revflip_mid_livery;
 default: sw_811_gfx_rev_mid_livery;
}
switch(FEAT_TRAINS, SELF, sw_811_gfx_rev_back_flippedcheck, vehicle_is_flipped) {
  1: sw_811_gfx_revflip_back_livery;
 default: sw_811_gfx_rev_back_livery;
}

//Front/Back Car Position Testing
switch(FEAT_TRAINS, SELF, sw_811_gfx_rev_frontback_nomucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_811_gfx_rev_front_flippedcheck;
  0:sw_811_gfx_rev_back_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_811_gfx_rev_frontback_aftermucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_811_gfx_rev_back_flippedcheck;
  0:sw_811_gfx_rev_front_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_811_gfx_rev_frontback_mucarcheck, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F),STORE_TEMP(var[0x61, 0, 0x000000FF, 0x41],0),  //look at opposite position_in_vehID_chain
STORE_TEMP((position_in_consist_from_end-position_in_consist-1)-LOAD_TEMP(0), 0x10F),                               //look at what is ahead of the first vehicle in the vehID_chain
var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000:sw_811_gfx_rev_frontback_aftermucars;
  default:sw_811_gfx_rev_frontback_nomucars;
}
switch(FEAT_TRAINS, SELF, sw_811_gfx_rev_frontback_sameid, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist+1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle behind of opposite vehicle
  2037:sw_811_gfx_rev_frontback_mucarcheck;
  1000:sw_811_gfx_rev_front_flippedcheck;
  default:sw_811_gfx_rev_back_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_811_gfx_rev_frontback, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle infront of opposite vehicle
  2037:sw_811_gfx_rev_frontback_sameid;
  1000:sw_811_gfx_rev_back_flippedcheck;
  default:sw_811_gfx_rev_front_flippedcheck;
}

//ID Testing
switch(FEAT_TRAINS, SELF, sw_811_gfx_rev_idcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of opposite vehicle
  1000: sw_811_gfx_rev_mid_flippedcheck;
  2037: sw_811_gfx_rev_frontback;
}
/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/
//811 Orginal
switch(FEAT_TRAINS, SELF, sw_811_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_811_front;
 default: spriteset_811_back;
}
switch(FEAT_TRAINS, PARENT, sw_811_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_811_gfx_frontback_flipcheck;
 default: sw_811_gfx_rev_idcheck;
}
//811 Renewal
switch(FEAT_TRAINS, SELF, sw_811_renewal_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_811_front_renewal;
 default: spriteset_811_back_renewal;
}
switch(FEAT_TRAINS, PARENT, sw_811_renewal_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_811_renewal_gfx_frontback_flipcheck;
 default: sw_811_gfx_rev_idcheck;
}
//811 Greenland
switch(FEAT_TRAINS, SELF, sw_811_greenland_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_811_front_greenland;
 default: spriteset_811_back_greenland;
}
switch(FEAT_TRAINS, PARENT, sw_811_greenland_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_811_greenland_gfx_frontback_flipcheck;
 default: sw_811_gfx_rev_idcheck;
}
//811 Spaceworld
switch(FEAT_TRAINS, SELF, sw_811_spaceworld_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_811_front_spaceworld;
 default: spriteset_811_back_spaceworld;
}
switch(FEAT_TRAINS, PARENT, sw_811_spaceworld_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_811_spaceworld_gfx_frontback_flipcheck;
 default: sw_811_gfx_rev_idcheck;
}
//811 Spaceworld New
switch(FEAT_TRAINS, SELF, sw_811_spaceworldnew_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_811_front_spaceworldnew;
 default: spriteset_811_back_spaceworldnew;
}
switch(FEAT_TRAINS, PARENT, sw_811_spaceworldnew_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_811_spaceworldnew_gfx_frontback_flipcheck;
 default: sw_811_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Middle Car Switches---*/
//811 Orginal
switch(FEAT_TRAINS, PARENT, sw_811_gfx_mucar_revcheck_mid, vehicle_is_reversed){
    0: spriteset_811_mid;
    default: sw_811_gfx_rev_idcheck;
}
//811 Renewal
switch(FEAT_TRAINS, PARENT, sw_811_renewal_gfx_mucar_revcheck_mid, vehicle_is_reversed){
    0: spriteset_811_mid_renewal;
    default: sw_811_gfx_rev_idcheck;
}
//811 Greenland
switch(FEAT_TRAINS, PARENT, sw_811_greenland_gfx_mucar_revcheck_mid, vehicle_is_reversed){
    0: spriteset_811_mid_greenland;
    default: sw_811_gfx_rev_idcheck;
}
//811 Spaceworld
switch(FEAT_TRAINS, PARENT, sw_811_spaceworld_gfx_mucar_revcheck_mid, vehicle_is_reversed){
    0: spriteset_811_mid_spaceworld;
    default: sw_811_gfx_rev_idcheck;
}
//811 Spaceworld New
switch(FEAT_TRAINS, PARENT, sw_811_spaceworldnew_gfx_mucar_revcheck_mid, vehicle_is_reversed){
    0: spriteset_811_mid_spaceworldnew;
    default: sw_811_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Livery Refitting Switches---*/
//Main Switches
switch(FEAT_TRAINS, SELF, sw_811_gfx_mucar, cargo_subtype){
  4: sw_811_spaceworldnew_gfx_mucar_revcheck_mid;
  3: sw_811_spaceworld_gfx_mucar_revcheck_mid;
  2: sw_811_greenland_gfx_mucar_revcheck_mid;
  1: sw_811_renewal_gfx_mucar_revcheck_mid;
  0: sw_811_gfx_mucar_revcheck_mid;
}
switch(FEAT_TRAINS, SELF, sw_811_gfx_main, cargo_subtype) {
  4: sw_811_spaceworldnew_gfx_frontback_revcheck;
  3: sw_811_spaceworld_gfx_frontback_revcheck;
  2: sw_811_greenland_gfx_frontback_revcheck;
  1: sw_811_renewal_gfx_frontback_revcheck;
  0: sw_811_gfx_frontback_revcheck;
}

//Menu Switches
switch(FEAT_TRAINS, SELF, sw_811_subtypetext_mucar, cargo_subtype) {
  4: string(JRK811_SPACEWORLD2);
  3: string(JRK811_SPACEWORLD);
  2: string(JRK811_GREENLAND);
  1: string(JRK811_RENEWAL);
  0: string(JRK811_INITIAL);
}
switch(FEAT_TRAINS, SELF, sw_811_subtypetext_main, cargo_subtype) {
  4: string(JRK811_SPACEWORLD2);
  3: string(JRK811_SPACEWORLD);
  2: string(JRK811_GREENLAND);
  1: string(JRK811_RENEWAL);
  0: string(JRK811_INITIAL);
}
/*---END OF SECTION---*/



//Coupling
  switch(FEAT_TRAINS, SELF, sw_811_attach_vehid, [vehicle_type_id == emu_811 || vehicle_type_id == mu_car]) {
  0: return string(MU_UNIQUE);
  }



item(FEAT_TRAINS, emu_811) {
    property {
        name:                         string(JRK_811);
        introduction_date:            date(1989, 07, 07);
        model_life:                   4;
        vehicle_life:                 39;
        reliability_decay:            11;

        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_3D;
        cost_factor:                  17;
        running_cost_factor:          51;

        speed:                        120 km/h;
        track_type:                   NARROW_OHLE;
        power:                        480 kW;
        weight:                       37 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  1;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_ELECTRIC;
        engine_class:                 ENGINE_CLASS_ELECTRIC;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                      sw_811_gfx_main;
		    purchase:                 spriteset_811_purchase;
		    additional_text:	      return string(JRK_811_DESC);
        cargo_subtype_text:           sw_811_subtypetext_main;
        can_attach_wagon:			  sw_811_attach_vehid;
        //start_stop:                   ;
    }
    /*Multiple Unit Car*/
      livery_override(mu_car){
        default:                      sw_811_gfx_mucar;
        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_3D;
        cargo_subtype_text:           sw_811_subtypetext_mucar;
        power: 120;
        weight: 27;
      }

}
# 1 "JPplus.pnml" 4
# 1 "src/JRK/EMU/813_series.pnml" 1
/*---GFX: Spritesets---*/
//Purchase Sprites
spriteset (spriteset_813_purchase,	                                                     "gfx/JRW/emu207/purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_813_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,         "gfx/JRK/emu813/purchase_32bpp.png")         {tmpl_purchase_dh_32bpp(0, 0)}

//813 Standard
spriteset (spriteset_813_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_813_back,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_813_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_813_rev_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_813_rev_back,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_813_rev_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_813_revflip_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_813_revflip_back,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_813_revflip_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_813_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/Standard/813-1-1.png")           {tmpl_std(0, 1)}
alternative_sprites(spriteset_813_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/Standard/813-1-2.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_813_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/Standard/813-1-3.png")           {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_813_rev_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/Standard/813-1-1.png")          {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_813_rev_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/Standard/813-1-2.png")       {tmpl_std(0, 1)}
alternative_sprites(spriteset_813_rev_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/Standard/813-1-3.png")          {tmpl_std(0, 1)}

alternative_sprites(spriteset_813_revflip_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/Standard/813-1-1.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_813_revflip_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/Standard/813-1-2.png")     {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_813_revflip_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/Standard/813-1-3.png")        {tmpl_std_rev(0, 1)}

//813 Standard 2
spriteset (spriteset_813_midtype_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_813_midtype_back,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_813_midtype_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_813_midtype_rev_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_813_midtype_rev_back,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_813_midtype_rev_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_813_midtype_revflip_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_813_midtype_revflip_back,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_813_midtype_revflip_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_813_midtype_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/Standard/813-2-1.png")           {tmpl_std(0, 1)}
alternative_sprites(spriteset_813_midtype_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/Standard/813-2-2.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_813_midtype_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/Standard/813-2-3.png")           {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_813_midtype_rev_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/Standard/813-2-1.png")          {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_813_midtype_rev_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/Standard/813-2-2.png")       {tmpl_std(0, 1)}
alternative_sprites(spriteset_813_midtype_rev_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/Standard/813-2-3.png")          {tmpl_std(0, 1)}

alternative_sprites(spriteset_813_midtype_revflip_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/Standard/813-2-1.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_813_midtype_revflip_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/Standard/813-2-2.png")     {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_813_midtype_revflip_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/Standard/813-2-3.png")        {tmpl_std_rev(0, 1)}


//813 Fukuhoku Yutaka
spriteset (spriteset_813_front_fuku,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_813_back_fuku,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_813_mid_fuku,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_813_rev_front_fuku,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_813_rev_back_fuku,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_813_rev_mid_fuku,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_813_revflip_front_fuku,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_813_revflip_back_fuku,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_813_revflip_mid_fuku,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_813_front_fuku,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/FukuhokuYutaka/813-3-1.png")           {tmpl_std(0, 1)}
alternative_sprites(spriteset_813_back_fuku,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/FukuhokuYutaka/813-3-2.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_813_mid_fuku,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/FukuhokuYutaka/813-3-3.png")           {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_813_rev_front_fuku,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/FukuhokuYutaka/813-3-1.png")          {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_813_rev_back_fuku,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/FukuhokuYutaka/813-3-2.png")       {tmpl_std(0, 1)}
alternative_sprites(spriteset_813_rev_mid_fuku,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/FukuhokuYutaka/813-3-3.png")          {tmpl_std(0, 1)}

alternative_sprites(spriteset_813_revflip_front_fuku,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/FukuhokuYutaka/813-3-1.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_813_revflip_back_fuku,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/FukuhokuYutaka/813-3-2.png")     {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_813_revflip_mid_fuku,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/FukuhokuYutaka/813-3-3.png")        {tmpl_std_rev(0, 1)}

//813 Fukuhoku Yutaka 2
spriteset (spriteset_813_midtype_front_fuku,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_813_midtype_back_fuku,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_813_midtype_mid_fuku,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_813_midtype_rev_front_fuku,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_813_midtype_rev_back_fuku,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_813_midtype_rev_mid_fuku,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_813_midtype_revflip_front_fuku,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_813_midtype_revflip_back_fuku,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_813_midtype_revflip_mid_fuku,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_813_midtype_front_fuku,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/FukuhokuYutaka/813-4-1.png")           {tmpl_std(0, 1)}
alternative_sprites(spriteset_813_midtype_back_fuku,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/FukuhokuYutaka/813-4-2.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_813_midtype_mid_fuku,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/FukuhokuYutaka/813-4-3.png")           {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_813_midtype_rev_front_fuku,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/FukuhokuYutaka/813-4-1.png")          {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_813_midtype_rev_back_fuku,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/FukuhokuYutaka/813-4-2.png")       {tmpl_std(0, 1)}
alternative_sprites(spriteset_813_midtype_rev_mid_fuku,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/FukuhokuYutaka/813-4-3.png")          {tmpl_std(0, 1)}

alternative_sprites(spriteset_813_midtype_revflip_front_fuku,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/FukuhokuYutaka/813-4-1.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_813_midtype_revflip_back_fuku,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/FukuhokuYutaka/813-4-2.png")     {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_813_midtype_revflip_mid_fuku,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/FukuhokuYutaka/813-4-3.png")        {tmpl_std_rev(0, 1)}


/*---END OF SECTION---*/



/*---GFX: Pantograph Positions---*/
switch(FEAT_TRAINS,SELF, sw_813_gfx_pantograph_pos, position_in_vehid_chain%2){
  0: spriteset_813_midtype_mid;
  default:spriteset_813_mid;
}

switch(FEAT_TRAINS,SELF, sw_813_gfx_pantograph_pos_fuku, position_in_vehid_chain%2){
  0: spriteset_813_midtype_mid_fuku;
  default:spriteset_813_mid_fuku;
}
/*---END OF SECTION---*/



/*---GFX: Train Reversing Switches---*/
//Livery Selection
switch(FEAT_TRAINS,SELF, sw_813_gfx_rev_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
3: spriteset_813_midtype_rev_front_fuku;
2: spriteset_813_rev_front_fuku;
1: spriteset_813_midtype_rev_front;
0: spriteset_813_rev_front;
}
switch(FEAT_TRAINS,SELF, sw_813_gfx_revflip_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
3: spriteset_813_midtype_revflip_front_fuku;
2: spriteset_813_revflip_front_fuku;
1: spriteset_813_midtype_revflip_front;
0: spriteset_813_revflip_front;
}

switch(FEAT_TRAINS,SELF, sw_813_gfx_rev_mid_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
3: spriteset_813_midtype_rev_mid_fuku;
2: spriteset_813_rev_mid_fuku;
1: spriteset_813_midtype_rev_mid;
0: spriteset_813_rev_mid;
}
switch(FEAT_TRAINS,SELF, sw_813_gfx_revflip_mid_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
3: spriteset_813_midtype_revflip_mid_fuku;
2: spriteset_813_revflip_mid_fuku;
1: spriteset_813_midtype_revflip_mid;
0: spriteset_813_revflip_mid;
}

switch(FEAT_TRAINS,SELF, sw_813_gfx_rev_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
3: spriteset_813_rev_mid_fuku;
2: spriteset_813_rev_mid_fuku;
1: spriteset_813_rev_mid;
0: spriteset_813_rev_mid;
}
switch(FEAT_TRAINS,SELF, sw_813_gfx_revflip_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
3: spriteset_813_revflip_mid_fuku;
2: spriteset_813_revflip_mid_fuku;
1: spriteset_813_revflip_mid;
0: spriteset_813_revflip_mid;
}

switch(FEAT_TRAINS,SELF, sw_813_gfx_rev_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
3: spriteset_813_midtype_rev_back_fuku;
2: spriteset_813_rev_back_fuku;
1: spriteset_813_midtype_rev_back;
0: spriteset_813_rev_back;
}
switch(FEAT_TRAINS,SELF, sw_813_gfx_revflip_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
3: spriteset_813_midtype_revflip_back_fuku;
2: spriteset_813_revflip_back_fuku;
1: spriteset_813_midtype_revflip_back;
0: spriteset_813_revflip_back;
}

//Check for flipped vehicles (dual_headed)
switch(FEAT_TRAINS, SELF, sw_813_gfx_rev_front_flippedcheck, vehicle_is_flipped) {
  1: sw_813_gfx_rev_front_livery;
 default: sw_813_gfx_revflip_front_livery;
}
switch(FEAT_TRAINS, SELF, sw_813_gfx_rev_mid_panto_flippedcheck, vehicle_is_flipped) {
  1: sw_813_gfx_revflip_mid_panto_livery;
 default: sw_813_gfx_rev_mid_panto_livery;
}
switch(FEAT_TRAINS, SELF, sw_813_gfx_rev_mid_flippedcheck, vehicle_is_flipped) {
  1: sw_813_gfx_revflip_mid_livery;
 default: sw_813_gfx_rev_mid_livery;
}
switch(FEAT_TRAINS, SELF, sw_813_gfx_rev_back_flippedcheck, vehicle_is_flipped) {
  1: sw_813_gfx_revflip_back_livery;
 default: sw_813_gfx_rev_back_livery;
}

//Pantograph Position Testing
switch(FEAT_TRAINS, SELF, sw_813_gfx_rev_pantograph_pos_std, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  0: sw_813_gfx_rev_mid_panto_flippedcheck;
  default: sw_813_gfx_rev_mid_flippedcheck;
}

//Front/Back Car Position Testing
switch(FEAT_TRAINS, SELF, sw_813_gfx_rev_frontback_nomucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_813_gfx_rev_front_flippedcheck;
  0:sw_813_gfx_rev_back_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_813_gfx_rev_frontback_aftermucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_813_gfx_rev_back_flippedcheck;
  0:sw_813_gfx_rev_front_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_813_gfx_rev_frontback_mucarcheck, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F),STORE_TEMP(var[0x61, 0, 0x000000FF, 0x41],0),  //look at opposite position_in_vehID_chain
STORE_TEMP((position_in_consist_from_end-position_in_consist-1)-LOAD_TEMP(0), 0x10F),                               //look at what is ahead of the first vehicle in the vehID_chain
var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000:sw_813_gfx_rev_frontback_aftermucars;
  default:sw_813_gfx_rev_frontback_nomucars;
}
switch(FEAT_TRAINS, SELF, sw_813_gfx_rev_frontback_sameid, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist+1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle behind of opposite vehicle
  2038:sw_813_gfx_rev_frontback_mucarcheck;
  1000:sw_813_gfx_rev_front_flippedcheck;
  default:sw_813_gfx_rev_back_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_813_gfx_rev_frontback, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle infront of opposite vehicle
  2038:sw_813_gfx_rev_frontback_sameid;
  1000:sw_813_gfx_rev_back_flippedcheck;
  default:sw_813_gfx_rev_front_flippedcheck;
}

//ID Testing
switch(FEAT_TRAINS, SELF, sw_813_gfx_rev_idcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of opposite vehicle
  1000: sw_813_gfx_rev_pantograph_pos_std;
  2038: sw_813_gfx_rev_frontback;
}
/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/
//813 Standard
switch(FEAT_TRAINS, SELF, sw_813_std_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_813_front;
 default: spriteset_813_back;
}
switch(FEAT_TRAINS, PARENT, sw_813_std_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_813_std_gfx_frontback_flipcheck;
 default: sw_813_gfx_rev_idcheck;
}
//813 Standard 2
switch(FEAT_TRAINS, SELF, sw_813_std2_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_813_midtype_front;
 default: spriteset_813_midtype_back;
}
switch(FEAT_TRAINS, PARENT, sw_813_std2_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_813_std2_gfx_frontback_flipcheck;
 default: sw_813_gfx_rev_idcheck;
}
//813 Fukuhoku Yutaka
switch(FEAT_TRAINS, SELF, sw_813_fuku_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_813_front_fuku;
 default: spriteset_813_back_fuku;
}
switch(FEAT_TRAINS, PARENT, sw_813_fuku_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_813_fuku_gfx_frontback_flipcheck;
 default: sw_813_gfx_rev_idcheck;
}
//813 Fukuhoku Yutaka 2
switch(FEAT_TRAINS, SELF, sw_813_fuku2_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_813_midtype_front_fuku;
 default: spriteset_813_midtype_back_fuku;
}
switch(FEAT_TRAINS, PARENT, sw_813_fuku2_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_813_fuku2_gfx_frontback_flipcheck;
 default: sw_813_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Middle Car Switches---*/
//813 Standard
switch(FEAT_TRAINS, PARENT, sw_813_std_gfx_mucar_revcheck_mid, vehicle_is_reversed){
    0: spriteset_813_mid;
    default: sw_813_gfx_rev_idcheck;
}
//813 Standard 2
switch(FEAT_TRAINS, PARENT, sw_813_std2_gfx_mucar_revcheck_mid, vehicle_is_reversed){
    0: sw_813_gfx_pantograph_pos;
    default: sw_813_gfx_rev_idcheck;
}
//813 Fukuhoku Yutaka
switch(FEAT_TRAINS, PARENT, sw_813_fuku_gfx_mucar_revcheck_mid, vehicle_is_reversed){
    0: spriteset_813_mid_fuku;
    default: sw_813_gfx_rev_idcheck;
}
//813 Fukuhoku Yutaka 2
switch(FEAT_TRAINS, PARENT, sw_813_fuku2_gfx_mucar_revcheck_mid, vehicle_is_reversed){
    0: sw_813_gfx_pantograph_pos_fuku;
    default: sw_813_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Livery Refitting Switches---*/
//Main Switches
switch(FEAT_TRAINS, SELF, sw_813_gfx_mucar, cargo_subtype){
  3: sw_813_fuku2_gfx_mucar_revcheck_mid;
  2: sw_813_fuku_gfx_mucar_revcheck_mid;
  1: sw_813_std2_gfx_mucar_revcheck_mid;
  0: sw_813_std_gfx_mucar_revcheck_mid;
}
switch(FEAT_TRAINS, SELF, sw_813_gfx_main, cargo_subtype) {
  3: sw_813_fuku2_gfx_frontback_revcheck;
  2: sw_813_fuku_gfx_frontback_revcheck;
  1: sw_813_std2_gfx_frontback_revcheck;
  0: sw_813_std_gfx_frontback_revcheck;
}

//Menu Switches
switch(FEAT_TRAINS, SELF, sw_813_subtypetext_mucar, cargo_subtype) {
  3: string(JRK813_FUKU2);
  2: string(JRK813_FUKU);
  1: string(JRK813_STD2);
  0: string(JRK813_STD);
}
switch(FEAT_TRAINS, SELF, sw_813_subtypetext_main, cargo_subtype) {
  3: string(JRK813_FUKU2);
  2: string(JRK813_FUKU);
  1: string(JRK813_STD2);
  0: string(JRK813_STD);
}
/*---END OF SECTION---*/



//Coupling
  switch(FEAT_TRAINS, SELF, sw_813_attach_vehid, [vehicle_type_id == emu_813 || vehicle_type_id == mu_car]) {
  0: return string(MU_UNIQUE);
  }



item(FEAT_TRAINS, emu_813) {
    property {
        name:                         string(JRK_813);
        introduction_date:            date(1994, 04, 01);
        model_life:                   16;
        vehicle_life:                 39;
        reliability_decay:            11;

        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_3D;
        cost_factor:                  17;
        running_cost_factor:          51;

        speed:                        120 km/h;
        track_type:                   NARROW_OHLE;
        power:                        480 kW;
        weight:                       37 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  1;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_ELECTRIC;
        engine_class:                 ENGINE_CLASS_ELECTRIC;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                      sw_813_gfx_main;
		    purchase:                 spriteset_813_purchase;
		    additional_text:	      return string(JRK_813_DESC);
        cargo_subtype_text:           sw_813_subtypetext_main;
        can_attach_wagon:			  sw_813_attach_vehid;
        //start_stop:                   ;
    }
    /*Multiple Unit Car*/
      livery_override(mu_car){
        default:                      sw_813_gfx_mucar;
        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_3D;
        cargo_subtype_text:           sw_813_subtypetext_mucar;
        power: 120;
        weight: 27;
      }

}
# 1 "JPplus.pnml" 4


//GRF OVERRIDE
# 1 "src/grfoverrides.pnml" 1
disable_item(FEAT_TRAINS, 0, 115); //Disables original vehicles


if (param_japansetdisable == 1) {
//JPSet3 DUPLICATION
engine_override("SZ\0D\00");

basecost {
		 PR_BUILD_VEHICLE : param_basecostbuy -1;
		 PR_BUILD_VEHICLE_WAGON: param_basecostbuy +3;
		 PR_RUNNING: param_basecostrun -2; //3
		 PR_RUNNING_TRAIN_STEAM: param_basecostrun -2;
         PR_RUNNING_TRAIN_DIESEL: param_basecostrun +1;
         PR_RUNNING_TRAIN_ELECTRIC:param_basecostrun -2;

}

item(FEAT_TRAINS, japanset_113, 0x49) {
	property {
		climates_available: NO_CLIMATE;
	}
} 
item(FEAT_TRAINS, japanset_151, 0x13) {
	property {
		climates_available: NO_CLIMATE;
	}
} 
item(FEAT_TRAINS, japanset_485, 0x38) {
	property {
		climates_available: NO_CLIMATE;
	}
} 
item(FEAT_TRAINS, japanset_80, 0x11) {
	property {
		climates_available: NO_CLIMATE;
	}
} 
item(FEAT_TRAINS, japanset_101, 0x30) {
	property {
		climates_available: NO_CLIMATE;
	}
} 
item(FEAT_TRAINS, japanset_103, 0x60) {
	property {
		climates_available: NO_CLIMATE;
	}
} 
item(FEAT_TRAINS, japanset_201, 0x25) {
	property {
		climates_available: NO_CLIMATE;
	}
} 
item(FEAT_TRAINS, japanset_205, 0x28) {
	property {
		climates_available: NO_CLIMATE;
	}
} 
item(FEAT_TRAINS, japanset_209, 0x68) {
	property {
		climates_available: NO_CLIMATE;
	}
} 
item(FEAT_TRAINS, japanset_223, 0x42) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, japanset_E231, 0x44) {
	property {
		climates_available: NO_CLIMATE;
	}
} 
item(FEAT_TRAINS, japanset_E233, 0x5B) {
	property {
		climates_available: NO_CLIMATE;
	}
} 
item(FEAT_TRAINS, japanset_281, 0x41) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, japanset_415, 0x62) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, japanset_789, 0x64) {
	property {
		climates_available: NO_CLIMATE;
	}
}


/*
NATS DUPLICATION DEPRECIATED
engine_override("EN\21\01");

//disable the 211
item(FEAT_TRAINS, JRC211_6, 0x20D) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, JRC211_5, 0x20C) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, JRC211_4, 0x20B) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, JRC211_3, 0x20A) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, JRC211_2, 0x209) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, JRC313_2, 0x205) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, JRC313_3, 0x206) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, JRC313_4, 0x207) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, JRC313_6, 0x208) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, JRC311, 0x205) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, JRCKIHA25, 0x201) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, JRCKIHA75, 0x202) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, JRCKIHA11, 0x200) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, JRC119_1, 0x203) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, JRC119_2, 0x204) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, JRC373, 0x250) {
	property {
		climates_available: NO_CLIMATE;
	}
}
*/


//engine_override("JD\A1\E1"); jpsecret
//jnr_ef63, 1040

}
# 1 "JPplus.pnml" 4

