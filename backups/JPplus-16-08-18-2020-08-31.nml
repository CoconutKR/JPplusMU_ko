# 1 "JPplus.pnml"
/*---HEADER--*/

//Define the GRF
# 1 "src/header.pnml" 1
grf {
	grfid:	"BS\13\20";
	name:	string(STR_GRF_NAME);
	desc:	string(STR_GRF_DESC);
	version:	5;
	min_compatible_version: 5;
		//basecosts
		param 0 {
				param_basecostbuy {
						type: int;
						name: string(STR_PARAM_NAME_BASECOSTMODBUY);
						desc: string(STR_PARAM_DESC_BASECOSTMODBUY);
						min_value: 0;
						max_value: 2;
						def_value: 1;
						names: {
												0: string(STR_PARAM_LOW);
												1: string(STR_PARAM_NORMAL);
												2: string(STR_PARAM_HIGH);
						};
				}
		}
		//runningcosts
		param 1 {
				param_basecostrun {
						type: int;
						name: string(STR_PARAM_NAME_BASECOSTMODRUN);
						desc: string(STR_PARAM_DESC_BASECOSTMODRUN);
						min_value: 0;
						max_value: 4;
						def_value: 2;
						names: {
												0: string(STR_PARAM_VLOW);
												1: string(STR_PARAM_LOW);
												2: string(STR_PARAM_NORMAL);
												3: string(STR_PARAM_HIGH);
												4: string(STR_PARAM_VHIGH);
						};
				}
		}
		//pax capacity
		param 2 {
				param_basecapacity {
						type: int;
						name: string(STR_PARAM_NAME_BASECAPACITY);
						desc: string(STR_PARAM_DESC_BASECAPACITY);
						min_value: 0;
						max_value: 4;
						def_value: 1;
						names: {
												0: string(STR_PARAM_LOW);
												1: string(STR_PARAM_NORMAL);
												2: string(STR_PARAM_HIGH);
												3: string(STR_PARAM_VHIGH);
												4: string(STR_PARAM_REAL);
						};
				}
		}
		param 3 {
			 param_boostcapacity {
					name: string(STR_PARAM_NAME_BOOSTCAPACITY);
					desc: string(STR_PARAM_DESC_BOOSTCAPACITY);
					type: bool;
					bit:  0;
			 }
		}
}
# 1 "JPplus.pnml" 4

//Helpers
# 1 "src/basecosts.pnml" 1
basecost {
		 PR_BUILD_VEHICLE : param_basecostbuy -1;
		 PR_BUILD_VEHICLE_WAGON: param_basecostbuy +3;
		 PR_RUNNING: param_basecostrun +1; //3
}
# 1 "JPplus.pnml" 4
# 1 "src/railtypetable.pnml" 1
/*railtypetable {
    "3RDR", "3RDC", RLOW, ELOW, RHIG, EHIG, HSTR, NGRL, ELNG, NLOW, ENLW, ENHI, RAIL, ELRL,
}*/

railtypetable {
	RAIL,
	ELRL,
	NARROW_NOEL: [NAAN, RAIL],
	NARROW_3RDR: [NAA3, RAIL],
	NARROW_OHLE: [NABE, NAAE, ELRL],
	STANDARD_NOEL: [SAAN, RAIL],
	STANDARD_3RDR: [SAB3, SAA3, RAIL],
	STANDARD_OHLE: [SAAE, ELRL],
}
# 1 "JPplus.pnml" 4
# 1 "src/cargotable.pnml" 1
cargotable {
	PASS,
}
# 1 "JPplus.pnml" 4
# 1 "src/parameters.pnml" 1
/*	CAPCITY BOOST	*/
if (param_boostcapacity == 1)
{
boostlocal = 15;
}
else
{
boostlocal = 0;
}

/*	PAX CAPACITIES	*/
if (param_basecapacity == 0) {
	param_capacity_local = 60 + boostlocal;
	param_capacity_rapid = 50;
	param_capacity_express = 40;
}

if (param_basecapacity == 1) {
param_capacity_local = 75 + boostlocal;
param_capacity_rapid = 65;
param_capacity_express = 50;
}

if (param_basecapacity == 2) {
param_capacity_local = 90 + boostlocal;
param_capacity_rapid = 75;
param_capacity_express = 60;
}

if (param_basecapacity == 3) {
param_capacity_local = 105 + boostlocal;
param_capacity_rapid = 90;
param_capacity_express = 70;
}
if (param_basecapacity == 4) {
param_capacity_local = 1;
param_capacity_rapid = 1;
param_capacity_express = 1;
}

/*	LOADING SPEEDS	*/
if (param_basecapacity == 0) {
	param_loading_1D = 5; // 1 door //
	param_loading_2D = 10; // 2 doors //
	param_loading_3D = 20; // 3 doors //
	param_loading_4D = 40; // 4 doors //
	param_loading_5D = 45; // 5 doors //
	param_loading_6D = 55; // 6 doors //
}

if (param_basecapacity == 1) {
	param_loading_1D = 10; // 1 door //
	param_loading_2D = 20; // 2 doors //
	param_loading_3D = 30; // 3 doors //
	param_loading_4D = 50; // 4 doors //
	param_loading_5D = 55; // 5 doors //
	param_loading_6D = 65; // 6 doors //
}

if (param_basecapacity == 2) {
	param_loading_1D = 20; // 1 door //
	param_loading_2D = 30; // 2 doors //
	param_loading_3D = 40; // 3 doors //
	param_loading_4D = 60; // 4 doors //
	param_loading_5D = 65; // 5 doors //
	param_loading_6D = 75; // 6 doors //
}

if (param_basecapacity >= 3) {
	param_loading_1D = 30; // 1 door //
	param_loading_2D = 40; // 2 doors //
	param_loading_3D = 50; // 3 doors //
	param_loading_4D = 80; // 4 doors //
	param_loading_5D = 85; // 5 doors //
	param_loading_6D = 95; // 6 doors //
}
# 1 "JPplus.pnml" 4
# 1 "src/template.pnml" 1
//single vehicle such as purchase menu
template tmpl_purchase (x, y) {
    [x, y, 65, 15, -35, -10]
}

template tmpl_purchase_new (x, y) {
    [x, y, 90, 15, -35, -10]
}

template tmpl_purchase_dh (x, y) {
		[1 , 1, 1, 1, 0, 0, "gfx/empty.png"]
	 	[1 , 1, 1, 1, 0, 0, "gfx/empty.png"]
	 	[1 , 1, 1, 1, 0, 0, "gfx/empty.png"]
	 	[1 , 1, 1, 1, 0, 0, "gfx/empty.png"]
	 	[1 , 1, 1, 1, 0, 0, "gfx/empty.png"]
	 	[1 , 1, 1, 1, 0, 0, "gfx/empty.png"]
    [x, y, 65, 15, -21, -10]
		[1 , 1, 1, 1, 0, 0, "gfx/empty.png"]
}

template tmpl_purchase_dh_32bpp (x, y) {
		[1 , 1, 1, 1, 0, 0, "gfx/empty_32bpp.png"]
	 	[1 , 1, 1, 1, 0, 0, "gfx/empty_32bpp.png"]
	 	[1 , 1, 1, 1, 0, 0, "gfx/empty_32bpp.png"]
	 	[1 , 1, 1, 1, 0, 0, "gfx/empty_32bpp.png"]
	 	[1 , 1, 1, 1, 0, 0, "gfx/empty_32bpp.png"]
	 	[1 , 1, 1, 1, 0, 0, "gfx/empty_32bpp.png"]
    [x, y, 65, 15, -21, -10]
		[1 , 1, 1, 1, 0, 0, "gfx/empty_32bpp.png"]
}

template tmpl_new_purchase_dh (x, y) {
		[1 , 1, 1, 1, 0, 0, "gfx/empty.png"]
	 	[1 , 1, 1, 1, 0, 0, "gfx/empty.png"]
	 	[1 , 1, 1, 1, 0, 0, "gfx/empty.png"]
	 	[1 , 1, 1, 1, 0, 0, "gfx/empty.png"]
	 	[1 , 1, 1, 1, 0, 0, "gfx/empty.png"]
	 	[1 , 1, 1, 1, 0, 0, "gfx/empty.png"]
    [x, y, 88, 15, -21, -10]
		[1 , 1, 1, 1, 0, 0, "gfx/empty.png"]
}

template tmpl_new_purchase_dh_32bpp (x, y) {
		[1 , 1, 1, 1, 0, 0, "gfx/empty_32bpp.png"]
	 	[1 , 1, 1, 1, 0, 0, "gfx/empty_32bpp.png"]
	 	[1 , 1, 1, 1, 0, 0, "gfx/empty_32bpp.png"]
	 	[1 , 1, 1, 1, 0, 0, "gfx/empty_32bpp.png"]
	 	[1 , 1, 1, 1, 0, 0, "gfx/empty_32bpp.png"]
	 	[1 , 1, 1, 1, 0, 0, "gfx/empty_32bpp.png"]
    [x, y, 88, 15, -21, -10]
		[1 , 1, 1, 1, 0, 0, "gfx/empty_32bpp.png"]
}



template tmpl_std(x,y){
[x, 	 y,	8, 	24,		-3, 	-13] //short
[x +9, 	 y,	22,	20,		-13,	-13] //dia1
[x +32,  y,	32,	17,		-16,	-13] //long
[x +65,  y,	22,	20,		-5, 	-12] //dia2
[x +88,  y,	8, 	24,		-3, 	-13] //short
[x +97,  y,	22,	20,		-13,	-13] //dia1
[x +120, y,	32,	17,		-16,	-13] //long
[x+153,  y,	22,	20,		-5, 	-12] //dia2
}

template tmpl_std_rev(x,y){
[x +88,  y,	8, 	24,		-3, 	-13] //short
[x +97,  y,	22,	20,		-13,	-13] //dia1
[x +120, y,	32,	17,		-16,	-13] //long
[x+153,  y,	22,	20,		-5, 	-12] //dia2
[x, 	 y,	8, 	24,		-3, 	-13] //short
[x +9, 	 y,	22,	20,		-13,	-13] //dia1
[x +32,  y,	32,	17,		-16,	-13] //long
[x +65,  y,	22,	20,		-5, 	-12] //dia2
}

//25 high on the short sides for the pantograph
template tmpl_std_panto25(x,y){
[x, 		 y,	8, 	25,		-3, 	-14] //short25
[x +9, 	 y,	22,	20,		-13,	-13] //dia1
[x +32,  y,	32,	17,		-16,	-13] //long
[x +65,  y,	22,	20,		-5, 	-12] //dia2
[x +88,  y,	8, 	25,		-3, 	-14] //short25
[x +97,  y,	22,	20,		-13,	-13] //dia1
[x +120, y,	32,	17,		-16,	-13] //long
[x+153,  y,	22,	20,		-5, 	-12] //dia2
}

template tmpl_std_panto25_rev(x,y){
[x +88,  y,	8, 	25,		-3, 	-14] //short25
[x +97,  y,	22,	20,		-13,	-13] //dia1
[x +120, y,	32,	17,		-16,	-13] //long
[x+153,  y,	22,	20,		-5, 	-12] //dia2
[x, 		 y,	8, 	25,		-3, 	-14] //short25
[x +9, 	 y,	22,	20,		-13,	-13] //dia1
[x +32,  y,	32,	17,		-16,	-13] //long
[x +65,  y,	22,	20,		-5, 	-12] //dia2
}

template tmpl_dhloco(x,y){
[x, 		 y,	8, 	24,		-3, 	-13] //short
[x +9, 	 y,	22,	20,		-13,	-14] //dia1
[x +32,  y,	32,	17,		-16,	-13] //long
[x +65,  y,	22,	20,		-6, 	-13] //dia2
[x +88,  y,	8, 	24,		-3, 	-13] //short
[x +97,  y,	22,	20,		-13,	-14] //dia1
[x +120, y,	32,	17,		-16,	-13] //long
[x+153,  y,	22,	20,		-6, 	-13] //dia2
}

template tmpl_dhloco_short(x,y){
[x, 		 y,	8, 	24,		-3, 	-12] //short
[x +9, 	 y,	22,	20,		-15,	-12] //dia1
[x +32,  y,	28,	17,		-16,	-13] //long
[x +65,  y,	22,	20,		-7, 	-14] //dia2
[x +88,  y,	8, 	24,		-3, 	-15] //short
[x +97,  y,	22,	20,		-12,	-14] //dia1
[x +120, y,	28,	17,		-12,	-13] //long
[x+153,  y,	22,	20,		-6, 	-13] //dia2
}

template tmpl_std_orginal(x,y){
[x, 		 y,	8, 	24,		0, 		-13]
[x +9, 	 y,	22,	20,		-13,	-11]
[x +32,  y,	32,	17,		-16,	-12]
[x +65,  y,	22,	20,		-5, 	-11]
[x +88,  y,	8, 	24,		-3, 	-11]
[x +97,  y,	22,	20,		-13,	-11]
[x +120, y,	32,	17,		-16,	-12]
[x+153,  y,	22,	20,		-5, 	-11]
}



template tmpl_28px_7l(x,y){
[x, 	 y,	8, 	23,		-3, 	-16] //short A
[x +9, 	 y,	20,	19,		-13,	-12] //dia1 
[x +30,  y,	28,	15,		-16,	-11] //long C
[x +59,  y,	20,	19,		-5, 	-12] //dia2
[x +80,  y,	8, 	23,		-3, 	-16] //short E
[x +89,  y,	20,	19,		-13,	-12] //dia1
[x +110, y,	28,	15,		-16,	-11] //long
[x +139, y,	20,	19,		-5, 	-12] //dia2
}

template tmpl_20px_5l(x,y){
[x, 	 y,	8, 	19,		-3, 	-16] //short A
[x +9, 	 y,	16,	17,		-9,	    -12] //dia1 
[x +26,  y,	20,	15,		-8,	    -11] //long 
[x +47,  y,	16,	17,		-1, 	-10] //dia2 
[x +64,  y,	8, 	19,		-3, 	-12] //short E
[x +73,  y,	16,	17,		-13,	-10] //dia1 
[x +90, y,	20,	15,		-16,	-11] //long 
[x+111,  y,	16,	17,		-5, 	-12] //dia2 
}

template tmpl_28px_7l_rev(x,y){
[x +80,  y,	8, 	23,		-3, 	-16] //short E
[x +89,  y,	20,	19,		-13,	-12] //dia1
[x +110, y,	28,	15,		-16,	-11] //long
[x +139, y,	20,	19,		-5, 	-12] //dia2
[x, 	 y,	8, 	23,		-3, 	-16] //short A
[x +9, 	 y,	20,	19,		-13,	-12] //dia1 
[x +30,  y,	28,	15,		-16,	-11] //long C
[x +59,  y,	20,	19,		-5, 	-12] //dia2
}

template tmpl_20px_5l_rev(x,y){
[x +64,  y,	8, 	19,		-3, 	-16] //short E
[x +73,  y,	16,	17,		-9,	    -12] //dia1 
[x +90, y,	20,	15,		-8,	    -11] //long 
[x+111,  y,	16,	17,		-1, 	-10] //dia2 
[x, 	 y,	8, 	19,		-3, 	-12] //short A
[x +9, 	 y,	16,	17,		-13,    -10] //dia1 
[x +26,  y,	20,	15,		-16,    -11] //long 
[x +47,  y,	16,	17,		-5, 	-12] //dia2 
}
# 1 "JPplus.pnml" 4

//IDs
# 1 "src/vehicleid.pnml" 1
item(FEAT_TRAINS, mu_car, 1000) {} //mucar 				0x3E8
item(FEAT_TRAINS, mu_cardd, 1001) {} //mucardd 		0x3E9
item(FEAT_TRAINS, mu_cab, 1002) {} //mucab 				0x3EA

item(FEAT_TRAINS, dmu_kiha40, 1500) {} //kiha40    0x5DC
item(FEAT_TRAINS, dmu_kiha201, 1501) {} //kiha201  0x5DD
item(FEAT_TRAINS, dmu_kiha261, 1502) {} //kiha261  0x5DE
item(FEAT_TRAINS, dmu_kiha281, 1503) {} //kiha281  0x5DF
item(FEAT_TRAINS, dmu_kiha48, 1504) {} //kiha281 	 0x5E0
item(FEAT_TRAINS, dmu_kiha54, 1505) {} //kiha281	 0x5E1
item(FEAT_TRAINS, dmu_kiha58, 1506) {} //kiha281	 0x5E2
item(FEAT_TRAINS, dmu_kiha141, 1507) {} //kiha281	 0x5E3
item(FEAT_TRAINS, dmu_kiha150, 1508) {} //kiha281  0x5E4
item(FEAT_TRAINS, dmu_kiha100, 1509) {} //kiha281  0x5E5
item(FEAT_TRAINS, dmu_kiha111, 1510) {} //kiha281  0x5E6


item(FEAT_TRAINS, emu_107, 2018) {} //107emu 0x7E2
item(FEAT_TRAINS, emu_205, 2019) {} //205emu 0x7E2
item(FEAT_TRAINS, emu_209, 2021) {} //107emu 0x7E3
item(FEAT_TRAINS, emu_211, 2000) {} //211emu 0x7D0
item(FEAT_TRAINS, emu_E217, 2001) {} //E217emu 0x7D1
item(FEAT_TRAINS, emu_711, 2002) {} //711emu 0x7D2
item(FEAT_TRAINS, emu_721, 2003) {} //721emu 0x7D3
item(FEAT_TRAINS, emu_731, 2004) {} //731emu 0x7D4
item(FEAT_TRAINS, emu_733, 2005) {} //733emu 0x7D5
item(FEAT_TRAINS, emu_735, 2006) {} //735emu 0x7D6
item(FEAT_TRAINS, emu_781, 2007) {} //781emu 0x7D7
item(FEAT_TRAINS, emu_785, 2008) {} //785emu 0x7D8
item(FEAT_TRAINS, emu_789, 2009) {} //789emu 0x7D9
item(FEAT_TRAINS, emu_213, 2010) {} //213emu 0x7DA
item(FEAT_TRAINS, emu_6000, 2011) {} //213emu 0x7DB
item(FEAT_TRAINS, emu_719, 2012) {} //213emu 0x7DC
item(FEAT_TRAINS, emu_E231, 2020) {} //107emu 0x7E4
item(FEAT_TRAINS, emu_E235, 2013) {} //213emu 0x7DD
item(FEAT_TRAINS, emu_7195000, 2014) {} //213emu 0x7DE
item(FEAT_TRAINS, emu_21156, 2015) {} //211emu 0x7DF
item(FEAT_TRAINS, emu_E233, 2016) {} //211emu 0x7E0
item(FEAT_TRAINS, emu_jrw207, 2017) {} //211emu 0x7E1
item(FEAT_TRAINS, emu_E331, 2022) {} //211emu 0x7E1
item(FEAT_TRAINS, emu_311, 2023) {} //211emu 0x7E1
item(FEAT_TRAINS, emu_313, 2024) {} //211emu 0x7E1
item(FEAT_TRAINS, emu_115, 2025) {} //107emu 0x7E2
item(FEAT_TRAINS, emu_113, 2026) {} //107emu 0x7E2
item(FEAT_TRAINS, emu_6340, 2027) {} //107emu 0x7E2
item(FEAT_TRAINS, emu_101, 2028) {} //107emu 0x7E2
item(FEAT_TRAINS, emu_103, 2029) {} //107emu 0x7E2
item(FEAT_TRAINS, emu_201, 2030) {} //107emu 0x7E2
item(FEAT_TRAINS, emu_181, 2031) {} //107emu 0x7E2
item(FEAT_TRAINS, emu_80, 2032) {} //107emu 0x7E2
item(FEAT_TRAINS, emu_165, 2033) {} //107emu 0x7E2
item(FEAT_TRAINS, emu_223_0, 2034) {} //107emu 0x7E2
item(FEAT_TRAINS, emu_223_1000, 2035) {} //107emu 0x7E2
item(FEAT_TRAINS, emu_221, 2036) {} //107emu 0x7E2
item(FEAT_TRAINS, emu_811, 2037) {} //107emu 0x7E2
item(FEAT_TRAINS, emu_813, 2038) {} //107emu 0x7E2
item(FEAT_TRAINS, emu_303, 2039) {} //107emu 0x7E2

item(FEAT_TRAINS, DH_E851, 4000) {} //E851
item(FEAT_TRAINS, DH_EF210, 4001) {} //EF210
item(FEAT_TRAINS, DH_ED75, 4002) {} //ED75
# 1 "JPplus.pnml" 4

//Coupliung Rules
//#include "src/attach_kiha_group.pnml"
//#include "src/attach_211_213_group.pnml"

//Sorting
# 1 "src/sorting.pnml" 1
sort(FEAT_TRAINS, [

/* **EMU** */

/*JGR*/
emu_6340,
/*JNR*/
dmu_kiha40,
dmu_kiha48,
dmu_kiha54,
dmu_kiha58,
emu_80,
emu_101,
emu_103,
emu_113,
emu_115,
emu_165,
emu_181,
emu_201,
emu_205,
emu_211,
emu_213,
emu_711,
/*JR East*/
dmu_kiha100,
dmu_kiha111,
emu_107,
emu_209,
emu_E217,
emu_E231,
emu_E233,
emu_E235,
emu_E331,
emu_719,
emu_7195000,
/*JR West*/
emu_jrw207,
emu_221,
emu_223_0,
emu_223_1000,
/*JR Central*/
emu_21156,
emu_311,
emu_313,
/*JR Kyushu*/
emu_303,
emu_811,
emu_813,
/*JR Hokkaido*/
dmu_kiha141,
dmu_kiha150,
dmu_kiha201,
dmu_kiha261,
dmu_kiha281,
emu_721,
emu_731,
emu_733,
emu_735,
emu_781,
emu_785,
emu_789,
/*JR Shikoku*/
emu_6000,
/*MU Cars*/
mu_car,
mu_cab,
mu_cardd,

]);
# 1 "JPplus.pnml" 4

//Final Settings
# 1 "src/grfintegration.pnml" 1
//set depot vehicle width to 32px to avoid overlap
train_width_32_px = 1;
//align train properly in depot window
traininfo_y_offset = 2;

// TTD check //
if (ttd_platform != PLATFORM_OPENTTD || openttd_version < version_openttd(1, 2, 0, 22723)) {
	error(FATAL, REQUIRES_OPENTTD, string(GRF_OTTDVER));
}

// Warn if "JapanSet3: Trains isn't optimal" //
/*
if (((grf_current_status("SZ\0D\00") == 0) && (grf_current_status("DP\30\00") == 0)) || ((grf_future_status("SZ\0D\00") == 0) && (grf_future_status("DP\30\00") == 0)) || ((grf_order_behind("SZ\0D\00") == 0) && (grf_order_behind("DP\30\00") == 0))) {
	error( WARNING, string(GRF_JAPANSET));
}
*/
if (grf_order_behind("BS\42\13") == 0) {
	error(FATAL, string(GRF_JPPLUSSET));
}
/*
if (((grf_order_behind("EN\21\01") == 0) && (grf_order_behind("BS\07\20") != 0)) || ((grf_future_status("EN\21\01") == 0) && (grf_future_status("BS\07\20") == 0)) || ((grf_current_status("EN\21\01") != 0) && (grf_current_status("BS\07\20") == 0))) {
	error(WARNING, string(GRF_NATSSET));
}*/

if (grf_order_behind("SZ\0D\00") == 0) {
	error(WARNING, string(GRF_JAPANSETTRAINS));
}

if (grf_order_behind("JD\A1\E1") == 0) {
	error(WARNING, string(GRF_JAPANSECRETORDER));
}
# 1 "JPplus.pnml" 4

//Reversing
# 1 "src/reversing/reversing_211_213_311_313_group.pnml" 1


/*---GFX: Spritesets---*/

/*---211---*/
//211 Purchase Sprites
spriteset (spriteset_211_purchase,	                                                     "gfx/JNR/emu211/211_purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_211_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,         "gfx/JNR/emu211/211_purchase_32bpp.png")         {tmpl_purchase_dh_32bpp(0, 0)}

//211 Chukyo
spriteset (spriteset_211_front_chukyo,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_back_chukyo,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_mid_chukyo,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_211_rev_front_chukyo,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_rev_back_chukyo,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_rev_mid_chukyo,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_211_revflip_front_chukyo,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_revflip_back_chukyo,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_revflip_mid_chukyo,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_211_front_chukyo, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/chukyo/211-2-1_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_back_chukyo,  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/chukyo/211-2-2_32bpp.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_211_mid_chukyo,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/chukyo/211-2-3_32bpp.png")        {tmpl_std(0, 1)}

alternative_sprites(spriteset_211_rev_front_chukyo, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/chukyo/211-2-1_32bpp.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_211_rev_back_chukyo,  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/chukyo/211-2-2_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_rev_mid_chukyo,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/chukyo/211-2-3_32bpp.png")        {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_211_revflip_front_chukyo, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/chukyo/211-2-1_32bpp.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_211_revflip_back_chukyo,  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/chukyo/211-2-2_32bpp.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_211_revflip_mid_chukyo,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/chukyo/211-2-3_32bpp.png")        {tmpl_std(0, 1)}


//211 Shonan
spriteset (spriteset_211_front_shonan,    	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_back_shonan,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_back_darm_shonan,    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_back_sarm_shonan,    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_back_dual_shonan,    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_mid_shonan,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_mid_darm_shonan,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_mid_sarm_shonan,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_mid_sdgrcar_shonan,    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_mid_ddgrold_shonan,    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_mid_ddgrnew_shonan,    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_211_rev_front_shonan,    	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_rev_back_shonan,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_rev_back_darm_shonan,    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_rev_back_sarm_shonan,    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_rev_back_dual_shonan,    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_rev_mid_shonan,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_rev_mid_darm_shonan,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_rev_mid_sarm_shonan,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_rev_mid_sdgrcar_shonan,    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_rev_mid_ddgrold_shonan,    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_rev_mid_ddgrnew_shonan,    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_211_revflip_front_shonan,    	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_revflip_back_shonan,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_revflip_back_darm_shonan,    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_revflip_back_sarm_shonan,    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_revflip_back_dual_shonan,    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_revflip_mid_shonan,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_revflip_mid_darm_shonan,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_revflip_mid_sarm_shonan,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_revflip_mid_sdgrcar_shonan,    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_revflip_mid_ddgrold_shonan,    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_revflip_mid_ddgrnew_shonan,    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_211_front_shonan,       ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-1_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_back_shonan,        ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-1_32bpp.png")         {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_211_back_darm_shonan,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-2_32bpp.png")         {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_211_back_sarm_shonan,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-3_32bpp.png")         {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_211_back_dual_shonan,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-4_32bpp.png")         {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_211_mid_shonan,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-5_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_mid_darm_shonan,    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-6_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_mid_sarm_shonan,    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-7_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_mid_sdgrcar_shonan, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-8_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_mid_ddgrold_shonan, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-9_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_mid_ddgrnew_shonan, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-10_32bpp.png")        {tmpl_std(0, 1)}

alternative_sprites(spriteset_211_rev_front_shonan,       ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-1_32bpp.png")         {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_211_rev_back_shonan,        ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-1_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_rev_back_darm_shonan,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-2_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_rev_back_sarm_shonan,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-3_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_rev_back_dual_shonan,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-4_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_rev_mid_shonan,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-5_32bpp.png")         {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_211_rev_mid_darm_shonan,    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-6_32bpp.png")         {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_211_rev_mid_sarm_shonan,    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-7_32bpp.png")         {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_211_rev_mid_sdgrcar_shonan, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-8_32bpp.png")         {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_211_rev_mid_ddgrold_shonan, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-9_32bpp.png")         {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_211_rev_mid_ddgrnew_shonan, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-10_32bpp.png")        {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_211_revflip_front_shonan,       ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-1_32bpp.png")         {tmpl_std(0, 26)}
alternative_sprites(spriteset_211_revflip_back_shonan,        ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-1_32bpp.png")         {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_211_revflip_back_darm_shonan,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-2_32bpp.png")         {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_211_revflip_back_sarm_shonan,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-3_32bpp.png")         {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_211_revflip_back_dual_shonan,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-4_32bpp.png")         {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_211_revflip_mid_shonan,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-5_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_revflip_mid_darm_shonan,    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-6_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_revflip_mid_sarm_shonan,    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-7_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_revflip_mid_sdgrcar_shonan, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-8_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_revflip_mid_ddgrold_shonan, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-9_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_revflip_mid_ddgrnew_shonan, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/shonan/211-1-10_32bpp.png")        {tmpl_std(0, 1)}


//211 Boso
spriteset (spriteset_211_front_boso,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_back_darm_boso,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_back_dual_boso,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_mid_boso,    	        	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_211_rev_front_boso,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_rev_back_darm_boso,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_rev_back_dual_boso,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_rev_mid_boso,    	        	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_211_revflip_front_boso,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_revflip_back_darm_boso,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_revflip_back_dual_boso,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_revflip_mid_boso,    	        	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_211_front_boso,       ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/boso/211-3-1_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_back_darm_boso,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/boso/211-3-2_32bpp.png")         {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_211_back_dual_boso,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/boso/211-3-3_32bpp.png")         {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_211_mid_boso,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/boso/211-3-4_32bpp.png")         {tmpl_std(0, 1)}

alternative_sprites(spriteset_211_rev_front_boso,       ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/boso/211-3-1_32bpp.png")         {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_211_rev_back_darm_boso,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/boso/211-3-2_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_rev_back_dual_boso,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/boso/211-3-3_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_rev_mid_boso,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/boso/211-3-4_32bpp.png")         {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_211_revflip_front_boso,       ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/boso/211-3-1_32bpp.png")         {tmpl_std(0, 26)}
alternative_sprites(spriteset_211_revflip_back_darm_boso,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/boso/211-3-2_32bpp.png")         {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_211_revflip_back_dual_boso,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/boso/211-3-3_32bpp.png")         {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_211_revflip_mid_boso,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/boso/211-3-4_32bpp.png")         {tmpl_std(0, 1)}

//211 Nagano
spriteset (spriteset_211_front_nagano,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_back_nagano,    	       	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_back_sarm_nagano,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_mid_nagano,    	      	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_mid_sarm_nagano,    	      	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_211_rev_front_nagano,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_rev_back_nagano,    	       	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_rev_back_sarm_nagano,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_rev_mid_nagano,    	      	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_rev_mid_sarm_nagano,    	      	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_211_revfilp_front_nagano,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_revfilp_back_nagano,    	       	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_revflip_back_sarm_nagano,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_revflip_mid_nagano,    	      	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_211_revflip_mid_sarm_nagano,    	      	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_211_front_nagano,       ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/nagano/211-4-1_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_back_nagano,        ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/nagano/211-4-1_32bpp.png")         {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_211_back_sarm_nagano,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/nagano/211-4-2_32bpp.png")         {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_211_mid_nagano,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/nagano/211-4-3_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_mid_sarm_nagano,    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/nagano/211-4-4_32bpp.png")         {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_211_rev_front_nagano,       ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/nagano/211-4-1_32bpp.png")         {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_211_rev_back_nagano,        ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/nagano/211-4-1_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_rev_back_sarm_nagano,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/nagano/211-4-2_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_rev_mid_nagano,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/nagano/211-4-3_32bpp.png")         {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_211_rev_mid_sarm_nagano,    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/nagano/211-4-4_32bpp.png")         {tmpl_std(0, 1)}

alternative_sprites(spriteset_211_revfilp_front_nagano,       ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/nagano/211-4-1_32bpp.png")         {tmpl_std(0, 26)}
alternative_sprites(spriteset_211_revfilp_back_nagano,        ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/nagano/211-4-1_32bpp.png")         {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_211_revflip_back_sarm_nagano,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/nagano/211-4-2_32bpp.png")         {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_211_revflip_mid_nagano,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/nagano/211-4-3_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_211_revflip_mid_sarm_nagano,    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/nagano/211-4-4_32bpp.png")         {tmpl_std_rev(0, 1)}

/*---211_5000_6000---*/
//211-56 Purchase Sprites
spriteset (spriteset_21156_purchase,	                                                     "gfx/JNR/emu211/211_purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_21156_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,         "gfx/JNR/emu211/211_5000_Purchase_32bpp.png")         {tmpl_purchase_dh_32bpp(0, 0)}

//211-56 Tokai
spriteset (spriteset_21156_front,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_21156_back_darm,   	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_21156_back_sarm,       "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_21156_mid,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_21156_rev_front,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_21156_rev_mid,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_21156_rev_back_darm,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_21156_rev_back_sarm,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_21156_revflip_front,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_21156_revflip_mid,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_21156_revflip_back_darm,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_21156_revflip_back_sarm,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }


alternative_sprites(spriteset_21156_front,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/tokai/211-5-1_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_21156_back_darm, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/tokai/211-5-2_32bpp.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_21156_back_sarm, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/tokai/211-5-3_32bpp.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_21156_mid,       ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/tokai/211-5-4_32bpp.png")        {tmpl_std(0, 1)}

alternative_sprites(spriteset_21156_rev_front,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/tokai/211-5-1_32bpp.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_21156_rev_mid,       ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/tokai/211-5-4_32bpp.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_21156_rev_back_darm, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/tokai/211-5-2_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_21156_rev_back_sarm, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/tokai/211-5-3_32bpp.png")        {tmpl_std(0, 1)}

alternative_sprites(spriteset_21156_revflip_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/tokai/211-5-1_32bpp.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_21156_revflip_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/tokai/211-5-4_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_21156_revflip_back_darm,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/tokai/211-5-2_32bpp.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_21156_revflip_back_sarm,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu211/tokai/211-5-3_32bpp.png")        {tmpl_std_rev(0, 1)}


/*---213---*/
//213 Purchase Sprites
spriteset (spriteset_213_purchase,	                                                     "gfx/JNR/emu213/213_purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_213_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,         "gfx/JNR/emu213/213_purchase_32bpp.png")         {tmpl_purchase_dh_32bpp(0, 0)}

//213 JRwest
spriteset (spriteset_213_front_jrw,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_back_jrw,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_mid_jrw,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_213_rev_front_jrw,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_rev_back_jrw,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_rev_mid_jrw,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_213_revflip_front_jrw,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_revflip_back_jrw,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_revflip_mid_jrw,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_213_front_jrw, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/west/213-1-1_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_213_back_jrw,  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/west/213-1-2_32bpp.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_213_mid_jrw,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/west/213-1-3_32bpp.png")        {tmpl_std(0, 1)}

alternative_sprites(spriteset_213_rev_front_jrw, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/west/213-1-1_32bpp.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_213_rev_back_jrw,  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/west/213-1-2_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_213_rev_mid_jrw,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/west/213-1-3_32bpp.png")        {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_213_revflip_front_jrw, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/west/213-1-1_32bpp.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_213_revflip_back_jrw,  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/west/213-1-2_32bpp.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_213_revflip_mid_jrw,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/west/213-1-3_32bpp.png")        {tmpl_std(0, 1)}

//213 Shonan
spriteset (spriteset_213_front_old_shonan,    	   	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_front_new_shonan,    	   	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_back_darm_shonan,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_back_sarm_shonan,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_213_rev_front_old_shonan,    	   	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_rev_front_new_shonan,    	   	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_rev_back_darm_shonan,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_rev_back_sarm_shonan,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_213_revflip_front_old_shonan,    	   	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_revflip_front_new_shonan,    	   	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_revflip_back_darm_shonan,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_revflip_back_sarm_shonan,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_213_front_old_shonan,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/tokai/213-2-1_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_213_front_new_shonan,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/tokai/213-4-1_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_213_back_darm_shonan,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/tokai/213-2-2_32bpp.png")         {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_213_back_sarm_shonan,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/tokai/213-4-2_32bpp.png")         {tmpl_std_rev(0, 26)}

alternative_sprites(spriteset_213_rev_front_old_shonan,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/tokai/213-2-1_32bpp.png")         {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_213_rev_front_new_shonan,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/tokai/213-4-1_32bpp.png")         {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_213_rev_back_darm_shonan,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/tokai/213-2-2_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_213_rev_back_sarm_shonan,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/tokai/213-4-2_32bpp.png")         {tmpl_std(0, 1)}

alternative_sprites(spriteset_213_revflip_front_old_shonan,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/tokai/213-2-1_32bpp.png")         {tmpl_std(0, 26)}
alternative_sprites(spriteset_213_revflip_front_new_shonan,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/tokai/213-4-1_32bpp.png")         {tmpl_std(0, 26)}
alternative_sprites(spriteset_213_revflip_back_darm_shonan,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/tokai/213-2-2_32bpp.png")         {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_213_revflip_back_sarm_shonan,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/tokai/213-4-2_32bpp.png")         {tmpl_std_rev(0, 1)}

//213 JRwest Super Saloon Yumeji
spriteset (spriteset_213_front_s1,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_front_s2,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_front_s3,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_front_s4,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_front_s5,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_213_rev_front_s1,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_rev_front_s2,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_rev_front_s3,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_rev_front_s4,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_rev_front_s5,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_213_revflip_front_s1,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_revflip_front_s2,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_revflip_front_s3,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_revflip_front_s4,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_213_revflip_front_s5,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_213_front_s1,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/west/213-3-1_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_213_front_s2,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/west/213-3-2_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_213_front_s3,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/west/213-3-3_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_213_front_s4,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/west/213-3-4_32bpp.png")         {tmpl_std(0, 1)}
alternative_sprites(spriteset_213_front_s5,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/west/213-3-5_32bpp.png")         {tmpl_std(0, 1)}

alternative_sprites(spriteset_213_rev_front_s1,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/west/213-3-1_32bpp.png")         {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_213_rev_front_s2,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/west/213-3-2_32bpp.png")         {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_213_rev_front_s3,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/west/213-3-3_32bpp.png")         {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_213_rev_front_s4,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/west/213-3-4_32bpp.png")         {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_213_rev_front_s5,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/west/213-3-5_32bpp.png")         {tmpl_std_rev(0, 26)}

alternative_sprites(spriteset_213_revflip_front_s1,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/west/213-3-1_32bpp.png")         {tmpl_std(0, 26)}
alternative_sprites(spriteset_213_revflip_front_s2,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/west/213-3-2_32bpp.png")         {tmpl_std(0, 26)}
alternative_sprites(spriteset_213_revflip_front_s3,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/west/213-3-3_32bpp.png")         {tmpl_std(0, 26)}
alternative_sprites(spriteset_213_revflip_front_s4,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/west/213-3-4_32bpp.png")         {tmpl_std(0, 26)}
alternative_sprites(spriteset_213_revflip_front_s5,   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu213/west/213-3-5_32bpp.png")         {tmpl_std(0, 26)}
/*---311---*/
//311 Purchase Sprites
spriteset (spriteset_311_purchase,	                                                    "gfx/JRC/emu311/311_Purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_311_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,         "gfx/JRC/emu311/311_Purchase_32bpp.png")         {tmpl_purchase_dh_32bpp(0, 0)}

//311 Tokai
spriteset (spriteset_311_front,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_311_back_darm,   "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_311_back_sarm,   "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_311_mid,    		  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_311_rev_mid,    		  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_311_rev_front,    		  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_311_rev_back_darm,    		  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_311_rev_back_sarm,    		  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_311_revflip_mid,    		  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_311_revflip_front,    		  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_311_revflip_back_darm,    		  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_311_revflip_back_sarm,    		  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_311_front,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu311/311-1-1_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_311_back_darm, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu311/311-1-2_32bpp.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_311_back_sarm, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu311/311-1-3_32bpp.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_311_mid,       ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu311/311-1-4_32bpp.png")        {tmpl_std(0, 1)}

alternative_sprites(spriteset_311_rev_front,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu311/311-1-1_32bpp.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_311_rev_mid,       ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu311/311-1-4_32bpp.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_311_rev_back_darm, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu311/311-1-2_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_311_rev_back_sarm, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu311/311-1-3_32bpp.png")        {tmpl_std(0, 1)}

alternative_sprites(spriteset_311_revflip_front,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu311/311-1-1_32bpp.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_311_revflip_mid,       ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu311/311-1-4_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_311_revflip_back_darm, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu311/311-1-2_32bpp.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_311_revflip_back_sarm, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu311/311-1-3_32bpp.png")        {tmpl_std_rev(0, 1)}

/*---313---*/
//313 Purchase Sprites
spriteset (spriteset_313_purchase,	  "gfx/JRC/emu313/313_Purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_313_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,         "gfx/JRC/emu313/313_Purchase_32bpp.png")         {tmpl_purchase_dh_32bpp(0, 0)}

//313 Tokai
spriteset (spriteset_313_front,    		  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_313_back_onep,     "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_313_back_twop,     "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_313_mid_onep,      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_313_mid,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_313_rev_front,    		  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_313_rev_back_onep,     "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_313_rev_back_twop,     "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_313_rev_mid_onep,      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_313_rev_mid,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_313_revflip_front,    		  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_313_revflip_back_onep,     "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_313_revflip_back_twop,     "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_313_revflip_mid_onep,      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_313_revflip_mid,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_313_front,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu313/313-1-1_32bpp.png")        {tmpl_std(0, 0)}
alternative_sprites(spriteset_313_back_onep, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu313/313-1-2_32bpp.png")        {tmpl_std_panto25_rev(0, 27)}
alternative_sprites(spriteset_313_back_twop, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu313/313-1-3_32bpp.png")        {tmpl_std_panto25_rev(0, 27)}
alternative_sprites(spriteset_313_mid_onep,  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu313/313-1-4_32bpp.png")        {tmpl_std_panto25(0, 0)}
alternative_sprites(spriteset_313_mid,       ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu313/313-1-5_32bpp.png")        {tmpl_std(0, 0)}

alternative_sprites(spriteset_313_rev_front,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu313/313-1-1_32bpp.png")        {tmpl_std_rev(0, 27)}
alternative_sprites(spriteset_313_rev_back_onep, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu313/313-1-2_32bpp.png")        {tmpl_std_panto25(0, 0)}
alternative_sprites(spriteset_313_rev_back_twop, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu313/313-1-3_32bpp.png")        {tmpl_std_panto25(0, 0)}
alternative_sprites(spriteset_313_rev_mid_onep,  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu313/313-1-4_32bpp.png")        {tmpl_std_panto25_rev(0, 0)}
alternative_sprites(spriteset_313_rev_mid,       ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu313/313-1-5_32bpp.png")        {tmpl_std_rev(0, 0)}

alternative_sprites(spriteset_313_revflip_front,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu313/313-1-1_32bpp.png")        {tmpl_std(0, 27)}
alternative_sprites(spriteset_313_revflip_back_onep, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu313/313-1-2_32bpp.png")        {tmpl_std_panto25_rev(0, 0)}
alternative_sprites(spriteset_313_revflip_back_twop, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu313/313-1-3_32bpp.png")        {tmpl_std_panto25_rev(0, 0)}
alternative_sprites(spriteset_313_revflip_mid_onep,  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu313/313-1-4_32bpp.png")        {tmpl_std_panto25(0, 0)}
alternative_sprites(spriteset_313_revflip_mid,       ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRC/emu313/313-1-5_32bpp.png")        {tmpl_std(0, 0)}



/*---END OF SECTION---*/



/*---GFX: GROUPED Train Reversing Switch for 211, 213, 311 and 313 Series EMUs---*/






/*---211---*/
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_211_rev_back_shonan_year_pantograph, current_year){
 0..2007: spriteset_211_back_darm_shonan;
 default: spriteset_211_back_sarm_shonan;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_211_revflip_back_shonan_year_pantograph, current_year){
 0..2007: spriteset_211_revflip_back_darm_shonan;
 default: spriteset_211_revflip_back_sarm_shonan;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_211_back_nopan_nagano_flipcheck, vehicle_is_flipped) {
1:spriteset_211_revfilp_back_nagano;
default: spriteset_211_rev_back_nagano;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_211_back_yespan_nagano_flipcheck, vehicle_is_flipped) {
1:spriteset_211_revflip_back_sarm_nagano;
default: spriteset_211_rev_back_sarm_nagano;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_211_back_yespan_shonan_flipcheck, vehicle_is_flipped) {
1:spriteset_211_revflip_back_darm_shonan;
default: spriteset_211_rev_back_darm_shonan;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_211_back_nopan_shonan_flipcheck, vehicle_is_flipped) {
1:spriteset_211_revflip_back_shonan;
default: spriteset_211_rev_back_shonan;
}
switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_211_yespanto, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  11:sw_211group_gfx_rev_211_back_yespan_nagano_flipcheck;
  4:sw_211group_gfx_rev_211_back_yespan_shonan_flipcheck;
  3:sw_211group_gfx_rev_211_back_yespan_shonan_flipcheck;
}
switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_211_nopanto, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  11:sw_211group_gfx_rev_211_back_nopan_nagano_flipcheck;
  4:sw_211group_gfx_rev_211_back_nopan_shonan_flipcheck;
  3:sw_211group_gfx_rev_211_back_nopan_shonan_flipcheck;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_211_gfx_back_lengthcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 16, 0x000000FF, 0x41]]){
0..3:   sw_211group_gfx_rev_211_yespanto;
4..255: sw_211group_gfx_rev_211_nopanto;
}
switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_211_rev_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
11: sw_211group_gfx_rev_211_gfx_back_lengthcheck;
10: spriteset_211_rev_back_dual_boso;
9:  spriteset_211_rev_back_darm_boso;
8:  sw_211group_gfx_rev_211_rev_back_shonan_year_pantograph;
7:  sw_211group_gfx_rev_211_rev_back_shonan_year_pantograph;
6:  sw_211group_gfx_rev_211_rev_back_shonan_year_pantograph;
5:  sw_211group_gfx_rev_211_rev_back_shonan_year_pantograph;
4:  sw_211group_gfx_rev_211_gfx_back_lengthcheck;
3:  sw_211group_gfx_rev_211_gfx_back_lengthcheck;
2:  spriteset_211_rev_back_dual_shonan;
1:  sw_211group_gfx_rev_211_rev_back_shonan_year_pantograph;
0:  spriteset_211_rev_back_chukyo;
}
switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_211_revflip_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
11: sw_211group_gfx_rev_211_gfx_back_lengthcheck;
10: spriteset_211_revflip_back_dual_boso;
9:  spriteset_211_revflip_back_darm_boso;
8:  sw_211group_gfx_rev_211_revflip_back_shonan_year_pantograph;
7:  sw_211group_gfx_rev_211_revflip_back_shonan_year_pantograph;
6:  sw_211group_gfx_rev_211_revflip_back_shonan_year_pantograph;
5:  sw_211group_gfx_rev_211_revflip_back_shonan_year_pantograph;
4:  sw_211group_gfx_rev_211_gfx_back_lengthcheck;
3:  sw_211group_gfx_rev_211_gfx_back_lengthcheck;
2:  spriteset_211_revflip_back_dual_shonan;
1:  sw_211group_gfx_rev_211_revflip_back_shonan_year_pantograph;
0:  spriteset_211_revflip_back_chukyo;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_211_back_flipcheck, vehicle_is_flipped) {
1:sw_211group_gfx_rev_211_revflip_back_livery;
default: sw_211group_gfx_rev_211_rev_back_livery;
}




switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_211_rev_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
11: spriteset_211_revflip_mid_nagano;
10: spriteset_211_revflip_mid_boso;
9:  spriteset_211_revflip_mid_boso;
8:  spriteset_211_revflip_mid_shonan;
7:  spriteset_211_revflip_mid_shonan;
6:  spriteset_211_revflip_mid_shonan;
5:  spriteset_211_revflip_mid_shonan;
4:  spriteset_211_revflip_mid_shonan;
3:  spriteset_211_revflip_mid_shonan;
2:  spriteset_211_revflip_mid_shonan;
1:  spriteset_211_revflip_mid_shonan;
0:  spriteset_211_revflip_mid_chukyo;
}
switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_211_revflip_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
11: spriteset_211_rev_mid_nagano;
10: spriteset_211_rev_mid_boso;
9:  spriteset_211_rev_mid_boso;
8:  spriteset_211_rev_mid_shonan;
7:  spriteset_211_rev_mid_shonan;
6:  spriteset_211_rev_mid_shonan;
5:  spriteset_211_rev_mid_shonan;
4:  spriteset_211_rev_mid_shonan;
3:  spriteset_211_rev_mid_shonan;
2:  spriteset_211_rev_mid_shonan;
1:  spriteset_211_rev_mid_shonan;
0:  spriteset_211_rev_mid_chukyo;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_211_mid_flipcheck, vehicle_is_flipped) {
 1: sw_211group_gfx_rev_211_revflip_mid_livery;
 default: sw_211group_gfx_rev_211_rev_mid_livery;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_211_mid_sarm_nagano_flipcheck, vehicle_is_flipped) {
 1: spriteset_211_revflip_mid_sarm_nagano;
 default: spriteset_211_rev_mid_sarm_nagano;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_211_mid_darm_shonan_flipcheck, vehicle_is_flipped) {
 1: spriteset_211_revflip_mid_darm_shonan;
 default: spriteset_211_rev_mid_darm_shonan;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_211_mid_ddgrnew_shonan_flipcheck, vehicle_is_flipped) {
 1: spriteset_211_revflip_mid_ddgrnew_shonan;
 default: spriteset_211_rev_mid_ddgrnew_shonan;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_211_mid_ddgrold_shonan_flipcheck, vehicle_is_flipped) {
 1: spriteset_211_revflip_mid_ddgrold_shonan;
 default: spriteset_211_rev_mid_ddgrold_shonan;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_211_mid_sdgrcar_shonan_flipcheck, vehicle_is_flipped) {
 1: spriteset_211_revflip_mid_sdgrcar_shonan;
 default: spriteset_211_rev_mid_sdgrcar_shonan;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_211_mid_front_shonan_flipcheck, vehicle_is_flipped) {
 1: spriteset_211_rev_front_shonan;
 default: spriteset_211_revflip_front_shonan;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_211_mid_back_darm_shonan_flipcheck, vehicle_is_flipped) {
 1: spriteset_211_revflip_back_darm_shonan;
 default: spriteset_211_rev_back_darm_shonan;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_211_mid_back_sarm_shonan_flipcheck, vehicle_is_flipped) {
 1: spriteset_211_revflip_back_sarm_shonan;
 default: spriteset_211_rev_back_sarm_shonan;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_211_gfx_year_mid_back_shonan_check, current_year){
 0..2007: sw_211group_gfx_rev_211_mid_back_darm_shonan_flipcheck;
 default: sw_211group_gfx_rev_211_mid_back_sarm_shonan_flipcheck;
}
switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_211_gfx_pantograph_pos_shonan_tk, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%8]){
1:sw_211group_gfx_rev_211_mid_darm_shonan_flipcheck;
6:sw_211group_gfx_rev_211_mid_darm_shonan_flipcheck;
default: sw_211group_gfx_rev_211_mid_flipcheck;
}
switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_211_gfx_pantograph_pos_shonan_tk_ddsd, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){
1:sw_211group_gfx_rev_211_mid_darm_shonan_flipcheck;
2:sw_211group_gfx_rev_211_mid_ddgrnew_shonan_flipcheck;
3:sw_211group_gfx_rev_211_mid_sdgrcar_shonan_flipcheck;
6:sw_211group_gfx_rev_211_mid_darm_shonan_flipcheck;
default: sw_211group_gfx_rev_211_mid_flipcheck;
}
switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_211_gfx_pantograph_pos_shonan_tk_dddd, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){
1:sw_211group_gfx_rev_211_mid_darm_shonan_flipcheck;
2:sw_211group_gfx_rev_211_mid_ddgrnew_shonan_flipcheck;
3:sw_211group_gfx_rev_211_mid_ddgrnew_shonan_flipcheck;
6:sw_211group_gfx_rev_211_mid_darm_shonan_flipcheck;
default: sw_211group_gfx_rev_211_mid_flipcheck;
}
switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_211_gfx_pantograph_pos_shonan_ty_ddsd, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){
1:sw_211group_gfx_rev_211_gfx_year_mid_back_shonan_check;
2:sw_211group_gfx_rev_211_mid_ddgrnew_shonan_flipcheck;
3:sw_211group_gfx_rev_211_mid_sdgrcar_shonan_flipcheck;
4:sw_211group_gfx_rev_211_mid_front_shonan_flipcheck;
default: sw_211group_gfx_rev_211_mid_flipcheck;
}
switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_211_gfx_pantograph_pos_shonan_ty_dddd, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){
1:sw_211group_gfx_rev_211_gfx_year_mid_back_shonan_check;
2:sw_211group_gfx_rev_211_mid_ddgrnew_shonan_flipcheck;
3:sw_211group_gfx_rev_211_mid_ddgrnew_shonan_flipcheck;
4:sw_211group_gfx_rev_211_mid_front_shonan_flipcheck;
default: sw_211group_gfx_rev_211_mid_flipcheck;
}
switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_211_gfx_pantograph_pos_shonan_ty_ddddold, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){
1:sw_211group_gfx_rev_211_gfx_year_mid_back_shonan_check;
2:sw_211group_gfx_rev_211_mid_ddgrnew_shonan_flipcheck;
3:sw_211group_gfx_rev_211_mid_ddgrold_shonan_flipcheck;
4:sw_211group_gfx_rev_211_mid_front_shonan_flipcheck;
default: sw_211group_gfx_rev_211_mid_flipcheck;
}
switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_211_gfx_pantograph_pos_shonan_ty_ddolddd, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){
1:sw_211group_gfx_rev_211_gfx_year_mid_back_shonan_check;
2:sw_211group_gfx_rev_211_mid_ddgrold_shonan_flipcheck;
3:sw_211group_gfx_rev_211_mid_ddgrnew_shonan_flipcheck;
4:sw_211group_gfx_rev_211_mid_front_shonan_flipcheck;
default: sw_211group_gfx_rev_211_mid_flipcheck;
}
switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_211_mid_shonan_typecheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
8:  sw_211group_gfx_rev_211_gfx_pantograph_pos_shonan_ty_ddsd;
7:  sw_211group_gfx_rev_211_gfx_pantograph_pos_shonan_ty_ddolddd;
6:  sw_211group_gfx_rev_211_gfx_pantograph_pos_shonan_ty_ddddold;
5:  sw_211group_gfx_rev_211_gfx_pantograph_pos_shonan_ty_dddd;
4:  sw_211group_gfx_rev_211_gfx_pantograph_pos_shonan_tk_ddsd;
3:  sw_211group_gfx_rev_211_gfx_pantograph_pos_shonan_tk_dddd;
2:  sw_211group_gfx_rev_211_gfx_pantograph_pos_shonan_tk;
1:  sw_211group_gfx_rev_211_gfx_pantograph_pos_shonan_tk;
}
switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_211_mid_shonan_pantocheck,  [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 16, 0x000000FF, 0x41]]){
  0..3: sw_211group_gfx_rev_211_mid_flipcheck;
  4..7: sw_211group_gfx_rev_211_gfx_pantograph_pos_shonan_tk;
  default: sw_211group_gfx_rev_211_mid_shonan_typecheck;
}
switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_211_gfx_pantograph_pos_nagano, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%4]){
  1: sw_211group_gfx_rev_211_mid_sarm_nagano_flipcheck;
  3: sw_211group_gfx_rev_211_mid_sarm_nagano_flipcheck;
  default: sw_211group_gfx_rev_211_mid_flipcheck;
}
switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_211_mid_nagano_pantocheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 16, 0x000000FF, 0x41]]){
  0..3: sw_211group_gfx_rev_211_mid_flipcheck;
  default: sw_211group_gfx_rev_211_gfx_pantograph_pos_nagano;
}
switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_211_mid_refitconsistcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
11: sw_211group_gfx_rev_211_mid_nagano_pantocheck;
10: sw_211group_gfx_rev_211_mid_flipcheck;
9:  sw_211group_gfx_rev_211_mid_flipcheck;
8:  sw_211group_gfx_rev_211_mid_shonan_pantocheck;
7:  sw_211group_gfx_rev_211_mid_shonan_pantocheck;
6:  sw_211group_gfx_rev_211_mid_shonan_pantocheck;
5:  sw_211group_gfx_rev_211_mid_shonan_pantocheck;
4:  sw_211group_gfx_rev_211_mid_shonan_pantocheck;
3:  sw_211group_gfx_rev_211_mid_shonan_pantocheck;
2:  sw_211group_gfx_rev_211_mid_shonan_pantocheck;
1:  sw_211group_gfx_rev_211_mid_shonan_pantocheck;
0:  sw_211group_gfx_rev_211_mid_flipcheck;
}

switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_211_rev_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
11: spriteset_211_rev_front_nagano;
10: spriteset_211_rev_front_boso;
9:  spriteset_211_rev_front_boso;
8:  spriteset_211_rev_front_shonan;
7:  spriteset_211_rev_front_shonan;
6:  spriteset_211_rev_front_shonan;
5:  spriteset_211_rev_front_shonan;
4:  spriteset_211_rev_front_shonan;
3:  spriteset_211_rev_front_shonan;
2:  spriteset_211_rev_front_shonan;
1:  spriteset_211_rev_front_shonan;
0:  spriteset_211_rev_front_chukyo;
}
switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_211_revflip_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
11: spriteset_211_revfilp_front_nagano;
10: spriteset_211_revflip_front_boso;
9:  spriteset_211_revflip_front_boso;
8:  spriteset_211_revflip_front_shonan;
7:  spriteset_211_revflip_front_shonan;
6:  spriteset_211_revflip_front_shonan;
5:  spriteset_211_revflip_front_shonan;
4:  spriteset_211_revflip_front_shonan;
3:  spriteset_211_revflip_front_shonan;
2:  spriteset_211_revflip_front_shonan;
1:  spriteset_211_revflip_front_shonan;
0:  spriteset_211_revflip_front_chukyo;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_211_front_flipcheck, vehicle_is_flipped) {
  1: sw_211group_gfx_rev_211_rev_front_livery;
 default: sw_211group_gfx_rev_211_revflip_front_livery;
}

switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_211_frontback_nomucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_211group_gfx_rev_211_front_flipcheck;
  0:sw_211group_gfx_rev_211_back_flipcheck;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_211_frontback_aftermucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_211group_gfx_rev_211_back_flipcheck;
  0:sw_211group_gfx_rev_211_front_flipcheck;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_211_frontback_mucarcheck, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F),STORE_TEMP(var[0x61, 0, 0x000000FF, 0x41],0),  //look at opposite position_in_vehID_chain
STORE_TEMP((position_in_consist_from_end-position_in_consist-1)-LOAD_TEMP(0), 0x10F),                               //look at what is ahead of the first vehicle in the vehID_chain
var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000:sw_211group_gfx_rev_211_frontback_aftermucars;
  default:sw_211group_gfx_rev_211_frontback_nomucars;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_211_sameid, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist+1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle behind of opposite vehicle
  2000:sw_211group_gfx_rev_211_frontback_mucarcheck;
  1000:sw_211group_gfx_rev_211_front_flipcheck;
  default:sw_211group_gfx_rev_211_back_flipcheck;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_211_frontback, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle infront of opposite vehicle
  2000:sw_211group_gfx_rev_211_sameid;
  1000:sw_211group_gfx_rev_211_back_flipcheck;
  default:sw_211group_gfx_rev_211_front_flipcheck;
}

/*---211_50006000-*/
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_21156_back_darm_flipcheck, vehicle_is_flipped) {
  1: spriteset_21156_revflip_back_darm;
 default: spriteset_21156_rev_back_darm;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_21156_back_sarm_flipcheck, vehicle_is_flipped) {
  1: spriteset_21156_revflip_back_sarm;
 default: spriteset_21156_rev_back_sarm;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_21156_front_flipcheck, vehicle_is_flipped) {
  1: spriteset_21156_rev_front;
 default: spriteset_21156_revflip_front;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_21156_mid_flipcheck, vehicle_is_flipped) {
  1: spriteset_21156_revflip_mid;
 default: spriteset_21156_rev_mid;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_21156_frontback_year_back_pantograph, current_year){
 0..2005: sw_211group_gfx_rev_21156_back_darm_flipcheck;
 default: sw_211group_gfx_rev_21156_back_sarm_flipcheck;
}

switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_21156_frontback_nomucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_211group_gfx_rev_21156_front_flipcheck;
  0:sw_211group_gfx_rev_21156_frontback_year_back_pantograph;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_21156_frontback_aftermucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_211group_gfx_rev_21156_frontback_year_back_pantograph;
  0:sw_211group_gfx_rev_21156_front_flipcheck;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_21156_frontback_mucarcheck, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F),STORE_TEMP(var[0x61, 0, 0x000000FF, 0x41],0),  //look at opposite position_in_vehID_chain
STORE_TEMP((position_in_consist_from_end-position_in_consist-1)-LOAD_TEMP(0), 0x10F),                               //look at what is ahead of the first vehicle in the vehID_chain
var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000:sw_211group_gfx_rev_21156_frontback_aftermucars;
  default:sw_211group_gfx_rev_21156_frontback_nomucars;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_21156_sameid, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist+1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle behind of opposite vehicle
  2015:sw_211group_gfx_rev_21156_frontback_mucarcheck;
  1000:sw_211group_gfx_rev_21156_front_flipcheck;
  default:sw_211group_gfx_rev_21156_frontback_year_back_pantograph;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_21156_frontback, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle infront of opposite vehicle
  2015:sw_211group_gfx_rev_21156_sameid;
  1000:sw_211group_gfx_rev_21156_frontback_year_back_pantograph;
  default:sw_211group_gfx_rev_21156_front_flipcheck;
}

/*---213---*/
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_213_rev_back_year_pantograph, current_year){
 0..2007: spriteset_213_back_darm_shonan;
 default: spriteset_213_back_sarm_shonan;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_213_revflip_back_year_pantograph, current_year){
 0..2007: spriteset_213_revflip_back_darm_shonan;
 default: spriteset_213_revflip_back_sarm_shonan;
}
switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_213_rev_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
1:sw_211group_gfx_rev_213_rev_back_year_pantograph;
default:spriteset_213_rev_back_jrw;
}
switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_213_revflip_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
1:sw_211group_gfx_rev_213_revflip_back_year_pantograph;
default:spriteset_213_revflip_back_jrw;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_213_back_flipcheck, vehicle_is_flipped) {
1:sw_211group_gfx_rev_213_revflip_back_livery;
default: sw_211group_gfx_rev_213_rev_back_livery;
}
switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_213_rev_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
6:spriteset_213_rev_mid_jrw;
5:spriteset_213_rev_mid_jrw;
4:spriteset_213_rev_mid_jrw;
3:spriteset_213_rev_mid_jrw;
2:spriteset_213_rev_mid_jrw;
1:spriteset_213_rev_mid_jrw;
0:spriteset_213_rev_mid_jrw;
}
switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_213_revflip_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
6:spriteset_213_revflip_mid_jrw;
5:spriteset_213_revflip_mid_jrw;
4:spriteset_213_revflip_mid_jrw;
3:spriteset_213_revflip_mid_jrw;
2:spriteset_213_revflip_mid_jrw;
1:spriteset_213_revflip_mid_jrw;
0:spriteset_213_revflip_mid_jrw;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_213_mid_flipcheck, vehicle_is_flipped) {
 1: sw_211group_gfx_rev_213_revflip_mid_livery;
 default: sw_211group_gfx_rev_213_rev_mid_livery;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_213_rev_front_year, current_year){
 0..2007: spriteset_213_rev_front_old_shonan;
 default: spriteset_213_rev_front_new_shonan;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_213_revflip_front_year, current_year){
 0..2007: spriteset_213_revflip_front_old_shonan;
 default: spriteset_213_revflip_front_new_shonan;
}
switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_213_rev_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
6:spriteset_213_rev_front_s5;
5:spriteset_213_rev_front_s4;
4:spriteset_213_rev_front_s3;
3:spriteset_213_rev_front_s2;
2:spriteset_213_rev_front_s1;
1:sw_211group_gfx_rev_213_rev_front_year;
0:spriteset_213_rev_front_jrw;
}
switch(FEAT_TRAINS,SELF, sw_211group_gfx_rev_213_revflip_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
6:spriteset_213_revflip_front_s5;
5:spriteset_213_revflip_front_s4;
4:spriteset_213_revflip_front_s3;
3:spriteset_213_revflip_front_s2;
2:spriteset_213_revflip_front_s1;
1:sw_211group_gfx_rev_213_revflip_front_year;
0:spriteset_213_revflip_front_jrw;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_213_front_flipcheck, vehicle_is_flipped) {
  1: sw_211group_gfx_rev_213_rev_front_livery;
 default: sw_211group_gfx_rev_213_revflip_front_livery;
}

switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_213_frontback_nomucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_211group_gfx_rev_213_front_flipcheck;
  0:sw_211group_gfx_rev_213_back_flipcheck;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_213_frontback_aftermucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_211group_gfx_rev_213_back_flipcheck;
  0:sw_211group_gfx_rev_213_front_flipcheck;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_213_frontback_mucarcheck, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F),STORE_TEMP(var[0x61, 0, 0x000000FF, 0x41],0),  //look at opposite position_in_vehID_chain
STORE_TEMP((position_in_consist_from_end-position_in_consist-1)-LOAD_TEMP(0), 0x10F),                               //look at what is ahead of the first vehicle in the vehID_chain
var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000:sw_211group_gfx_rev_213_frontback_aftermucars;
  default:sw_211group_gfx_rev_213_frontback_nomucars;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_213_sameid, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist+1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle behind of opposite vehicle
  2010:sw_211group_gfx_rev_213_frontback_mucarcheck;
  1000:sw_211group_gfx_rev_213_front_flipcheck;
  default:sw_211group_gfx_rev_213_back_flipcheck;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_213_frontback, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle infront of opposite vehicle
  2010:sw_211group_gfx_rev_213_sameid;
  1000:sw_211group_gfx_rev_213_back_flipcheck;
  default:sw_211group_gfx_rev_213_front_flipcheck;
}

/*---311---*/
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_311_back_darm_flipcheck, vehicle_is_flipped) {
  1: spriteset_311_revflip_back_darm;
 default: spriteset_311_rev_back_darm;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_311_back_sarm_flipcheck, vehicle_is_flipped) {
  1: spriteset_311_revflip_back_sarm;
 default: spriteset_311_rev_back_sarm;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_311_front_flipcheck, vehicle_is_flipped) {
  1: spriteset_311_rev_front;
 default: spriteset_311_revflip_front;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_311_mid_flipcheck, vehicle_is_flipped) {
  1: spriteset_311_revflip_mid;
 default: spriteset_311_rev_mid;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_311_frontback_year_back_pantograph, current_year){
 0..2007: sw_211group_gfx_rev_311_back_darm_flipcheck;
 default: sw_211group_gfx_rev_311_back_sarm_flipcheck;
}


switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_311_frontback_nomucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_211group_gfx_rev_311_front_flipcheck;
  0:sw_211group_gfx_rev_311_frontback_year_back_pantograph;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_311_frontback_aftermucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_211group_gfx_rev_311_frontback_year_back_pantograph;
  0:sw_211group_gfx_rev_311_front_flipcheck;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_311_frontback_mucarcheck, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F),STORE_TEMP(var[0x61, 0, 0x000000FF, 0x41],0),  //look at opposite position_in_vehID_chain
STORE_TEMP((position_in_consist_from_end-position_in_consist-1)-LOAD_TEMP(0), 0x10F),                               //look at what is ahead of the first vehicle in the vehID_chain
var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000:sw_211group_gfx_rev_311_frontback_aftermucars;
  default:sw_211group_gfx_rev_311_frontback_nomucars;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_311_sameid, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist+1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle behind of opposite vehicle
  2023:sw_211group_gfx_rev_311_frontback_mucarcheck;
  1000:sw_211group_gfx_rev_311_front_flipcheck;
  default:sw_211group_gfx_rev_311_frontback_year_back_pantograph;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_311_frontback, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle infront of opposite vehicle
  2023:sw_211group_gfx_rev_311_sameid;
  1000:sw_211group_gfx_rev_311_frontback_year_back_pantograph;
  default:sw_211group_gfx_rev_311_front_flipcheck;
}

/*---313---*/
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_313_back_onep_flipcheck, vehicle_is_flipped) {
  1: spriteset_313_revflip_back_onep;
 default: spriteset_313_rev_back_onep;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_313_back_twop_flipcheck, vehicle_is_flipped) {
  1: spriteset_313_revflip_back_twop;
 default: spriteset_313_rev_back_twop;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_313_front_flipcheck, vehicle_is_flipped) {
  1: spriteset_313_rev_front;
 default: spriteset_313_revflip_front;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_313_mid_flipcheck, vehicle_is_flipped) {
  1: spriteset_313_revflip_mid;
 default: spriteset_313_rev_mid;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_313_mid_onep_flipcheck, vehicle_is_flipped) {
  1: spriteset_313_revflip_mid_onep;
 default: spriteset_313_rev_mid_onep;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_313_pantograph_pos, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){
  0: sw_211group_gfx_rev_313_mid_onep_flipcheck;
  default: sw_211group_gfx_rev_313_mid_flipcheck;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_313_pantograph_check, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 16, 0x000000FF, 0x41]]){ 
  0..1: sw_211group_gfx_rev_313_mid_flipcheck;
  default: sw_211group_gfx_rev_313_pantograph_pos;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_313_frontback_refit_pantograph, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
 1: sw_211group_gfx_rev_313_back_twop_flipcheck;
 0: sw_211group_gfx_rev_313_back_onep_flipcheck;
}


switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_313_frontback_nomucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_211group_gfx_rev_313_front_flipcheck;
  0:sw_211group_gfx_rev_313_frontback_refit_pantograph;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_313_frontback_aftermucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_211group_gfx_rev_313_frontback_refit_pantograph;
  0:sw_211group_gfx_rev_313_front_flipcheck;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_313_frontback_mucarcheck, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F),STORE_TEMP(var[0x61, 0, 0x000000FF, 0x41],0),  //look at opposite position_in_vehID_chain
STORE_TEMP((position_in_consist_from_end-position_in_consist-1)-LOAD_TEMP(0), 0x10F),                               //look at what is ahead of the first vehicle in the vehID_chain
var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000:sw_211group_gfx_rev_313_frontback_aftermucars;
  default:sw_211group_gfx_rev_313_frontback_nomucars;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_313_sameid, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist+1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle behind of opposite vehicle
  2024:sw_211group_gfx_rev_313_frontback_mucarcheck;
  1000:sw_211group_gfx_rev_313_front_flipcheck;
  default:sw_211group_gfx_rev_313_frontback_refit_pantograph;
}
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_313_frontback, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle infront of opposite vehicle
  2024:sw_211group_gfx_rev_313_sameid;
  1000:sw_211group_gfx_rev_313_frontback_refit_pantograph;
  default:sw_211group_gfx_rev_313_front_flipcheck;
}

/*---Main ID Sorting and Detection---*/
switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_mucar_idcheck, [
  STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F),                //look at opposite vehicle
  STORE_TEMP(var[0x61, 0, 0x000000FF, 0x41]+1,1),                                     //go to the head car of the opposite vehicle
  STORE_TEMP((position_in_consist_from_end-position_in_consist)-LOAD_TEMP(1), 0x10F), //look at the head car of the opposite vehicle
  var[0x61, 0, 0x0000FFFF, 0xC6]                                                      //determine the ID of the opposite vehicle head car
]){
  2000: sw_211group_gfx_rev_211_mid_refitconsistcheck;
  2010: sw_211group_gfx_rev_213_mid_flipcheck;
  2015: sw_211group_gfx_rev_21156_mid_flipcheck;
  2023: sw_211group_gfx_rev_311_mid_flipcheck;
  2024: sw_211group_gfx_rev_313_pantograph_check;
}

switch(FEAT_TRAINS, SELF, sw_211group_gfx_rev_idcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000: sw_211group_gfx_rev_mucar_idcheck;
  2000: sw_211group_gfx_rev_211_frontback;
  2010: sw_211group_gfx_rev_213_frontback; 
  2015: sw_211group_gfx_rev_21156_frontback;
  2023: sw_211group_gfx_rev_311_frontback;
  2024: sw_211group_gfx_rev_313_frontback;
}
/*---END OF SECTION---*/
# 1 "JPplus.pnml" 4


/*---TRAINS---*/

//Wagons
# 1 "src/OTHER/mucar.pnml" 1
/*---GFX: Spritesets---*/
spriteset (set_mu_car_purchase,	    "gfx/OTHER/mucarbuy.png") 	{tmpl_purchase(0, 0)}
spriteset (set_mu_car_base,       	"gfx/OTHER/mucar.png")     	{tmpl_std(0, 0)}



item(FEAT_TRAINS, mu_car) {
    /* Define properties first, make sure to set all of them */
    property {
        name:                         string(MUCAR);
        introduction_date: date(1800,1,1);
        climates_available: ALL_CLIMATES;
                model_life: VEHICLE_NEVER_EXPIRES;
                vehicle_life: 60;
                loading_speed: 0;
                cost_factor: 64;
                running_cost_factor: 6;
                speed: 0 km/h;
                power: 0 hp;
                cargo_capacity: 1;
                weight: 0 ton;
                tractive_effort_coefficient: 0.3;
                air_drag_coefficient: 0;
                reliability_decay: 20;
                refittable_cargo_classes: bitmask(CC_PASSENGERS);
                cargo_age_period: 185;
                refit_cost: 0;
                track_type: NARROW_NOEL;
                ai_special_flag: AI_FLAG_PASSENGER;
                running_cost_base: RUNNING_COST_DIESEL;
                engine_class: ENGINE_CLASS_STEAM;
                visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
                sprite_id: SPRITE_ID_NEW_TRAIN;
                dual_headed: 0;
                length: 8;
                extra_power_per_wagon: 0;
                bitmask_vehicle_info: 0;
    }
    /* Define graphics and callbacks
     * Setting all callbacks is not needed, only define what is used */
    graphics {
		purchase:                     set_mu_car_purchase;
    additional_text:			        return string(MUCAR_DESC);
    set_mu_car_base;
    }

}
# 1 "JPplus.pnml" 4

//JGR
# 1 "src/JGR/EMU/6340_series.pnml" 1
/*---GFX: Spritesets---*/

//Purchase Sprites
spriteset (spriteset_6340_purchase,	                                                     "gfx/JGR/emu6340/purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_6340_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,         "gfx/JGR/emu6340/purchase_32bpp.png")         {tmpl_purchase_dh_32bpp(0, 0)}

//6340 Yamanote
spriteset (spriteset_6340_front,       "gfx/OTHER/mucar.png")          { tmpl_std(0, 0) }
spriteset (spriteset_6340_back,	  	   "gfx/OTHER/mucar.png")          { tmpl_std(0, 0) }
spriteset (spriteset_6340_mid,	       "gfx/OTHER/mucar.png")          { tmpl_std(0, 0) }

spriteset (spriteset_6340_rev_front,      "gfx/OTHER/mucar.png")          { tmpl_std(0, 0) }
spriteset (spriteset_6340_rev_back,	  	  "gfx/OTHER/mucar.png")          { tmpl_std(0, 0) }
spriteset (spriteset_6340_rev_mid,		  "gfx/OTHER/mucar.png")          { tmpl_std(0, 0) }

spriteset (spriteset_6340_revflip_front,	  "gfx/OTHER/mucar.png")          { tmpl_std(0, 0) }
spriteset (spriteset_6340_revflip_back,	  	  "gfx/OTHER/mucar.png")          { tmpl_std(0, 0) }
spriteset (spriteset_6340_revflip_mid,		  "gfx/OTHER/mucar.png")          { tmpl_std(0, 0) }

alternative_sprites(spriteset_6340_front,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JGR/emu6340/6340.png")        {tmpl_28px_7l_rev(0, 0)}
alternative_sprites(spriteset_6340_back,            ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JGR/emu6340/6340.png")        {tmpl_28px_7l_rev(0, 96)}
alternative_sprites(spriteset_6340_mid,             ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JGR/emu6340/6340.png")        {tmpl_28px_7l(0, 48)}

alternative_sprites(spriteset_6340_rev_front,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JGR/emu6340/6340.png")        {tmpl_28px_7l_rev(0, 24)}
alternative_sprites(spriteset_6340_rev_back,            ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JGR/emu6340/6340.png")        {tmpl_28px_7l_rev(0, 72)}
alternative_sprites(spriteset_6340_rev_mid,             ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JGR/emu6340/6340.png")        {tmpl_28px_7l_rev(0, 48)}

alternative_sprites(spriteset_6340_revflip_front,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JGR/emu6340/6340.png")        {tmpl_28px_7l(0, 24)}
alternative_sprites(spriteset_6340_revflip_back,            ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JGR/emu6340/6340.png")        {tmpl_28px_7l(0, 72)}
alternative_sprites(spriteset_6340_revflip_mid,             ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JGR/emu6340/6340.png")        {tmpl_28px_7l(0, 48)}
/*---END OF SECTION---*/



/*---GFX: Train Reversing Switches---*/
//Livery Selection
switch(FEAT_TRAINS,SELF, sw_6340_gfx_rev_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0: spriteset_6340_rev_front;
}
switch(FEAT_TRAINS,SELF, sw_6340_gfx_revflip_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0: spriteset_6340_revflip_front;
}

switch(FEAT_TRAINS,SELF, sw_6340_gfx_rev_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0: spriteset_6340_rev_mid;
}
switch(FEAT_TRAINS,SELF, sw_6340_gfx_revflip_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0: spriteset_6340_revflip_mid;
}

switch(FEAT_TRAINS,SELF, sw_6340_gfx_rev_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0: spriteset_6340_rev_back;
}
switch(FEAT_TRAINS,SELF, sw_6340_gfx_revflip_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0: spriteset_6340_revflip_back;
}

//Check for flipped vehicles (dual_headed)
switch(FEAT_TRAINS, SELF, sw_6340_gfx_rev_front_flippedcheck, vehicle_is_flipped) {
  1: sw_6340_gfx_rev_front_livery;
 default: sw_6340_gfx_revflip_front_livery;
}
switch(FEAT_TRAINS, SELF, sw_6340_gfx_rev_mid_flippedcheck, vehicle_is_flipped) {
  1: sw_6340_gfx_revflip_mid_livery;
 default: sw_6340_gfx_rev_mid_livery;
}
switch(FEAT_TRAINS, SELF, sw_6340_gfx_rev_back_flippedcheck, vehicle_is_flipped) {
  1: sw_6340_gfx_revflip_back_livery;
 default: sw_6340_gfx_rev_back_livery;
}

//Front/Back Car Position Testing
switch(FEAT_TRAINS, SELF, sw_6340_gfx_rev_frontback_nomucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_6340_gfx_rev_front_flippedcheck;
  0:sw_6340_gfx_rev_back_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_6340_gfx_rev_frontback_aftermucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_6340_gfx_rev_back_flippedcheck;
  0:sw_6340_gfx_rev_front_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_6340_gfx_rev_frontback_mucarcheck, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F),STORE_TEMP(var[0x61, 0, 0x000000FF, 0x41],0),  //look at opposite position_in_vehID_chain
STORE_TEMP((position_in_consist_from_end-position_in_consist-1)-LOAD_TEMP(0), 0x10F),                               //look at what is ahead of the first vehicle in the vehID_chain
var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000:sw_6340_gfx_rev_frontback_aftermucars;
  default:sw_6340_gfx_rev_frontback_nomucars;
}
switch(FEAT_TRAINS, SELF, sw_6340_gfx_rev_frontback_sameid, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist+1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle behind of opposite vehicle
  2027:sw_6340_gfx_rev_frontback_mucarcheck;
  1000:sw_6340_gfx_rev_front_flippedcheck;
  default:sw_6340_gfx_rev_back_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_6340_gfx_rev_frontback, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle infront of opposite vehicle
  2027:sw_6340_gfx_rev_frontback_sameid;
  1000:sw_6340_gfx_rev_back_flippedcheck;
  default:sw_6340_gfx_rev_front_flippedcheck;
}

//ID Testing
switch(FEAT_TRAINS, SELF, sw_6340_gfx_rev_idcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of opposite vehicle
  1000: sw_6340_gfx_rev_mid_flippedcheck;
  2027: sw_6340_gfx_rev_frontback;
}
/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/
switch(FEAT_TRAINS, PARENT, sw_6340_gfx_front_revcheck, vehicle_is_reversed){
   0: spriteset_6340_front;
   default: sw_6340_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, PARENT, sw_6340_gfx_back_revcheck, vehicle_is_reversed){
 0: spriteset_6340_back;
 default: sw_6340_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, SELF, sw_6340_gfx_frontback, vehicle_is_flipped) {
  1: sw_6340_gfx_back_revcheck;
 default: sw_6340_gfx_front_revcheck;
}
/*---END OF SECTION---*/



/*---GFX: Middle Car Switches---*/
switch(FEAT_TRAINS, PARENT, sw_6340_gfx_mucar_revcheck_mid, vehicle_is_reversed){
 0: spriteset_6340_mid;
 default: sw_6340_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Livery Refitting Switches---*/

//Main Switches
switch(FEAT_TRAINS, SELF, sw_6340_gfx_mucar,  cargo_subtype) {
  0: sw_6340_gfx_mucar_revcheck_mid;
}
switch(FEAT_TRAINS, SELF, sw_6340_gfx_main,  cargo_subtype) {
  0: sw_6340_gfx_frontback;
}
/*---END OF SECTION---*/



//Coupling
  switch(FEAT_TRAINS, SELF, sw_6340_attach_vehid, [vehicle_type_id == emu_6340 || vehicle_type_id == mu_car]) {
  0: return string(MU_UNIQUE);
  }



item(FEAT_TRAINS, emu_6340) {
    property {
        name:                         string(JGR_6340);
        introduction_date:            date(1914, 05, 22);
        model_life:                   5;
        vehicle_life:                 38;
        reliability_decay:            12;

        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_4D;
        cost_factor:                  19;
        running_cost_factor:          55;

        speed:                        65 km/h;
        track_type:                   NARROW_OHLE;
        power:                        420 kW;
        weight:                       34 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  1;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_ELECTRIC;
        engine_class:                 ENGINE_CLASS_ELECTRIC;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 7;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                      sw_6340_gfx_main;
		    purchase:                 spriteset_6340_purchase;
		    additional_text:	      return string(JGR_6340_DESC);
        //cargo_subtype_text:           sw_6340_subtypetext_main;
        can_attach_wagon:			  sw_6340_attach_vehid;
        //start_stop:                   ;
    }
    /*Multiple Unit Car*/
      livery_override(mu_car){
        default:                      sw_6340_gfx_mucar;
        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_4D;
        //cargo_subtype_text:           sw_6340_subtypetext_mucar;
        power: 120;
        weight: 23;
        length: 7;
      }

}
# 1 "JPplus.pnml" 4


//JNR
# 1 "src/JNR/EMU/80_series.pnml" 1
/*---GFX: Spritesets---*/
//Purchase Sprites
spriteset (spriteset_80_purchase,	                                                     "gfx/JNR/emu80/purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_80_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,         "gfx/JNR/emu80/purchase_32bpp.png")         {tmpl_purchase_dh_32bpp(0, 0)}

//80 Series
spriteset (spriteset_80_front_1,    	      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_back_1,             "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_front_2,          	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_back_2,             "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_front_3,    	      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_back_3,             "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_mid_panto,     		  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_midgr,    		      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_80_front_1,                 ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std(0, 0)}
alternative_sprites(spriteset_80_back_1,                  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std_rev(0, 25)}
alternative_sprites(spriteset_80_front_2,                 ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std(0, 125)}
alternative_sprites(spriteset_80_back_2,                  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std_rev(0, 150)}
alternative_sprites(spriteset_80_front_3,                 ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std(0, 175)}
alternative_sprites(spriteset_80_back_3,                  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std_rev(0, 200)}
alternative_sprites(spriteset_80_mid,                     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std(0, 75)}
alternative_sprites(spriteset_80_mid_panto,               ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std(0, 50)}
alternative_sprites(spriteset_80_midgr,                   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std(0, 100)}

spriteset (spriteset_80_rev_front_1,    	        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_rev_back_1,               "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_rev_front_2,    	        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_rev_back_2,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_rev_front_3,     		      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_rev_back_3,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_rev_mid,    		          "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_rev_mid_panto,    	  	  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_rev_midgr,    	      	  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_80_rev_front_1,                 ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std(0, 25)}
alternative_sprites(spriteset_80_rev_back_1,                  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std(0, 0)}
alternative_sprites(spriteset_80_rev_front_2,                 ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std(0, 150)}
alternative_sprites(spriteset_80_rev_back_2,                  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std(0, 125)}
alternative_sprites(spriteset_80_rev_front_3,                 ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std(0, 200)}
alternative_sprites(spriteset_80_rev_back_3,                  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std(0, 175)}
alternative_sprites(spriteset_80_rev_mid,                     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std_rev(0, 75)}
alternative_sprites(spriteset_80_rev_mid_panto,               ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std_rev(0, 50)}
alternative_sprites(spriteset_80_rev_midgr,                   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std_rev(0, 100)}

spriteset (spriteset_80_revflip_front_1,    	        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_revflip_back_1,               "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_revflip_front_2,    	        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_revflip_back_2,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_revflip_front_3,     		      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_revflip_back_3,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_revflip_mid,    		          "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_revflip_mid_panto,    	  	  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_revflip_midgr,    	      	  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_80_revflip_front_1,             ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std_rev(0, 25)}
alternative_sprites(spriteset_80_revflip_back_1,              ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std_rev(0, 0)}
alternative_sprites(spriteset_80_revflip_front_2,             ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std_rev(0, 150)}
alternative_sprites(spriteset_80_revflip_back_2,              ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std_rev(0, 125)}
alternative_sprites(spriteset_80_revflip_front_3,             ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std_rev(0, 200)}
alternative_sprites(spriteset_80_revflip_back_3,              ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std(0, 175)}
alternative_sprites(spriteset_80_revflip_mid,                 ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std(0, 75)}
alternative_sprites(spriteset_80_revflip_mid_panto,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std(0, 50)}
alternative_sprites(spriteset_80_revflip_midgr,               ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80.png")             {tmpl_std(0, 100)}

//80 Series Kansai
spriteset (spriteset_80_front_kansai,    	           "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_back_kansai,                 "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_mid_kansai,                  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_mid_panto_kansai,            "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_80_front_kansai,                   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80_kansai.png")             {tmpl_std(0, 0)}
alternative_sprites(spriteset_80_back_kansai,                    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80_kansai.png")             {tmpl_std_rev(0, 25)}
alternative_sprites(spriteset_80_mid_kansai,                     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80_kansai.png")             {tmpl_std(0, 75)}
alternative_sprites(spriteset_80_mid_panto_kansai,               ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80_kansai.png")             {tmpl_std(0, 50)}

spriteset (spriteset_80_rev_front_kansai,    	           "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_rev_back_kansai,                 "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_rev_mid_kansai,                  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_rev_mid_panto_kansai,            "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_80_rev_front_kansai,                   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80_kansai.png")             {tmpl_std(0, 25)}
alternative_sprites(spriteset_80_rev_back_kansai,                    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80_kansai.png")             {tmpl_std(0, 0)}
alternative_sprites(spriteset_80_rev_mid_kansai,                     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80_kansai.png")             {tmpl_std_rev(0, 75)}
alternative_sprites(spriteset_80_rev_mid_panto_kansai,               ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80_kansai.png")             {tmpl_std_rev(0, 50)}

spriteset (spriteset_80_revflip_front_kansai,    	           "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_revflip_back_kansai,                 "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_revflip_mid_kansai,                  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_80_revflip_mid_panto_kansai,            "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_80_revflip_front_kansai,                   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80_kansai.png")             {tmpl_std_rev(0, 25)}
alternative_sprites(spriteset_80_revflip_back_kansai,                    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80_kansai.png")             {tmpl_std_rev(0, 0)}
alternative_sprites(spriteset_80_revflip_mid_kansai,                     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80_kansai.png")             {tmpl_std(0, 75)}
alternative_sprites(spriteset_80_revflip_mid_panto_kansai,               ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu80/80_kansai.png")             {tmpl_std(0, 50)}


/*---END OF SECTION---*/



/*---GFX: Pantograph Positions---*/
/*
//80
switch(FEAT_TRAINS,SELF, sw_80_gfx_pantograph_pos_basic, position_in_vehid_chain%10){
  0: spriteset_80_mid_panto;
  3: spriteset_80_mid_panto;
  default:spriteset_80_mid;
}
switch(FEAT_TRAINS,SELF, sw_80_gfx_pantograph_pos, num_vehs_in_vehid_chain){
  default: sw_80_gfx_pantograph_pos_basic;
}
*/
/*---END OF SECTION---*/



/*---GFX: Train Reversing Switches---*/
//Livery Selection
switch(FEAT_TRAINS,SELF, sw_80_gfx_rev_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
3:spriteset_80_rev_front_kansai;
2:spriteset_80_rev_front_3;
1:spriteset_80_rev_front_2;
0:spriteset_80_rev_front_1;
}
switch(FEAT_TRAINS,SELF, sw_80_gfx_revflip_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
3:spriteset_80_revflip_front_kansai;
2:spriteset_80_revflip_front_3;
1:spriteset_80_revflip_front_2;
0:spriteset_80_revflip_front_1;
}

switch(FEAT_TRAINS,SELF, sw_80_gfx_rev_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
3:spriteset_80_rev_back_kansai;
2:spriteset_80_rev_back_2;
1:spriteset_80_rev_back_2;
0:spriteset_80_rev_back_1;
}
switch(FEAT_TRAINS,SELF, sw_80_gfx_revflip_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
3:spriteset_80_revflip_back_kansai;
2:spriteset_80_revflip_back_2;
1:spriteset_80_revflip_back_2;  
0:spriteset_80_revflip_back_1;
}

switch(FEAT_TRAINS,SELF, sw_80_gfx_rev_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
5:spriteset_80_rev_mid;
4:spriteset_80_rev_mid;
3:spriteset_80_rev_mid_kansai;
2:spriteset_80_rev_mid;
1:spriteset_80_rev_mid;
0:spriteset_80_rev_mid;
}
switch(FEAT_TRAINS,SELF, sw_80_gfx_revflip_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
5:spriteset_80_revflip_mid;
4:spriteset_80_revflip_mid;
3:spriteset_80_revflip_mid_kansai;
2:spriteset_80_revflip_mid;
1:spriteset_80_revflip_mid;
0:spriteset_80_revflip_mid;
}

switch(FEAT_TRAINS,PARENT, sw_80_gfx_rev_mid_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
5:spriteset_80_rev_mid_panto;
4:spriteset_80_rev_mid_panto;
3:spriteset_80_rev_mid_panto_kansai;
2:spriteset_80_rev_mid_panto;
1:spriteset_80_rev_mid_panto;
0:spriteset_80_rev_mid_panto;
}
switch(FEAT_TRAINS,PARENT, sw_80_gfx_revflip_mid_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
5:spriteset_80_revflip_mid_panto;
4:spriteset_80_revflip_mid_panto;
3:spriteset_80_revflip_mid_panto_kansai;
2:spriteset_80_revflip_mid_panto;
1:spriteset_80_revflip_mid_panto;
0:spriteset_80_revflip_mid_panto;
}

switch(FEAT_TRAINS,SELF, sw_80_gfx_rev_midgr_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
5:spriteset_80_rev_midgr;
4:spriteset_80_rev_midgr;
3:spriteset_80_rev_mid_kansai;
2:spriteset_80_rev_midgr;
1:spriteset_80_rev_midgr;
0:spriteset_80_rev_midgr;
}
switch(FEAT_TRAINS,SELF, sw_80_gfx_revflip_midgr_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
5:spriteset_80_revflip_midgr;
4:spriteset_80_revflip_midgr;
3:spriteset_80_revflip_mid_kansai;
2:spriteset_80_revflip_midgr;
1:spriteset_80_revflip_midgr;
0:spriteset_80_revflip_midgr;
}

//Check for flipped vehicles (dual_headed)
switch(FEAT_TRAINS, SELF, sw_80_gfx_rev_front_flippedcheck, vehicle_is_flipped) {
  1: sw_80_gfx_revflip_front_livery;
 default: sw_80_gfx_rev_front_livery;
}
switch(FEAT_TRAINS, SELF, sw_80_gfx_rev_back_flippedcheck, vehicle_is_flipped) {
  1: sw_80_gfx_revflip_back_livery;
 default: sw_80_gfx_rev_back_livery;
}
switch(FEAT_TRAINS, SELF, sw_80_gfx_rev_mid_flippedcheck, vehicle_is_flipped) {
  1: sw_80_gfx_revflip_mid_livery;
 default: sw_80_gfx_rev_mid_livery;
}
switch(FEAT_TRAINS, SELF, sw_80_gfx_rev_mid_panto_flippedcheck, vehicle_is_flipped) {
  1: sw_80_gfx_revflip_mid_panto_livery;
 default: sw_80_gfx_rev_mid_panto_livery;
}
switch(FEAT_TRAINS, SELF, sw_80_gfx_rev_midgr_flippedcheck, vehicle_is_flipped) {
  1: sw_80_gfx_revflip_midgr_livery;
 default: sw_80_gfx_rev_midgr_livery;
}

switch(FEAT_TRAINS,SELF, sw_80_gfx_rev_templiv, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  5: sw_80_gfx_rev_mid_panto_flippedcheck;
  4: sw_80_gfx_rev_midgr_flippedcheck;
  3: sw_80_gfx_rev_mid_flippedcheck;
  2: sw_80_gfx_rev_mid_flippedcheck;
  1: sw_80_gfx_rev_mid_flippedcheck;
  0: sw_80_gfx_rev_mid_flippedcheck;
}

//Pantograph Position Testing
/*
switch(FEAT_TRAINS, SELF, sw_80_gfx_rev_pantograph_pos_basic, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%10]){ //look at opposite position_in_vehID_chain
  0: sw_80_gfx_rev_mid_panto_flippedcheck;
  3: sw_80_gfx_rev_mid_panto_flippedcheck;
  default: sw_80_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_80_gfx_rev_pantograph_pos, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 16, 0x000000FF, 0x41]]){ //look at opposite num_vehs_in_vehid_chain
  default: sw_80_gfx_rev_pantograph_pos_basic;
}
switch(FEAT_TRAINS,SELF, sw_80_gfx_rev_mid_refitcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){ //look at opposite refit livery id
//1: ;
0: sw_80_gfx_rev_pantograph_pos;
}
*/

//Back Car Pantograph Testing
/*
switch(FEAT_TRAINS, SELF, sw_80_gfx_rev_back_pantocheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
 //0: sw_80_gfx_rev_back_flippedcheck; <-- if we dont need back panto not sure yet
 default: sw_80_gfx_rev_back_panto_flippedcheck;
}
*/

//Front/Back Car Position Testing
switch(FEAT_TRAINS, SELF, sw_80_gfx_rev_frontback_nomucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_80_gfx_rev_front_flippedcheck;
  0:sw_80_gfx_rev_back_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_80_gfx_rev_frontback_aftermucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_80_gfx_rev_back_flippedcheck;
  0:sw_80_gfx_rev_front_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_80_gfx_rev_frontback_mucarcheck, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F),STORE_TEMP(var[0x61, 0, 0x000000FF, 0x41],0),  //look at opposite position_in_vehID_chain
STORE_TEMP((position_in_consist_from_end-position_in_consist-1)-LOAD_TEMP(0), 0x10F),                               //look at what is ahead of the first vehicle in the vehID_chain
var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000:sw_80_gfx_rev_frontback_aftermucars;
  default:sw_80_gfx_rev_frontback_nomucars;
}
switch(FEAT_TRAINS, SELF, sw_80_gfx_rev_frontback_sameid, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist+1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle behind of opposite vehicle
  2032:sw_80_gfx_rev_frontback_mucarcheck;
  1000:sw_80_gfx_rev_front_flippedcheck;
  default:sw_80_gfx_rev_back_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_80_gfx_rev_frontback, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle infront of opposite vehicle
  2032:sw_80_gfx_rev_frontback_sameid;
  1000:sw_80_gfx_rev_back_flippedcheck;
  default:sw_80_gfx_rev_front_flippedcheck;
}

//ID Testing
switch(FEAT_TRAINS, SELF, sw_80_gfx_rev_idcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of opposite vehicle
  1000: sw_80_gfx_rev_templiv;
  2032: sw_80_gfx_rev_frontback;
}
/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/
//80 series 86-1 front
switch(FEAT_TRAINS, SELF, sw_80_gfx_861_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_80_front_1;
 default: spriteset_80_back_1;
}
switch(FEAT_TRAINS, PARENT, sw_80_gfx_861_frontback_revcheck, vehicle_is_reversed){
 0: sw_80_gfx_861_frontback_flipcheck;
 default: sw_80_gfx_rev_idcheck;
}

//80 series 86-2 front
switch(FEAT_TRAINS, SELF, sw_80_gfx_862_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_80_front_2;
 default: spriteset_80_back_2;
}
switch(FEAT_TRAINS, PARENT, sw_80_gfx_862_frontback_revcheck, vehicle_is_reversed){
 0: sw_80_gfx_862_frontback_flipcheck;
 default: sw_80_gfx_rev_idcheck;
}

//80 series 85 front
switch(FEAT_TRAINS, SELF, sw_80_gfx_85_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_80_front_3;
 default: spriteset_80_back_2;
}
switch(FEAT_TRAINS, PARENT, sw_80_gfx_85_frontback_revcheck, vehicle_is_reversed){
 0: sw_80_gfx_85_frontback_flipcheck;
 default: sw_80_gfx_rev_idcheck;
}

//80 series kansai 86-2 front
switch(FEAT_TRAINS, SELF, sw_80_gfx_862_kansai_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_80_front_kansai;
 default: spriteset_80_back_kansai;
}
switch(FEAT_TRAINS, PARENT, sw_80_gfx_862_kansai_frontback_revcheck, vehicle_is_reversed){
 0: sw_80_gfx_862_kansai_frontback_flipcheck;
 default: sw_80_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Middle Car Switches---*/
//80
switch(FEAT_TRAINS, PARENT, sw_80_gfx_spriteset_80_mid_panto, cargo_subtype){
  3: spriteset_80_mid_panto_kansai;
  2: spriteset_80_mid_panto;
  1: spriteset_80_mid_panto;
  0: spriteset_80_mid_panto;
}
switch(FEAT_TRAINS, SELF, sw_80_gfx_cargosubtype, cargo_subtype){
  5: sw_80_gfx_spriteset_80_mid_panto;
  4: spriteset_80_midgr;
  3: spriteset_80_mid_kansai;
  2: spriteset_80_mid;
  1: spriteset_80_mid;
  0: spriteset_80_mid;
}

switch(FEAT_TRAINS, PARENT, sw_80_gfx_mucar_revcheck_mid, vehicle_is_reversed){
    0: sw_80_gfx_cargosubtype;
    default: sw_80_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Livery Refitting Switches---*/
//Main Switches
switch(FEAT_TRAINS, SELF, sw_80_gfx_mucar,  cargo_subtype) {
  default: sw_80_gfx_mucar_revcheck_mid;
}
switch(FEAT_TRAINS, SELF, sw_80_gfx_main,  cargo_subtype) {
  3: sw_80_gfx_862_kansai_frontback_revcheck;
  2: sw_80_gfx_85_frontback_revcheck;
  1: sw_80_gfx_862_frontback_revcheck;
  0: sw_80_gfx_861_frontback_revcheck;
}


//Menu Switches
switch(FEAT_TRAINS, SELF, sw_80_subtypetext_mucar, cargo_subtype) {
  5: string(jnr80_pt);
  4: string(jnr80_gr);
  3: string(jnr80_ka); 
  2: string(jnr80_85); 
  1: string(jnr80_861);
  0: string(jnr80_862);
}
switch(FEAT_TRAINS, SELF, sw_80_subtypetext_main, cargo_subtype) {
  3: string(jnr80_ka); 
  2: string(jnr80_85); 
  1: string(jnr80_861);
  0: string(jnr80_862);
}
/*---END OF SECTION---*/



//Coupling
  switch(FEAT_TRAINS, SELF, sw_80_attach_vehid, [vehicle_type_id == emu_80 || vehicle_type_id == mu_car]) {
  0: return string(MU_UNIQUE);
  }



item(FEAT_TRAINS, emu_80) {
    property {
        name:                         string(JNR_80);
        introduction_date:            date(1950, 11, 12);
        model_life:                   20;
        vehicle_life:                 39;
        reliability_decay:            11;

        cargo_capacity:               param_capacity_rapid;
        loading_speed:                param_loading_2D;
        cost_factor:                  17;
        running_cost_factor:          51;

        speed:                        110 km/h;
        track_type:                   NARROW_OHLE;
        power:                        480 kW;
        weight:                       37 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  1;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_ELECTRIC;
        engine_class:                 ENGINE_CLASS_ELECTRIC;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                      sw_80_gfx_main;
		    purchase:                 spriteset_80_purchase;
		    additional_text:	      return string(JNR_80_DESC);
        cargo_subtype_text:           sw_80_subtypetext_main;
        can_attach_wagon:			  sw_80_attach_vehid;
        //start_stop:                   ;
    }
    /*Multiple Unit Car*/
      livery_override(mu_car){
        default:                      sw_80_gfx_mucar;
        cargo_capacity:               param_capacity_rapid;
        loading_speed:                param_loading_2D;
        cargo_subtype_text:           sw_80_subtypetext_mucar;
        power: 120;
        weight: 27;
      }

}
# 1 "JPplus.pnml" 4

# 1 "src/JNR/EMU/101_series.pnml" 1
/*---GFX: Spritesets---*/
//Purchase Sprites
spriteset (spriteset_101_purchase,	                                                    "gfx/JNR/emu101/purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_101_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,         "gfx/JNR/emu101/purchase_32bpp.png")         {tmpl_purchase_dh_32bpp(0, 0)}

//101 Orange Vermillion
spriteset (spriteset_101_front_orange,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_101_back_orange,    		      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_101_mid_orange,    		      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_101_back_panto_orange,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_101_mid_panto_orange,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_101_rev_front_orange,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_101_rev_back_orange,    		      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_101_rev_mid_orange,    		      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_101_rev_back_panto_orange,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_101_rev_mid_panto_orange,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_101_revflip_front_orange,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_101_revflip_back_orange,    		      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_101_revflip_mid_orange,    		      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_101_revflip_back_panto_orange,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_101_revflip_mid_panto_orange,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_101_front_orange,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu101/101-1-1.png")        {tmpl_std(0, 0)}
alternative_sprites(spriteset_101_back_orange,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu101/101-1-1.png")        {tmpl_std(0, 25)}
alternative_sprites(spriteset_101_mid_orange,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu101/101-1-1.png")        {tmpl_std_rev(0, 50)}
alternative_sprites(spriteset_101_back_panto_orange,    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu101/101-1-1.png")        {tmpl_std(0, 100)}
alternative_sprites(spriteset_101_mid_panto_orange,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu101/101-1-1.png")        {tmpl_std_rev(0, 75)}

alternative_sprites(spriteset_101_rev_front_orange,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu101/101-1-1.png")        {tmpl_std_rev(0, 25)}
alternative_sprites(spriteset_101_rev_back_orange,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu101/101-1-1.png")        {tmpl_std_rev(0, 0)}
alternative_sprites(spriteset_101_rev_mid_orange,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu101/101-1-1.png")        {tmpl_std(0, 50)}
alternative_sprites(spriteset_101_rev_back_panto_orange,    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu101/101-1-1.png")        {tmpl_std_rev(0, 125)}
alternative_sprites(spriteset_101_rev_mid_panto_orange,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu101/101-1-1.png")        {tmpl_std(0, 75)}

alternative_sprites(spriteset_101_revflip_front_orange,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu101/101-1-1.png")        {tmpl_std(0, 25)}
alternative_sprites(spriteset_101_revflip_back_orange,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu101/101-1-1.png")        {tmpl_std(0, 0)}
alternative_sprites(spriteset_101_revflip_mid_orange,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu101/101-1-1.png")        {tmpl_std_rev(0, 50)}
alternative_sprites(spriteset_101_revflip_back_panto_orange,    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu101/101-1-1.png")        {tmpl_std(0, 125)}
alternative_sprites(spriteset_101_revflip_mid_panto_orange,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu101/101-1-1.png")        {tmpl_std_rev(0, 75)}
/*---END OF SECTION---*/



/*---GFX: Pantograph Positions---*/
//101 orange
switch(FEAT_TRAINS,SELF, sw_101_gfx_pantograph_pos_orange_basic, position_in_vehid_chain%10){
  0: spriteset_101_mid_panto_orange;
  3: spriteset_101_mid_panto_orange;
  default:spriteset_101_mid_orange;
}
switch(FEAT_TRAINS,SELF, sw_101_gfx_pantograph_pos_orange, num_vehs_in_vehid_chain){
  default: sw_101_gfx_pantograph_pos_orange_basic;
}
/*---END OF SECTION---*/



/*---GFX: Train Reversing Switches---*/
//Livery Selection
switch(FEAT_TRAINS,SELF, sw_101_gfx_rev_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
//1: ;
0:spriteset_101_rev_front_orange;
}
switch(FEAT_TRAINS,SELF, sw_101_gfx_revflip_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
//1: ;
0:spriteset_101_revflip_front_orange;
}

switch(FEAT_TRAINS,SELF, sw_101_gfx_rev_mid_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
//1: ;
0:spriteset_101_rev_mid_panto_orange;
}
switch(FEAT_TRAINS,SELF, sw_101_gfx_revflip_mid_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
//1: ;
0:spriteset_101_revflip_mid_panto_orange;
}

switch(FEAT_TRAINS,SELF, sw_101_gfx_rev_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
//1: ;
0:spriteset_101_rev_mid_orange;
}
switch(FEAT_TRAINS,SELF, sw_101_gfx_revflip_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
//1: ;
0:spriteset_101_revflip_mid_orange;
}

switch(FEAT_TRAINS,SELF, sw_101_gfx_rev_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
//1: ;
0:spriteset_101_rev_back_orange;
}
switch(FEAT_TRAINS,SELF, sw_101_gfx_revflip_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
//1: ;
0:spriteset_101_revflip_back_orange;
}

switch(FEAT_TRAINS,SELF, sw_101_gfx_rev_back_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
//1: ;
0:spriteset_101_rev_back_panto_orange;
}
switch(FEAT_TRAINS,SELF, sw_101_gfx_revflip_back_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
//1: ;
0:spriteset_101_revflip_back_panto_orange;
}

//Check for flipped vehicles (dual_headed)
switch(FEAT_TRAINS, SELF, sw_101_gfx_rev_front_flippedcheck, vehicle_is_flipped) {
  1: sw_101_gfx_rev_front_livery;
 default: sw_101_gfx_revflip_front_livery;
}
switch(FEAT_TRAINS, SELF, sw_101_gfx_rev_mid_panto_flippedcheck, vehicle_is_flipped) {
  1: sw_101_gfx_revflip_mid_panto_livery;
 default: sw_101_gfx_rev_mid_panto_livery;
}
switch(FEAT_TRAINS, SELF, sw_101_gfx_rev_mid_flippedcheck, vehicle_is_flipped) {
  1: sw_101_gfx_revflip_mid_livery;
 default: sw_101_gfx_rev_mid_livery;
}
switch(FEAT_TRAINS, SELF, sw_101_gfx_rev_back_panto_flippedcheck, vehicle_is_flipped) {
  1: sw_101_gfx_revflip_back_panto_livery;
 default: sw_101_gfx_rev_back_panto_livery;
}
switch(FEAT_TRAINS, SELF, sw_101_gfx_rev_back_flippedcheck, vehicle_is_flipped) {
  1: sw_101_gfx_revflip_back_livery;
 default: sw_101_gfx_rev_back_livery;
}

//Pantograph Position Testing
switch(FEAT_TRAINS, SELF, sw_101_gfx_rev_pantograph_pos_orange_basic, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%10]){ //look at opposite position_in_vehID_chain
  0: sw_101_gfx_rev_mid_panto_flippedcheck;
  3: sw_101_gfx_rev_mid_panto_flippedcheck;
  default: sw_101_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_101_gfx_rev_pantograph_pos_orange, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 16, 0x000000FF, 0x41]]){ //look at opposite num_vehs_in_vehid_chain
  default: sw_101_gfx_rev_pantograph_pos_orange_basic;
}
switch(FEAT_TRAINS,SELF, sw_101_gfx_rev_mid_refitcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){ //look at opposite refit livery id
//1: ;
0: sw_101_gfx_rev_pantograph_pos_orange;
}

//Back Car Pantograph Testing
switch(FEAT_TRAINS, SELF, sw_101_gfx_rev_back_pantocheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
 //0: sw_101_gfx_rev_back_flippedcheck; <-- if we dont need back panto not sure yet
 default: sw_101_gfx_rev_back_panto_flippedcheck;
}

//Front/Back Car Position Testing
switch(FEAT_TRAINS, SELF, sw_101_gfx_rev_frontback_nomucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_101_gfx_rev_front_flippedcheck;
  0:sw_101_gfx_rev_back_pantocheck;
}
switch(FEAT_TRAINS, SELF, sw_101_gfx_rev_frontback_aftermucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_101_gfx_rev_back_pantocheck;
  0:sw_101_gfx_rev_front_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_101_gfx_rev_frontback_mucarcheck, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F),STORE_TEMP(var[0x61, 0, 0x000000FF, 0x41],0),  //look at opposite position_in_vehID_chain
STORE_TEMP((position_in_consist_from_end-position_in_consist-1)-LOAD_TEMP(0), 0x10F),                               //look at what is ahead of the first vehicle in the vehID_chain
var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000:sw_101_gfx_rev_frontback_aftermucars;
  default:sw_101_gfx_rev_frontback_nomucars;
}
switch(FEAT_TRAINS, SELF, sw_101_gfx_rev_frontback_sameid, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist+1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle behind of opposite vehicle
  2028:sw_101_gfx_rev_frontback_mucarcheck;
  1000:sw_101_gfx_rev_front_flippedcheck;
  default:sw_101_gfx_rev_back_pantocheck;
}
switch(FEAT_TRAINS, SELF, sw_101_gfx_rev_frontback, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle infront of opposite vehicle
  2028:sw_101_gfx_rev_frontback_sameid;
  1000:sw_101_gfx_rev_back_pantocheck;
  default:sw_101_gfx_rev_front_flippedcheck;
}

//ID Testing
switch(FEAT_TRAINS, SELF, sw_101_gfx_rev_idcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of opposite vehicle
  1000: sw_101_gfx_rev_pantograph_pos_orange_basic;
  2028: sw_101_gfx_rev_frontback;
}
/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/
//101 orange
switch(FEAT_TRAINS, SELF, sw_101_gfx_back_pantocheck_orange, position_in_vehid_chain){
 //0: spriteset_101_back_panto_orange; <--disable panto if mucars are between this and the head
 default: spriteset_101_back_panto_orange;
}
switch(FEAT_TRAINS, SELF, sw_101_gfx_frontback_flipcheck_orange, vehicle_is_flipped){
 0: spriteset_101_front_orange;
 default: sw_101_gfx_back_pantocheck_orange;
}
switch(FEAT_TRAINS, PARENT, sw_101_gfx_frontback_revcheck_orange, vehicle_is_reversed){
 0: sw_101_gfx_frontback_flipcheck_orange;
 default: sw_101_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Middle Car Switches---*/
//101 orange
switch(FEAT_TRAINS, PARENT, sw_101_gfx_mucar_revcheck_mid_orange, vehicle_is_reversed){
    0: sw_101_gfx_pantograph_pos_orange;
    default: sw_101_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Livery Refitting Switches---*/
//Main Switches
switch(FEAT_TRAINS, PARENT, sw_101_gfx_mucar,  cargo_subtype) {
  //1: ;
  0: sw_101_gfx_mucar_revcheck_mid_orange;
}
switch(FEAT_TRAINS, PARENT, sw_101_gfx_main,  cargo_subtype) {
  //1: ;
  0: sw_101_gfx_frontback_revcheck_orange;
}

//Menu Switches
switch(FEAT_TRAINS, SELF, sw_101_subtypetext_mucar, cargo_subtype) {
  //1: string(); <--with 165 green car in 8-car formation
  0: string(ORANGE_LV);
}
switch(FEAT_TRAINS, SELF, sw_101_subtypetext_main, cargo_subtype) {
  //1: string(); <--with 165 green car in 8-car formation
  0: string(ORANGE_LV);
}
/*---END OF SECTION---*/



//Coupling
  switch(FEAT_TRAINS, SELF, sw_101_attach_vehid, [vehicle_type_id == emu_101 || vehicle_type_id == mu_car]) {
  0: return string(MU_UNIQUE);
  }



item(FEAT_TRAINS, emu_101) {
    property {
        name:                         string(JNR_101);
        introduction_date:            date(1957, 12, 13);
        model_life:                   12;
        vehicle_life:                 39;
        reliability_decay:            11;

        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_4D;
        cost_factor:                  17;
        running_cost_factor:          51;

        speed:                        100 km/h;
        track_type:                   NARROW_OHLE;
        power:                        480 kW;
        weight:                       37 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  1;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_ELECTRIC;
        engine_class:                 ENGINE_CLASS_ELECTRIC;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                      sw_101_gfx_main;
		    purchase:                 spriteset_101_purchase;
		    additional_text:	      return string(JNR_101_DESC);
        cargo_subtype_text:           sw_101_subtypetext_main;
        can_attach_wagon:			  sw_101_attach_vehid;
        //start_stop:                   ;
    }
    /*Multiple Unit Car*/
      livery_override(mu_car){
        default:                      sw_101_gfx_mucar;
        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_4D;
        cargo_subtype_text:           sw_101_subtypetext_mucar;
        power: 120;
        weight: 27;
      }

}
# 1 "JPplus.pnml" 4
# 1 "src/JNR/EMU/103_series.pnml" 1
/*---GFX: Spritesets---*/
//Purchase Sprites
spriteset (spriteset_103_purchase,	                                                    "gfx/JNR/emu103/purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_103_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,         "gfx/JNR/emu103/purchase_32bpp.png")         {tmpl_purchase_dh_32bpp(0, 0)}

//103 Orange Vermillion
spriteset (spriteset_103_front_orange,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_103_back_orange,    		      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_103_mid_orange,    		      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_103_back_panto_orange,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_103_mid_panto_orange,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_103_rev_front_orange,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_103_rev_back_orange,    		      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_103_rev_mid_orange,    		      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_103_rev_back_panto_orange,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_103_rev_mid_panto_orange,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_103_revflip_front_orange,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_103_revflip_back_orange,    		      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_103_revflip_mid_orange,    		      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_103_revflip_back_panto_orange,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_103_revflip_mid_panto_orange,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_103_front_orange,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu103/103-2-1.png")        {tmpl_std(0, 0)}
alternative_sprites(spriteset_103_back_orange,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu103/103-2-1.png")        {tmpl_std(0, 25)}
alternative_sprites(spriteset_103_mid_orange,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu103/103-2-1.png")        {tmpl_std_rev(0, 50)}
alternative_sprites(spriteset_103_back_panto_orange,    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu103/103-2-1.png")        {tmpl_std(0, 100)}
alternative_sprites(spriteset_103_mid_panto_orange,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu103/103-2-1.png")        {tmpl_std_rev(0, 75)}

alternative_sprites(spriteset_103_rev_front_orange,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu103/103-2-1.png")        {tmpl_std_rev(0, 25)}
alternative_sprites(spriteset_103_rev_back_orange,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu103/103-2-1.png")        {tmpl_std_rev(0, 0)}
alternative_sprites(spriteset_103_rev_mid_orange,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu103/103-2-1.png")        {tmpl_std(0, 50)}
alternative_sprites(spriteset_103_rev_back_panto_orange,    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu103/103-2-1.png")        {tmpl_std_rev(0, 125)}
alternative_sprites(spriteset_103_rev_mid_panto_orange,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu103/103-2-1.png")        {tmpl_std(0, 75)}

alternative_sprites(spriteset_103_revflip_front_orange,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu103/103-2-1.png")        {tmpl_std(0, 25)}
alternative_sprites(spriteset_103_revflip_back_orange,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu103/103-2-1.png")        {tmpl_std(0, 0)}
alternative_sprites(spriteset_103_revflip_mid_orange,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu103/103-2-1.png")        {tmpl_std_rev(0, 50)}
alternative_sprites(spriteset_103_revflip_back_panto_orange,    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu103/103-2-1.png")        {tmpl_std(0, 125)}
alternative_sprites(spriteset_103_revflip_mid_panto_orange,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu103/103-2-1.png")        {tmpl_std_rev(0, 75)}
/*---END OF SECTION---*/



/*---GFX: Pantograph Positions---*/
//103 orange
switch(FEAT_TRAINS,SELF, sw_103_gfx_pantograph_pos_orange_basic, position_in_vehid_chain%10){
  0: spriteset_103_mid_panto_orange;
  3: spriteset_103_mid_panto_orange;
  default:spriteset_103_mid_orange;
}
switch(FEAT_TRAINS,SELF, sw_103_gfx_pantograph_pos_orange, num_vehs_in_vehid_chain){
  default: sw_103_gfx_pantograph_pos_orange_basic;
}
/*---END OF SECTION---*/



/*---GFX: Train Reversing Switches---*/
//Livery Selection
switch(FEAT_TRAINS,SELF, sw_103_gfx_rev_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
//1: ;
0:spriteset_103_rev_front_orange;
}
switch(FEAT_TRAINS,SELF, sw_103_gfx_revflip_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
//1: ;
0:spriteset_103_revflip_front_orange;
}

switch(FEAT_TRAINS,SELF, sw_103_gfx_rev_mid_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
//1: ;
0:spriteset_103_rev_mid_panto_orange;
}
switch(FEAT_TRAINS,SELF, sw_103_gfx_revflip_mid_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
//1: ;
0:spriteset_103_revflip_mid_panto_orange;
}

switch(FEAT_TRAINS,SELF, sw_103_gfx_rev_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
//1: ;
0:spriteset_103_rev_mid_orange;
}
switch(FEAT_TRAINS,SELF, sw_103_gfx_revflip_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
//1: ;
0:spriteset_103_revflip_mid_orange;
}

switch(FEAT_TRAINS,SELF, sw_103_gfx_rev_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
//1: ;
0:spriteset_103_rev_back_orange;
}
switch(FEAT_TRAINS,SELF, sw_103_gfx_revflip_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
//1: ;
0:spriteset_103_revflip_back_orange;
}

switch(FEAT_TRAINS,SELF, sw_103_gfx_rev_back_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
//1: ;
0:spriteset_103_rev_back_panto_orange;
}
switch(FEAT_TRAINS,SELF, sw_103_gfx_revflip_back_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
//1: ;
0:spriteset_103_revflip_back_panto_orange;
}

//Check for flipped vehicles (dual_headed)
switch(FEAT_TRAINS, SELF, sw_103_gfx_rev_front_flippedcheck, vehicle_is_flipped) {
  1: sw_103_gfx_rev_front_livery;
 default: sw_103_gfx_revflip_front_livery;
}
switch(FEAT_TRAINS, SELF, sw_103_gfx_rev_mid_panto_flippedcheck, vehicle_is_flipped) {
  1: sw_103_gfx_revflip_mid_panto_livery;
 default: sw_103_gfx_rev_mid_panto_livery;
}
switch(FEAT_TRAINS, SELF, sw_103_gfx_rev_mid_flippedcheck, vehicle_is_flipped) {
  1: sw_103_gfx_revflip_mid_livery;
 default: sw_103_gfx_rev_mid_livery;
}
switch(FEAT_TRAINS, SELF, sw_103_gfx_rev_back_panto_flippedcheck, vehicle_is_flipped) {
  1: sw_103_gfx_revflip_back_panto_livery;
 default: sw_103_gfx_rev_back_panto_livery;
}
switch(FEAT_TRAINS, SELF, sw_103_gfx_rev_back_flippedcheck, vehicle_is_flipped) {
  1: sw_103_gfx_revflip_back_livery;
 default: sw_103_gfx_rev_back_livery;
}

//Pantograph Position Testing
switch(FEAT_TRAINS, SELF, sw_103_gfx_rev_pantograph_pos_orange_basic, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%10]){ //look at opposite position_in_vehID_chain
  0: sw_103_gfx_rev_mid_panto_flippedcheck;
  3: sw_103_gfx_rev_mid_panto_flippedcheck;
  default: sw_103_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_103_gfx_rev_pantograph_pos_orange, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 16, 0x000000FF, 0x41]]){ //look at opposite num_vehs_in_vehid_chain
  default: sw_103_gfx_rev_pantograph_pos_orange_basic;
}
switch(FEAT_TRAINS,SELF, sw_103_gfx_rev_mid_refitcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){ //look at opposite refit livery id
//1: ;
0: sw_103_gfx_rev_pantograph_pos_orange;
}

//Back Car Pantograph Testing
switch(FEAT_TRAINS, SELF, sw_103_gfx_rev_back_pantocheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
 //0: sw_103_gfx_rev_back_flippedcheck; <-- if we dont need back panto not sure yet
 default: sw_103_gfx_rev_back_panto_flippedcheck;
}

//Front/Back Car Position Testing
switch(FEAT_TRAINS, SELF, sw_103_gfx_rev_frontback_nomucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_103_gfx_rev_front_flippedcheck;
  0:sw_103_gfx_rev_back_pantocheck;
}
switch(FEAT_TRAINS, SELF, sw_103_gfx_rev_frontback_aftermucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_103_gfx_rev_back_pantocheck;
  0:sw_103_gfx_rev_front_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_103_gfx_rev_frontback_mucarcheck, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F),STORE_TEMP(var[0x61, 0, 0x000000FF, 0x41],0),  //look at opposite position_in_vehID_chain
STORE_TEMP((position_in_consist_from_end-position_in_consist-1)-LOAD_TEMP(0), 0x10F),                               //look at what is ahead of the first vehicle in the vehID_chain
var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000:sw_103_gfx_rev_frontback_aftermucars;
  default:sw_103_gfx_rev_frontback_nomucars;
}
switch(FEAT_TRAINS, SELF, sw_103_gfx_rev_frontback_sameid, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist+1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle behind of opposite vehicle
  2029:sw_103_gfx_rev_frontback_mucarcheck;
  1000:sw_103_gfx_rev_front_flippedcheck;
  default:sw_103_gfx_rev_back_pantocheck;
}
switch(FEAT_TRAINS, SELF, sw_103_gfx_rev_frontback, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle infront of opposite vehicle
  2029:sw_103_gfx_rev_frontback_sameid;
  1000:sw_103_gfx_rev_back_pantocheck;
  default:sw_103_gfx_rev_front_flippedcheck;
}

//ID Testing
switch(FEAT_TRAINS, SELF, sw_103_gfx_rev_idcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of opposite vehicle
  1000: sw_103_gfx_rev_pantograph_pos_orange_basic;
  2029: sw_103_gfx_rev_frontback;
}
/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/
//103 orange
switch(FEAT_TRAINS, SELF, sw_103_gfx_back_pantocheck_orange, position_in_vehid_chain){
 //0: spriteset_103_back_panto_orange; <--disable panto if mucars are between this and the head
 default: spriteset_103_back_panto_orange;
}
switch(FEAT_TRAINS, SELF, sw_103_gfx_frontback_flipcheck_orange, vehicle_is_flipped){
 0: spriteset_103_front_orange;
 default: sw_103_gfx_back_pantocheck_orange;
}
switch(FEAT_TRAINS, PARENT, sw_103_gfx_frontback_revcheck_orange, vehicle_is_reversed){
 0: sw_103_gfx_frontback_flipcheck_orange;
 default: sw_103_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Middle Car Switches---*/
//103 orange
switch(FEAT_TRAINS, PARENT, sw_103_gfx_mucar_revcheck_mid_orange, vehicle_is_reversed){
    0: sw_103_gfx_pantograph_pos_orange;
    default: sw_103_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Livery Refitting Switches---*/
//Main Switches
switch(FEAT_TRAINS, PARENT, sw_103_gfx_mucar,  cargo_subtype) {
  //1: ;
  0: sw_103_gfx_mucar_revcheck_mid_orange;
}
switch(FEAT_TRAINS, PARENT, sw_103_gfx_main,  cargo_subtype) {
  //1: ;
  0: sw_103_gfx_frontback_revcheck_orange;
}

//Menu Switches
switch(FEAT_TRAINS, SELF, sw_103_subtypetext_mucar, cargo_subtype) {
  //1: string(); <--with 165 green car in 8-car formation
  0: string(ORANGE_LV);
}
switch(FEAT_TRAINS, SELF, sw_103_subtypetext_main, cargo_subtype) {
  //1: string(); <--with 165 green car in 8-car formation
  0: string(ORANGE_LV);
}
/*---END OF SECTION---*/



//Coupling
  switch(FEAT_TRAINS, SELF, sw_103_attach_vehid, [vehicle_type_id == emu_103 || vehicle_type_id == mu_car]) {
  0: return string(MU_UNIQUE);
  }



item(FEAT_TRAINS, emu_103) {
    property {
        name:                         string(JNR_103);
        introduction_date:            date(1963, 12, 13);
        model_life:                   21;
        vehicle_life:                 39;
        reliability_decay:            11;

        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_4D;
        cost_factor:                  17;
        running_cost_factor:          51;

        speed:                        100 km/h;
        track_type:                   NARROW_OHLE;
        power:                        480 kW;
        weight:                       36 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  1;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_ELECTRIC;
        engine_class:                 ENGINE_CLASS_ELECTRIC;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                      sw_103_gfx_main;
		    purchase:                 spriteset_103_purchase;
		    additional_text:	      return string(JNR_103_DESC);
        cargo_subtype_text:           sw_103_subtypetext_main;
        can_attach_wagon:			  sw_103_attach_vehid;
        //start_stop:                   ;
    }
    /*Multiple Unit Car*/
      livery_override(mu_car){
        default:                      sw_103_gfx_mucar;
        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_4D;
        cargo_subtype_text:           sw_103_subtypetext_mucar;
        power: 120;
        weight: 26;
      }

}
# 1 "JPplus.pnml" 4
# 1 "src/JNR/EMU/111_113_series.pnml" 1
/*---GFX: Spritesets---*/
//Purchase Sprites
spriteset (spriteset_113_purchase,	                                                    "gfx/JNR/emu111_113/purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_113_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,         "gfx/JNR/emu111_113/purchase_32bpp.png")         {tmpl_purchase_dh_32bpp(0, 0)}

//11_113 Shonan Original
spriteset (spriteset_113_front_shonan,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_113_back_shonan,    		      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_113_mid_shonan,    		      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_113_back_panto_shonan,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_113_mid_panto_shonan,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_113_mid_sdgrcar_shonan,    	"gfx/OTHER/mucar.png")  { tmpl_std(0, 0) }

spriteset (spriteset_113_rev_front_shonan,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_113_rev_back_shonan,    		      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_113_rev_mid_shonan,    		      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_113_rev_back_panto_shonan,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_113_rev_mid_panto_shonan,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_113_rev_mid_sdgrcar_shonan,    	"gfx/OTHER/mucar.png")  { tmpl_std(0, 0) }

spriteset (spriteset_113_revflip_front_shonan,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_113_revflip_back_shonan,    		      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_113_revflip_mid_shonan,    		      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_113_revflip_back_panto_shonan,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_113_revflip_mid_panto_shonan,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_113_revflip_mid_sdgrcar_shonan,    	"gfx/OTHER/mucar.png")  { tmpl_std(0, 0) }

alternative_sprites(spriteset_113_front_shonan,             ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu111_113/shonan/111-1-1_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_113_back_shonan,              ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu111_113/shonan/111-1-1_32bpp.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_113_mid_shonan,               ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu111_113/shonan/111-1-3_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_113_back_panto_shonan,        ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu111_113/shonan/111-1-2_32bpp.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_113_mid_panto_shonan,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu111_113/shonan/111-1-4_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_113_mid_sdgrcar_shonan,       ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu111_113/shonan/111-1-5_32bpp.png")        {tmpl_std(0, 1)}

alternative_sprites(spriteset_113_rev_front_shonan,             ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu111_113/shonan/111-1-1_32bpp.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_113_rev_back_shonan,              ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu111_113/shonan/111-1-1_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_113_rev_mid_shonan,               ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu111_113/shonan/111-1-3_32bpp.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_113_rev_back_panto_shonan,        ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu111_113/shonan/111-1-2_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_113_rev_mid_panto_shonan,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu111_113/shonan/111-1-4_32bpp.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_113_rev_mid_sdgrcar_shonan,       ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu111_113/shonan/111-1-5_32bpp.png")        {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_113_revflip_front_shonan,             ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu111_113/shonan/111-1-1_32bpp.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_113_revflip_back_shonan,              ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu111_113/shonan/111-1-1_32bpp.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_113_revflip_mid_shonan,               ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu111_113/shonan/111-1-3_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_113_revflip_back_panto_shonan,        ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu111_113/shonan/111-1-2_32bpp.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_113_revflip_mid_panto_shonan,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu111_113/shonan/111-1-4_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_113_revflip_mid_sdgrcar_shonan,       ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu111_113/shonan/111-1-5_32bpp.png")        {tmpl_std(0, 1)}


//111_113 Shonan AC 1970+
spriteset (spriteset_113_front_shonan_ac,    	           	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_113_back_shonan_ac,    		          "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_113_mid_shonan_ac,    		            "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_113_back_panto_shonan_ac,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_113_mid_panto_shonan_ac,    		      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_113_mid_sdgrcarbelt_shonan_ac,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_113_mid_sdgrcarnobelt_shonan_ac,    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_113_mid_ddgrcarold_shonan_ac,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_113_mid_ddgrcarnew_shonan_ac,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_113_rev_front_shonan_ac,    	    	      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_113_rev_back_shonan_ac,    		          "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_113_rev_mid_shonan_ac,    		            "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_113_rev_back_panto_shonan_ac,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_113_rev_mid_panto_shonan_ac,    		      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_113_rev_mid_sdgrcarbelt_shonan_ac,     	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_113_rev_mid_sdgrcarnobelt_shonan_ac,     "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_113_rev_mid_ddgrcarold_shonan_ac,        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_113_rev_mid_ddgrcarnew_shonan_ac,  	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_113_revflip_front_shonan_ac,    	                "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_113_revflip_back_shonan_ac,    		              "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_113_revflip_mid_shonan_ac,    		                "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_113_revflip_back_panto_shonan_ac,                "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_113_revflip_mid_panto_shonan_ac,    	            "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_113_revflip_mid_sdgrcarbelt_shonan_ac,    	      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_113_revflip_mid_sdgrcarnobelt_shonan_ac,    		  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_113_revflip_mid_ddgrcarold_shonan_ac,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_113_revflip_mid_ddgrcarnew_shonan_ac,           "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_113_front_shonan_ac,                 ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu111_113/shonan/113-1-1_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_113_back_shonan_ac,                  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu111_113/shonan/113-1-1_32bpp.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_113_mid_shonan_ac,                   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu111_113/shonan/113-1-3_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_113_back_panto_shonan_ac,            ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu111_113/shonan/113-1-2_32bpp.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_113_mid_panto_shonan_ac,             ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu111_113/shonan/113-1-4_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_113_mid_sdgrcarbelt_shonan_ac,       ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu111_113/shonan/113-1-5_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_113_mid_sdgrcarnobelt_shonan_ac,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu111_113/shonan/113-1-6_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_113_mid_ddgrcarold_shonan_ac,        ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu111_113/shonan/113-1-7_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_113_mid_ddgrcarnew_shonan_ac,        ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu111_113/shonan/113-1-8_32bpp.png")        {tmpl_std(0, 1)}

alternative_sprites(spriteset_113_rev_front_shonan_ac,                 ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu111_113/shonan/113-1-1_32bpp.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_113_rev_back_shonan_ac,                  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu111_113/shonan/113-1-1_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_113_rev_mid_shonan_ac,                   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu111_113/shonan/113-1-3_32bpp.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_113_rev_back_panto_shonan_ac,            ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu111_113/shonan/113-1-2_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_113_rev_mid_panto_shonan_ac,             ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu111_113/shonan/113-1-4_32bpp.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_113_rev_mid_sdgrcarbelt_shonan_ac,       ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu111_113/shonan/113-1-5_32bpp.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_113_rev_mid_sdgrcarnobelt_shonan_ac,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu111_113/shonan/113-1-6_32bpp.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_113_rev_mid_ddgrcarold_shonan_ac,        ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu111_113/shonan/113-1-7_32bpp.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_113_rev_mid_ddgrcarnew_shonan_ac,        ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu111_113/shonan/113-1-8_32bpp.png")        {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_113_revflip_front_shonan_ac,                 ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu111_113/shonan/113-1-1_32bpp.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_113_revflip_back_shonan_ac,                  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu111_113/shonan/113-1-1_32bpp.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_113_revflip_mid_shonan_ac,                   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu111_113/shonan/113-1-3_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_113_revflip_back_panto_shonan_ac,            ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu111_113/shonan/113-1-2_32bpp.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_113_revflip_mid_panto_shonan_ac,             ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu111_113/shonan/113-1-4_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_113_revflip_mid_sdgrcarbelt_shonan_ac,       ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu111_113/shonan/113-1-5_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_113_revflip_mid_sdgrcarnobelt_shonan_ac,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu111_113/shonan/113-1-6_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_113_revflip_mid_ddgrcarold_shonan_ac,        ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu111_113/shonan/113-1-7_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_113_revflip_mid_ddgrcarnew_shonan_ac,        ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu111_113/shonan/113-1-8_32bpp.png")        {tmpl_std(0, 1)}
/*---END OF SECTION---*/



/*---GFX: Year Dependent Switches---*/
//113 Shonan
switch(FEAT_TRAINS, SELF, sw_113_gfx_spriteset_113_front_shonan, current_year){
 0..1970: spriteset_113_front_shonan;
 default: spriteset_113_front_shonan_ac;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_spriteset_113_back_shonan, current_year){
 0..1970: spriteset_113_back_shonan;
 default: spriteset_113_back_shonan_ac;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_spriteset_113_mid_shonan, current_year){
 0..1970: spriteset_113_mid_shonan;
 default: spriteset_113_mid_shonan_ac;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_spriteset_113_back_panto_shonan, current_year){
 0..1970: spriteset_113_back_panto_shonan;
 default: spriteset_113_back_panto_shonan_ac;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_spriteset_113_mid_panto_shonan, current_year){
 0..1970: spriteset_113_mid_panto_shonan;
 default: spriteset_113_mid_panto_shonan_ac;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_spriteset_113_mid_sdgrcar_shonan, current_year){
 0..1970: spriteset_113_mid_sdgrcar_shonan;
 default: spriteset_113_mid_sdgrcarbelt_shonan_ac;
}

switch(FEAT_TRAINS, SELF, sw_113_gfx_spriteset_113_rev_front_shonan, current_year){
 0..1970: spriteset_113_rev_front_shonan;
 default: spriteset_113_rev_front_shonan_ac;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_spriteset_113_rev_back_shonan, current_year){
 0..1970: spriteset_113_rev_back_shonan;
 default: spriteset_113_rev_back_shonan_ac;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_spriteset_113_rev_mid_shonan, current_year){
 0..1970: spriteset_113_rev_mid_shonan;
 default: spriteset_113_rev_mid_shonan_ac;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_spriteset_113_rev_back_panto_shonan, current_year){
 0..1970: spriteset_113_rev_back_panto_shonan;
 default: spriteset_113_rev_back_panto_shonan_ac;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_spriteset_113_rev_mid_panto_shonan, current_year){
 0..1970: spriteset_113_rev_mid_panto_shonan;
 default: spriteset_113_rev_mid_panto_shonan_ac;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_spriteset_113_rev_mid_sdgrcar_shonan, current_year){
 0..1970: spriteset_113_rev_mid_sdgrcar_shonan;
 default: spriteset_113_rev_mid_sdgrcarbelt_shonan_ac;
}

switch(FEAT_TRAINS, SELF, sw_113_gfx_spriteset_113_revflip_front_shonan, current_year){
 0..1970: spriteset_113_revflip_front_shonan;
 default: spriteset_113_revflip_front_shonan_ac;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_spriteset_113_revflip_back_shonan, current_year){
 0..1970: spriteset_113_revflip_back_shonan;
 default: spriteset_113_revflip_back_shonan_ac;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_spriteset_113_revflip_mid_shonan, current_year){
 0..1970: spriteset_113_revflip_mid_shonan;
 default: spriteset_113_revflip_mid_shonan_ac;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_spriteset_113_revflip_back_panto_shonan, current_year){
 0..1970: spriteset_113_revflip_back_panto_shonan;
 default: spriteset_113_revflip_back_panto_shonan_ac;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_spriteset_113_revflip_mid_panto_shonan, current_year){
 0..1970: spriteset_113_revflip_mid_panto_shonan;
 default: spriteset_113_revflip_mid_panto_shonan_ac;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_spriteset_113_revflip_mid_sdgrcar_shonan, current_year){
 0..1970: spriteset_113_revflip_mid_sdgrcar_shonan;
 default: spriteset_113_revflip_mid_sdgrcarbelt_shonan_ac;
}


/*---END OF SECTION---*/



/*---GFX: Pantograph Positions---*/
 
//113 Shonan
/*
COMBINED:
0-3: 0                                      ALL - a,b,c,d,e,f,g,h
4: 0,2                                      ALL - a,b,c,d,e,f,g,h

5a: 0,3 + 2 CAB]                             111 - a
5b: 0,3 + 2 GRCAR                            111 - b
5c: 0,3 + 2 GRCAR_NOBELT                     113 - c,d,e,g,h
5d: 0,3                                      113 - f

6a: 0,4, + 2 GRCAR, 3 [CAB                   111 - a
6b: 0,4, + 2 GRCAR, 3 GRCAR                  111 - b,e
6c: 0,4 + 2 GRCAR_NOBELT, 3 [CAB             113 - d,f
6d: 0,4 + 2 GRCAR_NOBELT, 3 GRCAR_NOBELT     113 - c
6e: 0,4 + 2 DD_OLD, 3 GRCAR_NOBELT           113 - g
6f: 0,4 + 2 DD_NEW, 3 GRCAR_NOBELT           113 - h

7a: 0,3,5 + 2 CAB]                           111 - a
7b: 0,3,5 + 2 GRCAR                          111 - b
7c: 0,2,5 + 4 CAB]                           113 - f
7d: 0,3,5 + 2 GRCAR_NOBELT                   113 - d
7e: 0,5 + 2 GRCAR, 3 GRCAR, 4 [CAB           113 - e
7f: 0,4 + 2 GRCAR_NOBELT, 3 GRCAR_NOBELT     113 - c
7g: 0,4 + 2 DD_OLD, 3 GRCAR_NOBELT           113 - g
7h: 0,4 + 2 DD_NEW, 3 GRCAR_NOBELT           113 - h

8a: 0,4,6 + 2 GRCAR, 3 [CAB                  111 - a
8b: 0,4,6 + 2 GRCAR, 3 GRCAR                 111 - b
8c: 0,4,6 + 2 GRCAR_NOBELT, 3 [CAB           113 - d
8d: 0,3,6 + 2 GRCAR                          113 - e
8e: 0,3,6 + 2 GRCAR_NOBELT                   113 - f
8f: 0,4,6 + 2 GRCAR_NOBELT, 3 GRCAR_NOBELT   113 - c
8g: 0,4,6 + 2 DD_OLD , 3 GRCAR_NOBELT        113 - g
8h: 0,4,6 + 2 DD_NEW , 3 GRCAR_NOBELT        113 - h

9a: 0,4,7 + 2 GRCAR, 3 GRCAR, 6 for CAB]     111 - a,b
9b: 0,4,7 + 2 GRCAR, 3 GRCAR                 113 - e
9c: 0,4,7 + 2 GRCAR_NOBELT, 3 GRCAR_NOBELT   113 - c,d,f
9d: 0,4,7 + 2 DD_OLD, 3 GRCAR_NOBELT         113 - g
9e: 0,4,7 + 2 DD_NEW, 3 GRCAR_NOBELT         113 - h

Shonan Livery (NO Green Car or SD Green Car Variations) f   0
Shonan Livery (1 SD Green Car w/belt Variations) a          1
Shonan Livery (1 SD Green Car Variations) d                 2
Shonan Livery (1 or 2 SD Green Car w/belt Variations) e     3
Shonan Livery (2 SD Green Car w/belt Variations) b          4
Shonan Livery (2 SD Green Car Variations) c                 5
Shonan Livery (DD Old/SD Green Car Variations) g            6
Shonan Livery (DD New/SD Green Car Variations) h            7
*/

switch(FEAT_TRAINS,SELF, sw_113_gfx_pantograph_pos_shonan_under3, position_in_vehid_chain){
  0: sw_113_gfx_spriteset_113_mid_panto_shonan;
  default: sw_113_gfx_spriteset_113_mid_shonan;
}
switch(FEAT_TRAINS,SELF, sw_113_gfx_pantograph_pos_shonan_4mucars, position_in_vehid_chain){
  0: sw_113_gfx_spriteset_113_mid_panto_shonan;
  2: sw_113_gfx_spriteset_113_mid_panto_shonan;
  default: sw_113_gfx_spriteset_113_mid_shonan;
}

switch(FEAT_TRAINS,SELF, sw_113_gfx_pantograph_pos_shonan_5_a, position_in_vehid_chain){
  0: sw_113_gfx_spriteset_113_mid_panto_shonan;
  2: sw_113_gfx_spriteset_113_revflip_back_shonan; //CAB]
  3: sw_113_gfx_spriteset_113_mid_panto_shonan;
  default: sw_113_gfx_spriteset_113_mid_shonan;
}
switch(FEAT_TRAINS,SELF, sw_113_gfx_pantograph_pos_shonan_5_b, position_in_vehid_chain){
  0: sw_113_gfx_spriteset_113_mid_panto_shonan;
  2: sw_113_gfx_spriteset_113_rev_mid_sdgrcar_shonan; //GRCAR
  3: sw_113_gfx_spriteset_113_mid_panto_shonan;
  default: sw_113_gfx_spriteset_113_mid_shonan;
}
switch(FEAT_TRAINS,SELF, sw_113_gfx_pantograph_pos_shonan_5_c, position_in_vehid_chain){
  0: sw_113_gfx_spriteset_113_mid_panto_shonan;
  2: spriteset_113_mid_sdgrcarnobelt_shonan_ac; //GRCAR_NOBELT
  3: sw_113_gfx_spriteset_113_mid_panto_shonan;
  default: sw_113_gfx_spriteset_113_mid_shonan;
}
switch(FEAT_TRAINS,SELF, sw_113_gfx_pantograph_pos_shonan_5_d, position_in_vehid_chain){
  0: sw_113_gfx_spriteset_113_mid_panto_shonan;
  3: sw_113_gfx_spriteset_113_mid_panto_shonan;
  default: sw_113_gfx_spriteset_113_mid_shonan;
}

switch(FEAT_TRAINS,SELF, sw_113_gfx_pantograph_pos_shonan_6_a, position_in_vehid_chain){
  0: sw_113_gfx_spriteset_113_mid_panto_shonan;
  2: sw_113_gfx_spriteset_113_rev_mid_sdgrcar_shonan; //GRCAR
  3: sw_113_gfx_spriteset_113_front_shonan; //[CAB
  4: sw_113_gfx_spriteset_113_mid_panto_shonan;
  default: sw_113_gfx_spriteset_113_mid_shonan;
}
switch(FEAT_TRAINS,SELF, sw_113_gfx_pantograph_pos_shonan_6_b, position_in_vehid_chain){
  0: sw_113_gfx_spriteset_113_mid_panto_shonan;
  2: sw_113_gfx_spriteset_113_mid_sdgrcar_shonan; //GRCAR
  3: sw_113_gfx_spriteset_113_mid_sdgrcar_shonan; //GRCAR
  4: sw_113_gfx_spriteset_113_mid_panto_shonan;
  default: sw_113_gfx_spriteset_113_mid_shonan;
}
switch(FEAT_TRAINS,SELF, sw_113_gfx_pantograph_pos_shonan_6_c, position_in_vehid_chain){
  0: sw_113_gfx_spriteset_113_mid_panto_shonan;
  2: spriteset_113_mid_sdgrcarnobelt_shonan_ac; //GRCAR_NOBELT
  3: sw_113_gfx_spriteset_113_front_shonan; //[CAB  
  4: sw_113_gfx_spriteset_113_mid_panto_shonan;
  default: sw_113_gfx_spriteset_113_mid_shonan;
}
switch(FEAT_TRAINS,SELF, sw_113_gfx_pantograph_pos_shonan_6_d, position_in_vehid_chain){
  0: sw_113_gfx_spriteset_113_mid_panto_shonan;
  2: spriteset_113_mid_sdgrcarnobelt_shonan_ac; //GRCAR_NOBELT
  3: spriteset_113_mid_sdgrcarnobelt_shonan_ac; //GRCAR_NOBELT
  4: sw_113_gfx_spriteset_113_mid_panto_shonan;
  default: sw_113_gfx_spriteset_113_mid_shonan;
}
switch(FEAT_TRAINS,SELF, sw_113_gfx_pantograph_pos_shonan_6_e, position_in_vehid_chain){
  0: sw_113_gfx_spriteset_113_mid_panto_shonan;
  2: spriteset_113_mid_ddgrcarold_shonan_ac; //DD_OLD
  3: spriteset_113_mid_sdgrcarnobelt_shonan_ac; //GRCAR_NOBELT
  4: sw_113_gfx_spriteset_113_mid_panto_shonan;
  default: sw_113_gfx_spriteset_113_mid_shonan;
}
switch(FEAT_TRAINS,SELF, sw_113_gfx_pantograph_pos_shonan_6_f, position_in_vehid_chain){
  0: sw_113_gfx_spriteset_113_mid_panto_shonan;
  2: spriteset_113_mid_ddgrcarnew_shonan_ac; //DD_NEW
  3: spriteset_113_mid_sdgrcarnobelt_shonan_ac; //GRCAR_NOBELT
  4: sw_113_gfx_spriteset_113_mid_panto_shonan;
  default: sw_113_gfx_spriteset_113_mid_shonan;
}

switch(FEAT_TRAINS,SELF, sw_113_gfx_pantograph_pos_shonan_7_a, position_in_vehid_chain){
  0: sw_113_gfx_spriteset_113_mid_panto_shonan;
  2: sw_113_gfx_spriteset_113_revflip_back_shonan; //CAB] 
  3: sw_113_gfx_spriteset_113_mid_panto_shonan;
  5: sw_113_gfx_spriteset_113_mid_panto_shonan;
  default: sw_113_gfx_spriteset_113_mid_shonan;
}
switch(FEAT_TRAINS,SELF, sw_113_gfx_pantograph_pos_shonan_7_b, position_in_vehid_chain){
  0: sw_113_gfx_spriteset_113_mid_panto_shonan;
  2: sw_113_gfx_spriteset_113_rev_mid_sdgrcar_shonan; //GRCAR
  3: sw_113_gfx_spriteset_113_mid_panto_shonan;
  5: sw_113_gfx_spriteset_113_mid_panto_shonan;
  default: sw_113_gfx_spriteset_113_mid_shonan;
}
switch(FEAT_TRAINS,SELF, sw_113_gfx_pantograph_pos_shonan_7_c, position_in_vehid_chain){
  0: sw_113_gfx_spriteset_113_mid_panto_shonan;
  2: sw_113_gfx_spriteset_113_mid_panto_shonan;
  4: sw_113_gfx_spriteset_113_revflip_back_shonan; //CAB] 
  5: sw_113_gfx_spriteset_113_mid_panto_shonan;
  default: sw_113_gfx_spriteset_113_mid_shonan;
}
switch(FEAT_TRAINS,SELF, sw_113_gfx_pantograph_pos_shonan_7_d, position_in_vehid_chain){
  0: sw_113_gfx_spriteset_113_mid_panto_shonan;
  2: spriteset_113_mid_sdgrcarnobelt_shonan_ac; //GRCAR_NOBELT
  3: sw_113_gfx_spriteset_113_mid_panto_shonan;
  5: sw_113_gfx_spriteset_113_mid_panto_shonan;
  default: sw_113_gfx_spriteset_113_mid_shonan;
}
switch(FEAT_TRAINS,SELF, sw_113_gfx_pantograph_pos_shonan_7_e, position_in_vehid_chain){
  0: sw_113_gfx_spriteset_113_mid_panto_shonan;
  2: sw_113_gfx_spriteset_113_rev_mid_sdgrcar_shonan; //GRCAR
  3: sw_113_gfx_spriteset_113_rev_mid_sdgrcar_shonan; //GRCAR
  4: sw_113_gfx_spriteset_113_front_shonan; //[CAB
  5: sw_113_gfx_spriteset_113_mid_panto_shonan;
  default: sw_113_gfx_spriteset_113_mid_shonan;
}
switch(FEAT_TRAINS,SELF, sw_113_gfx_pantograph_pos_shonan_7_f, position_in_vehid_chain){
  0: sw_113_gfx_spriteset_113_mid_panto_shonan;
  2: spriteset_113_mid_sdgrcarnobelt_shonan_ac; //GRCAR_NOBELT
  3: spriteset_113_mid_sdgrcarnobelt_shonan_ac; //GRCAR_NOBELT
  4: sw_113_gfx_spriteset_113_mid_panto_shonan;
  default: sw_113_gfx_spriteset_113_mid_shonan;
}
switch(FEAT_TRAINS,SELF, sw_113_gfx_pantograph_pos_shonan_7_g, position_in_vehid_chain){
  0: sw_113_gfx_spriteset_113_mid_panto_shonan;
  2: spriteset_113_mid_ddgrcarold_shonan_ac; //DD_OLD
  3: spriteset_113_mid_sdgrcarnobelt_shonan_ac; //GRCAR_NOBELT
  4: sw_113_gfx_spriteset_113_mid_panto_shonan;
  default: sw_113_gfx_spriteset_113_mid_shonan;
}
switch(FEAT_TRAINS,SELF, sw_113_gfx_pantograph_pos_shonan_7_h, position_in_vehid_chain){
  0: sw_113_gfx_spriteset_113_mid_panto_shonan;
  2: spriteset_113_mid_ddgrcarnew_shonan_ac; //DD_NEW
  3: spriteset_113_mid_sdgrcarnobelt_shonan_ac; //GRCAR_NOBELT
  4: sw_113_gfx_spriteset_113_mid_panto_shonan;
  default: sw_113_gfx_spriteset_113_mid_shonan;
}

switch(FEAT_TRAINS,SELF, sw_113_gfx_pantograph_pos_shonan_8_a, position_in_vehid_chain){
  0: sw_113_gfx_spriteset_113_mid_panto_shonan;
  2: sw_113_gfx_spriteset_113_rev_mid_sdgrcar_shonan; //GRCAR
  3: sw_113_gfx_spriteset_113_front_shonan; //[CAB 
  4: sw_113_gfx_spriteset_113_mid_panto_shonan;
  6: sw_113_gfx_spriteset_113_mid_panto_shonan;
  default: sw_113_gfx_spriteset_113_mid_shonan;
}
switch(FEAT_TRAINS,SELF, sw_113_gfx_pantograph_pos_shonan_8_b, position_in_vehid_chain){
  0: sw_113_gfx_spriteset_113_mid_panto_shonan;
  2: sw_113_gfx_spriteset_113_rev_mid_sdgrcar_shonan; //GRCAR
  3: sw_113_gfx_spriteset_113_rev_mid_sdgrcar_shonan; //GRCAR
  4: sw_113_gfx_spriteset_113_mid_panto_shonan;
  6: sw_113_gfx_spriteset_113_mid_panto_shonan;
  default: sw_113_gfx_spriteset_113_mid_shonan;
}
switch(FEAT_TRAINS,SELF, sw_113_gfx_pantograph_pos_shonan_8_c, position_in_vehid_chain){
  0: sw_113_gfx_spriteset_113_mid_panto_shonan;
  2: spriteset_113_mid_sdgrcarnobelt_shonan_ac; //GRCAR_NOBELT
  3: sw_113_gfx_spriteset_113_front_shonan; //[CAB
  4: sw_113_gfx_spriteset_113_mid_panto_shonan;
  6: sw_113_gfx_spriteset_113_mid_panto_shonan;
  default: sw_113_gfx_spriteset_113_mid_shonan;
}
switch(FEAT_TRAINS,SELF, sw_113_gfx_pantograph_pos_shonan_8_d, position_in_vehid_chain){
  0: sw_113_gfx_spriteset_113_mid_panto_shonan;
  2: sw_113_gfx_spriteset_113_rev_mid_sdgrcar_shonan; //GRCAR
  3: sw_113_gfx_spriteset_113_mid_panto_shonan;
  6: sw_113_gfx_spriteset_113_mid_panto_shonan;
  default: sw_113_gfx_spriteset_113_mid_shonan;
}
switch(FEAT_TRAINS,SELF, sw_113_gfx_pantograph_pos_shonan_8_e, position_in_vehid_chain){
  0: sw_113_gfx_spriteset_113_mid_panto_shonan;
  2: spriteset_113_mid_sdgrcarnobelt_shonan_ac; //GRCAR_NOBELT
  3: sw_113_gfx_spriteset_113_mid_panto_shonan;
  6: sw_113_gfx_spriteset_113_mid_panto_shonan;
  default: sw_113_gfx_spriteset_113_mid_shonan;
}
switch(FEAT_TRAINS,SELF, sw_113_gfx_pantograph_pos_shonan_8_f, position_in_vehid_chain){
  0: sw_113_gfx_spriteset_113_mid_panto_shonan;
  2: spriteset_113_mid_sdgrcarnobelt_shonan_ac; //GRCAR_NOBELT
  3: spriteset_113_mid_sdgrcarnobelt_shonan_ac; //GRCAR_NOBELT
  4: sw_113_gfx_spriteset_113_mid_panto_shonan;
  6: sw_113_gfx_spriteset_113_mid_panto_shonan;
  default: sw_113_gfx_spriteset_113_mid_shonan;
}
switch(FEAT_TRAINS,SELF, sw_113_gfx_pantograph_pos_shonan_8_g, position_in_vehid_chain){
  0: sw_113_gfx_spriteset_113_mid_panto_shonan;
  2: spriteset_113_mid_ddgrcarold_shonan_ac; //DD_OLD
  3: spriteset_113_mid_sdgrcarnobelt_shonan_ac; //GRCAR_NOBELT
  4: sw_113_gfx_spriteset_113_mid_panto_shonan;
  6: sw_113_gfx_spriteset_113_mid_panto_shonan;
  default: sw_113_gfx_spriteset_113_mid_shonan;
}
switch(FEAT_TRAINS,SELF, sw_113_gfx_pantograph_pos_shonan_8_h, position_in_vehid_chain){
  0: sw_113_gfx_spriteset_113_mid_panto_shonan;
  2: spriteset_113_mid_ddgrcarnew_shonan_ac; //DD_NEW
  3: spriteset_113_mid_sdgrcarnobelt_shonan_ac; //GRCAR_NOBELT
  4: sw_113_gfx_spriteset_113_mid_panto_shonan;
  6: sw_113_gfx_spriteset_113_mid_panto_shonan;
  default: sw_113_gfx_spriteset_113_mid_shonan;
}

switch(FEAT_TRAINS,SELF, sw_113_gfx_pantograph_pos_shonan_9_a, position_in_vehid_chain){
  0: sw_113_gfx_spriteset_113_mid_panto_shonan;
  2: sw_113_gfx_spriteset_113_rev_mid_sdgrcar_shonan; //GRCAR
  3: sw_113_gfx_spriteset_113_rev_mid_sdgrcar_shonan; //GRCAR
  4: sw_113_gfx_spriteset_113_mid_panto_shonan;
  6: sw_113_gfx_spriteset_113_revflip_back_shonan; //CAB]
  7: sw_113_gfx_spriteset_113_mid_panto_shonan;
  default: sw_113_gfx_spriteset_113_mid_shonan;
}
switch(FEAT_TRAINS,SELF, sw_113_gfx_pantograph_pos_shonan_9_b, position_in_vehid_chain){
  0: sw_113_gfx_spriteset_113_mid_panto_shonan;
  2: sw_113_gfx_spriteset_113_rev_mid_sdgrcar_shonan; //GRCAR
  3: sw_113_gfx_spriteset_113_rev_mid_sdgrcar_shonan; //GRCAR
  4: sw_113_gfx_spriteset_113_mid_panto_shonan;
  7: sw_113_gfx_spriteset_113_mid_panto_shonan;
  default: sw_113_gfx_spriteset_113_mid_shonan;
}
switch(FEAT_TRAINS,SELF, sw_113_gfx_pantograph_pos_shonan_9_c, position_in_vehid_chain){
  0: sw_113_gfx_spriteset_113_mid_panto_shonan;
  2: spriteset_113_mid_sdgrcarnobelt_shonan_ac; //GRCAR_NOBELT
  3: spriteset_113_mid_sdgrcarnobelt_shonan_ac; //GRCAR_NOBELT
  4: sw_113_gfx_spriteset_113_mid_panto_shonan;
  7: sw_113_gfx_spriteset_113_mid_panto_shonan;
  default: sw_113_gfx_spriteset_113_mid_shonan;
}
switch(FEAT_TRAINS,SELF, sw_113_gfx_pantograph_pos_shonan_9_d, position_in_vehid_chain){
  0: sw_113_gfx_spriteset_113_mid_panto_shonan;
  2: spriteset_113_mid_ddgrcarold_shonan_ac; //DD_OLD
  3: spriteset_113_mid_sdgrcarnobelt_shonan_ac; //GRCAR_NOBELT
  4: sw_113_gfx_spriteset_113_mid_panto_shonan;
  7: sw_113_gfx_spriteset_113_mid_panto_shonan;
  default: sw_113_gfx_spriteset_113_mid_shonan;
}
switch(FEAT_TRAINS,SELF, sw_113_gfx_pantograph_pos_shonan_9_e, position_in_vehid_chain){
  0: sw_113_gfx_spriteset_113_mid_panto_shonan;
  2: spriteset_113_mid_ddgrcarnew_shonan_ac; //DD_NEW
  3: spriteset_113_mid_sdgrcarnobelt_shonan_ac; //GRCAR_NOBELT
  4: sw_113_gfx_spriteset_113_mid_panto_shonan;
  7: sw_113_gfx_spriteset_113_mid_panto_shonan;
  default: sw_113_gfx_spriteset_113_mid_shonan;
}

switch(FEAT_TRAINS,SELF, sw_113_gfx_pantograph_pos_shonan_0, num_vehs_in_vehid_chain){
  0..3: sw_113_gfx_pantograph_pos_shonan_under3;
  4: sw_113_gfx_pantograph_pos_shonan_4mucars;
  5: sw_113_gfx_pantograph_pos_shonan_5_d;
  6: sw_113_gfx_pantograph_pos_shonan_6_c;
  7: sw_113_gfx_pantograph_pos_shonan_7_c;
  8: sw_113_gfx_pantograph_pos_shonan_8_e;
  default: sw_113_gfx_pantograph_pos_shonan_9_c;
}
switch(FEAT_TRAINS,SELF, sw_113_gfx_pantograph_pos_shonan_1, num_vehs_in_vehid_chain){
  0..3: sw_113_gfx_pantograph_pos_shonan_under3;
  4: sw_113_gfx_pantograph_pos_shonan_4mucars;
  5: sw_113_gfx_pantograph_pos_shonan_5_a;
  6: sw_113_gfx_pantograph_pos_shonan_6_a;
  7: sw_113_gfx_pantograph_pos_shonan_7_a;
  8: sw_113_gfx_pantograph_pos_shonan_8_a;
  default: sw_113_gfx_pantograph_pos_shonan_9_a;
}
switch(FEAT_TRAINS,SELF, sw_113_gfx_pantograph_pos_shonan_2, num_vehs_in_vehid_chain){
  0..3: sw_113_gfx_pantograph_pos_shonan_under3;
  4: sw_113_gfx_pantograph_pos_shonan_4mucars;
  5: sw_113_gfx_pantograph_pos_shonan_5_c;
  6: sw_113_gfx_pantograph_pos_shonan_6_c;
  7: sw_113_gfx_pantograph_pos_shonan_7_d;
  8: sw_113_gfx_pantograph_pos_shonan_8_c;
  default: sw_113_gfx_pantograph_pos_shonan_9_c;
}
switch(FEAT_TRAINS,SELF, sw_113_gfx_pantograph_pos_shonan_3, num_vehs_in_vehid_chain){
  0..3: sw_113_gfx_pantograph_pos_shonan_under3;
  4: sw_113_gfx_pantograph_pos_shonan_4mucars;
  5: sw_113_gfx_pantograph_pos_shonan_5_c;
  6: sw_113_gfx_pantograph_pos_shonan_6_b;
  7: sw_113_gfx_pantograph_pos_shonan_7_e;
  8: sw_113_gfx_pantograph_pos_shonan_8_d;
  default: sw_113_gfx_pantograph_pos_shonan_9_b;
}
switch(FEAT_TRAINS,SELF, sw_113_gfx_pantograph_pos_shonan_4, num_vehs_in_vehid_chain){
  0..3: sw_113_gfx_pantograph_pos_shonan_under3;
  4: sw_113_gfx_pantograph_pos_shonan_4mucars;
  5: sw_113_gfx_pantograph_pos_shonan_5_b;
  6: sw_113_gfx_pantograph_pos_shonan_6_b;
  7: sw_113_gfx_pantograph_pos_shonan_7_b;
  8: sw_113_gfx_pantograph_pos_shonan_8_b;
  default: sw_113_gfx_pantograph_pos_shonan_9_a;
}
switch(FEAT_TRAINS,SELF, sw_113_gfx_pantograph_pos_shonan_5, num_vehs_in_vehid_chain){
  0..3: sw_113_gfx_pantograph_pos_shonan_under3;
  4: sw_113_gfx_pantograph_pos_shonan_4mucars;
  5: sw_113_gfx_pantograph_pos_shonan_5_c;
  6: sw_113_gfx_pantograph_pos_shonan_6_d;
  7: sw_113_gfx_pantograph_pos_shonan_7_f;
  8: sw_113_gfx_pantograph_pos_shonan_8_f;
  default: sw_113_gfx_pantograph_pos_shonan_9_c;
}
switch(FEAT_TRAINS,SELF, sw_113_gfx_pantograph_pos_shonan_6, num_vehs_in_vehid_chain){
  0..3: sw_113_gfx_pantograph_pos_shonan_under3;
  4: sw_113_gfx_pantograph_pos_shonan_4mucars;
  5: sw_113_gfx_pantograph_pos_shonan_5_c;
  6: sw_113_gfx_pantograph_pos_shonan_6_e;
  7: sw_113_gfx_pantograph_pos_shonan_7_g;
  8: sw_113_gfx_pantograph_pos_shonan_8_g;
  default: sw_113_gfx_pantograph_pos_shonan_9_d;
}
switch(FEAT_TRAINS,SELF, sw_113_gfx_pantograph_pos_shonan_7, num_vehs_in_vehid_chain){
  0..3: sw_113_gfx_pantograph_pos_shonan_under3;
  4: sw_113_gfx_pantograph_pos_shonan_4mucars;
  5: sw_113_gfx_pantograph_pos_shonan_5_c;
  6: sw_113_gfx_pantograph_pos_shonan_6_f;
  7: sw_113_gfx_pantograph_pos_shonan_7_h;
  8: sw_113_gfx_pantograph_pos_shonan_8_h;
  default: sw_113_gfx_pantograph_pos_shonan_9_e;
}
switch(FEAT_TRAINS,SELF, sw_113_gfx_pantograph_pos_shonan, cargo_subtype){
  0: sw_113_gfx_pantograph_pos_shonan_0;
  1: sw_113_gfx_pantograph_pos_shonan_1;
  2: sw_113_gfx_pantograph_pos_shonan_2;
  3: sw_113_gfx_pantograph_pos_shonan_3;
  4: sw_113_gfx_pantograph_pos_shonan_4;
  5: sw_113_gfx_pantograph_pos_shonan_5;
  6: sw_113_gfx_pantograph_pos_shonan_6;
  7: sw_113_gfx_pantograph_pos_shonan_7;
}

/*---END OF SECTION---*/



/*---GFX: Train Reversing Switches---*/
//Livery Selection
switch(FEAT_TRAINS,SELF, sw_113_gfx_rev_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){

0..7:sw_113_gfx_spriteset_113_rev_front_shonan;
}
switch(FEAT_TRAINS,SELF, sw_113_gfx_revflip_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){

0..7:sw_113_gfx_spriteset_113_revflip_front_shonan;
}

switch(FEAT_TRAINS,SELF, sw_113_gfx_rev_mid_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){

0..7:sw_113_gfx_spriteset_113_rev_mid_panto_shonan;
}
switch(FEAT_TRAINS,SELF, sw_113_gfx_revflip_mid_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){

0..7:sw_113_gfx_spriteset_113_revflip_mid_panto_shonan;
}

switch(FEAT_TRAINS,SELF, sw_113_gfx_rev_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){

0..7:sw_113_gfx_spriteset_113_rev_mid_shonan;
}
switch(FEAT_TRAINS,SELF, sw_113_gfx_revflip_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){

0..7:sw_113_gfx_spriteset_113_revflip_mid_shonan;
}

switch(FEAT_TRAINS,SELF, sw_113_gfx_rev_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){

0..7:sw_113_gfx_spriteset_113_rev_back_shonan;
}
switch(FEAT_TRAINS,SELF, sw_113_gfx_revflip_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){

0..7:sw_113_gfx_spriteset_113_revflip_back_shonan;
}

switch(FEAT_TRAINS,SELF, sw_113_gfx_rev_back_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){

0..7:sw_113_gfx_spriteset_113_rev_back_panto_shonan;
}
switch(FEAT_TRAINS,SELF, sw_113_gfx_revflip_back_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){

0..7:sw_113_gfx_spriteset_113_revflip_back_panto_shonan;
}

switch(FEAT_TRAINS,SELF, sw_113_gfx_rev_mid_sdgrcar_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
7: spriteset_113_rev_mid_sdgrcarnobelt_shonan_ac;
6: spriteset_113_rev_mid_sdgrcarnobelt_shonan_ac;
5: spriteset_113_rev_mid_sdgrcarnobelt_shonan_ac;
4: sw_113_gfx_spriteset_113_rev_mid_sdgrcar_shonan;
3: spriteset_113_rev_mid_sdgrcarnobelt_shonan_ac;
2: spriteset_113_rev_mid_sdgrcarnobelt_shonan_ac;
1: sw_113_gfx_spriteset_113_rev_mid_sdgrcar_shonan;
0: spriteset_113_rev_mid_sdgrcarnobelt_shonan_ac;
}
switch(FEAT_TRAINS,SELF, sw_113_gfx_revflip_mid_sdgrcar_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
7: spriteset_113_revflip_mid_sdgrcarnobelt_shonan_ac;
6: spriteset_113_revflip_mid_sdgrcarnobelt_shonan_ac;
5: spriteset_113_revflip_mid_sdgrcarnobelt_shonan_ac;
4: sw_113_gfx_spriteset_113_revflip_mid_sdgrcar_shonan;
3: spriteset_113_revflip_mid_sdgrcarnobelt_shonan_ac;
2: spriteset_113_revflip_mid_sdgrcarnobelt_shonan_ac;
1: sw_113_gfx_spriteset_113_revflip_mid_sdgrcar_shonan;
0: spriteset_113_revflip_mid_sdgrcarnobelt_shonan_ac;
}

switch(FEAT_TRAINS,SELF, sw_113_gfx_rev_mid_ddgrcar_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
7: spriteset_113_rev_mid_ddgrcarnew_shonan_ac;
6: spriteset_113_rev_mid_ddgrcarold_shonan_ac;
5: spriteset_113_rev_mid_ddgrcarnew_shonan_ac;
4: spriteset_113_rev_mid_ddgrcarnew_shonan_ac;
3: spriteset_113_rev_mid_ddgrcarnew_shonan_ac;
2: spriteset_113_rev_mid_ddgrcarnew_shonan_ac;
1: spriteset_113_rev_mid_ddgrcarnew_shonan_ac;
0: spriteset_113_rev_mid_ddgrcarnew_shonan_ac;
}
switch(FEAT_TRAINS,SELF, sw_113_gfx_revflip_mid_ddgrcar_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
7: spriteset_113_revflip_mid_ddgrcarnew_shonan_ac;
6: spriteset_113_revflip_mid_ddgrcarold_shonan_ac;
5: spriteset_113_revflip_mid_ddgrcarnew_shonan_ac;
4: spriteset_113_revflip_mid_ddgrcarnew_shonan_ac;
3: spriteset_113_revflip_mid_ddgrcarnew_shonan_ac;
2: spriteset_113_revflip_mid_ddgrcarnew_shonan_ac;
1: spriteset_113_revflip_mid_ddgrcarnew_shonan_ac;
0: spriteset_113_revflip_mid_ddgrcarnew_shonan_ac;
}

//Check for flipped vehicles (dual_headed)
switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_front_flippedcheck, vehicle_is_flipped) {
  1: sw_113_gfx_rev_front_livery;
 default: sw_113_gfx_revflip_front_livery;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_mid_panto_flippedcheck, vehicle_is_flipped) {
  1: sw_113_gfx_revflip_mid_panto_livery;
 default: sw_113_gfx_rev_mid_panto_livery;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_mid_flippedcheck, vehicle_is_flipped) {
  1: sw_113_gfx_revflip_mid_livery;
 default: sw_113_gfx_rev_mid_livery;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_back_panto_flippedcheck, vehicle_is_flipped) {
  1: sw_113_gfx_revflip_back_panto_livery;
 default: sw_113_gfx_rev_back_panto_livery;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_back_flippedcheck, vehicle_is_flipped) {
  1: sw_113_gfx_revflip_back_livery;
 default: sw_113_gfx_rev_back_livery;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_sdgrcar_flippedcheck, vehicle_is_flipped) {
  1: sw_113_gfx_revflip_mid_sdgrcar_livery;
 default: sw_113_gfx_rev_mid_sdgrcar_livery;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_ddgrcar_flippedcheck, vehicle_is_flipped) {
  1: sw_113_gfx_revflip_mid_ddgrcar_livery;
 default: sw_113_gfx_rev_mid_ddgrcar_livery;
}

//Pantograph Position Testing
switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_pantograph_pos_shonan_under3, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  0: sw_113_gfx_rev_mid_panto_flippedcheck;
  default: sw_113_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_pantograph_pos_shonan_4mucars, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  0: sw_113_gfx_rev_mid_panto_flippedcheck;
  2: sw_113_gfx_rev_mid_panto_flippedcheck;
  default: sw_113_gfx_rev_mid_flippedcheck;
}

switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_pantograph_pos_shonan_5_a, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  0: sw_113_gfx_rev_mid_panto_flippedcheck;
  2: sw_113_gfx_rev_back_flippedcheck; //CAB]
  3: sw_113_gfx_rev_mid_panto_flippedcheck;
  default: sw_113_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_pantograph_pos_shonan_5_b, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  0: sw_113_gfx_rev_mid_panto_flippedcheck;
  2: sw_113_gfx_rev_sdgrcar_flippedcheck; //GRCAR
  3: sw_113_gfx_rev_mid_panto_flippedcheck;
  default: sw_113_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_pantograph_pos_shonan_5_c, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  0: sw_113_gfx_rev_mid_panto_flippedcheck;
  2: sw_113_gfx_rev_sdgrcar_flippedcheck; //GRCAR_NOBELT
  3: sw_113_gfx_rev_mid_panto_flippedcheck;
  default: sw_113_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_pantograph_pos_shonan_5_d, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  0: sw_113_gfx_rev_mid_panto_flippedcheck;
  3: sw_113_gfx_rev_mid_panto_flippedcheck;
  default: sw_113_gfx_rev_mid_flippedcheck;
}

switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_pantograph_pos_shonan_6_a, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  0: sw_113_gfx_rev_mid_panto_flippedcheck;
  2: sw_113_gfx_rev_sdgrcar_flippedcheck; //GRCAR
  3: sw_113_gfx_rev_front_flippedcheck; //[CAB
  4: sw_113_gfx_rev_mid_panto_flippedcheck;
  default: sw_113_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_pantograph_pos_shonan_6_b, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  0: sw_113_gfx_rev_mid_panto_flippedcheck;
  2: sw_113_gfx_rev_sdgrcar_flippedcheck; //GRCAR
  3: sw_113_gfx_rev_sdgrcar_flippedcheck; //GRCAR
  4: sw_113_gfx_rev_mid_panto_flippedcheck;
  default: sw_113_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_pantograph_pos_shonan_6_c, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  0: sw_113_gfx_rev_mid_panto_flippedcheck;
  2: sw_113_gfx_rev_sdgrcar_flippedcheck; //GRCAR_NOBELT
  3: sw_113_gfx_rev_front_flippedcheck; //[CAB  
  4: sw_113_gfx_rev_mid_panto_flippedcheck;
  default: sw_113_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_pantograph_pos_shonan_6_d, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  0: sw_113_gfx_rev_mid_panto_flippedcheck;
  2: sw_113_gfx_rev_sdgrcar_flippedcheck; //GRCAR_NOBELT
  3: sw_113_gfx_rev_sdgrcar_flippedcheck; //GRCAR_NOBELT
  4: sw_113_gfx_rev_mid_panto_flippedcheck;
  default: sw_113_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_pantograph_pos_shonan_6_e, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  0: sw_113_gfx_rev_mid_panto_flippedcheck;
  2: sw_113_gfx_rev_ddgrcar_flippedcheck; //DD_OLD
  3: sw_113_gfx_rev_sdgrcar_flippedcheck; //GRCAR_NOBELT
  4: sw_113_gfx_rev_mid_panto_flippedcheck;
  default: sw_113_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_pantograph_pos_shonan_6_f, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  0: sw_113_gfx_rev_mid_panto_flippedcheck;
  2: sw_113_gfx_rev_ddgrcar_flippedcheck; //DD_NEW
  3: sw_113_gfx_rev_sdgrcar_flippedcheck; //GRCAR_NOBELT
  4: sw_113_gfx_rev_mid_panto_flippedcheck;
  default: sw_113_gfx_rev_mid_flippedcheck;
}

switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_pantograph_pos_shonan_7_a, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  0: sw_113_gfx_rev_mid_panto_flippedcheck;
  2: sw_113_gfx_rev_back_flippedcheck; //CAB] 
  3: sw_113_gfx_rev_mid_panto_flippedcheck;
  5: sw_113_gfx_rev_mid_panto_flippedcheck;
  default: sw_113_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_pantograph_pos_shonan_7_b, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  0: sw_113_gfx_rev_mid_panto_flippedcheck;
  2: sw_113_gfx_rev_sdgrcar_flippedcheck; //GRCAR
  3: sw_113_gfx_rev_mid_panto_flippedcheck;
  5: sw_113_gfx_rev_mid_panto_flippedcheck;
  default: sw_113_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_pantograph_pos_shonan_7_c, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  0: sw_113_gfx_rev_mid_panto_flippedcheck;
  2: sw_113_gfx_rev_mid_panto_flippedcheck;
  4: sw_113_gfx_rev_back_flippedcheck; //CAB] 
  5: sw_113_gfx_rev_mid_panto_flippedcheck;
  default: sw_113_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_pantograph_pos_shonan_7_d, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  0: sw_113_gfx_rev_mid_panto_flippedcheck;
  2: sw_113_gfx_rev_sdgrcar_flippedcheck; //GRCAR_NOBELT
  3: sw_113_gfx_rev_mid_panto_flippedcheck;
  5: sw_113_gfx_rev_mid_panto_flippedcheck;
  default: sw_113_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_pantograph_pos_shonan_7_e, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  0: sw_113_gfx_rev_mid_panto_flippedcheck;
  2: sw_113_gfx_rev_sdgrcar_flippedcheck; //GRCAR
  3: sw_113_gfx_rev_sdgrcar_flippedcheck; //GRCAR
  4: sw_113_gfx_rev_front_flippedcheck; //[CAB
  5: sw_113_gfx_rev_mid_panto_flippedcheck;
  default: sw_113_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_pantograph_pos_shonan_7_f, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  0: sw_113_gfx_rev_mid_panto_flippedcheck;
  2: sw_113_gfx_rev_sdgrcar_flippedcheck; //GRCAR_NOBELT
  3: sw_113_gfx_rev_sdgrcar_flippedcheck; //GRCAR_NOBELT
  4: sw_113_gfx_rev_mid_panto_flippedcheck;
  default: sw_113_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_pantograph_pos_shonan_7_g, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  0: sw_113_gfx_rev_mid_panto_flippedcheck;
  2: sw_113_gfx_rev_ddgrcar_flippedcheck; //DD_OLD
  3: sw_113_gfx_rev_sdgrcar_flippedcheck; //GRCAR_NOBELT
  4: sw_113_gfx_rev_mid_panto_flippedcheck;
  default: sw_113_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_pantograph_pos_shonan_7_h, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  0: sw_113_gfx_rev_mid_panto_flippedcheck;
  2: sw_113_gfx_rev_ddgrcar_flippedcheck; //DD_NEW
  3: sw_113_gfx_rev_sdgrcar_flippedcheck; //GRCAR_NOBELT
  4: sw_113_gfx_rev_mid_panto_flippedcheck;
  default: sw_113_gfx_rev_mid_flippedcheck;
}

switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_pantograph_pos_shonan_8_a, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  0: sw_113_gfx_rev_mid_panto_flippedcheck;
  2: sw_113_gfx_rev_sdgrcar_flippedcheck; //GRCAR
  3: sw_113_gfx_rev_front_flippedcheck; //[CAB 
  4: sw_113_gfx_rev_mid_panto_flippedcheck;
  6: sw_113_gfx_rev_mid_panto_flippedcheck;
  default: sw_113_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_pantograph_pos_shonan_8_b, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  0: sw_113_gfx_rev_mid_panto_flippedcheck;
  2: sw_113_gfx_rev_sdgrcar_flippedcheck; //GRCAR
  3: sw_113_gfx_rev_sdgrcar_flippedcheck; //GRCAR
  4: sw_113_gfx_rev_mid_panto_flippedcheck;
  6: sw_113_gfx_rev_mid_panto_flippedcheck;
  default: sw_113_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_pantograph_pos_shonan_8_c, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  0: sw_113_gfx_rev_mid_panto_flippedcheck;
  2: sw_113_gfx_rev_sdgrcar_flippedcheck; //GRCAR_NOBELT
  3: sw_113_gfx_rev_front_flippedcheck; //[CAB
  4: sw_113_gfx_rev_mid_panto_flippedcheck;
  6: sw_113_gfx_rev_mid_panto_flippedcheck;
  default: sw_113_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_pantograph_pos_shonan_8_d, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  0: sw_113_gfx_rev_mid_panto_flippedcheck;
  2: sw_113_gfx_rev_sdgrcar_flippedcheck; //GRCAR
  3: sw_113_gfx_rev_mid_panto_flippedcheck;
  6: sw_113_gfx_rev_mid_panto_flippedcheck;
  default: sw_113_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_pantograph_pos_shonan_8_e, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  0: sw_113_gfx_rev_mid_panto_flippedcheck;
  2: sw_113_gfx_rev_sdgrcar_flippedcheck; //GRCAR_NOBELT
  3: sw_113_gfx_rev_mid_panto_flippedcheck;
  6: sw_113_gfx_rev_mid_panto_flippedcheck;
  default: sw_113_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_pantograph_pos_shonan_8_f, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  0: sw_113_gfx_rev_mid_panto_flippedcheck;
  2: sw_113_gfx_rev_sdgrcar_flippedcheck; //GRCAR_NOBELT
  3: sw_113_gfx_rev_sdgrcar_flippedcheck; //GRCAR_NOBELT
  4: sw_113_gfx_rev_mid_panto_flippedcheck;
  6: sw_113_gfx_rev_mid_panto_flippedcheck;
  default: sw_113_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_pantograph_pos_shonan_8_g, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  0: sw_113_gfx_rev_mid_panto_flippedcheck;
  2: sw_113_gfx_rev_ddgrcar_flippedcheck; //DD_OLD
  3: sw_113_gfx_rev_sdgrcar_flippedcheck; //GRCAR_NOBELT
  4: sw_113_gfx_rev_mid_panto_flippedcheck;
  6: sw_113_gfx_rev_mid_panto_flippedcheck;
  default: sw_113_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_pantograph_pos_shonan_8_h, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  0: sw_113_gfx_rev_mid_panto_flippedcheck;
  2: sw_113_gfx_rev_ddgrcar_flippedcheck; //DD_NEW
  3: sw_113_gfx_rev_sdgrcar_flippedcheck; //GRCAR_NOBELT
  4: sw_113_gfx_rev_mid_panto_flippedcheck;
  6: sw_113_gfx_rev_mid_panto_flippedcheck;
  default: sw_113_gfx_rev_mid_flippedcheck;
}

switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_pantograph_pos_shonan_9_a, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  0: sw_113_gfx_rev_mid_panto_flippedcheck;
  2: sw_113_gfx_rev_sdgrcar_flippedcheck; //GRCAR
  3: sw_113_gfx_rev_sdgrcar_flippedcheck; //GRCAR
  4: sw_113_gfx_rev_mid_panto_flippedcheck;
  6: sw_113_gfx_rev_back_flippedcheck; //CAB]
  7: sw_113_gfx_rev_mid_panto_flippedcheck;
  default: sw_113_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_pantograph_pos_shonan_9_b, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  0: sw_113_gfx_rev_mid_panto_flippedcheck;
  2: sw_113_gfx_rev_sdgrcar_flippedcheck; //GRCAR
  3: sw_113_gfx_rev_sdgrcar_flippedcheck; //GRCAR
  4: sw_113_gfx_rev_mid_panto_flippedcheck;
  7: sw_113_gfx_rev_mid_panto_flippedcheck;
  default: sw_113_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_pantograph_pos_shonan_9_c, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  0: sw_113_gfx_rev_mid_panto_flippedcheck;
  2: sw_113_gfx_rev_sdgrcar_flippedcheck; //GRCAR_NOBELT
  3: sw_113_gfx_rev_sdgrcar_flippedcheck; //GRCAR_NOBELT
  4: sw_113_gfx_rev_mid_panto_flippedcheck;
  7: sw_113_gfx_rev_mid_panto_flippedcheck;
  default: sw_113_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_pantograph_pos_shonan_9_d, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  0: sw_113_gfx_rev_mid_panto_flippedcheck;
  2: sw_113_gfx_rev_ddgrcar_flippedcheck; //DD_OLD
  3: sw_113_gfx_rev_sdgrcar_flippedcheck; //GRCAR_NOBELT
  4: sw_113_gfx_rev_mid_panto_flippedcheck;
  7: sw_113_gfx_rev_mid_panto_flippedcheck;
  default: sw_113_gfx_rev_mid_flippedcheck;
}switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_pantograph_pos_shonan_9_e, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  0: sw_113_gfx_rev_mid_panto_flippedcheck;
  2: sw_113_gfx_rev_ddgrcar_flippedcheck; //DD_NEW
  3: sw_113_gfx_rev_sdgrcar_flippedcheck; //GRCAR_NOBELT
  4: sw_113_gfx_rev_mid_panto_flippedcheck;
  7: sw_113_gfx_rev_mid_panto_flippedcheck;
  default: sw_113_gfx_rev_mid_flippedcheck;
}

switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_pantograph_pos_shonan_0, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 16, 0x000000FF, 0x41]]){ //look at opposite num_vehs_in_vehid_chain
  0..3: sw_113_gfx_rev_pantograph_pos_shonan_under3;
  4: sw_113_gfx_rev_pantograph_pos_shonan_4mucars;
  5: sw_113_gfx_rev_pantograph_pos_shonan_5_d;
  6: sw_113_gfx_rev_pantograph_pos_shonan_6_c;
  7: sw_113_gfx_rev_pantograph_pos_shonan_7_c;
  8: sw_113_gfx_rev_pantograph_pos_shonan_8_e;
  default: sw_113_gfx_rev_pantograph_pos_shonan_9_c;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_pantograph_pos_shonan_1, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 16, 0x000000FF, 0x41]]){ //look at opposite num_vehs_in_vehid_chain
  0..3: sw_113_gfx_rev_pantograph_pos_shonan_under3;
  4: sw_113_gfx_rev_pantograph_pos_shonan_4mucars;
  5: sw_113_gfx_rev_pantograph_pos_shonan_5_a;
  6: sw_113_gfx_rev_pantograph_pos_shonan_6_a;
  7: sw_113_gfx_rev_pantograph_pos_shonan_7_a;
  8: sw_113_gfx_rev_pantograph_pos_shonan_8_a;
  default: sw_113_gfx_rev_pantograph_pos_shonan_9_a;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_pantograph_pos_shonan_2, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 16, 0x000000FF, 0x41]]){ //look at opposite num_vehs_in_vehid_chain
  0..3: sw_113_gfx_rev_pantograph_pos_shonan_under3;
  4: sw_113_gfx_rev_pantograph_pos_shonan_4mucars;
  5: sw_113_gfx_rev_pantograph_pos_shonan_5_c;
  6: sw_113_gfx_rev_pantograph_pos_shonan_6_c;
  7: sw_113_gfx_rev_pantograph_pos_shonan_7_d;
  8: sw_113_gfx_rev_pantograph_pos_shonan_8_c;
  default: sw_113_gfx_rev_pantograph_pos_shonan_9_c;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_pantograph_pos_shonan_3, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 16, 0x000000FF, 0x41]]){ //look at opposite num_vehs_in_vehid_chain
  0..3: sw_113_gfx_rev_pantograph_pos_shonan_under3;
  4: sw_113_gfx_rev_pantograph_pos_shonan_4mucars;
  5: sw_113_gfx_rev_pantograph_pos_shonan_5_c;
  6: sw_113_gfx_rev_pantograph_pos_shonan_6_b;
  7: sw_113_gfx_rev_pantograph_pos_shonan_7_e;
  8: sw_113_gfx_rev_pantograph_pos_shonan_8_d;
  default: sw_113_gfx_rev_pantograph_pos_shonan_9_b;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_pantograph_pos_shonan_4, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 16, 0x000000FF, 0x41]]){ //look at opposite num_vehs_in_vehid_chain
  0..3: sw_113_gfx_rev_pantograph_pos_shonan_under3;
  4: sw_113_gfx_rev_pantograph_pos_shonan_4mucars;
  5: sw_113_gfx_rev_pantograph_pos_shonan_5_b;
  6: sw_113_gfx_rev_pantograph_pos_shonan_6_b;
  7: sw_113_gfx_rev_pantograph_pos_shonan_7_b;
  8: sw_113_gfx_rev_pantograph_pos_shonan_8_b;
  default: sw_113_gfx_rev_pantograph_pos_shonan_9_a;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_pantograph_pos_shonan_5, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 16, 0x000000FF, 0x41]]){ //look at opposite num_vehs_in_vehid_chain
  0..3: sw_113_gfx_rev_pantograph_pos_shonan_under3;
  4: sw_113_gfx_rev_pantograph_pos_shonan_4mucars;
  5: sw_113_gfx_rev_pantograph_pos_shonan_5_c;
  6: sw_113_gfx_rev_pantograph_pos_shonan_6_d;
  7: sw_113_gfx_rev_pantograph_pos_shonan_7_f;
  8: sw_113_gfx_rev_pantograph_pos_shonan_8_f;
  default: sw_113_gfx_rev_pantograph_pos_shonan_9_c;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_pantograph_pos_shonan_6, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 16, 0x000000FF, 0x41]]){ //look at opposite num_vehs_in_vehid_chain
  0..3: sw_113_gfx_rev_pantograph_pos_shonan_under3;
  4: sw_113_gfx_rev_pantograph_pos_shonan_4mucars;
  5: sw_113_gfx_rev_pantograph_pos_shonan_5_c;
  6: sw_113_gfx_rev_pantograph_pos_shonan_6_e;
  7: sw_113_gfx_rev_pantograph_pos_shonan_7_g;
  8: sw_113_gfx_rev_pantograph_pos_shonan_8_g;
  default: sw_113_gfx_rev_pantograph_pos_shonan_9_d;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_pantograph_pos_shonan_7, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 16, 0x000000FF, 0x41]]){ //look at opposite num_vehs_in_vehid_chain
  0..3: sw_113_gfx_rev_pantograph_pos_shonan_under3;
  4: sw_113_gfx_rev_pantograph_pos_shonan_4mucars;
  5: sw_113_gfx_rev_pantograph_pos_shonan_5_c;
  6: sw_113_gfx_rev_pantograph_pos_shonan_6_f;
  7: sw_113_gfx_rev_pantograph_pos_shonan_7_h;
  8: sw_113_gfx_rev_pantograph_pos_shonan_8_h;
  default: sw_113_gfx_rev_pantograph_pos_shonan_9_e;
}

switch(FEAT_TRAINS,SELF, sw_113_gfx_rev_mid_refitcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){ //look at opposite refit livery id
0: sw_113_gfx_rev_pantograph_pos_shonan_0;
1: sw_113_gfx_rev_pantograph_pos_shonan_1;
2: sw_113_gfx_rev_pantograph_pos_shonan_2;
3: sw_113_gfx_rev_pantograph_pos_shonan_3;
4: sw_113_gfx_rev_pantograph_pos_shonan_4;
5: sw_113_gfx_rev_pantograph_pos_shonan_5;
6: sw_113_gfx_rev_pantograph_pos_shonan_6;
7: sw_113_gfx_rev_pantograph_pos_shonan_7;
}

//Back Car Pantograph Testing
switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_back_pantocheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
 0: sw_113_gfx_rev_back_flippedcheck;
 default: sw_113_gfx_rev_back_panto_flippedcheck;
}

//Front/Back Car Position Testing
switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_frontback_nomucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_113_gfx_rev_front_flippedcheck;
  0:sw_113_gfx_rev_back_pantocheck;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_frontback_aftermucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_113_gfx_rev_back_pantocheck;
  0:sw_113_gfx_rev_front_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_frontback_mucarcheck, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F),STORE_TEMP(var[0x61, 0, 0x000000FF, 0x41],0),  //look at opposite position_in_vehID_chain
STORE_TEMP((position_in_consist_from_end-position_in_consist-1)-LOAD_TEMP(0), 0x10F),                               //look at what is ahead of the first vehicle in the vehID_chain
var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000:sw_113_gfx_rev_frontback_aftermucars;
  default:sw_113_gfx_rev_frontback_nomucars;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_frontback_sameid, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist+1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle behind of opposite vehicle
  2026:sw_113_gfx_rev_frontback_mucarcheck;
  1000:sw_113_gfx_rev_front_flippedcheck;
  default:sw_113_gfx_rev_back_pantocheck;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_frontback, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle infront of opposite vehicle
  2026:sw_113_gfx_rev_frontback_sameid;
  1000:sw_113_gfx_rev_back_pantocheck;
  default:sw_113_gfx_rev_front_flippedcheck;
}

//ID Testing
switch(FEAT_TRAINS, SELF, sw_113_gfx_rev_idcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of opposite vehicle
  1000: sw_113_gfx_rev_mid_refitcheck;
  2026: sw_113_gfx_rev_frontback;
}
/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/
//113 Shonan
switch(FEAT_TRAINS, SELF, sw_113_gfx_back_pantocheck_shonan, position_in_vehid_chain){
 0: sw_113_gfx_spriteset_113_back_shonan;
 default: sw_113_gfx_spriteset_113_back_panto_shonan;
}
switch(FEAT_TRAINS, SELF, sw_113_gfx_frontback_flipcheck_shonan, vehicle_is_flipped){
 0: sw_113_gfx_spriteset_113_front_shonan;
 default: sw_113_gfx_back_pantocheck_shonan;
}
switch(FEAT_TRAINS, PARENT, sw_113_gfx_frontback_revcheck_shonan, vehicle_is_reversed){
 0: sw_113_gfx_frontback_flipcheck_shonan;
 default: sw_113_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Middle Car Switches---*/
//113 Shonan
switch(FEAT_TRAINS, PARENT, sw_113_gfx_mucar_revcheck_mid_shonan, vehicle_is_reversed){
    0: sw_113_gfx_pantograph_pos_shonan;
    default: sw_113_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Livery Refitting Switches---*/
//Main Switches
switch(FEAT_TRAINS, PARENT, sw_113_gfx_mucar,  cargo_subtype) {
  7: sw_113_gfx_mucar_revcheck_mid_shonan;
  6: sw_113_gfx_mucar_revcheck_mid_shonan;    
  5: sw_113_gfx_mucar_revcheck_mid_shonan;
  4: sw_113_gfx_mucar_revcheck_mid_shonan;   
  3: sw_113_gfx_mucar_revcheck_mid_shonan;
  2: sw_113_gfx_mucar_revcheck_mid_shonan;    
  1: sw_113_gfx_mucar_revcheck_mid_shonan;
  0: sw_113_gfx_mucar_revcheck_mid_shonan;
}
switch(FEAT_TRAINS, PARENT, sw_113_gfx_main,  cargo_subtype) {
  7: sw_113_gfx_frontback_revcheck_shonan;
  6: sw_113_gfx_frontback_revcheck_shonan;    
  5: sw_113_gfx_frontback_revcheck_shonan;
  4: sw_113_gfx_frontback_revcheck_shonan;   
  3: sw_113_gfx_frontback_revcheck_shonan;
  2: sw_113_gfx_frontback_revcheck_shonan;    
  1: sw_113_gfx_frontback_revcheck_shonan;
  0: sw_113_gfx_frontback_revcheck_shonan;
}

//Menu Switches
switch(FEAT_TRAINS, SELF, sw_113_subtypetext_mucar, cargo_subtype) {
  7: string(SHONAN_113_LV_7);  
  6: string(SHONAN_113_LV_6);
  5: string(SHONAN_113_LV_5);  
  4: string(SHONAN_113_LV_4);  
  3: string(SHONAN_113_LV_3);
  2: string(SHONAN_113_LV_2);  
  1: string(SHONAN_113_LV_1);
  0: string(SHONAN_113_LV_0);
}
switch(FEAT_TRAINS, SELF, sw_113_subtypetext_main, cargo_subtype) {
  7: string(SHONAN_113_LV_7);  
  6: string(SHONAN_113_LV_6);
  5: string(SHONAN_113_LV_5);  
  4: string(SHONAN_113_LV_4);  
  3: string(SHONAN_113_LV_3);
  2: string(SHONAN_113_LV_2);  
  1: string(SHONAN_113_LV_1);
  0: string(SHONAN_113_LV_0);
}
/*---END OF SECTION---*/



//Coupling
  switch(FEAT_TRAINS, SELF, sw_113_attach_vehid, [vehicle_type_id == emu_113 || vehicle_type_id == mu_car]) {
  0: return string(MU_UNIQUE);
  }



item(FEAT_TRAINS, emu_113) {
    property {
        name:                         string(JNR_113);
        introduction_date:            date(1962, 03, 01);
        model_life:                   19;
        vehicle_life:                 39;
        reliability_decay:            11;

        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_3D;
        cost_factor:                  17;
        running_cost_factor:          51;

        speed:                        110 km/h;
        track_type:                   NARROW_OHLE;
        power:                        480 kW;
        weight:                       37 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  1;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_ELECTRIC;
        engine_class:                 ENGINE_CLASS_ELECTRIC;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                      sw_113_gfx_main;
		    purchase:                 spriteset_113_purchase;
		    additional_text:	      return string(JNR_113_DESC);
        cargo_subtype_text:           sw_113_subtypetext_main;
        can_attach_wagon:			  sw_113_attach_vehid;
        //start_stop:                   ;
    }
    /*Multiple Unit Car*/
      livery_override(mu_car){
        default:                      sw_113_gfx_mucar;
        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_3D;
        cargo_subtype_text:           sw_113_subtypetext_mucar;
        power: 120;
        weight: 27;
      }

}
# 1 "JPplus.pnml" 4
# 1 "src/JNR/EMU/115_series.pnml" 1
/*---GFX: Spritesets---*/
//Purchase Sprites
spriteset (spriteset_115_purchase,	                                                    "gfx/JNR/emu115/purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_115_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,         "gfx/JNR/emu115/purchase_32bpp.png")         {tmpl_purchase_dh_32bpp(0, 0)}

//115 Shonan Original
spriteset (spriteset_115_front_shonan,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_115_back_shonan,    		      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_115_mid_shonan,    		      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_115_back_panto_shonan,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_115_mid_panto_shonan,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_115_rev_front_shonan,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_115_rev_back_shonan,    		      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_115_rev_mid_shonan,    		      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_115_rev_back_panto_shonan,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_115_rev_mid_panto_shonan,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_115_revflip_front_shonan,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_115_revflip_back_shonan,    		      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_115_revflip_mid_shonan,    		      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_115_revflip_back_panto_shonan,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_115_revflip_mid_panto_shonan,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_115_front_shonan,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu115/shonan/115-1-1_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_115_back_shonan,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu115/shonan/115-1-1_32bpp.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_115_mid_shonan,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu115/shonan/115-1-3_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_115_back_panto_shonan,    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu115/shonan/115-1-2_32bpp.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_115_mid_panto_shonan,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu115/shonan/115-1-4_32bpp.png")        {tmpl_std(0, 1)}

alternative_sprites(spriteset_115_rev_front_shonan,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu115/shonan/115-1-1_32bpp.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_115_rev_back_shonan,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu115/shonan/115-1-1_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_115_rev_mid_shonan,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu115/shonan/115-1-3_32bpp.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_115_rev_back_panto_shonan,    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu115/shonan/115-1-2_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_115_rev_mid_panto_shonan,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu115/shonan/115-1-4_32bpp.png")        {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_115_revflip_front_shonan,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu115/shonan/115-1-1_32bpp.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_115_revflip_back_shonan,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu115/shonan/115-1-1_32bpp.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_115_revflip_mid_shonan,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu115/shonan/115-1-3_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_115_revflip_back_panto_shonan,    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu115/shonan/115-1-2_32bpp.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_115_revflip_mid_panto_shonan,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu115/shonan/115-1-4_32bpp.png")        {tmpl_std(0, 1)}

//115 Shonan AC 1973+
spriteset (spriteset_115_front_shonan_ac,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_115_back_shonan_ac,    		      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_115_mid_shonan_ac,    		      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_115_back_panto_shonan_ac,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_115_mid_panto_shonan_ac,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_115_rev_front_shonan_ac,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_115_rev_back_shonan_ac,    		      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_115_rev_mid_shonan_ac,    		      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_115_rev_back_panto_shonan_ac,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_115_rev_mid_panto_shonan_ac,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_115_revflip_front_shonan_ac,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_115_revflip_back_shonan_ac,    		      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_115_revflip_mid_shonan_ac,    		      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_115_revflip_back_panto_shonan_ac,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_115_revflip_mid_panto_shonan_ac,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_115_front_shonan_ac,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu115/shonan/115-2-1_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_115_back_shonan_ac,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu115/shonan/115-2-1_32bpp.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_115_mid_shonan_ac,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu115/shonan/115-2-3_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_115_back_panto_shonan_ac,    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu115/shonan/115-2-2_32bpp.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_115_mid_panto_shonan_ac,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu115/shonan/115-2-4_32bpp.png")        {tmpl_std(0, 1)}

alternative_sprites(spriteset_115_rev_front_shonan_ac,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu115/shonan/115-2-1_32bpp.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_115_rev_back_shonan_ac,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu115/shonan/115-2-1_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_115_rev_mid_shonan_ac,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu115/shonan/115-2-3_32bpp.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_115_rev_back_panto_shonan_ac,    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu115/shonan/115-2-2_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_115_rev_mid_panto_shonan_ac,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu115/shonan/115-2-4_32bpp.png")        {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_115_revflip_front_shonan_ac,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu115/shonan/115-2-1_32bpp.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_115_revflip_back_shonan_ac,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu115/shonan/115-2-1_32bpp.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_115_revflip_mid_shonan_ac,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu115/shonan/115-2-3_32bpp.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_115_revflip_back_panto_shonan_ac,    ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu115/shonan/115-2-2_32bpp.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_115_revflip_mid_panto_shonan_ac,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu115/shonan/115-2-4_32bpp.png")        {tmpl_std(0, 1)}

/*---END OF SECTION---*/



/*---GFX: Year Dependent Switches---*/
//115 Shonan
switch(FEAT_TRAINS, SELF, sw_115_gfx_spriteset_115_front_shonan, current_year){
 0..1972: spriteset_115_front_shonan;
 default: spriteset_115_front_shonan_ac;
}
switch(FEAT_TRAINS, SELF, sw_115_gfx_spriteset_115_back_shonan, current_year){
 0..1972: spriteset_115_back_shonan;
 default: spriteset_115_back_shonan_ac;
}
switch(FEAT_TRAINS, SELF, sw_115_gfx_spriteset_115_mid_shonan, current_year){
 0..1972: spriteset_115_mid_shonan;
 default: spriteset_115_mid_shonan_ac;
}
switch(FEAT_TRAINS, SELF, sw_115_gfx_spriteset_115_back_panto_shonan, current_year){
 0..1972: spriteset_115_back_panto_shonan;
 default: spriteset_115_back_panto_shonan_ac;
}
switch(FEAT_TRAINS, SELF, sw_115_gfx_spriteset_115_mid_panto_shonan, current_year){
 0..1972: spriteset_115_mid_panto_shonan;
 default: spriteset_115_mid_panto_shonan_ac;
}

switch(FEAT_TRAINS, SELF, sw_115_gfx_spriteset_115_rev_front_shonan, current_year){
 0..1972: spriteset_115_rev_front_shonan;
 default: spriteset_115_rev_front_shonan_ac;
}
switch(FEAT_TRAINS, SELF, sw_115_gfx_spriteset_115_rev_back_shonan, current_year){
 0..1972: spriteset_115_rev_back_shonan;
 default: spriteset_115_rev_back_shonan_ac;
}
switch(FEAT_TRAINS, SELF, sw_115_gfx_spriteset_115_rev_mid_shonan, current_year){
 0..1972: spriteset_115_rev_mid_shonan;
 default: spriteset_115_rev_mid_shonan_ac;
}
switch(FEAT_TRAINS, SELF, sw_115_gfx_spriteset_115_rev_back_panto_shonan, current_year){
 0..1972: spriteset_115_rev_back_panto_shonan;
 default: spriteset_115_rev_back_panto_shonan_ac;
}
switch(FEAT_TRAINS, SELF, sw_115_gfx_spriteset_115_rev_mid_panto_shonan, current_year){
 0..1972: spriteset_115_rev_mid_panto_shonan;
 default: spriteset_115_rev_mid_panto_shonan_ac;
}

switch(FEAT_TRAINS, SELF, sw_115_gfx_spriteset_115_revflip_front_shonan, current_year){
 0..1972: spriteset_115_revflip_front_shonan;
 default: spriteset_115_revflip_front_shonan_ac;
}
switch(FEAT_TRAINS, SELF, sw_115_gfx_spriteset_115_revflip_back_shonan, current_year){
 0..1972: spriteset_115_revflip_back_shonan;
 default: spriteset_115_revflip_back_shonan_ac;
}
switch(FEAT_TRAINS, SELF, sw_115_gfx_spriteset_115_revflip_mid_shonan, current_year){
 0..1972: spriteset_115_revflip_mid_shonan;
 default: spriteset_115_revflip_mid_shonan_ac;
}
switch(FEAT_TRAINS, SELF, sw_115_gfx_spriteset_115_revflip_back_panto_shonan, current_year){
 0..1972: spriteset_115_revflip_back_panto_shonan;
 default: spriteset_115_revflip_back_panto_shonan_ac;
}
switch(FEAT_TRAINS, SELF, sw_115_gfx_spriteset_115_revflip_mid_panto_shonan, current_year){
 0..1972: spriteset_115_revflip_mid_panto_shonan;
 default: spriteset_115_revflip_mid_panto_shonan_ac;
}
/*---END OF SECTION---*/



/*---GFX: Pantograph Positions---*/
//115 Shonan
switch(FEAT_TRAINS,SELF, sw_115_gfx_pantograph_pos_shonan_under7, position_in_vehid_chain%4){
  0: sw_115_gfx_spriteset_115_mid_panto_shonan;
  2: sw_115_gfx_spriteset_115_mid_panto_shonan;
  default: sw_115_gfx_spriteset_115_mid_shonan;
}
switch(FEAT_TRAINS,SELF, sw_115_gfx_pantograph_pos_shonan_over7, position_in_vehid_chain%5){
  0: sw_115_gfx_spriteset_115_mid_panto_shonan;
  3: sw_115_gfx_spriteset_115_mid_panto_shonan;
  default: sw_115_gfx_spriteset_115_mid_shonan;
}
switch(FEAT_TRAINS,SELF, sw_115_gfx_pantograph_pos_shonan_8cars, position_in_vehid_chain%7){
  0: sw_115_gfx_spriteset_115_mid_panto_shonan;
  1: sw_115_gfx_spriteset_115_revflip_front_shonan;
  4: sw_115_gfx_spriteset_115_front_shonan;
  5: sw_115_gfx_spriteset_115_mid_panto_shonan;
  default: sw_115_gfx_spriteset_115_mid_shonan;
}
switch(FEAT_TRAINS,SELF, sw_115_gfx_pantograph_pos_shonan_8cars_greencar, position_in_vehid_chain%7){
  0: sw_115_gfx_spriteset_115_mid_panto_shonan;
  1: sw_115_gfx_spriteset_115_revflip_front_shonan;
  //3:165 Series Green Car;
  4: sw_115_gfx_spriteset_115_front_shonan;
  5: sw_115_gfx_spriteset_115_mid_panto_shonan;
  default: sw_115_gfx_spriteset_115_mid_shonan;
}
switch(FEAT_TRAINS,SELF, sw_115_gfx_pantograph_pos_shonan_8cars_refitcheck, cargo_subtype){
  //1: sw_115_gfx_pantograph_pos_shonan_8cars_greencar;
  0: sw_115_gfx_pantograph_pos_shonan_8cars;
}
switch(FEAT_TRAINS,SELF, sw_115_gfx_pantograph_pos_shonan, num_vehs_in_vehid_chain){
  0..4: sw_115_gfx_pantograph_pos_shonan_under7;
  6: sw_115_gfx_pantograph_pos_shonan_8cars_refitcheck;
  default: sw_115_gfx_pantograph_pos_shonan_over7;
}
/*---END OF SECTION---*/



/*---GFX: Train Reversing Switches---*/
//Livery Selection
switch(FEAT_TRAINS,SELF, sw_115_gfx_rev_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
//1: ;
0:sw_115_gfx_spriteset_115_rev_front_shonan;
}
switch(FEAT_TRAINS,SELF, sw_115_gfx_revflip_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
//1: ;
0:sw_115_gfx_spriteset_115_revflip_front_shonan;
}

switch(FEAT_TRAINS,SELF, sw_115_gfx_rev_mid_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
//1: ;
0:sw_115_gfx_spriteset_115_rev_mid_panto_shonan;
}
switch(FEAT_TRAINS,SELF, sw_115_gfx_revflip_mid_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
//1: ;
0:sw_115_gfx_spriteset_115_revflip_mid_panto_shonan;
}

switch(FEAT_TRAINS,SELF, sw_115_gfx_rev_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
//1: ;
0:sw_115_gfx_spriteset_115_rev_mid_shonan;
}
switch(FEAT_TRAINS,SELF, sw_115_gfx_revflip_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
//1: ;
0:sw_115_gfx_spriteset_115_revflip_mid_shonan;
}

switch(FEAT_TRAINS,SELF, sw_115_gfx_rev_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
//1: ;
0:sw_115_gfx_spriteset_115_rev_back_shonan;
}
switch(FEAT_TRAINS,SELF, sw_115_gfx_revflip_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
//1: ;
0:sw_115_gfx_spriteset_115_revflip_back_shonan;
}

switch(FEAT_TRAINS,SELF, sw_115_gfx_rev_back_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
//1: ;
0:sw_115_gfx_spriteset_115_rev_back_panto_shonan;
}
switch(FEAT_TRAINS,SELF, sw_115_gfx_revflip_back_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
//1: ;
0:sw_115_gfx_spriteset_115_revflip_back_panto_shonan;
}

//Check for flipped vehicles (dual_headed)
switch(FEAT_TRAINS, SELF, sw_115_gfx_rev_front_flippedcheck, vehicle_is_flipped) {
  1: sw_115_gfx_rev_front_livery;
 default: sw_115_gfx_revflip_front_livery;
}
switch(FEAT_TRAINS, SELF, sw_115_gfx_rev_mid_panto_flippedcheck, vehicle_is_flipped) {
  1: sw_115_gfx_revflip_mid_panto_livery;
 default: sw_115_gfx_rev_mid_panto_livery;
}
switch(FEAT_TRAINS, SELF, sw_115_gfx_rev_mid_flippedcheck, vehicle_is_flipped) {
  1: sw_115_gfx_revflip_mid_livery;
 default: sw_115_gfx_rev_mid_livery;
}
switch(FEAT_TRAINS, SELF, sw_115_gfx_rev_back_panto_flippedcheck, vehicle_is_flipped) {
  1: sw_115_gfx_revflip_back_panto_livery;
 default: sw_115_gfx_rev_back_panto_livery;
}
switch(FEAT_TRAINS, SELF, sw_115_gfx_rev_back_flippedcheck, vehicle_is_flipped) {
  1: sw_115_gfx_revflip_back_livery;
 default: sw_115_gfx_rev_back_livery;
}

//Pantograph Position Testing
switch(FEAT_TRAINS, SELF, sw_115_gfx_rev_pantograph_pos_under7, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%4]){ //look at opposite position_in_vehID_chain
  0: sw_115_gfx_rev_mid_panto_flippedcheck;
  2: sw_115_gfx_rev_mid_panto_flippedcheck;
  default: sw_115_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_115_gfx_rev_pantograph_pos_over7, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%5]){ //look at opposite position_in_vehID_chain
  0: sw_115_gfx_rev_mid_panto_flippedcheck;
  3: sw_115_gfx_rev_mid_panto_flippedcheck;
  default: sw_115_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_115_gfx_rev_pantograph_pos_8cars, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%7]){ //look at opposite position_in_vehID_chain
  0: sw_115_gfx_rev_mid_panto_flippedcheck;
  1: sw_115_gfx_rev_back_flippedcheck;
  4: sw_115_gfx_rev_front_flippedcheck;
  5: sw_115_gfx_rev_mid_panto_flippedcheck;
  default: sw_115_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_115_gfx_rev_pantograph_pos, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 16, 0x000000FF, 0x41]]){ //look at opposite num_vehs_in_vehid_chain
  0..4: sw_115_gfx_rev_pantograph_pos_under7;
  6: sw_115_gfx_rev_pantograph_pos_8cars;
  default: sw_115_gfx_rev_pantograph_pos_over7;
}
switch(FEAT_TRAINS,SELF, sw_115_gfx_rev_mid_refitcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){ //look at opposite refit livery id
//1: ;
0: sw_115_gfx_rev_pantograph_pos;
}

//Back Car Pantograph Testing
switch(FEAT_TRAINS, SELF, sw_115_gfx_rev_back_pantocheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
 0: sw_115_gfx_rev_back_flippedcheck;
 default: sw_115_gfx_rev_back_panto_flippedcheck;
}

//Front/Back Car Position Testing
switch(FEAT_TRAINS, SELF, sw_115_gfx_rev_frontback_nomucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_115_gfx_rev_front_flippedcheck;
  0:sw_115_gfx_rev_back_pantocheck;
}
switch(FEAT_TRAINS, SELF, sw_115_gfx_rev_frontback_aftermucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_115_gfx_rev_back_pantocheck;
  0:sw_115_gfx_rev_front_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_115_gfx_rev_frontback_mucarcheck, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F),STORE_TEMP(var[0x61, 0, 0x000000FF, 0x41],0),  //look at opposite position_in_vehID_chain
STORE_TEMP((position_in_consist_from_end-position_in_consist-1)-LOAD_TEMP(0), 0x10F),                               //look at what is ahead of the first vehicle in the vehID_chain
var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000:sw_115_gfx_rev_frontback_aftermucars;
  default:sw_115_gfx_rev_frontback_nomucars;
}
switch(FEAT_TRAINS, SELF, sw_115_gfx_rev_frontback_sameid, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist+1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle behind of opposite vehicle
  2025:sw_115_gfx_rev_frontback_mucarcheck;
  1000:sw_115_gfx_rev_front_flippedcheck;
  default:sw_115_gfx_rev_back_pantocheck;
}
switch(FEAT_TRAINS, SELF, sw_115_gfx_rev_frontback, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle infront of opposite vehicle
  2025:sw_115_gfx_rev_frontback_sameid;
  1000:sw_115_gfx_rev_back_pantocheck;
  default:sw_115_gfx_rev_front_flippedcheck;
}

//ID Testing
switch(FEAT_TRAINS, SELF, sw_115_gfx_rev_idcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of opposite vehicle
  1000: sw_115_gfx_rev_pantograph_pos;
  2025: sw_115_gfx_rev_frontback;
}
/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/
//115 Shonan
switch(FEAT_TRAINS, SELF, sw_115_gfx_back_pantocheck_shonan, position_in_vehid_chain){
 0: sw_115_gfx_spriteset_115_back_shonan;
 default: sw_115_gfx_spriteset_115_back_panto_shonan;
}
switch(FEAT_TRAINS, SELF, sw_115_gfx_frontback_flipcheck_shonan, vehicle_is_flipped){
 0: sw_115_gfx_spriteset_115_front_shonan;
 default: sw_115_gfx_back_pantocheck_shonan;
}
switch(FEAT_TRAINS, PARENT, sw_115_gfx_frontback_revcheck_shonan, vehicle_is_reversed){
 0: sw_115_gfx_frontback_flipcheck_shonan;
 default: sw_115_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Middle Car Switches---*/
//115 Shonan
switch(FEAT_TRAINS, PARENT, sw_115_gfx_mucar_revcheck_mid_shonan, vehicle_is_reversed){
    0: sw_115_gfx_pantograph_pos_shonan;
    default: sw_115_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Livery Refitting Switches---*/
//Main Switches
switch(FEAT_TRAINS, PARENT, sw_115_gfx_mucar,  cargo_subtype) {
  //1: ;
  0: sw_115_gfx_mucar_revcheck_mid_shonan;
}
switch(FEAT_TRAINS, PARENT, sw_115_gfx_main,  cargo_subtype) {
  //1: ;
  0: sw_115_gfx_frontback_revcheck_shonan;
}

//Menu Switches
switch(FEAT_TRAINS, SELF, sw_115_subtypetext_mucar, cargo_subtype) {
  //1: string(); <--with 165 green car in 8-car formation
  0: string(SHONAN_LV);
}
switch(FEAT_TRAINS, SELF, sw_115_subtypetext_main, cargo_subtype) {
  //1: string(); <--with 165 green car in 8-car formation
  0: string(SHONAN_LV);
}
/*---END OF SECTION---*/



//Coupling ((1040 is EF63))
  switch(FEAT_TRAINS, SELF, sw_115_attach_vehid, [vehicle_type_id == emu_115 || vehicle_type_id == mu_car || vehicle_type_id == 1040]) {
  0: return string(MU_UNIQUE);
  }



item(FEAT_TRAINS, emu_115) {
    property {
        name:                         string(JNR_115);
        introduction_date:            date(1963, 03, 01);
        model_life:                   20;
        vehicle_life:                 39;
        reliability_decay:            11;

        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_3D;
        cost_factor:                  17;
        running_cost_factor:          51;

        speed:                        110 km/h;
        track_type:                   NARROW_OHLE;
        power:                        480 kW;
        weight:                       37 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  1;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_ELECTRIC;
        engine_class:                 ENGINE_CLASS_ELECTRIC;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                      sw_115_gfx_main;
		    purchase:                 spriteset_115_purchase;
		    additional_text:	      return string(JNR_115_DESC);
        cargo_subtype_text:           sw_115_subtypetext_main;
        can_attach_wagon:			  sw_115_attach_vehid;
        //start_stop:                   ;
    }
    /*Multiple Unit Car*/
      livery_override(mu_car){
        default:                      sw_115_gfx_mucar;
        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_3D;
        cargo_subtype_text:           sw_115_subtypetext_mucar;
        power: 120;
        weight: 27;
      }

}
# 1 "JPplus.pnml" 4
# 1 "src/JNR/EMU/151_161_181_series.pnml" 1
/*---GFX: Spritesets---*/
//Purchase Sprites
spriteset (spriteset_181_purchase,	                                                    "gfx/JNR/emu151_161_181/purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_181_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,         "gfx/JNR/emu151_161_181/purchase_32bpp.png")         {tmpl_purchase_dh_32bpp(0, 0)}

//181 Series
spriteset (spriteset_151_front,    	  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_151_back,        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_181_front,    	  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_181_back,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_181_mid,    		  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_181_mid_panto,     		  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_181_midgr,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_181_midgr_panto,    		  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_181_mid_sashi,    	  	  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_181_mid_mohashi,    		  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_151_front,                 ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu151_161_181/151-1-1.png")             {tmpl_std(0, 1)}
alternative_sprites(spriteset_151_back,                  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu151_161_181/151-1-2.png")             {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_181_front,                 ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu151_161_181/181-1-1.png")             {tmpl_std(0, 1)}
alternative_sprites(spriteset_181_back,                  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu151_161_181/181-1-1.png")             {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_181_mid,                   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu151_161_181/151-1-7.png")             {tmpl_std(0, 1)}
alternative_sprites(spriteset_181_mid_panto,             ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu151_161_181/151-1-8.png")             {tmpl_std(0, 1)}
alternative_sprites(spriteset_181_midgr,                 ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu151_161_181/151-1-3.png")             {tmpl_std(0, 1)}
alternative_sprites(spriteset_181_midgr_panto,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu151_161_181/151-1-4.png")             {tmpl_std(0, 1)}
alternative_sprites(spriteset_181_mid_sashi,             ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu151_161_181/151-1-5.png")             {tmpl_std(0, 1)}
alternative_sprites(spriteset_181_mid_mohashi,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu151_161_181/151-1-6.png")             {tmpl_std(0, 1)}

spriteset (spriteset_151_rev_front,    	  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_151_rev_back,        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_181_rev_front,    	  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_181_rev_back,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_181_rev_mid,    		  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_181_rev_mid_panto,     		  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_181_rev_midgr,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_181_rev_midgr_panto,    		  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_181_rev_mid_sashi,    	  	  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_181_rev_mid_mohashi,    		  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_151_rev_front,                 ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu151_161_181/151-1-1.png")             {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_151_rev_back,                  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu151_161_181/151-1-2.png")             {tmpl_std(0, 1)}
alternative_sprites(spriteset_181_rev_front,                 ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu151_161_181/181-1-1.png")             {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_181_rev_back,                  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu151_161_181/181-1-1.png")             {tmpl_std(0, 1)}
alternative_sprites(spriteset_181_rev_mid,                   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu151_161_181/151-1-7.png")             {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_181_rev_mid_panto,             ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu151_161_181/151-1-8.png")             {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_181_rev_midgr,                 ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu151_161_181/151-1-3.png")             {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_181_rev_midgr_panto,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu151_161_181/151-1-4.png")             {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_181_rev_mid_sashi,             ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu151_161_181/151-1-5.png")             {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_181_rev_mid_mohashi,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu151_161_181/151-1-6.png")             {tmpl_std_rev(0, 1)}

spriteset (spriteset_151_revflip_front,    	  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_151_revflip_back,        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_181_revflip_front,    	  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_181_revflip_back,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_181_revflip_mid,    		  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_181_revflip_mid_panto,     		  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_181_revflip_midgr,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_181_revflip_midgr_panto,    		  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_181_revflip_mid_sashi,    	  	  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_181_revflip_mid_mohashi,    		  "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_151_revflip_front,                 ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu151_161_181/151-1-1.png")             {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_151_revflip_back,                  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu151_161_181/151-1-2.png")             {tmpl_std(0, 1)}
alternative_sprites(spriteset_181_revflip_front,                 ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu151_161_181/181-1-1.png")             {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_181_revflip_back,                  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu151_161_181/181-1-1.png")             {tmpl_std(0, 1)}
alternative_sprites(spriteset_181_revflip_mid,                   ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu151_161_181/151-1-7.png")             {tmpl_std(0, 1)}
alternative_sprites(spriteset_181_revflip_mid_panto,             ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu151_161_181/151-1-8.png")             {tmpl_std(0, 1)}
alternative_sprites(spriteset_181_revflip_midgr,                 ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu151_161_181/151-1-3.png")             {tmpl_std(0, 1)}
alternative_sprites(spriteset_181_revflip_midgr_panto,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu151_161_181/151-1-4.png")             {tmpl_std(0, 1)}
alternative_sprites(spriteset_181_revflip_mid_sashi,             ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu151_161_181/151-1-5.png")             {tmpl_std(0, 1)}
alternative_sprites(spriteset_181_revflip_mid_mohashi,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu151_161_181/151-1-6.png")             {tmpl_std(0, 1)}



/*---END OF SECTION---*/



/*---GFX: Pantograph Positions---*/
/*
//181
switch(FEAT_TRAINS,SELF, sw_181_gfx_pantograph_pos_basic, position_in_vehid_chain%10){
  0: spriteset_181_mid_panto;
  3: spriteset_181_mid_panto;
  default:spriteset_181_mid;
}
switch(FEAT_TRAINS,SELF, sw_181_gfx_pantograph_pos, num_vehs_in_vehid_chain){
  default: sw_181_gfx_pantograph_pos_basic;
}
*/
/*---END OF SECTION---*/



/*---GFX: Train Reversing Switches---*/
//Livery Selection
switch(FEAT_TRAINS,SELF, sw_181_gfx_rev_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
1:spriteset_181_rev_front;
0:spriteset_151_rev_front;
}
switch(FEAT_TRAINS,SELF, sw_181_gfx_revflip_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
1:spriteset_181_revflip_front;
0:spriteset_151_revflip_front;
}

switch(FEAT_TRAINS,SELF, sw_181_gfx_rev_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
1:spriteset_181_rev_back;
0:spriteset_151_rev_back;
}
switch(FEAT_TRAINS,SELF, sw_181_gfx_revflip_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
1:spriteset_181_revflip_back;  
0:spriteset_151_revflip_back;
}

switch(FEAT_TRAINS,SELF, sw_181_gfx_rev_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
6:spriteset_181_rev_mid;
5:spriteset_181_rev_mid;
4:spriteset_181_rev_mid;
3:spriteset_181_rev_mid;
2:spriteset_181_rev_mid;
1:spriteset_181_rev_mid;
0:spriteset_181_rev_mid;
}
switch(FEAT_TRAINS,SELF, sw_181_gfx_revflip_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
6:spriteset_181_revflip_mid;
5:spriteset_181_revflip_mid;
4:spriteset_181_revflip_mid;
3:spriteset_181_revflip_mid;
2:spriteset_181_revflip_mid;
1:spriteset_181_revflip_mid;
0:spriteset_181_revflip_mid;
}

switch(FEAT_TRAINS,SELF, sw_181_gfx_rev_mid_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
6:spriteset_181_rev_mid_panto;
5:spriteset_181_rev_mid_panto;
4:spriteset_181_rev_mid_panto;
3:spriteset_181_rev_mid_panto;
2:spriteset_181_rev_mid_panto;
1:spriteset_181_rev_mid_panto;
0:spriteset_181_rev_mid_panto;
}
switch(FEAT_TRAINS,SELF, sw_181_gfx_revflip_mid_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
6:spriteset_181_revflip_mid_panto;
5:spriteset_181_revflip_mid_panto;
4:spriteset_181_revflip_mid_panto;
3:spriteset_181_revflip_mid_panto;
2:spriteset_181_revflip_mid_panto;
1:spriteset_181_revflip_mid_panto;
0:spriteset_181_revflip_mid_panto;
}

switch(FEAT_TRAINS,SELF, sw_181_gfx_rev_midgr_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
6:spriteset_181_rev_midgr;
5:spriteset_181_rev_midgr;
4:spriteset_181_rev_midgr;
3:spriteset_181_rev_midgr;
2:spriteset_181_rev_midgr;
1:spriteset_181_rev_midgr;
0:spriteset_181_rev_midgr;
}
switch(FEAT_TRAINS,SELF, sw_181_gfx_revflip_midgr_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
6:spriteset_181_revflip_midgr;
5:spriteset_181_revflip_midgr;
4:spriteset_181_revflip_midgr;
3:spriteset_181_revflip_midgr;
2:spriteset_181_revflip_midgr;
1:spriteset_181_revflip_midgr;
0:spriteset_181_revflip_midgr;
}

switch(FEAT_TRAINS,SELF, sw_181_gfx_rev_midgr_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
6:spriteset_181_rev_midgr_panto;
5:spriteset_181_rev_midgr_panto;
4:spriteset_181_rev_midgr_panto;
3:spriteset_181_rev_midgr_panto;
2:spriteset_181_rev_midgr_panto;
1:spriteset_181_rev_midgr_panto;
0:spriteset_181_rev_midgr_panto;
}
switch(FEAT_TRAINS,SELF, sw_181_gfx_revflip_midgr_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
6:spriteset_181_revflip_midgr_panto;
5:spriteset_181_revflip_midgr_panto;
4:spriteset_181_revflip_midgr_panto;
3:spriteset_181_revflip_midgr_panto;
2:spriteset_181_revflip_midgr_panto;
1:spriteset_181_revflip_midgr_panto;
0:spriteset_181_revflip_midgr_panto;
}

switch(FEAT_TRAINS,SELF, sw_181_gfx_rev_mid_sashi_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
6:spriteset_181_rev_mid_sashi;
5:spriteset_181_rev_mid_sashi;
4:spriteset_181_rev_mid_sashi;
3:spriteset_181_rev_mid_sashi;
2:spriteset_181_rev_mid_sashi;
1:spriteset_181_rev_mid_sashi;
0:spriteset_181_rev_mid_sashi;
}
switch(FEAT_TRAINS,SELF, sw_181_gfx_revflip_mid_sashi_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
6:spriteset_181_revflip_mid_sashi;
5:spriteset_181_revflip_mid_sashi;
4:spriteset_181_revflip_mid_sashi;
3:spriteset_181_revflip_mid_sashi;
2:spriteset_181_revflip_mid_sashi;
1:spriteset_181_revflip_mid_sashi;
0:spriteset_181_revflip_mid_sashi;
}

switch(FEAT_TRAINS,SELF, sw_181_gfx_rev_mid_mohashi_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
6:spriteset_181_rev_mid_mohashi;
5:spriteset_181_rev_mid_mohashi;
4:spriteset_181_rev_mid_mohashi;
3:spriteset_181_rev_mid_mohashi;
2:spriteset_181_rev_mid_mohashi;
1:spriteset_181_rev_mid_mohashi;
0:spriteset_181_rev_mid_mohashi;
}
switch(FEAT_TRAINS,SELF, sw_181_gfx_revflip_mid_mohashi_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
6:spriteset_181_revflip_mid_mohashi;
5:spriteset_181_revflip_mid_mohashi;
4:spriteset_181_revflip_mid_mohashi;
3:spriteset_181_revflip_mid_mohashi;
2:spriteset_181_revflip_mid_mohashi;
1:spriteset_181_revflip_mid_mohashi;
0:spriteset_181_revflip_mid_mohashi;
}


//Check for flipped vehicles (dual_headed)
switch(FEAT_TRAINS, SELF, sw_181_gfx_rev_front_flippedcheck, vehicle_is_flipped) {
  1: sw_181_gfx_revflip_front_livery;
 default: sw_181_gfx_rev_front_livery;
}
switch(FEAT_TRAINS, SELF, sw_181_gfx_rev_back_flippedcheck, vehicle_is_flipped) {
  1: sw_181_gfx_revflip_back_livery;
 default: sw_181_gfx_rev_back_livery;
}
switch(FEAT_TRAINS, SELF, sw_181_gfx_rev_mid_flippedcheck, vehicle_is_flipped) {
  1: sw_181_gfx_revflip_mid_livery;
 default: sw_181_gfx_rev_mid_livery;
}
switch(FEAT_TRAINS, SELF, sw_181_gfx_rev_mid_panto_flippedcheck, vehicle_is_flipped) {
  1: sw_181_gfx_revflip_mid_panto_livery;
 default: sw_181_gfx_rev_mid_panto_livery;
}
switch(FEAT_TRAINS, SELF, sw_181_gfx_rev_midgr_flippedcheck, vehicle_is_flipped) {
  1: sw_181_gfx_revflip_midgr_livery;
 default: sw_181_gfx_rev_midgr_livery;
}
switch(FEAT_TRAINS, SELF, sw_181_gfx_rev_midgr_panto_flippedcheck, vehicle_is_flipped) {
  1: sw_181_gfx_revflip_midgr_panto_livery;
 default: sw_181_gfx_rev_midgr_panto_livery;
}
switch(FEAT_TRAINS, SELF, sw_181_gfx_rev_mid_sashi_flippedcheck, vehicle_is_flipped) {
  1: sw_181_gfx_revflip_mid_sashi_livery;
 default: sw_181_gfx_rev_mid_sashi_livery;
}
switch(FEAT_TRAINS, SELF, sw_181_gfx_rev_mid_mohashi_flippedcheck, vehicle_is_flipped) {
  1: sw_181_gfx_revflip_mid_mohashi_livery;
 default: sw_181_gfx_rev_mid_mohashi_livery;
}

switch(FEAT_TRAINS,SELF, sw_181_gfx_rev_templiv, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  6: sw_181_gfx_rev_midgr_panto_flippedcheck;
  5: sw_181_gfx_rev_mid_panto_flippedcheck;
  4: sw_181_gfx_rev_mid_mohashi_flippedcheck;
  3: sw_181_gfx_rev_mid_sashi_flippedcheck;
  2: sw_181_gfx_rev_midgr_flippedcheck;
  1: sw_181_gfx_rev_mid_flippedcheck;
  0: sw_181_gfx_rev_mid_flippedcheck;
}

//Pantograph Position Testing
/*
switch(FEAT_TRAINS, SELF, sw_181_gfx_rev_pantograph_pos_basic, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%10]){ //look at opposite position_in_vehID_chain
  0: sw_181_gfx_rev_mid_panto_flippedcheck;
  3: sw_181_gfx_rev_mid_panto_flippedcheck;
  default: sw_181_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_181_gfx_rev_pantograph_pos, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 16, 0x000000FF, 0x41]]){ //look at opposite num_vehs_in_vehid_chain
  default: sw_181_gfx_rev_pantograph_pos_basic;
}
switch(FEAT_TRAINS,SELF, sw_181_gfx_rev_mid_refitcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){ //look at opposite refit livery id
//1: ;
0: sw_181_gfx_rev_pantograph_pos;
}
*/

//Back Car Pantograph Testing
/*
switch(FEAT_TRAINS, SELF, sw_181_gfx_rev_back_pantocheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
 //0: sw_181_gfx_rev_back_flippedcheck; <-- if we dont need back panto not sure yet
 default: sw_181_gfx_rev_back_panto_flippedcheck;
}
*/

//Front/Back Car Position Testing
switch(FEAT_TRAINS, SELF, sw_181_gfx_rev_frontback_nomucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_181_gfx_rev_front_flippedcheck;
  0:sw_181_gfx_rev_back_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_181_gfx_rev_frontback_aftermucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_181_gfx_rev_back_flippedcheck;
  0:sw_181_gfx_rev_front_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_181_gfx_rev_frontback_mucarcheck, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F),STORE_TEMP(var[0x61, 0, 0x000000FF, 0x41],0),  //look at opposite position_in_vehID_chain
STORE_TEMP((position_in_consist_from_end-position_in_consist-1)-LOAD_TEMP(0), 0x10F),                               //look at what is ahead of the first vehicle in the vehID_chain
var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000:sw_181_gfx_rev_frontback_aftermucars;
  default:sw_181_gfx_rev_frontback_nomucars;
}
switch(FEAT_TRAINS, SELF, sw_181_gfx_rev_frontback_sameid, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist+1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle behind of opposite vehicle
  2031:sw_181_gfx_rev_frontback_mucarcheck;
  1000:sw_181_gfx_rev_front_flippedcheck;
  default:sw_181_gfx_rev_back_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_181_gfx_rev_frontback, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle infront of opposite vehicle
  2031:sw_181_gfx_rev_frontback_sameid;
  1000:sw_181_gfx_rev_back_flippedcheck;
  default:sw_181_gfx_rev_front_flippedcheck;
}

//ID Testing
switch(FEAT_TRAINS, SELF, sw_181_gfx_rev_idcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of opposite vehicle
  1000: sw_181_gfx_rev_templiv;
  2031: sw_181_gfx_rev_frontback;
}
/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/

//151
switch(FEAT_TRAINS, SELF, sw_151_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_151_front;
 default: spriteset_151_back;
}
switch(FEAT_TRAINS, PARENT, sw_151_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_151_gfx_frontback_flipcheck;
 default: sw_181_gfx_rev_idcheck;
}

//181
switch(FEAT_TRAINS, SELF, sw_181_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_181_front;
 default: spriteset_181_back;
}
switch(FEAT_TRAINS, PARENT, sw_181_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_181_gfx_frontback_flipcheck;
 default: sw_181_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Middle Car Switches---*/
//181
switch(FEAT_TRAINS, SELF, sw_181_gfx_cargosubtype, cargo_subtype){
  6: spriteset_181_midgr_panto;
  5: spriteset_181_mid_panto;
  4: spriteset_181_mid_mohashi;
  3: spriteset_181_mid_sashi;
  2: spriteset_181_midgr;
  1: spriteset_181_mid;
  0: spriteset_181_mid;
}

switch(FEAT_TRAINS, PARENT, sw_181_gfx_mucar_revcheck_mid, vehicle_is_reversed){
    0: sw_181_gfx_cargosubtype;
    default: sw_181_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Livery Refitting Switches---*/
//Main Switches
switch(FEAT_TRAINS, SELF, sw_181_gfx_mucar,  cargo_subtype) {
  default: sw_181_gfx_mucar_revcheck_mid;
}
switch(FEAT_TRAINS, PARENT, sw_181_gfx_main,  cargo_subtype) {
  1: sw_181_gfx_frontback_revcheck;
  0: sw_151_gfx_frontback_revcheck;
}

//Menu Switches
switch(FEAT_TRAINS, SELF, sw_181_subtypetext_mucar, cargo_subtype) {
  6: string(jnr181_LVe);
  5: string(jnr181_LVd);
  4: string(jnr181_LVc);
  3: string(jnr181_LVb);
  2: string(jnr181_LVa);
  1: string(jnr181_LV);
  0: string(jnr151_LV);
}
switch(FEAT_TRAINS, SELF, sw_181_subtypetext_main, cargo_subtype) {
  1: string(jnr181_LV);
  0: string(jnr151_LV);
}
/*---END OF SECTION---*/



//Coupling
  switch(FEAT_TRAINS, SELF, sw_181_attach_vehid, [vehicle_type_id == emu_181 || vehicle_type_id == mu_car]) {
  0: return string(MU_UNIQUE);
  }



item(FEAT_TRAINS, emu_181) {
    property {
        name:                         string(JNR_181);
        introduction_date:            date(1958, 11, 12);
        model_life:                   20;
        vehicle_life:                 39;
        reliability_decay:            11;

        cargo_capacity:               param_capacity_express;
        loading_speed:                param_loading_2D;
        cost_factor:                  17;
        running_cost_factor:          51;

        speed:                        110 km/h;
        track_type:                   NARROW_OHLE;
        power:                        480 kW;
        weight:                       37 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  1;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_ELECTRIC;
        engine_class:                 ENGINE_CLASS_ELECTRIC;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                      sw_181_gfx_main;
		    purchase:                 spriteset_181_purchase;
		    additional_text:	      return string(JNR_181_DESC);
        cargo_subtype_text:           sw_181_subtypetext_main;
        can_attach_wagon:			  sw_181_attach_vehid;
        //start_stop:                   ;
    }
    /*Multiple Unit Car*/
      livery_override(mu_car){
        default:                      sw_181_gfx_mucar;
        cargo_capacity:               param_capacity_express;
        loading_speed:                param_loading_2D;
        cargo_subtype_text:           sw_181_subtypetext_mucar;
        power: 120;
        weight: 27;
      }

}
# 1 "JPplus.pnml" 4
# 1 "src/JNR/EMU/165_169_series.pnml" 1
/*---GFX: Spritesets---*/
//Purchase Sprites
spriteset (spriteset_165_purchase,	                                                     "gfx/JNR/emu165_169/purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_165_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,         "gfx/JNR/emu165_169/purchase_32bpp.png")         {tmpl_purchase_dh_32bpp(0, 0)}

//165 Series
spriteset (spriteset_165_front,    	               "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_165_back,                     "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_165_mid,          	           "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_165_mid_panto,                "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_165_midgr_belt,    	         "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_165_midgr_nobelt,             "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_165_mid_sashashi,    		     "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_165_front,                      ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu165_169/Shonan/165-1-1.png")             {tmpl_std(0, 1)}
alternative_sprites(spriteset_165_back,                       ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu165_169/Shonan/165-1-1.png")             {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_165_mid,                        ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu165_169/Shonan/165-1-2.png")             {tmpl_std(0, 1)}
alternative_sprites(spriteset_165_mid_panto,                  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu165_169/Shonan/165-1-3.png")             {tmpl_std(0, 1)}
alternative_sprites(spriteset_165_midgr_belt,                 ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu165_169/Shonan/165-1-4.png")             {tmpl_std(0, 1)}
alternative_sprites(spriteset_165_midgr_nobelt,               ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu165_169/Shonan/165-1-5.png")             {tmpl_std(0, 1)}
alternative_sprites(spriteset_165_mid_sashashi,               ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu165_169/Shonan/165-1-6.png")             {tmpl_std(0, 1)}

spriteset (spriteset_165_rev_front,    	               "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_165_rev_back,                     "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_165_rev_mid,          	           "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_165_rev_mid_panto,                "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_165_rev_midgr_belt,    	         "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_165_rev_midgr_nobelt,             "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_165_rev_mid_sashashi,    		     "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_165_rev_front,                      ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu165_169/Shonan/165-1-1.png")             {tmpl_std(0, 26)}
alternative_sprites(spriteset_165_rev_back,                       ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu165_169/Shonan/165-1-1.png")             {tmpl_std(0, 1)}
alternative_sprites(spriteset_165_rev_mid,                        ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu165_169/Shonan/165-1-2.png")             {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_165_rev_mid_panto,                  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu165_169/Shonan/165-1-3.png")             {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_165_rev_midgr_belt,                 ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu165_169/Shonan/165-1-4.png")             {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_165_rev_midgr_nobelt,               ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu165_169/Shonan/165-1-5.png")             {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_165_rev_mid_sashashi,               ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu165_169/Shonan/165-1-6.png")             {tmpl_std(0, 1)}

spriteset (spriteset_165_revflip_front,    	               "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_165_revflip_back,                     "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_165_revflip_mid,          	           "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_165_revflip_mid_panto,                "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_165_revflip_midgr_belt,    	         "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_165_revflip_midgr_nobelt,             "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_165_revflip_mid_sashashi,    		     "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_165_revflip_front,                      ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu165_169/Shonan/165-1-1.png")             {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_165_revflip_back,                       ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu165_169/Shonan/165-1-1.png")             {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_165_revflip_mid,                        ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu165_169/Shonan/165-1-2.png")             {tmpl_std(0, 1)}
alternative_sprites(spriteset_165_revflip_mid_panto,                  ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu165_169/Shonan/165-1-3.png")             {tmpl_std(0, 1)}
alternative_sprites(spriteset_165_revflip_midgr_belt,                 ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu165_169/Shonan/165-1-4.png")             {tmpl_std(0, 1)}
alternative_sprites(spriteset_165_revflip_midgr_nobelt,               ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu165_169/Shonan/165-1-5.png")             {tmpl_std(0, 1)}
alternative_sprites(spriteset_165_revflip_mid_sashashi,               ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu165_169/Shonan/165-1-6.png")             {tmpl_std_rev(0, 1)}
/*---END OF SECTION---*/



/*---GFX: Pantograph Positions---*/
/*
//165
switch(FEAT_TRAINS,SELF, sw_165_gfx_pantograph_pos_basic, position_in_vehid_chain%10){
  0: spriteset_165_mid_panto;
  3: spriteset_165_mid_panto;
  default:spriteset_165_mid;
}
switch(FEAT_TRAINS,SELF, sw_165_gfx_pantograph_pos, num_vehs_in_vehid_chain){
  default: sw_165_gfx_pantograph_pos_basic;
}
*/
/*---END OF SECTION---*/



/*---GFX: Train Reversing Switches---*/
//Livery Selection
switch(FEAT_TRAINS,SELF, sw_165_gfx_rev_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0:spriteset_165_rev_front;
}
switch(FEAT_TRAINS,SELF, sw_165_gfx_revflip_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0:spriteset_165_revflip_front;
}

switch(FEAT_TRAINS,SELF, sw_165_gfx_rev_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0:spriteset_165_rev_back;
}
switch(FEAT_TRAINS,SELF, sw_165_gfx_revflip_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0:spriteset_165_revflip_back;
}

switch(FEAT_TRAINS,SELF, sw_165_gfx_rev_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
4:spriteset_165_rev_mid;
3:spriteset_165_rev_mid;
2:spriteset_165_rev_mid;
1:spriteset_165_rev_mid;
0:spriteset_165_rev_mid;
}
switch(FEAT_TRAINS,SELF, sw_165_gfx_revflip_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
4:spriteset_165_revflip_mid;
3:spriteset_165_revflip_mid;
2:spriteset_165_revflip_mid;
1:spriteset_165_revflip_mid;
0:spriteset_165_revflip_mid;
}

switch(FEAT_TRAINS,PARENT, sw_165_gfx_rev_mid_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
4:spriteset_165_rev_mid_panto;
3:spriteset_165_rev_mid_panto;
2:spriteset_165_rev_mid_panto;
1:spriteset_165_rev_mid_panto;
0:spriteset_165_rev_mid_panto;
}
switch(FEAT_TRAINS,PARENT, sw_165_gfx_revflip_mid_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
4:spriteset_165_revflip_mid_panto;
3:spriteset_165_revflip_mid_panto;
2:spriteset_165_revflip_mid_panto;
1:spriteset_165_revflip_mid_panto;
0:spriteset_165_revflip_mid_panto;
}

switch(FEAT_TRAINS,SELF, sw_165_gfx_rev_midgr_belt_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
4:spriteset_165_rev_midgr_belt;
3:spriteset_165_rev_midgr_belt;
2:spriteset_165_rev_midgr_belt;
1:spriteset_165_rev_midgr_belt;
0:spriteset_165_rev_midgr_belt;
}
switch(FEAT_TRAINS,SELF, sw_165_gfx_revflip_midgr_belt_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
4:spriteset_165_revflip_midgr_belt;
3:spriteset_165_revflip_midgr_belt;
2:spriteset_165_revflip_midgr_belt;
1:spriteset_165_revflip_midgr_belt;
0:spriteset_165_revflip_midgr_belt;
}

switch(FEAT_TRAINS,SELF, sw_165_gfx_rev_midgr_nobelt_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
4:spriteset_165_rev_midgr_nobelt;
3:spriteset_165_rev_midgr_nobelt;
2:spriteset_165_rev_midgr_nobelt;
1:spriteset_165_rev_midgr_nobelt;
0:spriteset_165_rev_midgr_nobelt;
}
switch(FEAT_TRAINS,SELF, sw_165_gfx_revflip_midgr_nobelt_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
4:spriteset_165_revflip_midgr_nobelt;
3:spriteset_165_revflip_midgr_nobelt;
2:spriteset_165_revflip_midgr_nobelt;
1:spriteset_165_revflip_midgr_nobelt;
0:spriteset_165_revflip_midgr_nobelt;
}

switch(FEAT_TRAINS,SELF, sw_165_gfx_rev_mid_sashashi_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
4:spriteset_165_rev_mid_sashashi;
3:spriteset_165_rev_mid_sashashi;
2:spriteset_165_rev_mid_sashashi;
1:spriteset_165_rev_mid_sashashi;
0:spriteset_165_rev_mid_sashashi;
}
switch(FEAT_TRAINS,SELF, sw_165_gfx_revflip_mid_sashashi_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
4:spriteset_165_revflip_mid_sashashi;
3:spriteset_165_revflip_mid_sashashi;
2:spriteset_165_revflip_mid_sashashi;
1:spriteset_165_revflip_mid_sashashi;
0:spriteset_165_revflip_mid_sashashi;
}

//Check for flipped vehicles (dual_headed)
switch(FEAT_TRAINS, SELF, sw_165_gfx_rev_front_flippedcheck, vehicle_is_flipped) {
  1: sw_165_gfx_revflip_front_livery;
 default: sw_165_gfx_rev_front_livery;
}
switch(FEAT_TRAINS, SELF, sw_165_gfx_rev_back_flippedcheck, vehicle_is_flipped) {
  1: sw_165_gfx_revflip_back_livery;
 default: sw_165_gfx_rev_back_livery;
}
switch(FEAT_TRAINS, SELF, sw_165_gfx_rev_mid_flippedcheck, vehicle_is_flipped) {
  1: sw_165_gfx_revflip_mid_livery;
 default: sw_165_gfx_rev_mid_livery;
}
switch(FEAT_TRAINS, SELF, sw_165_gfx_rev_mid_panto_flippedcheck, vehicle_is_flipped) {
  1: sw_165_gfx_revflip_mid_panto_livery;
 default: sw_165_gfx_rev_mid_panto_livery;
}
switch(FEAT_TRAINS, SELF, sw_165_gfx_rev_midgr_belt_flippedcheck, vehicle_is_flipped) {
  1: sw_165_gfx_rev_midgr_belt_livery;
 default: sw_165_gfx_revflip_midgr_belt_livery;
}
switch(FEAT_TRAINS, SELF, sw_165_gfx_rev_midgr_nobelt_flippedcheck, vehicle_is_flipped) {
  1: sw_165_gfx_rev_midgr_nobelt_livery;
 default: sw_165_gfx_revflip_midgr_nobelt_livery;
}
switch(FEAT_TRAINS, SELF, sw_165_gfx_rev_mid_sashashi_flippedcheck, vehicle_is_flipped) {
  1: sw_165_gfx_rev_mid_sashashi_livery;
 default: sw_165_gfx_revflip_mid_sashashi_livery;
}

switch(FEAT_TRAINS,SELF, sw_165_gfx_rev_templiv, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  4: sw_165_gfx_rev_mid_panto_flippedcheck;
  3: sw_165_gfx_rev_mid_sashashi_flippedcheck;
  2: sw_165_gfx_rev_midgr_nobelt_flippedcheck;
  1: sw_165_gfx_rev_midgr_belt_flippedcheck;
  0: sw_165_gfx_rev_mid_flippedcheck;
}

//Pantograph Position Testing
/*
switch(FEAT_TRAINS, SELF, sw_165_gfx_rev_pantograph_pos_basic, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%10]){ //look at opposite position_in_vehID_chain
  0: sw_165_gfx_rev_mid_panto_flippedcheck;
  3: sw_165_gfx_rev_mid_panto_flippedcheck;
  default: sw_165_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_165_gfx_rev_pantograph_pos, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 16, 0x000000FF, 0x41]]){ //look at opposite num_vehs_in_vehid_chain
  default: sw_165_gfx_rev_pantograph_pos_basic;
}
switch(FEAT_TRAINS,SELF, sw_165_gfx_rev_mid_refitcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){ //look at opposite refit livery id
//1: ;
0: sw_165_gfx_rev_pantograph_pos;
}
*/

//Back Car Pantograph Testing
/*
switch(FEAT_TRAINS, SELF, sw_165_gfx_rev_back_pantocheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
 //0: sw_165_gfx_rev_back_flippedcheck; <-- if we dont need back panto not sure yet
 default: sw_165_gfx_rev_back_panto_flippedcheck;
}
*/

//Front/Back Car Position Testing
switch(FEAT_TRAINS, SELF, sw_165_gfx_rev_frontback_nomucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_165_gfx_rev_front_flippedcheck;
  0:sw_165_gfx_rev_back_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_165_gfx_rev_frontback_aftermucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_165_gfx_rev_back_flippedcheck;
  0:sw_165_gfx_rev_front_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_165_gfx_rev_frontback_mucarcheck, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F),STORE_TEMP(var[0x61, 0, 0x000000FF, 0x41],0),  //look at opposite position_in_vehID_chain
STORE_TEMP((position_in_consist_from_end-position_in_consist-1)-LOAD_TEMP(0), 0x10F),                               //look at what is ahead of the first vehicle in the vehID_chain
var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000:sw_165_gfx_rev_frontback_aftermucars;
  default:sw_165_gfx_rev_frontback_nomucars;
}
switch(FEAT_TRAINS, SELF, sw_165_gfx_rev_frontback_sameid, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist+1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle behind of opposite vehicle
  2033:sw_165_gfx_rev_frontback_mucarcheck;
  1000:sw_165_gfx_rev_front_flippedcheck;
  default:sw_165_gfx_rev_back_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_165_gfx_rev_frontback, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle infront of opposite vehicle
  2033:sw_165_gfx_rev_frontback_sameid;
  1000:sw_165_gfx_rev_back_flippedcheck;
  default:sw_165_gfx_rev_front_flippedcheck;
}

//ID Testing
switch(FEAT_TRAINS, SELF, sw_165_gfx_rev_idcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of opposite vehicle
  1000: sw_165_gfx_rev_templiv;
  2033: sw_165_gfx_rev_frontback;
}
/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/
//165 series 86-1 front
switch(FEAT_TRAINS, SELF, sw_165_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_165_front;
 default: spriteset_165_back;
}
switch(FEAT_TRAINS, PARENT, sw_165_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_165_gfx_frontback_flipcheck;
 default: sw_165_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Middle Car Switches---*/
//165
switch(FEAT_TRAINS, SELF, sw_165_gfx_cargosubtype, cargo_subtype){
  4: spriteset_165_mid_panto;
  3: spriteset_165_mid_sashashi;
  2: spriteset_165_midgr_nobelt;
  1: spriteset_165_midgr_belt;
  0: spriteset_165_mid;
}

switch(FEAT_TRAINS, PARENT, sw_165_gfx_mucar_revcheck_mid, vehicle_is_reversed){
    0: sw_165_gfx_cargosubtype;
    default: sw_165_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Livery Refitting Switches---*/
//Main Switches
switch(FEAT_TRAINS, SELF, sw_165_gfx_mucar,  cargo_subtype) {
  default: sw_165_gfx_mucar_revcheck_mid;
}
switch(FEAT_TRAINS, PARENT, sw_165_gfx_main,  cargo_subtype) {
  0: sw_165_gfx_frontback_revcheck;
}

//Menu Switches
switch(FEAT_TRAINS, SELF, sw_165_subtypetext_mucar, cargo_subtype) {
  4: string(jnr80_pt);
  3: string(jnr165_sashashi); 
  2: string(jnr165_grnb); 
  1: string(jnr165_grb);
  0: string(SHONAN_LV);
}
switch(FEAT_TRAINS, SELF, sw_165_subtypetext_main, cargo_subtype) {
  0: string(SHONAN_LV);
}
/*---END OF SECTION---*/



//Coupling
  switch(FEAT_TRAINS, SELF, sw_165_attach_vehid, [vehicle_type_id == emu_165 || vehicle_type_id == mu_car]) {
  0: return string(MU_UNIQUE);
  }



item(FEAT_TRAINS, emu_165) {
    property {
        name:                         string(JNR_165);
        introduction_date:            date(1963, 02, 22);
        model_life:                   7;
        vehicle_life:                 39;
        reliability_decay:            11;

        cargo_capacity:               param_capacity_rapid;
        loading_speed:                param_loading_2D;
        cost_factor:                  17;
        running_cost_factor:          51;

        speed:                        110 km/h;
        track_type:                   NARROW_OHLE;
        power:                        480 kW;
        weight:                       37 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  1;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_ELECTRIC;
        engine_class:                 ENGINE_CLASS_ELECTRIC;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                      sw_165_gfx_main;
		    purchase:                 spriteset_165_purchase;
		    additional_text:	      return string(JNR_165_DESC);
        cargo_subtype_text:           sw_165_subtypetext_main;
        can_attach_wagon:			  sw_165_attach_vehid;
        //start_stop:                   ;
    }
    /*Multiple Unit Car*/
      livery_override(mu_car){
        default:                      sw_165_gfx_mucar;
        cargo_capacity:               param_capacity_rapid;
        loading_speed:                param_loading_2D;
        cargo_subtype_text:           sw_165_subtypetext_mucar;
        power: 120;
        weight: 27;
      }

}
# 1 "JPplus.pnml" 4

# 1 "src/JNR/EMU/201_series.pnml" 1
/*---GFX: Spritesets---*/
//Purchase Sprites
spriteset (spriteset_201_purchase,	                                                    "gfx/JNR/emu201/purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_201_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,         "gfx/JNR/emu201/purchase_32bpp.png")         {tmpl_purchase_dh_32bpp(0, 0)}

//201 Orange Vermillion
spriteset (spriteset_201_front_orange,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_201_back_orange,    		      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_201_mid_orange,    		      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_201_mid_panto_orange,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_201_rev_front_orange,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_201_rev_back_orange,    		      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_201_rev_mid_orange,    		      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_201_rev_mid_panto_orange,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_201_revflip_front_orange,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_201_revflip_back_orange,    		      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_201_revflip_mid_orange,    		      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_201_revflip_mid_panto_orange,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_201_front_orange,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu201/201-1-1.png")        {tmpl_std(0, 0)}
alternative_sprites(spriteset_201_back_orange,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu201/201-1-1.png")        {tmpl_std_rev(0, 25)}
alternative_sprites(spriteset_201_mid_orange,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu201/201-1-1.png")        {tmpl_std_rev(0, 50)}
alternative_sprites(spriteset_201_mid_panto_orange,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu201/201-1-1.png")        {tmpl_std_rev(0, 75)}

alternative_sprites(spriteset_201_rev_front_orange,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu201/201-1-1.png")        {tmpl_std_rev(0, 25)}
alternative_sprites(spriteset_201_rev_back_orange,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu201/201-1-1.png")        {tmpl_std(0, 0)}
alternative_sprites(spriteset_201_rev_mid_orange,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu201/201-1-1.png")        {tmpl_std(0, 50)}
alternative_sprites(spriteset_201_rev_mid_panto_orange,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu201/201-1-1.png")        {tmpl_std(0, 75)}

alternative_sprites(spriteset_201_revflip_front_orange,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu201/201-1-1.png")        {tmpl_std(0, 25)}
alternative_sprites(spriteset_201_revflip_back_orange,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu201/201-1-1.png")        {tmpl_std_rev(0, 0)}
alternative_sprites(spriteset_201_revflip_mid_orange,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu201/201-1-1.png")        {tmpl_std_rev(0, 50)}
alternative_sprites(spriteset_201_revflip_mid_panto_orange,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu201/201-1-1.png")        {tmpl_std_rev(0, 75)}
/*---END OF SECTION---*/



/*---GFX: Pantograph Positions---*/
//201 orange
switch(FEAT_TRAINS,SELF, sw_201_gfx_pantograph_pos_orange_basic, position_in_vehid_chain%10){
  0: spriteset_201_mid_panto_orange;
  3: spriteset_201_mid_panto_orange;
  default:spriteset_201_mid_orange;
}
switch(FEAT_TRAINS,SELF, sw_201_gfx_pantograph_pos_orange, num_vehs_in_vehid_chain){
  default: sw_201_gfx_pantograph_pos_orange_basic;
}
/*---END OF SECTION---*/



/*---GFX: Train Reversing Switches---*/
//Livery Selection
switch(FEAT_TRAINS,SELF, sw_201_gfx_rev_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
//1: ;
0:spriteset_201_rev_front_orange;
}
switch(FEAT_TRAINS,SELF, sw_201_gfx_revflip_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
//1: ;
0:spriteset_201_revflip_front_orange;
}

switch(FEAT_TRAINS,SELF, sw_201_gfx_rev_mid_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
//1: ;
0:spriteset_201_rev_mid_panto_orange;
}
switch(FEAT_TRAINS,SELF, sw_201_gfx_revflip_mid_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
//1: ;
0:spriteset_201_revflip_mid_panto_orange;
}

switch(FEAT_TRAINS,SELF, sw_201_gfx_rev_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
//1: ;
0:spriteset_201_rev_mid_orange;
}
switch(FEAT_TRAINS,SELF, sw_201_gfx_revflip_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
//1: ;
0:spriteset_201_revflip_mid_orange;
}

switch(FEAT_TRAINS,SELF, sw_201_gfx_rev_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
//1: ;
0:spriteset_201_rev_back_orange;
}
switch(FEAT_TRAINS,SELF, sw_201_gfx_revflip_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
//1: ;
0:spriteset_201_revflip_back_orange;
}

switch(FEAT_TRAINS,SELF, sw_201_gfx_rev_back_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
//1: ;
0:spriteset_201_rev_back_orange;
}
switch(FEAT_TRAINS,SELF, sw_201_gfx_revflip_back_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
//1: ;
0:spriteset_201_revflip_back_orange;
}

//Check for flipped vehicles (dual_headed)
switch(FEAT_TRAINS, SELF, sw_201_gfx_rev_front_flippedcheck, vehicle_is_flipped) {
  1: sw_201_gfx_rev_front_livery;
 default: sw_201_gfx_revflip_front_livery;
}
switch(FEAT_TRAINS, SELF, sw_201_gfx_rev_mid_panto_flippedcheck, vehicle_is_flipped) {
  1: sw_201_gfx_revflip_mid_panto_livery;
 default: sw_201_gfx_rev_mid_panto_livery;
}
switch(FEAT_TRAINS, SELF, sw_201_gfx_rev_mid_flippedcheck, vehicle_is_flipped) {
  1: sw_201_gfx_revflip_mid_livery;
 default: sw_201_gfx_rev_mid_livery;
}
switch(FEAT_TRAINS, SELF, sw_201_gfx_rev_back_panto_flippedcheck, vehicle_is_flipped) {
  1: sw_201_gfx_revflip_back_panto_livery;
 default: sw_201_gfx_rev_back_panto_livery;
}
switch(FEAT_TRAINS, SELF, sw_201_gfx_rev_back_flippedcheck, vehicle_is_flipped) {
  1: sw_201_gfx_revflip_back_livery;
 default: sw_201_gfx_rev_back_livery;
}

//Pantograph Position Testing
switch(FEAT_TRAINS, SELF, sw_201_gfx_rev_pantograph_pos_orange_basic, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%10]){ //look at opposite position_in_vehID_chain
  0: sw_201_gfx_rev_mid_panto_flippedcheck;
  3: sw_201_gfx_rev_mid_panto_flippedcheck;
  default: sw_201_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_201_gfx_rev_pantograph_pos_orange, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 16, 0x000000FF, 0x41]]){ //look at opposite num_vehs_in_vehid_chain
  default: sw_201_gfx_rev_pantograph_pos_orange_basic;
}
switch(FEAT_TRAINS,SELF, sw_201_gfx_rev_mid_refitcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){ //look at opposite refit livery id
//1: ;
0: sw_201_gfx_rev_pantograph_pos_orange;
}

//Back Car Pantograph Testing
switch(FEAT_TRAINS, SELF, sw_201_gfx_rev_back_pantocheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
 //0: sw_201_gfx_rev_back_flippedcheck; <-- if we dont need back panto not sure yet
 default: sw_201_gfx_rev_back_panto_flippedcheck;
}

//Front/Back Car Position Testing
switch(FEAT_TRAINS, SELF, sw_201_gfx_rev_frontback_nomucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_201_gfx_rev_front_flippedcheck;
  0:sw_201_gfx_rev_back_pantocheck;
}
switch(FEAT_TRAINS, SELF, sw_201_gfx_rev_frontback_aftermucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_201_gfx_rev_back_pantocheck;
  0:sw_201_gfx_rev_front_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_201_gfx_rev_frontback_mucarcheck, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F),STORE_TEMP(var[0x61, 0, 0x000000FF, 0x41],0),  //look at opposite position_in_vehID_chain
STORE_TEMP((position_in_consist_from_end-position_in_consist-1)-LOAD_TEMP(0), 0x10F),                               //look at what is ahead of the first vehicle in the vehID_chain
var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000:sw_201_gfx_rev_frontback_aftermucars;
  default:sw_201_gfx_rev_frontback_nomucars;
}
switch(FEAT_TRAINS, SELF, sw_201_gfx_rev_frontback_sameid, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist+1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle behind of opposite vehicle
  2030:sw_201_gfx_rev_frontback_mucarcheck;
  1000:sw_201_gfx_rev_front_flippedcheck;
  default:sw_201_gfx_rev_back_pantocheck;
}
switch(FEAT_TRAINS, SELF, sw_201_gfx_rev_frontback, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle infront of opposite vehicle
  2030:sw_201_gfx_rev_frontback_sameid;
  1000:sw_201_gfx_rev_back_pantocheck;
  default:sw_201_gfx_rev_front_flippedcheck;
}

//ID Testing
switch(FEAT_TRAINS, SELF, sw_201_gfx_rev_idcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of opposite vehicle
  1000: sw_201_gfx_rev_pantograph_pos_orange_basic;
  2030: sw_201_gfx_rev_frontback;
}
/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/
//201 orange
switch(FEAT_TRAINS, SELF, sw_201_gfx_back_pantocheck_orange, position_in_vehid_chain){
 //0: spriteset_201_back_panto_orange; <--disable panto if mucars are between this and the head
 default: spriteset_201_back_orange;
}
switch(FEAT_TRAINS, SELF, sw_201_gfx_frontback_flipcheck_orange, vehicle_is_flipped){
 0: spriteset_201_front_orange;
 default: sw_201_gfx_back_pantocheck_orange;
}
switch(FEAT_TRAINS, PARENT, sw_201_gfx_frontback_revcheck_orange, vehicle_is_reversed){
 0: sw_201_gfx_frontback_flipcheck_orange;
 default: sw_201_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Middle Car Switches---*/
//201 orange
switch(FEAT_TRAINS, PARENT, sw_201_gfx_mucar_revcheck_mid_orange, vehicle_is_reversed){
    0: sw_201_gfx_pantograph_pos_orange;
    default: sw_201_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Livery Refitting Switches---*/
//Main Switches
switch(FEAT_TRAINS, PARENT, sw_201_gfx_mucar,  cargo_subtype) {
  //1: ;
  0: sw_201_gfx_mucar_revcheck_mid_orange;
}
switch(FEAT_TRAINS, PARENT, sw_201_gfx_main,  cargo_subtype) {
  //1: ;
  0: sw_201_gfx_frontback_revcheck_orange;
}

//Menu Switches
switch(FEAT_TRAINS, SELF, sw_201_subtypetext_mucar, cargo_subtype) {
  //1: string(); <--with 165 green car in 8-car formation
  0: string(ORANGE_LV);
}
switch(FEAT_TRAINS, SELF, sw_201_subtypetext_main, cargo_subtype) {
  //1: string(); <--with 165 green car in 8-car formation
  0: string(ORANGE_LV);
}
/*---END OF SECTION---*/



//Coupling
  switch(FEAT_TRAINS, SELF, sw_201_attach_vehid, [vehicle_type_id == emu_201 || vehicle_type_id == mu_car]) {
  0: return string(MU_UNIQUE);
  }



item(FEAT_TRAINS, emu_201) {
    property {
        name:                         string(JNR_201);
        introduction_date:            date(1979, 08, 20);
        model_life:                   6;
        vehicle_life:                 39;
        reliability_decay:            11;

        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_4D;
        cost_factor:                  17;
        running_cost_factor:          51;

        speed:                        100 km/h;
        track_type:                   NARROW_OHLE;
        power:                        600 kW;
        weight:                       37 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  1;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_ELECTRIC;
        engine_class:                 ENGINE_CLASS_ELECTRIC;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                      sw_201_gfx_main;
		    purchase:                 spriteset_201_purchase;
		    additional_text:	      return string(JNR_201_DESC);
        cargo_subtype_text:           sw_201_subtypetext_main;
        can_attach_wagon:			  sw_201_attach_vehid;
        //start_stop:                   ;
    }
    /*Multiple Unit Car*/
      livery_override(mu_car){
        default:                      sw_201_gfx_mucar;
        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_4D;
        cargo_subtype_text:           sw_201_subtypetext_mucar;
        power: 300;
        weight: 27;
      }

}
# 1 "JPplus.pnml" 4
# 1 "src/JNR/EMU/205_series.pnml" 1
/*---GFX: Spritesets---*/

//Purchase Sprites
spriteset (spriteset_205_purchase,	                                                     "gfx/JNR/emu205/purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_205_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,          "gfx/JNR/emu205/purchase_32bpp.png")         {tmpl_purchase_dh_32bpp(0, 0)}

//205 Yamanote
spriteset (spriteset_205_front_yama,	  	"gfx/OTHER/mucar.png")         	{ tmpl_std(0, 0) }
spriteset (spriteset_205_back_yama,	  	  "gfx/OTHER/mucar.png")          { tmpl_std(0, 0) }
spriteset (spriteset_205_midhd_yama,	    "gfx/OTHER/mucar.png")         	{ tmpl_std(0, 0) }
spriteset (spriteset_205_mid_yama,		    "gfx/OTHER/mucar.png")          { tmpl_std(0, 0) }
spriteset (spriteset_205_midpan_yama,	    "gfx/OTHER/mucar.png")         	{ tmpl_std(0, 0) }

spriteset (spriteset_205_rev_front_yama,	  	"gfx/OTHER/mucar.png")         	{ tmpl_std(0, 0) }
spriteset (spriteset_205_rev_back_yama,	  	  "gfx/OTHER/mucar.png")          { tmpl_std(0, 0) }
spriteset (spriteset_205_rev_midhd_yama,	    "gfx/OTHER/mucar.png")         	{ tmpl_std(0, 0) }
spriteset (spriteset_205_rev_mid_yama,		    "gfx/OTHER/mucar.png")          { tmpl_std(0, 0) }
spriteset (spriteset_205_rev_midpan_yama,	    "gfx/OTHER/mucar.png")         	{ tmpl_std(0, 0) }

spriteset (spriteset_205_revflip_front_yama,	  	"gfx/OTHER/mucar.png")         	{ tmpl_std(0, 0) }
spriteset (spriteset_205_revflip_back_yama,	  	  "gfx/OTHER/mucar.png")          { tmpl_std(0, 0) }
spriteset (spriteset_205_revflip_midhd_yama,	    "gfx/OTHER/mucar.png")         	{ tmpl_std(0, 0) }
spriteset (spriteset_205_revflip_mid_yama,		    "gfx/OTHER/mucar.png")          { tmpl_std(0, 0) }
spriteset (spriteset_205_revflip_midpan_yama,	    "gfx/OTHER/mucar.png")         	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_205_front_yama,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu205/205_0_Yamanote_32bpp.png")        {tmpl_std(0, 0)}
alternative_sprites(spriteset_205_back_yama,            ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu205/205_0_Yamanote_32bpp.png")        {tmpl_std_rev(0, 25)}
alternative_sprites(spriteset_205_midhd_yama,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu205/205_0_Yamanote_32bpp.png")        {tmpl_std(0, 50)}
alternative_sprites(spriteset_205_mid_yama,             ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu205/205_0_Yamanote_32bpp.png")        {tmpl_std(0, 75)}
alternative_sprites(spriteset_205_midpan_yama,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu205/205_0_Yamanote_32bpp.png")        {tmpl_std(0, 100)}

alternative_sprites(spriteset_205_rev_front_yama,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu205/205_0_Yamanote_32bpp.png")        {tmpl_std_rev(0, 25)}
alternative_sprites(spriteset_205_rev_back_yama,            ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu205/205_0_Yamanote_32bpp.png")        {tmpl_std(0, 0)}
alternative_sprites(spriteset_205_rev_midhd_yama,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu205/205_0_Yamanote_32bpp.png")        {tmpl_std_rev(0, 50)}
alternative_sprites(spriteset_205_rev_mid_yama,             ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu205/205_0_Yamanote_32bpp.png")        {tmpl_std_rev(0, 75)}
alternative_sprites(spriteset_205_rev_midpan_yama,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu205/205_0_Yamanote_32bpp.png")        {tmpl_std_rev(0, 100)}

alternative_sprites(spriteset_205_revflip_front_yama,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu205/205_0_Yamanote_32bpp.png")        {tmpl_std(0, 25)}
alternative_sprites(spriteset_205_revflip_back_yama,            ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu205/205_0_Yamanote_32bpp.png")        {tmpl_std_rev(0, 0)}
alternative_sprites(spriteset_205_revflip_midhd_yama,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu205/205_0_Yamanote_32bpp.png")        {tmpl_std(0, 50)}
alternative_sprites(spriteset_205_revflip_mid_yama,             ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu205/205_0_Yamanote_32bpp.png")        {tmpl_std(0, 75)}
alternative_sprites(spriteset_205_revflip_midpan_yama,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu205/205_0_Yamanote_32bpp.png")        {tmpl_std(0, 100)}

//205 Keto
spriteset (spriteset_205_front_keto,	  	"gfx/OTHER/mucar.png")         	{ tmpl_std(0, 0) }
spriteset (spriteset_205_back_keto,	  	  "gfx/OTHER/mucar.png")          { tmpl_std(0, 0) }
spriteset (spriteset_205_mid_keto,		    "gfx/OTHER/mucar.png")          { tmpl_std(0, 0) }
spriteset (spriteset_205_midpan_keto,	    "gfx/OTHER/mucar.png")         	{ tmpl_std(0, 0) }

spriteset (spriteset_205_rev_front_keto,	  	"gfx/OTHER/mucar.png")         	{ tmpl_std(0, 0) }
spriteset (spriteset_205_rev_back_keto,	  	  "gfx/OTHER/mucar.png")          { tmpl_std(0, 0) }
spriteset (spriteset_205_rev_mid_keto,		    "gfx/OTHER/mucar.png")          { tmpl_std(0, 0) }
spriteset (spriteset_205_rev_midpan_keto,	    "gfx/OTHER/mucar.png")         	{ tmpl_std(0, 0) }

spriteset (spriteset_205_revflip_front_keto,	  	"gfx/OTHER/mucar.png")         	{ tmpl_std(0, 0) }
spriteset (spriteset_205_revflip_back_keto,	  	  "gfx/OTHER/mucar.png")          { tmpl_std(0, 0) }
spriteset (spriteset_205_revflip_mid_keto,		    "gfx/OTHER/mucar.png")          { tmpl_std(0, 0) }
spriteset (spriteset_205_revflip_midpan_keto,	    "gfx/OTHER/mucar.png")         	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_205_front_keto,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu205/205_0_KH_32bpp.png")        {tmpl_std(0, 0)}
alternative_sprites(spriteset_205_back_keto,            ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu205/205_0_KH_32bpp.png")        {tmpl_std_rev(0, 25)}
alternative_sprites(spriteset_205_mid_keto,             ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu205/205_0_KH_32bpp.png")        {tmpl_std(0, 75)}
alternative_sprites(spriteset_205_midpan_keto,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu205/205_0_KH_32bpp.png")        {tmpl_std(0, 100)}

alternative_sprites(spriteset_205_rev_front_keto,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu205/205_0_KH_32bpp.png")        {tmpl_std_rev(0, 25)}
alternative_sprites(spriteset_205_rev_back_keto,            ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu205/205_0_KH_32bpp.png")        {tmpl_std(0, 0)}
alternative_sprites(spriteset_205_rev_mid_keto,             ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu205/205_0_KH_32bpp.png")        {tmpl_std_rev(0, 75)}
alternative_sprites(spriteset_205_rev_midpan_keto,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu205/205_0_KH_32bpp.png")        {tmpl_std_rev(0, 100)}

alternative_sprites(spriteset_205_revflip_front_keto,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu205/205_0_KH_32bpp.png")        {tmpl_std(0, 25)}
alternative_sprites(spriteset_205_revflip_back_keto,            ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu205/205_0_KH_32bpp.png")        {tmpl_std_rev(0, 0)}
alternative_sprites(spriteset_205_revflip_mid_keto,             ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu205/205_0_KH_32bpp.png")        {tmpl_std(0, 75)}
alternative_sprites(spriteset_205_revflip_midpan_keto,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JNR/emu205/205_0_KH_32bpp.png")        {tmpl_std(0, 100)}
/*---END OF SECTION---*/



/*---GFX: Pantograph Positions---*/
//205 Yamanote
switch(FEAT_TRAINS,SELF, sw_205_gfx_pantograph_pos_yama, position_in_vehid_chain%12){
  1: spriteset_205_midpan_yama;
  4: spriteset_205_midpan_yama;
  7: spriteset_205_midpan_yama;
  8: spriteset_205_midhd_yama;
  default: spriteset_205_mid_yama;
}

//205 Keto
switch(FEAT_TRAINS,SELF, sw_205_gfx_pantograph_pos_keto, position_in_vehid_chain%10){
  1: spriteset_205_midpan_keto;
  4: spriteset_205_midpan_keto;
  7: spriteset_205_midpan_keto;
  default: spriteset_205_mid_keto;
}

/*---END OF SECTION---*/



/*---GFX: Train Reversing Switches---*/
//Livery Selection
switch(FEAT_TRAINS,SELF, sw_205_gfx_rev_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
1: spriteset_205_rev_front_keto;
0: spriteset_205_rev_front_yama;
}
switch(FEAT_TRAINS,SELF, sw_205_gfx_revflip_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
1: spriteset_205_revflip_front_keto;
0: spriteset_205_revflip_front_yama;
}

switch(FEAT_TRAINS,SELF, sw_205_gfx_rev_mid_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
1: spriteset_205_rev_midpan_keto;
0: spriteset_205_rev_midpan_yama;
}
switch(FEAT_TRAINS,SELF, sw_205_gfx_revflip_mid_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
1: spriteset_205_revflip_midpan_keto;
0: spriteset_205_revflip_midpan_yama;
}

switch(FEAT_TRAINS,SELF, sw_205_gfx_rev_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
1: spriteset_205_rev_mid_keto;
0: spriteset_205_rev_mid_yama;
}
switch(FEAT_TRAINS,SELF, sw_205_gfx_revflip_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
1: spriteset_205_revflip_mid_keto;
0: spriteset_205_revflip_mid_yama;
}

switch(FEAT_TRAINS,SELF, sw_205_gfx_rev_mid_hd_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){

0:spriteset_205_rev_midhd_yama;
}
switch(FEAT_TRAINS,SELF, sw_205_gfx_revflip_mid_hd_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){

0:spriteset_205_revflip_midhd_yama;
}


switch(FEAT_TRAINS,SELF, sw_205_gfx_rev_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
1: spriteset_205_rev_back_keto;
0: spriteset_205_rev_back_yama;
}
switch(FEAT_TRAINS,SELF, sw_205_gfx_revflip_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
1: spriteset_205_revflip_back_keto;
0: spriteset_205_revflip_back_yama;
}


//Check for flipped vehicles (dual_headed)
switch(FEAT_TRAINS, SELF, sw_205_gfx_rev_front_flippedcheck, vehicle_is_flipped) {
  1: sw_205_gfx_rev_front_livery;
 default: sw_205_gfx_revflip_front_livery;
}
switch(FEAT_TRAINS, SELF, sw_205_gfx_rev_mid_panto_flippedcheck, vehicle_is_flipped) {
  1: sw_205_gfx_revflip_mid_panto_livery;
 default: sw_205_gfx_rev_mid_panto_livery;
}
switch(FEAT_TRAINS, SELF, sw_205_gfx_rev_mid_flippedcheck, vehicle_is_flipped) {
  1: sw_205_gfx_revflip_mid_livery;
 default: sw_205_gfx_rev_mid_livery;
}
switch(FEAT_TRAINS, SELF, sw_205_gfx_rev_mid_hd_flippedcheck, vehicle_is_flipped) {
  1: sw_205_gfx_revflip_mid_livery;
 default: sw_205_gfx_rev_mid_livery;
}
switch(FEAT_TRAINS, SELF, sw_205_gfx_rev_back_flippedcheck, vehicle_is_flipped) {
  1: sw_205_gfx_revflip_back_livery;
 default: sw_205_gfx_rev_back_livery;
}

//Pantograph Position Testing
switch(FEAT_TRAINS, SELF, sw_205_gfx_rev_pantograph_pos_yama, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%12]){ //look at opposite position_in_vehID_chain
  1: sw_205_gfx_rev_mid_panto_flippedcheck;
  4: sw_205_gfx_rev_mid_panto_flippedcheck;
  7: sw_205_gfx_rev_mid_panto_flippedcheck;
  8: sw_205_gfx_rev_mid_hd_flippedcheck;
  default: sw_205_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_205_gfx_rev_pantograph_pos_keto, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%10]){ //look at opposite position_in_vehID_chain
  1: sw_205_gfx_rev_mid_panto_flippedcheck;
  4: sw_205_gfx_rev_mid_panto_flippedcheck;
  7: sw_205_gfx_rev_mid_panto_flippedcheck;
  default: sw_205_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS,SELF, sw_205_gfx_rev_mid_refitcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){ //look at opposite refit livery id
1: sw_205_gfx_rev_pantograph_pos_keto;
0: sw_205_gfx_rev_pantograph_pos_yama;
}

//Front/Back Car Position Testing
switch(FEAT_TRAINS, SELF, sw_205_gfx_rev_frontback_nomucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_205_gfx_rev_front_flippedcheck;
  0:sw_205_gfx_rev_back_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_205_gfx_rev_frontback_aftermucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_205_gfx_rev_back_flippedcheck;
  0:sw_205_gfx_rev_front_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_205_gfx_rev_frontback_mucarcheck, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F),STORE_TEMP(var[0x61, 0, 0x000000FF, 0x41],0),  //look at opposite position_in_vehID_chain
STORE_TEMP((position_in_consist_from_end-position_in_consist-1)-LOAD_TEMP(0), 0x10F),                               //look at what is ahead of the first vehicle in the vehID_chain
var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000:sw_205_gfx_rev_frontback_aftermucars;
  default:sw_205_gfx_rev_frontback_nomucars;
}
switch(FEAT_TRAINS, SELF, sw_205_gfx_rev_frontback_sameid, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist+1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle behind of opposite vehicle
  2019:sw_205_gfx_rev_frontback_mucarcheck;
  1000:sw_205_gfx_rev_front_flippedcheck;
  default:sw_205_gfx_rev_back_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_205_gfx_rev_frontback, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle infront of opposite vehicle
  2019:sw_205_gfx_rev_frontback_sameid;
  1000:sw_205_gfx_rev_back_flippedcheck;
  default:sw_205_gfx_rev_front_flippedcheck;
}

//ID Testing
switch(FEAT_TRAINS, SELF, sw_205_gfx_rev_idcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of opposite vehicle
  1000: sw_205_gfx_rev_mid_refitcheck;
  2019: sw_205_gfx_rev_frontback;
}
/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/
//205 Yamanote
switch(FEAT_TRAINS, PARENT, sw_205_gfx_front_revcheck_yama, vehicle_is_reversed){
   0: spriteset_205_front_yama;
   default: sw_205_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, PARENT, sw_205_gfx_back_revcheck_yama, vehicle_is_reversed){
 0: spriteset_205_back_yama;
 default: sw_205_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, SELF, sw_205_gfx_frontback_yama, vehicle_is_flipped) {
  1: sw_205_gfx_back_revcheck_yama;
 default: sw_205_gfx_front_revcheck_yama;
}

//205 Keto
switch(FEAT_TRAINS, PARENT, sw_205_gfx_front_revcheck_keto, vehicle_is_reversed){
   0: spriteset_205_front_keto;
   default: sw_205_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, PARENT, sw_205_gfx_back_revcheck_keto, vehicle_is_reversed){
 0: spriteset_205_back_keto;
 default: sw_205_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, SELF, sw_205_gfx_frontback_keto, vehicle_is_flipped) {
  1: sw_205_gfx_back_revcheck_keto;
 default: sw_205_gfx_front_revcheck_keto;
}
/*---END OF SECTION---*/



/*---GFX: Middle Car Switches---*/
//205 Yamanote
switch(FEAT_TRAINS, PARENT, sw_205_gfx_mucar_revcheck_mid_yama, vehicle_is_reversed){
 0: sw_205_gfx_pantograph_pos_yama;
 default: sw_205_gfx_rev_idcheck;
}

//205 Keto
switch(FEAT_TRAINS, PARENT, sw_205_gfx_mucar_revcheck_mid_keto, vehicle_is_reversed){
 0: sw_205_gfx_pantograph_pos_keto;
 default: sw_205_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Livery Refitting Switches---*/

//Main Switches
switch(FEAT_TRAINS, SELF, sw_205_gfx_mucar,  cargo_subtype) {
  1: sw_205_gfx_mucar_revcheck_mid_keto;
  0: sw_205_gfx_mucar_revcheck_mid_yama;
}
switch(FEAT_TRAINS, SELF, sw_205_gfx_main,  cargo_subtype) {
  1: sw_205_gfx_frontback_keto;
  0: sw_205_gfx_frontback_yama;
}

//Menu Switches
switch(FEAT_TRAINS, SELF, sw_205_subtypetext_mucar, cargo_subtype) {
  1: string(KT_LV);
  0: string(YAMANOTE_LV);
}
switch(FEAT_TRAINS, SELF, sw_205_subtypetext_main, cargo_subtype) {
  1: string(KT_LV);
  0: string(YAMANOTE_LV);
}
/*---END OF SECTION---*/



//Coupling
  switch(FEAT_TRAINS, SELF, sw_205_attach_vehid, [vehicle_type_id == emu_205 || vehicle_type_id == mu_car]) {
  0: return string(MU_UNIQUE);
  }



item(FEAT_TRAINS, emu_205) {
    property {
        name:                         string(JNR_205);
        introduction_date:            date(1984, 03, 25);
        model_life:                   10;
        vehicle_life:                 38;
        reliability_decay:            12;

        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_4D;
        cost_factor:                  17;
        running_cost_factor:          51;

        speed:                        100 km/h;
        track_type:                   NARROW_OHLE;
        power:                        480 kW;
        weight:                       34 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  1;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_ELECTRIC;
        engine_class:                 ENGINE_CLASS_ELECTRIC;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                      sw_205_gfx_main;
		    purchase:                 spriteset_205_purchase;
		    additional_text:	      return string(JNR_205_DESC);
        cargo_subtype_text:           sw_205_subtypetext_main;
        can_attach_wagon:			  sw_205_attach_vehid;
        //start_stop:                   ;
    }
    /*Multiple Unit Car*/
      livery_override(mu_car){
        default:                      sw_205_gfx_mucar;
        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_4D;
        cargo_subtype_text:           sw_205_subtypetext_mucar;
        power: 120;
        weight: 23;
      }

}
# 1 "JPplus.pnml" 4
# 1 "src/JNR/EMU/211_series.pnml" 1


/*---GFX: Year Dependent Graphics---*/

//211 Shonan
switch(FEAT_TRAINS, SELF, sw_211_gfx_year_back_shonan_pantograph, current_year){
 0..2007: spriteset_211_back_darm_shonan;
 default: spriteset_211_back_sarm_shonan;
}
switch(FEAT_TRAINS, SELF, sw_211_gfx_year_back_red_shonan_pantograph, current_year){
 0..2007: spriteset_211_revflip_back_darm_shonan;
 default: spriteset_211_revflip_back_sarm_shonan;
}
switch(FEAT_TRAINS, SELF, sw_211_gfx_year_mid_shonan_pantograph, current_year){
 0..2007: spriteset_211_mid_darm_shonan;
 default: spriteset_211_mid_sarm_shonan;
}
/*---END OF SECTION---*/



/*---GFX: Pantograph Positions---*/

//211 Nagano
switch(FEAT_TRAINS,SELF, sw_211_gfx_pantograph_pos_nagano_6car, position_in_vehid_chain%4){
  1: spriteset_211_mid_sarm_nagano;
  3: spriteset_211_mid_sarm_nagano;
  default: spriteset_211_mid_nagano;
}
switch(FEAT_TRAINS,SELF, sw_211_gfx_pantograph_pos_nagano_check, num_vehs_in_vehid_chain){
  0..3: spriteset_211_mid_nagano;
  default: sw_211_gfx_pantograph_pos_nagano_6car;
}

//211 Shonan
switch(FEAT_TRAINS,SELF, sw_211_gfx_pantograph_pos_shonan_tk, position_in_vehid_chain%8){
1:spriteset_211_mid_darm_shonan;
6:spriteset_211_mid_darm_shonan;
default: spriteset_211_mid_shonan;
}
switch(FEAT_TRAINS,SELF, sw_211_gfx_pantograph_pos_shonan_tk_ddsd, position_in_vehid_chain){
1:spriteset_211_mid_darm_shonan;
2:spriteset_211_mid_ddgrnew_shonan;
3:spriteset_211_mid_sdgrcar_shonan;
6:spriteset_211_mid_darm_shonan;
default: spriteset_211_mid_shonan;
}
switch(FEAT_TRAINS,SELF, sw_211_gfx_pantograph_pos_shonan_tk_dddd, position_in_vehid_chain){
1:spriteset_211_mid_darm_shonan;
2:spriteset_211_mid_ddgrnew_shonan;
3:spriteset_211_mid_ddgrnew_shonan;
6:spriteset_211_mid_darm_shonan;
default: spriteset_211_mid_shonan;
}
switch(FEAT_TRAINS,SELF, sw_211_gfx_pantograph_pos_shonan_ty_ddsd, position_in_vehid_chain){
1:sw_211_gfx_year_back_red_shonan_pantograph;
2:spriteset_211_mid_ddgrnew_shonan;
3:spriteset_211_mid_sdgrcar_shonan;
4:spriteset_211_front_shonan;
default: spriteset_211_mid_shonan;
}
switch(FEAT_TRAINS,SELF, sw_211_gfx_pantograph_pos_shonan_ty_dddd, position_in_vehid_chain){
1:sw_211_gfx_year_back_red_shonan_pantograph;
2:spriteset_211_mid_ddgrnew_shonan;
3:spriteset_211_mid_ddgrnew_shonan;
4:spriteset_211_front_shonan;
default: spriteset_211_mid_shonan;
}
switch(FEAT_TRAINS,SELF, sw_211_gfx_pantograph_pos_shonan_ty_ddddold, position_in_vehid_chain){
1:sw_211_gfx_year_back_red_shonan_pantograph;
2:spriteset_211_mid_ddgrnew_shonan;
3:spriteset_211_mid_ddgrold_shonan;
4:spriteset_211_front_shonan;
default: spriteset_211_mid_shonan;
}
switch(FEAT_TRAINS,SELF, sw_211_gfx_pantograph_pos_shonan_ty_ddolddd, position_in_vehid_chain){
1:sw_211_gfx_year_back_red_shonan_pantograph;
2:spriteset_211_mid_ddgrold_shonan;
3:spriteset_211_mid_ddgrnew_shonan;
4:spriteset_211_front_shonan;
default: spriteset_211_mid_shonan;
}
switch(FEAT_TRAINS, PARENT, sw_211_gfx_pantograph_pos_shonan_typecheck, cargo_subtype) {
1:sw_211_gfx_pantograph_pos_shonan_tk;
2:sw_211_gfx_pantograph_pos_shonan_tk;
3:sw_211_gfx_pantograph_pos_shonan_tk_dddd;
4:sw_211_gfx_pantograph_pos_shonan_tk_ddsd;
5:sw_211_gfx_pantograph_pos_shonan_ty_dddd;
6:sw_211_gfx_pantograph_pos_shonan_ty_ddddold;
7:sw_211_gfx_pantograph_pos_shonan_ty_ddolddd;
8:sw_211_gfx_pantograph_pos_shonan_ty_ddsd;
}
switch(FEAT_TRAINS,SELF, sw_211_gfx_pantograph_pos_shonan_check, num_vehs_in_vehid_chain){
  0..3: spriteset_211_mid_shonan;
  4..7: sw_211_gfx_pantograph_pos_shonan_tk;
  default: sw_211_gfx_pantograph_pos_shonan_typecheck;
}

/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/

//211 Chukyo
switch(FEAT_TRAINS, SELF, sw_211_gfx_frontback_flipcheck_chukyo, vehicle_is_flipped){
 0: spriteset_211_front_chukyo;
 default: spriteset_211_back_chukyo;
}
switch(FEAT_TRAINS, PARENT, sw_211_gfx_frontback_revcheck_chukyo, vehicle_is_reversed){
 0: sw_211_gfx_frontback_flipcheck_chukyo;
 default: sw_211group_gfx_rev_idcheck;
}

//211 Shonan
switch(FEAT_TRAINS, SELF, sw_211_gfx_back_shonan_pantograph_check, [STORE_TEMP(position_in_vehid_chain-1, 0x10F), var[0x61, 16, 0x000000FF, 0x41]]){
0..3:    spriteset_211_back_darm_shonan;
4..255:   spriteset_211_back_shonan;
}
switch(FEAT_TRAINS, SELF, sw_211_gfx_frontback_flipcheck_panto_withcheck_shonan, vehicle_is_flipped){
 0: spriteset_211_front_shonan;
 default: sw_211_gfx_back_shonan_pantograph_check;
}
switch(FEAT_TRAINS, SELF, sw_211_gfx_frontback_flipcheck_panto_shonan, vehicle_is_flipped){
 0: spriteset_211_front_shonan;
 default: sw_211_gfx_year_back_shonan_pantograph;
}
switch(FEAT_TRAINS, SELF, sw_211_gfx_frontback_flipcheck_dupanto_shonan, vehicle_is_flipped){
 0: spriteset_211_front_shonan;
 default: spriteset_211_back_dual_shonan;
}
switch(FEAT_TRAINS, SELF, sw_211_gfx_frontback_typecheck_shonan, cargo_subtype) {
2:       sw_211_gfx_frontback_flipcheck_dupanto_shonan;
3..4:       sw_211_gfx_frontback_flipcheck_panto_withcheck_shonan;
default: sw_211_gfx_frontback_flipcheck_panto_shonan;
}
switch(FEAT_TRAINS, PARENT, sw_211_gfx_frontback_revcheck_shonan, vehicle_is_reversed){
 0: sw_211_gfx_frontback_typecheck_shonan;
 default: sw_211group_gfx_rev_idcheck;
}

//211 Boso
switch(FEAT_TRAINS, SELF, sw_211_gfx_frontback_flipcheck_spanto_boso, vehicle_is_flipped){
 0: spriteset_211_front_boso;
 default: spriteset_211_back_darm_boso;
}
switch(FEAT_TRAINS, SELF, sw_211_gfx_frontback_flipcheck_dpanto_boso, vehicle_is_flipped){
 0: spriteset_211_front_boso;
 default: spriteset_211_back_dual_boso;
}
switch(FEAT_TRAINS, PARENT, sw_211_gfx_frontback_typecheck_boso, cargo_subtype) {
9:sw_211_gfx_frontback_flipcheck_spanto_boso;
10:sw_211_gfx_frontback_flipcheck_dpanto_boso;
}
switch(FEAT_TRAINS, PARENT, sw_211_gfx_frontback_revcheck_boso, vehicle_is_reversed){
 0: sw_211_gfx_frontback_typecheck_boso;
 default: sw_211group_gfx_rev_idcheck;
}

//211 Nagano
switch(FEAT_TRAINS, SELF, sw_211_gfx_back_nagano_pantograph_check, [STORE_TEMP(position_in_vehid_chain-1, 0x10F), var[0x61, 16, 0x000000FF, 0x41]]){
0..3:    spriteset_211_back_sarm_nagano;
4..255:   spriteset_211_back_nagano;
}
switch(FEAT_TRAINS, SELF, sw_211_gfx_frontback_flipcheck_nagano, vehicle_is_flipped){
 0: spriteset_211_front_nagano;
 default: sw_211_gfx_back_nagano_pantograph_check;
}
switch(FEAT_TRAINS, PARENT, sw_211_gfx_frontback_revcheck_nagano, vehicle_is_reversed){
 0: sw_211_gfx_frontback_flipcheck_nagano;
 default: sw_211group_gfx_rev_idcheck;
}

/*---END OF SECTION---*/



/*---GFX: Middle Car Switches---*/

//211 Chukyo
switch(FEAT_TRAINS, PARENT, sw_211_gfx_mucar_revcheck_chuko, vehicle_is_reversed){
 0: spriteset_211_mid_chukyo;
 default: sw_211group_gfx_rev_idcheck;
}

//211 Shonan
switch(FEAT_TRAINS, PARENT, sw_211_gfx_mucar_revcheck_shonan, vehicle_is_reversed){
 0: sw_211_gfx_pantograph_pos_shonan_check;
 default: sw_211group_gfx_rev_idcheck;
}

//211 Boso
switch(FEAT_TRAINS, PARENT, sw_211_gfx_mucar_revcheck_boso, vehicle_is_reversed){
 0: spriteset_211_mid_boso;
 default: sw_211group_gfx_rev_idcheck;
}

//211 Nagano
switch(FEAT_TRAINS, PARENT, sw_211_gfx_mucar_revcheck_nagano, vehicle_is_reversed){
 0: sw_211_gfx_pantograph_pos_nagano_check;
 default: sw_211group_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Livery Refitting Switches---*/

//Main Switches
switch(FEAT_TRAINS, SELF, sw_211_gfx_mucar,  cargo_subtype) {
11: sw_211_gfx_mucar_revcheck_nagano;
10: sw_211_gfx_mucar_revcheck_boso;
9:  sw_211_gfx_mucar_revcheck_boso;
8:  sw_211_gfx_mucar_revcheck_shonan;
7:  sw_211_gfx_mucar_revcheck_shonan;
6:  sw_211_gfx_mucar_revcheck_shonan;
5:  sw_211_gfx_mucar_revcheck_shonan;
4:  sw_211_gfx_mucar_revcheck_shonan;
3:  sw_211_gfx_mucar_revcheck_shonan;
2:  sw_211_gfx_mucar_revcheck_shonan;
1:  sw_211_gfx_mucar_revcheck_shonan;
0:  sw_211_gfx_mucar_revcheck_chuko;
}
switch(FEAT_TRAINS, SELF, sw_211_gfx_main,  cargo_subtype) {
11: sw_211_gfx_frontback_revcheck_nagano;
10: sw_211_gfx_frontback_revcheck_boso;
9:  sw_211_gfx_frontback_revcheck_boso;
8:  sw_211_gfx_frontback_revcheck_shonan;
7:  sw_211_gfx_frontback_revcheck_shonan;
6:  sw_211_gfx_frontback_revcheck_shonan;
5:  sw_211_gfx_frontback_revcheck_shonan;
4:  sw_211_gfx_frontback_revcheck_shonan;
3:  sw_211_gfx_frontback_revcheck_shonan;
2:  sw_211_gfx_frontback_revcheck_shonan;
1:  sw_211_gfx_frontback_revcheck_shonan;
0:  sw_211_gfx_frontback_revcheck_chukyo;
}

//Menu Switches
switch(FEAT_TRAINS, SELF, sw_211_subtypetext_mucar, cargo_subtype) {
11: string(NAGANO_LV);
10: string(CHIBA_LV_TWOP);
9: string(CHIBA_LV);
8: string(SHONAN_TY_DDSD_LV);
7: string(SHONAN_TY_DDoldDD_LV);
6: string(SHONAN_TY_DDDDold_LV);
5: string(SHONAN_TY_DDDD_LV);
4: string(SHONAN_TK_DDSD_LV);
3: string(SHONAN_TK_DDDD_LV);
2: string(SHONAN_LV_TWOP);
1: string(SHONAN_LV);
0: string(CHUKYO_LV);
}
switch(FEAT_TRAINS, SELF, sw_211_subtypetext_main, cargo_subtype) {
11: string(NAGANO_LV);
10: string(CHIBA_LV_TWOP);
9: string(CHIBA_LV);
8: string(SHONAN_TY_DDSD_LV);
7: string(SHONAN_TY_DDoldDD_LV);
6: string(SHONAN_TY_DDDDold_LV);
5: string(SHONAN_TY_DDDD_LV);
4: string(SHONAN_TK_DDSD_LV);
3: string(SHONAN_TK_DDDD_LV);
2: string(SHONAN_LV_TWOP);
1: string(SHONAN_LV);
0: string(CHUKYO_LV);
}
/*---END OF SECTION---*/


//Coupling
  switch(FEAT_TRAINS, SELF, sw_211_attach_vehid, [vehicle_type_id == emu_211 || vehicle_type_id == emu_21156 ||vehicle_type_id == emu_213 || vehicle_type_id == emu_313 || vehicle_type_id == emu_311 || vehicle_type_id == mu_car]) {
  0: return string(MU_UNIQUE);
  }


item(FEAT_TRAINS, emu_211) {
    property {
        name:                         string(JNR_211);
        introduction_date:            date(1985, 02, 11);
        model_life:                   12;
        vehicle_life:                 40;
        reliability_decay:            14;

        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_3D;
        cost_factor:                  17;
        running_cost_factor:          51;

        speed:                        110 km/h;
        track_type:                   NARROW_OHLE;
        power:                        480 kW;
        weight:                       35 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  1;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_ELECTRIC;
        engine_class:                 ENGINE_CLASS_ELECTRIC;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                      sw_211_gfx_main;
		    purchase:                 spriteset_211_purchase;
		    additional_text:	      return string(JNR_211_DESC);
        cargo_subtype_text:           sw_211_subtypetext_main;
        can_attach_wagon:			  sw_211_attach_vehid;
        //start_stop:                   ;
    }
    /*Multiple Unit Car*/
      livery_override(mu_car){
        default:                      sw_211_gfx_mucar;
        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_3D;
        cargo_subtype_text:           sw_211_subtypetext_mucar;
        power: 120;
        weight: 25;
      }

}
# 1 "JPplus.pnml" 4
# 1 "src/JNR/EMU/213_series.pnml" 1


/*---GFX: Year Dependent Graphics---*/

//213 Shonan
switch(FEAT_TRAINS, SELF, sw_213_gfx_year_back_shonan_pantograph, current_year){
 0..2007: spriteset_213_back_darm_shonan;
 default: spriteset_213_back_sarm_shonan;
}
switch(FEAT_TRAINS, SELF, sw_213_gfx_year_front_shonan, current_year){
 0..2010: spriteset_213_front_old_shonan;
 default: spriteset_213_front_new_shonan;
}
/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/

//213 JRwest
switch(FEAT_TRAINS, SELF, sw_213_gfx_front_liverycheck_jrw, cargo_subtype) {
6:spriteset_213_front_s5;
5:spriteset_213_front_s4;
4:spriteset_213_front_s3;
3:spriteset_213_front_s2;
2:spriteset_213_front_s1;
default:spriteset_213_front_jrw;
}
switch(FEAT_TRAINS, SELF, sw_213_gfx_frontback_flipcheck_jrw, vehicle_is_flipped){
 0: sw_213_gfx_front_liverycheck_jrw;
 default: spriteset_213_back_jrw;
}
switch(FEAT_TRAINS, PARENT, sw_213_gfx_frontback_revcheck_jrw, vehicle_is_reversed){
 0: sw_213_gfx_frontback_flipcheck_jrw;
 default: sw_211group_gfx_rev_idcheck;
}

//213 Shonan
switch(FEAT_TRAINS, SELF, sw_213_gfx_frontback_flipcheck_shonan, vehicle_is_flipped){
 0: sw_213_gfx_year_front_shonan;
 default: sw_213_gfx_year_back_shonan_pantograph;
}
switch(FEAT_TRAINS, PARENT, sw_213_gfx_frontback_revcheck_shonan, vehicle_is_reversed){
 0: sw_213_gfx_frontback_flipcheck_shonan;
 default: sw_211group_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Middle Car Switches---*/

//213 JRwest
switch(FEAT_TRAINS, PARENT, sw_213_gfx_mucar_revcheck_jrw, vehicle_is_reversed){
 0: spriteset_213_mid_jrw;
 default: sw_211group_gfx_rev_idcheck;
}

//213 Shonan
switch(FEAT_TRAINS, PARENT, sw_213_gfx_mucar_revcheck_shonan, vehicle_is_reversed){
 0: spriteset_213_mid_jrw;
 default: sw_211group_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Livery Refitting Switches---*/

//Main Switches
switch(FEAT_TRAINS, SELF, sw_213_gfx_mucar,  cargo_subtype) {
1:  sw_213_gfx_mucar_revcheck_shonan;
default:  sw_213_gfx_mucar_revcheck_jrw;
}
switch(FEAT_TRAINS, SELF, sw_213_gfx_main,  cargo_subtype) {
1:  sw_213_gfx_frontback_revcheck_shonan;
default:  sw_213_gfx_frontback_revcheck_jrw;
}

//Menu Switches
switch(FEAT_TRAINS, SELF, sw_213_subtypetext_mucar, cargo_subtype) {
6: string(JRWyumeji5_LV);
5: string(JRWyumeji4_LV);
4: string(JRWyumeji3_LV);
3: string(JRWyumeji2_LV);
2: string(JRWyumeji1_LV);
1: string(SHONAN_LV);
0: string(JRWbluestd_LV);
}
switch(FEAT_TRAINS, SELF, sw_213_subtypetext_main, cargo_subtype) {
6: string(JRWyumeji5_LV);
5: string(JRWyumeji4_LV);
4: string(JRWyumeji3_LV);
3: string(JRWyumeji2_LV);
2: string(JRWyumeji1_LV);
1: string(SHONAN_LV);
0: string(JRWbluestd_LV);
}
/*---END OF SECTION---*/


//Coupling
  switch(FEAT_TRAINS, SELF, sw_213_attach_vehid, [vehicle_type_id == emu_211 || vehicle_type_id == emu_21156 ||vehicle_type_id == emu_213 || vehicle_type_id == emu_313 || vehicle_type_id == emu_311 || vehicle_type_id == mu_car]) {
  0: return string(MU_UNIQUE);
  }


item(FEAT_TRAINS, emu_213) {
    property {
        name:                         string(JNR_213);
        introduction_date:            date(1987, 03, 11);
        model_life:                   4;
        vehicle_life:                 40;
        reliability_decay:            14;

        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_2D;
        cost_factor:                  17;
        running_cost_factor:          51;

        speed:                        110 km/h;
        track_type:                   NARROW_OHLE;
        power:                        480 kW;
        weight:                       35 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  1;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_ELECTRIC;
        engine_class:                 ENGINE_CLASS_ELECTRIC;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                      sw_213_gfx_main;
		    purchase:                 spriteset_213_purchase;
		    additional_text:	      return string(JNR_213_DESC);
        cargo_subtype_text:           sw_213_subtypetext_main;
        can_attach_wagon:			  sw_213_attach_vehid;
        //start_stop:                   ;
    }
    /*Multiple Unit Car*/
      livery_override(mu_car){
        default:                      sw_213_gfx_mucar;
        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_2D;
        cargo_subtype_text:           sw_213_subtypetext_mucar;
        power: 120;
        weight: 25;
      }

}
# 1 "JPplus.pnml" 4

# 1 "src/JNR/EMU/711_series.pnml" 1
# 1 "JPplus.pnml" 4


//JR-Hokkaido


//JR-East
# 1 "src/JRE/EMU/E331_series.pnml" 1
/*---GFX: Spritesets---*/

//Purchase Sprites
spriteset (spriteset_E331_purchase,	                                                     "gfx/JRE/emuE331/purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_E331_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,          "gfx/JRE/emuE331/purchase_32bpp.png")         {tmpl_purchase_dh_32bpp(0, 0)}

//E331-0 Keto
spriteset (spriteset_E331_front,	       	"gfx/JRE/emuE331/E331.png")          	{ tmpl_28px_7l(0, 0) }
spriteset (spriteset_E331_back,	        	"gfx/JRE/emuE331/E331.png")            { tmpl_28px_7l(0, 24) }
spriteset (spriteset_E331_mid_nonartic,	  "gfx/JRE/emuE331/E331.png")          	{ tmpl_28px_7l(0, 48) }
spriteset (spriteset_E331_mid_artic,	  	"gfx/JRE/emuE331/E331.png")          	{ tmpl_20px_5l(0, 72) }
spriteset (spriteset_E331_mid_articpan,		"gfx/JRE/emuE331/E331.png") 	          { tmpl_20px_5l(0, 92) }

spriteset (spriteset_E331_front_rev,	       	"gfx/JRE/emuE331/E331.png")          	{ tmpl_28px_7l_rev(0, 0) }
spriteset (spriteset_E331_back_rev,	        	"gfx/JRE/emuE331/E331.png")            { tmpl_28px_7l_rev(0, 24) }
spriteset (spriteset_E331_mid_nonartic_rev,	  "gfx/JRE/emuE331/E331.png")          	{ tmpl_28px_7l_rev(0, 48) }
spriteset (spriteset_E331_mid_artic_rev,	  	"gfx/JRE/emuE331/E331.png")          	{ tmpl_20px_5l_rev(0, 72) }
spriteset (spriteset_E331_mid_articpan_rev,		"gfx/JRE/emuE331/E331.png") 	          { tmpl_20px_5l_rev(0, 92) }

/*---END OF SECTION---*/



/*---GFX: Pantograph Positions---*/
//E331-0 Keto
switch(FEAT_TRAINS,SELF, sw_E331_gfx_pantograph_pos, position_in_vehid_chain){
  1: spriteset_E331_mid_articpan;
  5: spriteset_E331_mid_nonartic;
  6: spriteset_E331_mid_nonartic_rev;
  8: spriteset_E331_mid_articpan;
  default: spriteset_E331_mid_artic;
}
/*---END OF SECTION---*/



/*---GFX: Train Reversing Switches---*/
//Check for flipped vehicles (dual_headed)
switch(FEAT_TRAINS, SELF, sw_E331_gfx_rev_flippedcheck_cab_front, vehicle_is_flipped) {
  1: spriteset_E331_back_rev;
 default: spriteset_E331_front_rev;
}
switch(FEAT_TRAINS, SELF, sw_E331_gfx_rev_flippedcheck_cab_back, vehicle_is_flipped) {
  1: spriteset_E331_front_rev;
 default: spriteset_E331_back_rev;
}

switch(FEAT_TRAINS, SELF, sw_E331_gfx_rev_flippedcheck_mu_artic_panto, vehicle_is_flipped) {
  1: spriteset_E331_mid_articpan;
 default: spriteset_E331_mid_articpan_rev;
}

switch(FEAT_TRAINS, SELF, sw_E331_gfx_rev_flippedcheck_mu_artic_nopanto, vehicle_is_flipped) {
  1: spriteset_E331_mid_artic;
 default: spriteset_E331_mid_artic_rev;
}

switch(FEAT_TRAINS, SELF, sw_E331_gfx_rev_flippedcheck_mu_noartic, vehicle_is_flipped) {
  1: spriteset_E331_mid_nonartic;
 default: spriteset_E331_mid_nonartic_rev;
}

switch(FEAT_TRAINS, SELF, sw_E331_gfx_rev_flippedcheck_mu_noartic_rev, vehicle_is_flipped) {
  1: spriteset_E331_mid_nonartic_rev;
 default: spriteset_E331_mid_nonartic;
}

//Pantograph Position Testing
switch(FEAT_TRAINS, SELF, sw_E331_gfx_rev_pantograph_pos, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposte position_in_vehID_chain
  1: sw_E331_gfx_rev_flippedcheck_mu_artic_panto;
  5: sw_E331_gfx_rev_flippedcheck_mu_noartic;
  6: sw_E331_gfx_rev_flippedcheck_mu_noartic_rev;
  8: sw_E331_gfx_rev_flippedcheck_mu_artic_panto;
  default: sw_E331_gfx_rev_flippedcheck_mu_artic_nopanto;
}

//ID Testing
switch(FEAT_TRAINS, SELF, sw_E331_gfx_rev_cab_idcheck_behind, [STORE_TEMP(position_in_consist_from_end-position_in_consist+1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000: sw_E331_gfx_rev_flippedcheck_cab_front;
  2022: sw_E331_gfx_rev_flippedcheck_cab_back;
}
switch(FEAT_TRAINS, SELF, sw_E331_gfx_rev_cab_idcheck_infront, [STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000: sw_E331_gfx_rev_flippedcheck_cab_back;
  2022: sw_E331_gfx_rev_flippedcheck_cab_front;
  default: sw_E331_gfx_rev_cab_idcheck_behind;
}
switch(FEAT_TRAINS, SELF, sw_E331_gfx_rev_cab_frontcheck, position_in_consist){
  0: sw_E331_gfx_rev_flippedcheck_cab_back;
  default: sw_E331_gfx_rev_cab_idcheck_infront;
}
switch(FEAT_TRAINS, SELF, sw_E331_gfx_rev_idcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000: sw_E331_gfx_rev_pantograph_pos;
  2022: sw_E331_gfx_rev_cab_frontcheck;
}
/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/
//E331-0 Keto
switch(FEAT_TRAINS, PARENT, sw_E331_gfx_front_revcheck, vehicle_is_reversed){
   0: spriteset_E331_front;
   default: sw_E331_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, PARENT, sw_E331_gfx_back_revcheck, vehicle_is_reversed){
 0: spriteset_E331_back_rev;
 default: sw_E331_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, SELF, sw_E331_gfx_frontback, vehicle_is_flipped) {
  1: sw_E331_gfx_back_revcheck;
 default: sw_E331_gfx_front_revcheck;
}
/*---END OF SECTION---*/



/*---GFX: Middle Car Switches---*/
//E331-0 Keto
switch(FEAT_TRAINS, PARENT, sw_E331_gfx_mucar_revcheck, vehicle_is_reversed){
 0: sw_E331_gfx_pantograph_pos;
 default: sw_E331_gfx_rev_idcheck;
}
/*---END OF SECTION---*/

//Coupling
  switch(FEAT_TRAINS, SELF, sw_E331_attach_vehid, [vehicle_type_id == emu_E331 || vehicle_type_id == mu_car]) {
  0: return string(MU_UNIQUE);
  }

//Length for MU Cars
switch(FEAT_TRAINS, SELF, sw_E331_length_pos, position_in_vehid_chain){
  5: 7;
  6: 7;
  default: 5;
}
switch(FEAT_TRAINS, SELF, sw_E331_length_pos_rev, position_in_vehid_chain_from_end){
  5: 7;
  6: 7;
  default: 5;
}
switch(FEAT_TRAINS, PARENT, sw_E331_length_pos_flipped, vehicle_is_reversed) {
  1: sw_E331_length_pos_rev;
  0: sw_E331_length_pos;
}

item(FEAT_TRAINS, emu_E331) {
    property {
        name:                         string(JRE_E331);
        introduction_date:            date(2006, 02, 04);
        model_life:                   1;
        vehicle_life:                 20;
        reliability_decay:            18;

        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_4D;
        cost_factor:                  19;
        running_cost_factor:          54;

        speed:                        120 km/h;
        track_type:                   NARROW_OHLE;
        power:                        640 kW;
        weight:                       31 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  1;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_ELECTRIC;
        engine_class:                 ENGINE_CLASS_ELECTRIC;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 7;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                sw_E331_gfx_frontback;
		    purchase:               spriteset_E331_purchase;
		    additional_text:	      return string(JRE_E331_DESC);
        can_attach_wagon:			  sw_E331_attach_vehid;
        //start_stop:                   ;
    }
    /*Multiple Unit Car*/
      livery_override(mu_car){
        default:                      sw_E331_gfx_mucar_revcheck;
        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_4D;
        power: 80;
        weight: 20;
        length: sw_E331_length_pos_flipped;
      }

}
# 1 "JPplus.pnml" 4
# 1 "src/JRE/EMU/E235_series.pnml" 1
/*---GFX: Spritesets---*/

//purchase sprites
spriteset (spriteset_E235_purchase,       	                                             "gfx/JRE/emuE235/purchase.png")            { tmpl_purchase_dh(0, 0) }
alternative_sprites(spriteset_E235_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,         "gfx/JRE/emuE235/purchase_32bpp.png")         {tmpl_purchase_dh_32bpp(0, 0)}
//E235-0 Yamanote
spriteset (spriteset_E235_front_yama,		      "gfx/JRE/emuE235/yamanote.png")         	{ tmpl_std(0, 0) }
spriteset (spriteset_E235_back_yama,	      	"gfx/JRE/emuE235/yamanote.png")          { tmpl_std(0, 25) }
spriteset (spriteset_E235_middle_yama,		    "gfx/JRE/emuE235/yamanote.png")        	{ tmpl_std(0, 50) }
spriteset (spriteset_E235_midpan_yama,		    "gfx/JRE/emuE235/yamanote.png") 	        { tmpl_std(0, 75) }
spriteset (spriteset_E235_midpant_yama,	      "gfx/JRE/emuE235/yamanote.png")        	{ tmpl_std(0, 100) }
spriteset (spriteset_E235_front_yama_rev,		  "gfx/JRE/emuE235/yamanote.png")         	{ tmpl_std_rev(0, 0) }
spriteset (spriteset_E235_back_yama_rev,	  	"gfx/JRE/emuE235/yamanote.png")          { tmpl_std_rev(0, 25) }
spriteset (spriteset_E235_middle_yama_rev,		"gfx/JRE/emuE235/yamanote.png")        	{ tmpl_std_rev(0, 50) }
spriteset (spriteset_E235_midpan_yama_rev,		"gfx/JRE/emuE235/yamanote.png") 	        { tmpl_std_rev(0, 75) }
spriteset (spriteset_E235_midpant_yama_rev,	  "gfx/JRE/emuE235/yamanote.png")        	{ tmpl_std_rev(0, 100) }
//E235-1000 Yokosuka
spriteset (spriteset_E235_front_yoko,	      	"gfx/JRE/emuE235/yokosuka.png")          { tmpl_std(0, 0) }
spriteset (spriteset_E235_back_yoko,        	"gfx/JRE/emuE235/yokosuka.png")          { tmpl_std(0, 25) }
spriteset (spriteset_E235_middle_yoko,	    	"gfx/JRE/emuE235/yokosuka.png")          { tmpl_std(0, 50) }
spriteset (spriteset_E235_midpan_yoko,	    	"gfx/JRE/emuE235/yokosuka.png") 	        { tmpl_std(0, 75) }
spriteset (spriteset_E235_midpant_yoko,     	"gfx/JRE/emuE235/yokosuka.png")          { tmpl_std(0, 100) }
spriteset (spriteset_E235_middd_yoko,       	"gfx/JRE/emuE235/yokosuka.png")          { tmpl_std(0, 125) }
spriteset (spriteset_E235_front_yoko_rev,	  	"gfx/JRE/emuE235/yokosuka.png")          { tmpl_std_rev(0, 0) }
spriteset (spriteset_E235_back_yoko_rev,    	"gfx/JRE/emuE235/yokosuka.png")          { tmpl_std_rev(0, 25) }
spriteset (spriteset_E235_middle_yoko_rev,		"gfx/JRE/emuE235/yokosuka.png")          { tmpl_std_rev(0, 50) }
spriteset (spriteset_E235_midpan_yoko_rev,		"gfx/JRE/emuE235/yokosuka.png") 	        { tmpl_std_rev(0, 75) }
spriteset (spriteset_E235_midpant_yoko_rev, 	"gfx/JRE/emuE235/yokosuka.png")          { tmpl_std_rev(0, 100) }
spriteset (spriteset_E235_middd_yoko_rev,   	"gfx/JRE/emuE235/yokosuka.png")          { tmpl_std_rev(0, 125) }
/*---END OF SECTION---*/



/*---GFX: Pantograph Positions---*/
//E235-0 Yamanote
switch(FEAT_TRAINS,SELF, sw_E235_gfx_pantograph_pos_yama, position_in_vehid_chain%11){
  2: spriteset_E235_midpan_yama;
  5: spriteset_E235_midpant_yama;
  8: spriteset_E235_midpan_yama;
  default: spriteset_E235_middle_yama;
}

//E235-1000 Yokosuka
switch(FEAT_TRAINS,SELF, sw_E235_gfx_pantograph_pos_yoko, position_in_vehid_chain%11){
  1: spriteset_E235_midpant_yoko;
  5: spriteset_E235_midpan_yoko;
  7: spriteset_E235_midpan_yoko;
  default: spriteset_E235_middle_yoko;
}
/*---END OF SECTION---*/



/*---GFX: Train Reversing Switches---*/
//Livery Selection
switch(FEAT_TRAINS,SELF, sw_E235_gfx_rev_cab_livery_back, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  1: spriteset_E235_back_yoko_rev;
  0: spriteset_E235_back_yama_rev;
}
switch(FEAT_TRAINS,SELF, sw_E235_gfx_rev_cab_livery_front, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  1: spriteset_E235_front_yoko_rev;
  0: spriteset_E235_front_yama_rev;
}
switch(FEAT_TRAINS,SELF, sw_E235_gfx_rev_cab_livery_front_flipped, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  1: spriteset_E235_front_yoko;
  0: spriteset_E235_front_yama;
}
switch(FEAT_TRAINS,SELF, sw_E235_gfx_rev_mucar_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  2: spriteset_E235_middd_yoko_rev;
  1: spriteset_E235_middle_yoko_rev;
  0: spriteset_E235_middle_yama_rev;
}
switch(FEAT_TRAINS,SELF, sw_E235_gfx_rev_mucar_livery_flipped, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  2: spriteset_E235_middd_yoko;
  1: spriteset_E235_middle_yoko;
  0: spriteset_E235_middle_yama;
}
switch(FEAT_TRAINS,SELF, sw_E235_gfx_rev_pantograph_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  2: spriteset_E235_middd_yoko_rev;
  1: spriteset_E235_midpan_yoko_rev;
  0: spriteset_E235_midpan_yama_rev;
}
switch(FEAT_TRAINS,SELF, sw_E235_gfx_rev_pantograph_livery_flipped, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  2: spriteset_E235_middd_yoko;
  1: spriteset_E235_midpan_yoko;
  0: spriteset_E235_midpan_yama;
}
switch(FEAT_TRAINS,SELF, sw_E235_gfx_rev_pantograph_dual_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  2: spriteset_E235_middd_yoko_rev;
  1: spriteset_E235_midpant_yoko_rev;
  0: spriteset_E235_midpant_yama_rev;
}
switch(FEAT_TRAINS,SELF, sw_E235_gfx_rev_pantograph_dual_livery_flipped, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  2: spriteset_E235_middd_yoko;
  1: spriteset_E235_midpant_yoko;
  0: spriteset_E235_midpant_yama;
}

//Check for flipped vehicles (dual_headed)
switch(FEAT_TRAINS, SELF, sw_E235_gfx_rev_flippedcheck_cab_front, vehicle_is_flipped) {
  1: sw_E235_gfx_rev_cab_livery_back;
 default: sw_E235_gfx_rev_cab_livery_front;
}
switch(FEAT_TRAINS, SELF, sw_E235_gfx_rev_flippedcheck_cab_back, vehicle_is_flipped) {
  1: sw_E235_gfx_rev_cab_livery_front;
 default: sw_E235_gfx_rev_cab_livery_back;
}

switch(FEAT_TRAINS, SELF, sw_E235_gfx_rev_flippedcheck_pantograph_single, vehicle_is_flipped) {
  1: sw_E235_gfx_rev_pantograph_livery_flipped;
 default: sw_E235_gfx_rev_pantograph_livery;
}

switch(FEAT_TRAINS, SELF, sw_E235_gfx_rev_flippedcheck_pantogaph_dual, vehicle_is_flipped) {
  1: sw_E235_gfx_rev_pantograph_dual_livery_flipped;
 default: sw_E235_gfx_rev_pantograph_dual_livery;
}

switch(FEAT_TRAINS, SELF, sw_E235_gfx_rev_flippedcheck_mucar, vehicle_is_flipped) {
  1: sw_E235_gfx_rev_mucar_livery_flipped;
 default: sw_E235_gfx_rev_mucar_livery;
}

//Pantograph Position Testing
switch(FEAT_TRAINS, SELF, sw_E235_gfx_rev_pantograph_pos_yoko, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%11]){ //look at opposte position_in_vehID_chain
  1: sw_E235_gfx_rev_flippedcheck_pantogaph_dual;
  5: sw_E235_gfx_rev_flippedcheck_pantograph_single;
  7: sw_E235_gfx_rev_flippedcheck_pantograph_single;
  default: sw_E235_gfx_rev_flippedcheck_mucar;
}
switch(FEAT_TRAINS, SELF, sw_E235_gfx_rev_pantograph_pos_yama, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%11]){ //look at opposte position_in_vehID_chain
  2: sw_E235_gfx_rev_flippedcheck_pantograph_single;
  5: sw_E235_gfx_rev_flippedcheck_pantogaph_dual;
  8: sw_E235_gfx_rev_flippedcheck_pantograph_single;
  default: sw_E235_gfx_rev_flippedcheck_mucar;
}
switch(FEAT_TRAINS,SELF, sw_E235_gfx_rev_pantograph_pos, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  2: sw_E235_gfx_rev_pantograph_pos_yama;
  1: sw_E235_gfx_rev_pantograph_pos_yoko;
  0: sw_E235_gfx_rev_pantograph_pos_yama;
}

//ID Testing
switch(FEAT_TRAINS, SELF, sw_E235_gfx_rev_cab_idcheck_behind, [STORE_TEMP(position_in_consist_from_end-position_in_consist+1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000: sw_E235_gfx_rev_flippedcheck_cab_front;
  2013: sw_E235_gfx_rev_flippedcheck_cab_back;
}
switch(FEAT_TRAINS, SELF, sw_E235_gfx_rev_cab_idcheck_infront, [STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000: sw_E235_gfx_rev_flippedcheck_cab_back;
  2013: sw_E235_gfx_rev_flippedcheck_cab_front;
  default: sw_E235_gfx_rev_cab_idcheck_behind;
}
switch(FEAT_TRAINS, SELF, sw_E235_gfx_rev_cab_frontcheck, position_in_consist){
  0: sw_E235_gfx_rev_cab_livery_front_flipped;
  default: sw_E235_gfx_rev_cab_idcheck_infront;
}
switch(FEAT_TRAINS, SELF, sw_E235_gfx_rev_idcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000: sw_E235_gfx_rev_pantograph_pos;
  2013: sw_E235_gfx_rev_cab_frontcheck;
}
/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/
//E235-0 Yamanote
switch(FEAT_TRAINS, PARENT, sw_E235_gfx_front_revcheck_yama, vehicle_is_reversed){
   0: spriteset_E235_front_yama;
   default: sw_E235_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, PARENT, sw_E235_gfx_back_revcheck_yama, vehicle_is_reversed){
 0: spriteset_E235_back_yama_rev;
 default: sw_E235_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, SELF, sw_E235_gfx_frontback_yama, vehicle_is_flipped) {
  1: sw_E235_gfx_back_revcheck_yama;
 default: sw_E235_gfx_front_revcheck_yama;
}

//E235-1000 Yokosuka
switch(FEAT_TRAINS, PARENT, sw_E235_gfx_front_revcheck_yoko, vehicle_is_reversed){
   0: spriteset_E235_front_yoko;
   default: sw_E235_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, PARENT, sw_E235_gfx_back_revcheck_yoko, vehicle_is_reversed){
 0: spriteset_E235_back_yoko_rev;
 default: sw_E235_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, SELF, sw_E235_gfx_frontback_yoko, vehicle_is_flipped) {
  1: sw_E235_gfx_back_revcheck_yoko;
 default: sw_E235_gfx_front_revcheck_yoko;
}
/*---END OF SECTION---*/



/*---GFX: Middle Car Switches---*/
//E235-0 Yamanote
switch(FEAT_TRAINS, PARENT, sw_E235_gfx_mucar_revcheck_mid_yama, vehicle_is_reversed){
 0: sw_E235_gfx_pantograph_pos_yama;
 default: sw_E235_gfx_rev_idcheck;
}

//E235-1000 Yokosuka
switch(FEAT_TRAINS, PARENT, sw_E235_gfx_mucar_revcheck_dd_yoko, vehicle_is_reversed){
 0: spriteset_E235_middd_yoko;
 default: sw_E235_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, PARENT, sw_E235_gfx_mucar_revcheck_mid_yoko, vehicle_is_reversed){
 0: sw_E235_gfx_pantograph_pos_yoko;
 default: sw_E235_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Livery Refitting Switches---*/

//Main Switches
switch(FEAT_TRAINS, SELF, sw_E235_gfx_mucar,  cargo_subtype) {
  2: sw_E235_gfx_mucar_revcheck_dd_yoko;
  1: sw_E235_gfx_mucar_revcheck_mid_yoko;
  0: sw_E235_gfx_mucar_revcheck_mid_yama;
}
switch(FEAT_TRAINS, SELF, sw_E235_gfx_main,  cargo_subtype) {
  1: sw_E235_gfx_frontback_yoko;
  0: sw_E235_gfx_frontback_yama;
}

//Menu Switches
switch(FEAT_TRAINS, SELF, sw_E235_subtypetext_mucar, cargo_subtype) {
  2: string(YOKOSUKA_LV_DD);
  1: string(YOKOSUKA_LV);
  0: string(YAMANOTE_LV);
}
switch(FEAT_TRAINS, SELF, sw_E235_subtypetext_main, cargo_subtype) {
  1: string(YOKOSUKA_LV);
  0: string(YAMANOTE_LV);
}
/*---END OF SECTION---*/



//Coupling
  switch(FEAT_TRAINS, SELF, sw_E235_attach_vehid, [vehicle_type_id == emu_E235 || vehicle_type_id == mu_car]) {
  0: return string(MU_UNIQUE);
  }



item(FEAT_TRAINS, emu_E235) {
    property {
        name:                         string(JRE_E235);
        introduction_date:            date(2015, 11, 30);
        model_life:                   0;
        vehicle_life:                 40;
        reliability_decay:            12;

        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_4D;
        cost_factor:                  17;
        running_cost_factor:          51;

        speed:                       	120 km/h;
        track_type:                   NARROW_OHLE;
        power:                        560 kW;
        weight:                       32 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  1;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_ELECTRIC;
        engine_class:                 ENGINE_CLASS_ELECTRIC;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                      sw_E235_gfx_main;
		    purchase:                     spriteset_E235_purchase;
		    additional_text:			        return string(JRE_E235_DESC);
        cargo_subtype_text:           sw_E235_subtypetext_main;
        can_attach_wagon:			        sw_E235_attach_vehid;
        //start_stop:                   ;
    }
    /*Multiple Unit Car*/
      livery_override(mu_car){
        default:                      sw_E235_gfx_mucar;
        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_4D;
        cargo_subtype_text:           sw_E235_subtypetext_mucar;
        power: 280;
        weight: 23;
      }

}
# 1 "JPplus.pnml" 4
# 1 "src/JRE/EMU/E233_series.pnml" 1
/*---GFX: Spritesets---*/

//purchase sprites
spriteset (spriteset_E233_purchase,	                                                     "gfx/JRE/emuE233/purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_E233_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,         "gfx/JRE/emuE233/purchase_32bpp.png")         {tmpl_purchase_dh_32bpp(0, 0)}

//E233-0 Chou Line
spriteset (spriteset_E233_front_chou,	  	                                               "gfx/JRE/emuE233/E233-0_v2.png")          	   {tmpl_std(0, 0)}
spriteset (spriteset_E233_back_chou,	  	                                               "gfx/JRE/emuE233/E233-0_v2.png")              {tmpl_std(0, 25)}
spriteset (spriteset_E233_middle_chou,		                                               "gfx/JRE/emuE233/E233-0_v2.png")          	   {tmpl_std(0, 50)}
spriteset (spriteset_E233_midpan_chou,		                                               "gfx/JRE/emuE233/E233-0_v2.png") 	           {tmpl_std(0, 75)}
spriteset (spriteset_E233_midpant_chou,	                                                 "gfx/JRE/emuE233/E233-0_v2.png")            	 {tmpl_std(0, 100)}
spriteset (spriteset_E233_middd_chou,                                                    "gfx/JRE/emuE233/E233-0_v2.png")              {tmpl_std(0, 125)}
alternative_sprites(spriteset_E233_front_chou, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRE/emuE233/E233-0_v2_32bpp.png")        {tmpl_std(0, 0)}
alternative_sprites(spriteset_E233_back_chou, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,        "gfx/JRE/emuE233/E233-0_v2_32bpp.png")        {tmpl_std(0, 25)}
alternative_sprites(spriteset_E233_middle_chou, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,      "gfx/JRE/emuE233/E233-0_v2_32bpp.png")        {tmpl_std(0, 50)}
alternative_sprites(spriteset_E233_midpan_chou, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,      "gfx/JRE/emuE233/E233-0_v2_32bpp.png")        {tmpl_std(0, 75)}
alternative_sprites(spriteset_E233_midpant_chou, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,     "gfx/JRE/emuE233/E233-0_v2_32bpp.png")        {tmpl_std(0, 100)}
alternative_sprites(spriteset_E233_middd_chou, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRE/emuE233/E233-0_v2_32bpp.png")        {tmpl_std(0, 125)}
spriteset (spriteset_E233_front_chou_rev,	  	                                           "gfx/JRE/emuE233/E233-0_v2.png")          	   {tmpl_std_rev(0, 0)}
spriteset (spriteset_E233_back_chou_rev,	 	  	                                         "gfx/JRE/emuE233/E233-0_v2.png")              {tmpl_std_rev(0, 25)}
spriteset (spriteset_E233_middle_chou_rev,	 		                                         "gfx/JRE/emuE233/E233-0_v2.png")          	   {tmpl_std_rev(0, 50)}
spriteset (spriteset_E233_midpan_chou_rev,	 		                                         "gfx/JRE/emuE233/E233-0_v2.png") 	           {tmpl_std_rev(0, 75)}
spriteset (spriteset_E233_midpant_chou_rev,	 	                                           "gfx/JRE/emuE233/E233-0_v2.png")            	 {tmpl_std_rev(0, 100)}
spriteset (spriteset_E233_middd_chou_rev,	                                               "gfx/JRE/emuE233/E233-0_v2.png")              {tmpl_std_rev(0, 125)}
alternative_sprites(spriteset_E233_front_chou_rev, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,   "gfx/JRE/emuE233/E233-0_v2_32bpp.png")        {tmpl_std_rev(0, 0)}
alternative_sprites(spriteset_E233_back_chou_rev, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,    "gfx/JRE/emuE233/E233-0_v2_32bpp.png")        {tmpl_std_rev(0, 25)}
alternative_sprites(spriteset_E233_middle_chou_rev, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,  "gfx/JRE/emuE233/E233-0_v2_32bpp.png")        {tmpl_std_rev(0, 50)}
alternative_sprites(spriteset_E233_midpan_chou_rev, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,  "gfx/JRE/emuE233/E233-0_v2_32bpp.png")        {tmpl_std_rev(0, 75)}
alternative_sprites(spriteset_E233_midpant_chou_rev, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "gfx/JRE/emuE233/E233-0_v2_32bpp.png")        {tmpl_std_rev(0, 100)}
alternative_sprites(spriteset_E233_middd_chou_rev, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,   "gfx/JRE/emuE233/E233-0_v2_32bpp.png")        {tmpl_std_rev(0, 125)}

//E233-1000 Keihin-Touhoku Line
spriteset (spriteset_E233_front_kt,	  	                                                    "gfx/JRE/emuE233/E233-1000_v2.png")           {tmpl_std(0, 0)}
spriteset (spriteset_E233_back_kt,	  	                                                    "gfx/JRE/emuE233/E233-1000_v2.png")           {tmpl_std(0, 25)}
spriteset (spriteset_E233_middle_kt,		                                                    "gfx/JRE/emuE233/E233-1000_v2.png")          	{tmpl_std(0, 50)}
spriteset (spriteset_E233_midpan_kt,		                                                    "gfx/JRE/emuE233/E233-1000_v2.png") 	        {tmpl_std(0, 75)}
spriteset (spriteset_E233_midpant_kt,	                                                      "gfx/JRE/emuE233/E233-1000_v2.png")          	{tmpl_std(0, 100)}
alternative_sprites(spriteset_E233_front_kt, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,            "gfx/JRE/emuE233/E233-1000_v2_32bpp.png")     {tmpl_std(0, 0)}
alternative_sprites(spriteset_E233_back_kt, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRE/emuE233/E233-1000_v2_32bpp.png")     {tmpl_std(0, 25)}
alternative_sprites(spriteset_E233_middle_kt, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,           "gfx/JRE/emuE233/E233-1000_v2_32bpp.png")     {tmpl_std(0, 50)}
alternative_sprites(spriteset_E233_midpan_kt, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,           "gfx/JRE/emuE233/E233-1000_v2_32bpp.png")     {tmpl_std(0, 75)}
alternative_sprites(spriteset_E233_midpant_kt, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,          "gfx/JRE/emuE233/E233-1000_v2_32bpp.png")     {tmpl_std(0, 100)}
spriteset (spriteset_E233_front_kt_rev,	  	                                                "gfx/JRE/emuE233/E233-1000_v2.png")          	{tmpl_std_rev(0, 0)}
spriteset (spriteset_E233_back_kt_rev,		  	                                              "gfx/JRE/emuE233/E233-1000_v2.png")           {tmpl_std_rev(0, 25)}
spriteset (spriteset_E233_middle_kt_rev,			                                              "gfx/JRE/emuE233/E233-1000_v2.png")          	{tmpl_std_rev(0, 50)}
spriteset (spriteset_E233_midpan_kt_rev,			                                              "gfx/JRE/emuE233/E233-1000_v2.png") 	        {tmpl_std_rev(0, 75)}
spriteset (spriteset_E233_midpant_kt_rev,		                                                "gfx/JRE/emuE233/E233-1000_v2.png")          	{tmpl_std_rev(0, 100)}
alternative_sprites(spriteset_E233_front_kt_rev,	 ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,      "gfx/JRE/emuE233/E233-1000_v2_32bpp.png")     {tmpl_std_rev(0, 0)}
alternative_sprites(spriteset_E233_back_kt_rev,	 ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,        "gfx/JRE/emuE233/E233-1000_v2_32bpp.png")     {tmpl_std_rev(0, 25)}
alternative_sprites(spriteset_E233_middle_kt_rev,	 ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,      "gfx/JRE/emuE233/E233-1000_v2_32bpp.png")     {tmpl_std_rev(0, 50)}
alternative_sprites(spriteset_E233_midpan_kt_rev,	 ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,      "gfx/JRE/emuE233/E233-1000_v2_32bpp.png")     {tmpl_std_rev(0, 75)}
alternative_sprites(spriteset_E233_midpant_kt_rev,	 ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,    "gfx/JRE/emuE233/E233-1000_v2_32bpp.png")     {tmpl_std_rev(0, 100)}

//E233-3000 Tokaido
spriteset (spriteset_E233_front_tk,	                                                   	 "gfx/JRE/emuE233/E233-3000_v2.png")           {tmpl_std(0, 0)}
spriteset (spriteset_E233_back_tk,	  	                                                 "gfx/JRE/emuE233/E233-3000_v2.png")           {tmpl_std(0, 25)}
spriteset (spriteset_E233_middle_tk,		                                                 "gfx/JRE/emuE233/E233-3000_v2.png")           {tmpl_std(0, 50)}
spriteset (spriteset_E233_midpan_tk,		                                                 "gfx/JRE/emuE233/E233-3000_v2.png") 	         {tmpl_std(0, 75)}
spriteset (spriteset_E233_midpant_tk,	                                                   "gfx/JRE/emuE233/E233-3000_v2.png")           {tmpl_std(0, 100)}
spriteset (spriteset_E233_middd_tk,   	                                                 "gfx/JRE/emuE233/E233-3000_v2.png")           {tmpl_std(0, 125)}
alternative_sprites(spriteset_E233_front_tk, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,         "gfx/JRE/emuE233/E233-3000_v2_32bpp.png")     {tmpl_std(0, 0)}
alternative_sprites(spriteset_E233_back_tk, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,          "gfx/JRE/emuE233/E233-3000_v2_32bpp.png")     {tmpl_std(0, 25)}
alternative_sprites(spriteset_E233_middle_tk, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,        "gfx/JRE/emuE233/E233-3000_v2_32bpp.png")     {tmpl_std(0, 50)}
alternative_sprites(spriteset_E233_midpan_tk, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,        "gfx/JRE/emuE233/E233-3000_v2_32bpp.png")     {tmpl_std(0, 75)}
alternative_sprites(spriteset_E233_midpant_tk, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRE/emuE233/E233-3000_v2_32bpp.png")     {tmpl_std(0, 100)}
alternative_sprites(spriteset_E233_middd_tk, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,         "gfx/JRE/emuE233/E233-3000_v2_32bpp.png")     {tmpl_std(0, 125)}
spriteset (spriteset_E233_front_tk_rev,	 	                                               "gfx/JRE/emuE233/E233-3000_v2.png") 	         {tmpl_std_rev(0, 0)}
spriteset (spriteset_E233_back_tk_rev,	 	                                               "gfx/JRE/emuE233/E233-3000_v2.png")           {tmpl_std_rev(0, 25)}
spriteset (spriteset_E233_middle_tk_rev,		                                             "gfx/JRE/emuE233/E233-3000_v2.png") 	         {tmpl_std_rev(0, 50)}
spriteset (spriteset_E233_midpan_tk_rev,		                                             "gfx/JRE/emuE233/E233-3000_v2.png") 	         {tmpl_std_rev(0, 75)}
spriteset (spriteset_E233_midpant_tk_rev,	                                               "gfx/JRE/emuE233/E233-3000_v2.png") 	         {tmpl_std_rev(0, 100)}
spriteset (spriteset_E233_middd_tk_rev, 	                                               "gfx/JRE/emuE233/E233-3000_v2.png")           {tmpl_std_rev(0, 125)}
alternative_sprites(spriteset_E233_front_tk_rev, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,     "gfx/JRE/emuE233/E233-3000_v2_32bpp.png")     {tmpl_std_rev(0, 0)}
alternative_sprites(spriteset_E233_back_tk_rev, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,      "gfx/JRE/emuE233/E233-3000_v2_32bpp.png")     {tmpl_std_rev(0, 25)}
alternative_sprites(spriteset_E233_middle_tk_rev, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,    "gfx/JRE/emuE233/E233-3000_v2_32bpp.png")     {tmpl_std_rev(0, 50)}
alternative_sprites(spriteset_E233_midpan_tk_rev, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,    "gfx/JRE/emuE233/E233-3000_v2_32bpp.png")     {tmpl_std_rev(0, 75)}
alternative_sprites(spriteset_E233_midpant_tk_rev, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,   "gfx/JRE/emuE233/E233-3000_v2_32bpp.png")     {tmpl_std_rev(0, 100)}
alternative_sprites(spriteset_E233_middd_tk_rev, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,     "gfx/JRE/emuE233/E233-3000_v2_32bpp.png")     {tmpl_std_rev(0, 125)}

//E233-5000 Keiyo Line
spriteset (spriteset_E233_front_keiyo,	  	"gfx/JRE/emuE233/E233-5000_v2.png")          	{ tmpl_std(0, 0) }
spriteset (spriteset_E233_back_keiyo,	  	"gfx/JRE/emuE233/E233-5000_v2.png")            { tmpl_std(0, 25) }
spriteset (spriteset_E233_middle_keiyo,		"gfx/JRE/emuE233/E233-5000_v2.png")          	{ tmpl_std(0, 50) }
spriteset (spriteset_E233_midpan_keiyo,		"gfx/JRE/emuE233/E233-5000_v2.png") 	          { tmpl_std(0, 75) }
spriteset (spriteset_E233_midpant_keiyo,	  "gfx/JRE/emuE233/E233-5000_v2.png")          	{ tmpl_std(0, 100) }
alternative_sprites(spriteset_E233_front_keiyo, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRE/emuE233/E233-5000_v2_32bpp.png")        {tmpl_std(0, 0)}
alternative_sprites(spriteset_E233_back_keiyo, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,        "gfx/JRE/emuE233/E233-5000_v2_32bpp.png")        {tmpl_std(0, 25)}
alternative_sprites(spriteset_E233_middle_keiyo, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,      "gfx/JRE/emuE233/E233-5000_v2_32bpp.png")        {tmpl_std(0, 50)}
alternative_sprites(spriteset_E233_midpan_keiyo, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,      "gfx/JRE/emuE233/E233-5000_v2_32bpp.png")        {tmpl_std(0, 75)}
alternative_sprites(spriteset_E233_midpant_keiyo, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,     "gfx/JRE/emuE233/E233-5000_v2_32bpp.png")        {tmpl_std(0, 100)}
spriteset (spriteset_E233_front_keiyo_rev,	  	"gfx/JRE/emuE233/E233-5000_v2.png")          	{ tmpl_std_rev(0, 0) }
spriteset (spriteset_E233_back_keiyo_rev,	  	"gfx/JRE/emuE233/E233-5000_v2.png")            { tmpl_std_rev(0, 25) }
spriteset (spriteset_E233_middle_keiyo_rev,		"gfx/JRE/emuE233/E233-5000_v2.png")          	{ tmpl_std_rev(0, 50) }
spriteset (spriteset_E233_midpan_keiyo_rev,		"gfx/JRE/emuE233/E233-5000_v2.png") 	          { tmpl_std_rev(0, 75) }
spriteset (spriteset_E233_midpant_keiyo_rev,	  "gfx/JRE/emuE233/E233-5000_v2.png")          	{ tmpl_std_rev(0, 100) }
alternative_sprites(spriteset_E233_front_keiyo_rev, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRE/emuE233/E233-5000_v2_32bpp.png")        {tmpl_std_rev(0, 0)}
alternative_sprites(spriteset_E233_back_keiyo_rev, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,        "gfx/JRE/emuE233/E233-5000_v2_32bpp.png")        {tmpl_std_rev(0, 25)}
alternative_sprites(spriteset_E233_middle_keiyo_rev, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,      "gfx/JRE/emuE233/E233-5000_v2_32bpp.png")        {tmpl_std_rev(0, 50)}
alternative_sprites(spriteset_E233_midpan_keiyo_rev, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,      "gfx/JRE/emuE233/E233-5000_v2_32bpp.png")        {tmpl_std_rev(0, 75)}
alternative_sprites(spriteset_E233_midpant_keiyo_rev, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,     "gfx/JRE/emuE233/E233-5000_v2_32bpp.png")        {tmpl_std_rev(0, 100)}

//E233-6000 Yokoyama Line
spriteset (spriteset_E233_front_yoko,	  	"gfx/JRE/emuE233/E233-6000_v2.png")          	{ tmpl_std(0, 0) }
spriteset (spriteset_E233_back_yoko,	  	"gfx/JRE/emuE233/E233-6000_v2.png")            { tmpl_std(0, 25) }
spriteset (spriteset_E233_middle_yoko,		"gfx/JRE/emuE233/E233-6000_v2.png")          	{ tmpl_std(0, 50) }
spriteset (spriteset_E233_midpan_yoko,		"gfx/JRE/emuE233/E233-6000_v2.png") 	          { tmpl_std(0, 75) }
spriteset (spriteset_E233_midpant_yoko,	  "gfx/JRE/emuE233/E233-6000_v2.png")          	{ tmpl_std(0, 100) }
alternative_sprites(spriteset_E233_front_yoko, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRE/emuE233/E233-6000_v2_32bpp.png")        {tmpl_std(0, 0)}
alternative_sprites(spriteset_E233_back_yoko, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,        "gfx/JRE/emuE233/E233-6000_v2_32bpp.png")        {tmpl_std(0, 25)}
alternative_sprites(spriteset_E233_middle_yoko, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,      "gfx/JRE/emuE233/E233-6000_v2_32bpp.png")        {tmpl_std(0, 50)}
alternative_sprites(spriteset_E233_midpan_yoko, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,      "gfx/JRE/emuE233/E233-6000_v2_32bpp.png")        {tmpl_std(0, 75)}
alternative_sprites(spriteset_E233_midpant_yoko, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,     "gfx/JRE/emuE233/E233-6000_v2_32bpp.png")        {tmpl_std(0, 100)}
spriteset (spriteset_E233_front_yoko_rev,	  	"gfx/JRE/emuE233/E233-6000_v2.png")          	{ tmpl_std_rev(0, 0) }
spriteset (spriteset_E233_back_yoko_rev,	  	"gfx/JRE/emuE233/E233-6000_v2.png")            { tmpl_std_rev(0, 25) }
spriteset (spriteset_E233_middle_yoko_rev,		"gfx/JRE/emuE233/E233-6000_v2.png")          	{ tmpl_std_rev(0, 50) }
spriteset (spriteset_E233_midpan_yoko_rev,		"gfx/JRE/emuE233/E233-6000_v2.png") 	          { tmpl_std_rev(0, 75) }
spriteset (spriteset_E233_midpant_yoko_rev,	  "gfx/JRE/emuE233/E233-6000_v2.png")          	{ tmpl_std_rev(0, 100) }
alternative_sprites(spriteset_E233_front_yoko_rev, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRE/emuE233/E233-6000_v2_32bpp.png")        {tmpl_std_rev(0, 0)}
alternative_sprites(spriteset_E233_back_yoko_rev, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,        "gfx/JRE/emuE233/E233-6000_v2_32bpp.png")        {tmpl_std_rev(0, 25)}
alternative_sprites(spriteset_E233_middle_yoko_rev, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,      "gfx/JRE/emuE233/E233-6000_v2_32bpp.png")        {tmpl_std_rev(0, 50)}
alternative_sprites(spriteset_E233_midpan_yoko_rev, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,      "gfx/JRE/emuE233/E233-6000_v2_32bpp.png")        {tmpl_std_rev(0, 75)}
alternative_sprites(spriteset_E233_midpant_yoko_rev, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,     "gfx/JRE/emuE233/E233-6000_v2_32bpp.png")        {tmpl_std_rev(0, 100)}

//E233-7000 Saikyo Line
spriteset (spriteset_E233_front_saikyo,	  	"gfx/JRE/emuE233/E233-7000_v2.png")          	{ tmpl_std(0, 0) }
spriteset (spriteset_E233_back_saikyo,	  	"gfx/JRE/emuE233/E233-7000_v2.png")            { tmpl_std(0, 25) }
spriteset (spriteset_E233_middle_saikyo,		"gfx/JRE/emuE233/E233-7000_v2.png")          	{ tmpl_std(0, 50) }
spriteset (spriteset_E233_midpan_saikyo,		"gfx/JRE/emuE233/E233-7000_v2.png") 	          { tmpl_std(0, 75) }
spriteset (spriteset_E233_midpant_saikyo,	  "gfx/JRE/emuE233/E233-7000_v2.png")          	{ tmpl_std(0, 100) }
alternative_sprites(spriteset_E233_front_saikyo, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRE/emuE233/E233-7000_v2_32bpp.png")        {tmpl_std(0, 0)}
alternative_sprites(spriteset_E233_back_saikyo, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,        "gfx/JRE/emuE233/E233-7000_v2_32bpp.png")        {tmpl_std(0, 25)}
alternative_sprites(spriteset_E233_middle_saikyo, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,      "gfx/JRE/emuE233/E233-7000_v2_32bpp.png")        {tmpl_std(0, 50)}
alternative_sprites(spriteset_E233_midpan_saikyo, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,      "gfx/JRE/emuE233/E233-7000_v2_32bpp.png")        {tmpl_std(0, 75)}
alternative_sprites(spriteset_E233_midpant_saikyo, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,     "gfx/JRE/emuE233/E233-7000_v2_32bpp.png")        {tmpl_std(0, 100)}
spriteset (spriteset_E233_front_saikyo_rev,	  	"gfx/JRE/emuE233/E233-7000_v2.png")          	{ tmpl_std_rev(0, 0) }
spriteset (spriteset_E233_back_saikyo_rev,	  	"gfx/JRE/emuE233/E233-7000_v2.png")            { tmpl_std_rev(0, 25) }
spriteset (spriteset_E233_middle_saikyo_rev,		"gfx/JRE/emuE233/E233-7000_v2.png")          	{ tmpl_std_rev(0, 50) }
spriteset (spriteset_E233_midpan_saikyo_rev,		"gfx/JRE/emuE233/E233-7000_v2.png") 	          { tmpl_std_rev(0, 75) }
spriteset (spriteset_E233_midpant_saikyo_rev,	  "gfx/JRE/emuE233/E233-7000_v2.png")          	{ tmpl_std_rev(0, 100) }
alternative_sprites(spriteset_E233_front_saikyo_rev, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRE/emuE233/E233-7000_v2_32bpp.png")        {tmpl_std_rev(0, 0)}
alternative_sprites(spriteset_E233_back_saikyo_rev, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,        "gfx/JRE/emuE233/E233-7000_v2_32bpp.png")        {tmpl_std_rev(0, 25)}
alternative_sprites(spriteset_E233_middle_saikyo_rev, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,      "gfx/JRE/emuE233/E233-7000_v2_32bpp.png")        {tmpl_std_rev(0, 50)}
alternative_sprites(spriteset_E233_midpan_saikyo_rev, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,      "gfx/JRE/emuE233/E233-7000_v2_32bpp.png")        {tmpl_std_rev(0, 75)}
alternative_sprites(spriteset_E233_midpant_saikyo_rev, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,     "gfx/JRE/emuE233/E233-7000_v2_32bpp.png")        {tmpl_std_rev(0, 100)}

//E233-8000 Nannbu Line
spriteset (spriteset_E233_front_nanbu,	  	"gfx/JRE/emuE233/E233-8000_v3.png")          	{ tmpl_std(0, 0) }
spriteset (spriteset_E233_back_nanbu,	  	"gfx/JRE/emuE233/E233-8000_v3.png")            { tmpl_std(0, 25) }
spriteset (spriteset_E233_middle_nanbu,		"gfx/JRE/emuE233/E233-8000_v3.png")          	{ tmpl_std(0, 50) }
spriteset (spriteset_E233_midpan_nanbu,		"gfx/JRE/emuE233/E233-8000_v3.png") 	          { tmpl_std(0, 75) }
spriteset (spriteset_E233_midpant_nanbu,	  "gfx/JRE/emuE233/E233-8000_v3.png")          	{ tmpl_std(0, 100) }
alternative_sprites(spriteset_E233_front_nanbu, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRE/emuE233/E233-8000_v3_32bpp.png")        {tmpl_std(0, 0)}
alternative_sprites(spriteset_E233_back_nanbu, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,        "gfx/JRE/emuE233/E233-8000_v3_32bpp.png")        {tmpl_std(0, 25)}
alternative_sprites(spriteset_E233_middle_nanbu, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,      "gfx/JRE/emuE233/E233-8000_v3_32bpp.png")        {tmpl_std(0, 50)}
alternative_sprites(spriteset_E233_midpan_nanbu, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,      "gfx/JRE/emuE233/E233-8000_v3_32bpp.png")        {tmpl_std(0, 75)}
alternative_sprites(spriteset_E233_midpant_nanbu, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,     "gfx/JRE/emuE233/E233-8000_v3_32bpp.png")        {tmpl_std(0, 100)}
spriteset (spriteset_E233_front_nanbu_rev,	  	"gfx/JRE/emuE233/E233-8000_v3.png")          	{ tmpl_std_rev(0, 0) }
spriteset (spriteset_E233_back_nanbu_rev,	  	"gfx/JRE/emuE233/E233-8000_v3.png")            { tmpl_std_rev(0, 25) }
spriteset (spriteset_E233_middle_nanbu_rev,		"gfx/JRE/emuE233/E233-8000_v3.png")          	{ tmpl_std_rev(0, 50) }
spriteset (spriteset_E233_midpan_nanbu_rev,		"gfx/JRE/emuE233/E233-8000_v3.png") 	          { tmpl_std_rev(0, 75) }
spriteset (spriteset_E233_midpant_nanbu_rev,	  "gfx/JRE/emuE233/E233-8000_v3.png")          	{ tmpl_std_rev(0, 100) }
alternative_sprites(spriteset_E233_front_nanbu_rev, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRE/emuE233/E233-8000_v3_32bpp.png")        {tmpl_std_rev(0, 0)}
alternative_sprites(spriteset_E233_back_nanbu_rev, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,        "gfx/JRE/emuE233/E233-8000_v3_32bpp.png")        {tmpl_std_rev(0, 25)}
alternative_sprites(spriteset_E233_middle_nanbu_rev, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,      "gfx/JRE/emuE233/E233-8000_v3_32bpp.png")        {tmpl_std_rev(0, 50)}
alternative_sprites(spriteset_E233_midpan_nanbu_rev, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,      "gfx/JRE/emuE233/E233-8000_v3_32bpp.png")        {tmpl_std_rev(0, 75)}
alternative_sprites(spriteset_E233_midpant_nanbu_rev, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,     "gfx/JRE/emuE233/E233-8000_v3_32bpp.png")        {tmpl_std_rev(0, 100)}
/*---END OF SECTION---*/



/*---GFX: Pantograph Positions---*/
//E233-0 Chou Line
switch(FEAT_TRAINS,SELF, sw_E233_gfx_pantograph_numofcars_chou, num_vehs_in_vehid_chain){
  0..5: spriteset_E233_midpan_chou;
  default: spriteset_E233_midpant_chou;
}
switch(FEAT_TRAINS,SELF, sw_E233_gfx_pantograph_pos_chou, position_in_vehid_chain%8){
  1: sw_E233_gfx_pantograph_numofcars_chou;
  5: spriteset_E233_midpan_chou;
  7: spriteset_E233_midpan_chou;
  default: spriteset_E233_middle_chou;
}

//E233-1000 Keihin-Touhoku Line
switch(FEAT_TRAINS,SELF, sw_E233_gfx_pantograph_numofcars_kt, num_vehs_in_vehid_chain){
  0..5: spriteset_E233_midpan_kt;
  default: spriteset_E233_midpant_kt;
}
switch(FEAT_TRAINS,SELF, sw_E233_gfx_pantograph_pos_kt, position_in_vehid_chain%8){
  1: sw_E233_gfx_pantograph_numofcars_kt;
  5: spriteset_E233_midpan_kt;
  7: spriteset_E233_midpan_kt;
  default: spriteset_E233_middle_kt;
}

//E233-3000 Tokaido
switch(FEAT_TRAINS,SELF, sw_E233_gfx_pantograph_numofcars_tk, num_vehs_in_vehid_chain){
  0..5: spriteset_E233_midpan_tk;
  default: spriteset_E233_midpant_tk;
}

switch(FEAT_TRAINS,SELF, sw_E233_gfx_pantograph_pos_tk, position_in_vehid_chain%8){
  1: sw_E233_gfx_pantograph_numofcars_tk;
  5: spriteset_E233_midpan_tk;
  7: spriteset_E233_midpan_tk;
  default: spriteset_E233_middle_tk;
}

//E233-5000 Keiyo Line
switch(FEAT_TRAINS,SELF, sw_E233_gfx_pantograph_numofcars_keiyo, num_vehs_in_vehid_chain){
  0..5: spriteset_E233_midpan_keiyo;
  default: spriteset_E233_midpant_keiyo;
}

switch(FEAT_TRAINS,SELF, sw_E233_gfx_pantograph_pos_keiyo, position_in_vehid_chain%8){
  1: sw_E233_gfx_pantograph_numofcars_keiyo;
  5: spriteset_E233_midpan_keiyo;
  7: spriteset_E233_midpan_keiyo;
  default: spriteset_E233_middle_keiyo;
}

//E233-6000 Yokoyama Line
switch(FEAT_TRAINS,SELF, sw_E233_gfx_pantograph_numofcars_yoko, num_vehs_in_vehid_chain){
  0..5: spriteset_E233_midpan_yoko;
  default: spriteset_E233_midpant_yoko;
}

switch(FEAT_TRAINS,SELF, sw_E233_gfx_pantograph_pos_yoko, position_in_vehid_chain%8){
  1: sw_E233_gfx_pantograph_numofcars_yoko;
  5: spriteset_E233_midpan_yoko;
  7: spriteset_E233_midpan_yoko;
  default: spriteset_E233_middle_yoko;
}

//E233-7000 Saikyo Line
switch(FEAT_TRAINS,SELF, sw_E233_gfx_pantograph_numofcars_saikyo, num_vehs_in_vehid_chain){
  0..5: spriteset_E233_midpan_saikyo;
  default: spriteset_E233_midpant_saikyo;
}

switch(FEAT_TRAINS,SELF, sw_E233_gfx_pantograph_pos_saikyo, position_in_vehid_chain%8){
  1: sw_E233_gfx_pantograph_numofcars_saikyo;
  5: spriteset_E233_midpan_saikyo;
  7: spriteset_E233_midpan_saikyo;
  default: spriteset_E233_middle_saikyo;
}

//E233-8000 Nannbu Line
switch(FEAT_TRAINS,SELF, sw_E233_gfx_pantograph_numofcars_nanbu, num_vehs_in_vehid_chain){
  0..5: spriteset_E233_midpan_nanbu;
  default: spriteset_E233_midpant_nanbu;
}

switch(FEAT_TRAINS,SELF, sw_E233_gfx_pantograph_pos_nanbu, position_in_vehid_chain%8){
  1: sw_E233_gfx_pantograph_numofcars_nanbu;
  5: spriteset_E233_midpan_nanbu;
  7: spriteset_E233_midpan_nanbu;
  default: spriteset_E233_middle_nanbu;
}

/*---END OF SECTION---*/



/*---GFX: Train Reversing Switches---*/
//Livery Selection
switch(FEAT_TRAINS,SELF, sw_E233_gfx_rev_cab_livery_back, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  7: spriteset_E233_back_nanbu_rev;
  6: spriteset_E233_back_saikyo_rev;
  5: spriteset_E233_back_yoko_rev; 
  4: spriteset_E233_back_keiyo_rev;
  3: spriteset_E233_back_tk_rev;
  2: spriteset_E233_back_tk_rev;
  1: spriteset_E233_back_kt_rev;
  0: spriteset_E233_back_chou_rev;
}
switch(FEAT_TRAINS,SELF, sw_E233_gfx_rev_cab_livery_front, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  7: spriteset_E233_front_nanbu_rev;
  6: spriteset_E233_front_saikyo_rev;
  5: spriteset_E233_front_yoko_rev; 
  4: spriteset_E233_front_keiyo_rev;
  3: spriteset_E233_front_tk_rev;
  2: spriteset_E233_front_tk_rev;
  1: spriteset_E233_front_kt_rev;
  0: spriteset_E233_front_chou_rev;
}
switch(FEAT_TRAINS,SELF, sw_E233_gfx_rev_cab_livery_front_flipped, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  7: spriteset_E233_front_nanbu;
  6: spriteset_E233_front_saikyo;
  5: spriteset_E233_front_yoko; 
  4: spriteset_E233_front_keiyo;
  3: spriteset_E233_front_tk;
  2: spriteset_E233_front_tk;
  1: spriteset_E233_front_kt;
  0: spriteset_E233_front_chou;
}
switch(FEAT_TRAINS,SELF, sw_E233_gfx_rev_mucar_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  //: spriteset_E233_middd_chou_rev;
  8: spriteset_E233_middd_tk_rev;
  7: spriteset_E233_middle_nanbu_rev;
  6: spriteset_E233_middle_saikyo_rev;
  5: spriteset_E233_middle_yoko_rev;
  4: spriteset_E233_middle_keiyo_rev;
  3: spriteset_E233_middle_tk_rev;
  2: spriteset_E233_middle_tk_rev;
  1: spriteset_E233_middle_kt_rev;
  0: spriteset_E233_middle_chou_rev;
}
switch(FEAT_TRAINS,SELF, sw_E233_gfx_rev_mucar_livery_flipped, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  //: spriteset_E233_middd_chou;
  8: spriteset_E233_middd_tk;
  7: spriteset_E233_middle_nanbu;
  6: spriteset_E233_middle_saikyo;
  5: spriteset_E233_middle_yoko;
  4: spriteset_E233_middle_keiyo;
  3: spriteset_E233_middle_tk;
  2: spriteset_E233_middle_tk;
  1: spriteset_E233_middle_kt;
  0: spriteset_E233_middle_chou;
}
switch(FEAT_TRAINS,SELF, sw_E233_gfx_rev_pantograph_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  //: spriteset_E233_middd_chou_rev;
  8: spriteset_E233_middd_tk_rev;
  7: spriteset_E233_midpan_nanbu_rev;
  6: spriteset_E233_midpan_saikyo_rev;
  5: spriteset_E233_midpan_yoko_rev;
  4: spriteset_E233_midpan_keiyo_rev;
  3: spriteset_E233_midpan_tk_rev;
  2: spriteset_E233_midpan_tk_rev;
  1: spriteset_E233_midpan_kt_rev;
  0: spriteset_E233_midpan_chou_rev;
}
switch(FEAT_TRAINS,SELF, sw_E233_gfx_rev_pantograph_livery_flipped, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  //: spriteset_E233_middd_chou;
  8: spriteset_E233_middd_tk;
  7: spriteset_E233_midpan_nanbu;
  6: spriteset_E233_midpan_saikyo;
  5: spriteset_E233_midpan_yoko;
  4: spriteset_E233_midpan_keiyo;
  3: spriteset_E233_midpan_tk;
  2: spriteset_E233_midpan_tk;
  1: spriteset_E233_midpan_kt;
  0: spriteset_E233_midpan_chou;
}
switch(FEAT_TRAINS,SELF, sw_E233_gfx_rev_pantograph_dual_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  //: spriteset_E233_middd_chou_rev;
  8: spriteset_E233_middd_tk_rev;
  7: spriteset_E233_midpant_nanbu_rev;
  6: spriteset_E233_midpant_saikyo_rev;
  5: spriteset_E233_midpant_yoko_rev;
  4: spriteset_E233_midpant_keiyo_rev;
  3: spriteset_E233_midpant_tk_rev;
  2: spriteset_E233_midpant_tk_rev;
  1: spriteset_E233_midpant_kt_rev;
  0: spriteset_E233_midpant_chou_rev;
}
switch(FEAT_TRAINS,SELF, sw_E233_gfx_rev_pantograph_dual_livery_flipped, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  //: spriteset_E233_middd_chou;
  8: spriteset_E233_middd_tk;
  7: spriteset_E233_midpant_nanbu;
  6: spriteset_E233_midpant_saikyo;
  5: spriteset_E233_midpant_yoko;
  4: spriteset_E233_midpant_keiyo;
  3: spriteset_E233_midpant_tk;
  2: spriteset_E233_midpant_tk;
  1: spriteset_E233_midpant_kt;
  0: spriteset_E233_midpant_chou;
}

//Check for flipped vehicles (dual_headed)
switch(FEAT_TRAINS, SELF, sw_E233_gfx_rev_flippedcheck_cab_front, vehicle_is_flipped) {
  1: sw_E233_gfx_rev_cab_livery_back;
 default: sw_E233_gfx_rev_cab_livery_front;
}
switch(FEAT_TRAINS, SELF, sw_E233_gfx_rev_flippedcheck_cab_back, vehicle_is_flipped) {
  1: sw_E233_gfx_rev_cab_livery_front;
 default: sw_E233_gfx_rev_cab_livery_back;
}
switch(FEAT_TRAINS, SELF, sw_E233_gfx_rev_flippedcheck_pantograph_single, vehicle_is_flipped) {
  1: sw_E233_gfx_rev_pantograph_livery_flipped;
 default: sw_E233_gfx_rev_pantograph_livery;
}

switch(FEAT_TRAINS, SELF, sw_E233_gfx_rev_flippedcheck_pantogaph_dual, vehicle_is_flipped) {
  1: sw_E233_gfx_rev_pantograph_dual_livery_flipped;
 default: sw_E233_gfx_rev_pantograph_dual_livery;
}

switch(FEAT_TRAINS, SELF, sw_E233_gfx_rev_flippedcheck_mucar, vehicle_is_flipped) {
  1: sw_E233_gfx_rev_mucar_livery_flipped;
 default: sw_E233_gfx_rev_mucar_livery;
}

//Pantograph Position Testing
switch(FEAT_TRAINS, SELF, sw_E233_gfx_rev_pantograph_numofcars, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 16, 0x000000FF, 0x41]]){ //look at opposte num_vehs_in_vehid_chain
  0..5: sw_E233_gfx_rev_flippedcheck_pantograph_single;
  6..256: sw_E233_gfx_rev_flippedcheck_pantogaph_dual;
  CB_FAILED;
}
switch(FEAT_TRAINS, SELF, sw_E233_gfx_rev_pantograph_pos, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%8]){ //look at opposte position_in_vehID_chain
  1: sw_E233_gfx_rev_pantograph_numofcars;
  5: sw_E233_gfx_rev_flippedcheck_pantograph_single;
  7: sw_E233_gfx_rev_flippedcheck_pantograph_single;
  default: sw_E233_gfx_rev_flippedcheck_mucar;
}

//ID Testing
switch(FEAT_TRAINS, SELF, sw_E233_gfx_rev_cab_idcheck_behind, [STORE_TEMP(position_in_consist_from_end-position_in_consist+1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000: sw_E233_gfx_rev_flippedcheck_cab_front;
  2016: sw_E233_gfx_rev_flippedcheck_cab_back;
}
switch(FEAT_TRAINS, SELF, sw_E233_gfx_rev_cab_idcheck_infront, [STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000: sw_E233_gfx_rev_flippedcheck_cab_back;
  2016: sw_E233_gfx_rev_flippedcheck_cab_front;
  default: sw_E233_gfx_rev_cab_idcheck_behind;
}
switch(FEAT_TRAINS, SELF, sw_E223_gfx_rev_cab_frontcheck, position_in_consist){
  0: sw_E233_gfx_rev_cab_livery_front_flipped;
  default: sw_E233_gfx_rev_cab_idcheck_infront;
}
switch(FEAT_TRAINS, SELF, sw_E233_gfx_rev_idcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000: sw_E233_gfx_rev_pantograph_pos;
  2016: sw_E223_gfx_rev_cab_frontcheck;
}
/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/

//E233-0 Chou Line
switch(FEAT_TRAINS, PARENT, sw_E233_gfx_front_revcheck_chou, vehicle_is_reversed){
   0: spriteset_E233_front_chou;
   default: sw_E233_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, PARENT, sw_E233_gfx_back_revcheck_chou, vehicle_is_reversed){
 0: spriteset_E233_back_chou_rev;
 default: sw_E233_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, SELF, sw_E233_gfx_frontback_chou, vehicle_is_flipped) {
  1: sw_E233_gfx_back_revcheck_chou;
 default: sw_E233_gfx_front_revcheck_chou;
}

//E233-1000 Keihin-Touhoku Line
switch(FEAT_TRAINS, PARENT, sw_E233_gfx_front_revcheck_kt, vehicle_is_reversed){
   0: spriteset_E233_front_kt;
   default: sw_E233_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, PARENT, sw_E233_gfx_back_revcheck_kt, vehicle_is_reversed){
 0: spriteset_E233_back_kt_rev;
 default: sw_E233_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, SELF, sw_E233_gfx_frontback_kt, vehicle_is_flipped) {
  1: sw_E233_gfx_back_revcheck_kt;
 default: sw_E233_gfx_front_revcheck_kt;
}

//E233-3000 Tokaido
switch(FEAT_TRAINS, PARENT, sw_E233_gfx_front_revcheck_tk, vehicle_is_reversed){
 0: spriteset_E233_front_tk;
 default: sw_E233_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, PARENT, sw_E233_gfx_back_revcheck_tk, vehicle_is_reversed){
 0: spriteset_E233_back_tk_rev;
 default: sw_E233_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, SELF, sw_E233_gfx_frontback_tk, vehicle_is_flipped) {
  1: sw_E233_gfx_back_revcheck_tk;
  default: sw_E233_gfx_front_revcheck_tk;
}

//E233-5000 Keiyo Line
switch(FEAT_TRAINS, PARENT, sw_E233_gfx_front_revcheck_keiyo, vehicle_is_reversed){
 0: spriteset_E233_front_keiyo;
 default: sw_E233_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, PARENT, sw_E233_gfx_back_revcheck_keiyo, vehicle_is_reversed){
 0: spriteset_E233_back_keiyo_rev;
 default: sw_E233_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, SELF, sw_E233_gfx_frontback_keiyo, vehicle_is_flipped) {
  1: sw_E233_gfx_back_revcheck_keiyo;
  default: sw_E233_gfx_front_revcheck_keiyo;
}

//E233-6000 Yokoyama Line
switch(FEAT_TRAINS, PARENT, sw_E233_gfx_front_revcheck_yoko, vehicle_is_reversed){
 0: spriteset_E233_front_yoko;
 default: sw_E233_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, PARENT, sw_E233_gfx_back_revcheck_yoko, vehicle_is_reversed){
 0: spriteset_E233_back_yoko_rev;
 default: sw_E233_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, SELF, sw_E233_gfx_frontback_yoko, vehicle_is_flipped) {
  1: sw_E233_gfx_back_revcheck_yoko;
  default: sw_E233_gfx_front_revcheck_yoko;
}

//E233-7000 Saikyo Line
switch(FEAT_TRAINS, PARENT, sw_E233_gfx_front_revcheck_saikyo, vehicle_is_reversed){
 0: spriteset_E233_front_saikyo;
 default: sw_E233_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, PARENT, sw_E233_gfx_back_revcheck_saikyo, vehicle_is_reversed){
 0: spriteset_E233_back_saikyo_rev;
 default: sw_E233_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, SELF, sw_E233_gfx_frontback_saikyo, vehicle_is_flipped) {
  1: sw_E233_gfx_back_revcheck_saikyo;
  default: sw_E233_gfx_front_revcheck_saikyo;
}

//E233-8000 Nannbu Line
switch(FEAT_TRAINS, PARENT, sw_E233_gfx_front_revcheck_nanbu, vehicle_is_reversed){
 0: spriteset_E233_front_nanbu;
 default: sw_E233_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, PARENT, sw_E233_gfx_back_revcheck_nanbu, vehicle_is_reversed){
 0: spriteset_E233_back_nanbu_rev;
 default: sw_E233_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, SELF, sw_E233_gfx_frontback_nanbu, vehicle_is_flipped) {
  1: sw_E233_gfx_back_revcheck_nanbu;
  default: sw_E233_gfx_front_revcheck_nanbu;
}
/*---END OF SECTION---*/



/*---GFX: Middle Car Switches---*/

//E233-0 Chou Line
/*
switch(FEAT_TRAINS, PARENT, sw_E233_gfx_mucar_revcheck_dd_chou, vehicle_is_reversed){
 0: spriteset_E233_middd_chou;
 default: sw_E233_gfx_rev_idcheck;
}
*/
switch(FEAT_TRAINS, PARENT, sw_E233_gfx_mucar_revcheck_mid_chou, vehicle_is_reversed){
 0: sw_E233_gfx_pantograph_pos_chou;
 default: sw_E233_gfx_rev_idcheck;
}

//E233-1000 Keihin-Touhoku Line
switch(FEAT_TRAINS, PARENT, sw_E233_gfx_mucar_revcheck_mid_kt, vehicle_is_reversed){
 0: sw_E233_gfx_pantograph_pos_kt;
 default: sw_E233_gfx_rev_idcheck;
}

//E233-3000 Tokaido
switch(FEAT_TRAINS, PARENT, sw_E233_gfx_mucar_revcheck_dd_tk, vehicle_is_reversed){
 0: spriteset_E233_middd_tk;
 default: sw_E233_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, PARENT, sw_E233_gfx_mucar_revcheck_mid_tk, vehicle_is_reversed){
 0: sw_E233_gfx_pantograph_pos_tk;
 default: sw_E233_gfx_rev_idcheck;
}

//E233-5000 Keiyo Line
switch(FEAT_TRAINS, PARENT, sw_E233_gfx_mucar_revcheck_mid_keiyo, vehicle_is_reversed){
 0: sw_E233_gfx_pantograph_pos_keiyo;
 default: sw_E233_gfx_rev_idcheck;
}

//E233-6000 Yokoyama Line
switch(FEAT_TRAINS, PARENT, sw_E233_gfx_mucar_revcheck_mid_yoko, vehicle_is_reversed){
 0: sw_E233_gfx_pantograph_pos_yoko;
 default: sw_E233_gfx_rev_idcheck;
}

//E233-7000 Saikyo Line
switch(FEAT_TRAINS, PARENT, sw_E233_gfx_mucar_revcheck_mid_saikyo, vehicle_is_reversed){
 0: sw_E233_gfx_pantograph_pos_saikyo;
 default: sw_E233_gfx_rev_idcheck;
}

//E233-8000 Nannbu Line
switch(FEAT_TRAINS, PARENT, sw_E233_gfx_mucar_revcheck_mid_nanbu, vehicle_is_reversed){
 0: sw_E233_gfx_pantograph_pos_nanbu;
 default: sw_E233_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Livery Refitting Switches---*/

//Main Switches
switch(FEAT_TRAINS, SELF, sw_E233_gfx_mucar,  cargo_subtype) {
  //: sw_E233_gfx_mucar_revcheck_dd_chou;
  8: sw_E233_gfx_mucar_revcheck_dd_tk;
  7: sw_E233_gfx_mucar_revcheck_mid_nanbu;
  6: sw_E233_gfx_mucar_revcheck_mid_saikyo;
  5: sw_E233_gfx_mucar_revcheck_mid_yoko;
  4: sw_E233_gfx_mucar_revcheck_mid_keiyo;
  3: sw_E233_gfx_mucar_revcheck_mid_tk;
  2: sw_E233_gfx_mucar_revcheck_mid_tk;
  1: sw_E233_gfx_mucar_revcheck_mid_kt;
  0: sw_E233_gfx_mucar_revcheck_mid_chou;
}
switch(FEAT_TRAINS, SELF, sw_E233_gfx_main,  cargo_subtype) {
  7: sw_E233_gfx_frontback_nanbu;
  6: sw_E233_gfx_frontback_saikyo;
  5: sw_E233_gfx_frontback_yoko;
  4: sw_E233_gfx_frontback_keiyo;
  3: sw_E233_gfx_frontback_tk;
  2: sw_E233_gfx_frontback_tk;
  1: sw_E233_gfx_frontback_kt;
  0: sw_E233_gfx_frontback_chou;
}

//Menu Switches
switch(FEAT_TRAINS, SELF, sw_E233_subtypetext_mucar, cargo_subtype) {
  //: string(CHOU_LV_DD);
  8: string(SHONAN_LV_DD);
  7: string(NANBU_LV);
  6: string(SAIKYO_LV);
  5: string(YK_LV);
  4: string(KEIYO_LV);
  //: string(JOBAN_LV);
  3: string(SHONAN_LV_PR);
  2: string(SHONAN_LV_EP);
  1: string(KT_LV);
  0: string(CHOU_LV);
}
switch(FEAT_TRAINS, SELF, sw_E233_subtypetext_main, cargo_subtype) {
  7: string(NANBU_LV);
  6: string(SAIKYO_LV);
  5: string(YK_LV);
  4: string(KEIYO_LV);
  //4: string(JOBAN_LV);
  3: string(SHONAN_LV_PR);
  2: string(SHONAN_LV_EP);
  1: string(KT_LV);
  0: string(CHOU_LV);
}
/*---END OF SECTION---*/



//Coupling
  switch(FEAT_TRAINS, SELF, sw_E233_attach_vehid, [vehicle_type_id == emu_E233 || vehicle_type_id == mu_car]) {
  0: return string(MU_UNIQUE);
  }



item(FEAT_TRAINS, emu_E233) {
    property {
        name:                         string(JRE_E233);
        introduction_date:            date(2006, 09, 21);
        model_life:                   0;
        vehicle_life:                 40;
        reliability_decay:            12;

        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_4D;
        cost_factor:                  17;
        running_cost_factor:          51;

        speed:                       	120 km/h;
        track_type:                   NARROW_OHLE;
        power:                        560 kW;
        weight:                       35 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  1;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_ELECTRIC;
        engine_class:                 ENGINE_CLASS_ELECTRIC;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                      sw_E233_gfx_main;
		    purchase:                     spriteset_E233_purchase;
		    additional_text:			        return string(JRE_E233_DESC);
        cargo_subtype_text:           sw_E233_subtypetext_main;
        can_attach_wagon:			        sw_E233_attach_vehid;
        //start_stop:                   ;
    }
    /*Multiple Unit Car*/
      livery_override(mu_car){
        default:                      sw_E233_gfx_mucar;
        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_4D;
        cargo_subtype_text:           sw_E233_subtypetext_mucar;
        power: 280;
        weight: 25;
      }

}
# 1 "JPplus.pnml" 4
# 1 "src/JRE/EMU/E231_series.pnml" 1
/*---GFX: Spritesets---*/

//purchase sprites
spriteset (spriteset_E231_purchase,	                                                     "gfx/JRE/emuE231/purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_E231_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,         "gfx/JRE/emuE231/purchase_32bpp.png")         {tmpl_purchase_dh_32bpp(0, 0)}

//E231-1000 Suburban
spriteset (spriteset_E231_front_tk,	    	"gfx/JRE/emuE231/E231_Suburban.png")          	{ tmpl_std(0, 0) }
spriteset (spriteset_E231_back_tk,	  	  "gfx/JRE/emuE231/E231_Suburban.png")            { tmpl_std(0, 25) }
spriteset (spriteset_E231_frontwc_tk,	  	"gfx/JRE/emuE231/E231_Suburban.png")          	{ tmpl_std(0, 50) }
spriteset (spriteset_E231_backwc_tk,	  	"gfx/JRE/emuE231/E231_Suburban.png")            { tmpl_std(0, 75) }
spriteset (spriteset_E231_mid_tk,	       	"gfx/JRE/emuE231/E231_Suburban.png")          	{ tmpl_std(0, 100) }
spriteset (spriteset_E231_midwc_tk,	    	"gfx/JRE/emuE231/E231_Suburban.png")          	{ tmpl_std(0, 125) }
spriteset (spriteset_E231_midpan_tk,	   	"gfx/JRE/emuE231/E231_Suburban.png") 	          { tmpl_std(0, 150) }
spriteset (spriteset_E231_middd_tk,	      "gfx/JRE/emuE231/E231_Suburban.png")          	{ tmpl_std(0, 175) }
spriteset (spriteset_E231_midddwc_tk,	    "gfx/JRE/emuE231/E231_Suburban.png")          	{ tmpl_std(0, 200) }

spriteset (spriteset_E231_front_tk_rev,	    	"gfx/JRE/emuE231/E231_Suburban.png")          	{ tmpl_std_rev(0, 0) }
spriteset (spriteset_E231_back_tk_rev,	  	  "gfx/JRE/emuE231/E231_Suburban.png")            { tmpl_std_rev(0, 25) }
spriteset (spriteset_E231_frontwc_tk_rev,	  	"gfx/JRE/emuE231/E231_Suburban.png")          	{ tmpl_std_rev(0, 50) }
spriteset (spriteset_E231_backwc_tk_rev,	  	"gfx/JRE/emuE231/E231_Suburban.png")            { tmpl_std_rev(0, 75) }
spriteset (spriteset_E231_mid_tk_rev,	       	"gfx/JRE/emuE231/E231_Suburban.png")          	{ tmpl_std_rev(0, 100) }
spriteset (spriteset_E231_midwc_tk_rev,	    	"gfx/JRE/emuE231/E231_Suburban.png")          	{ tmpl_std_rev(0, 125) }
spriteset (spriteset_E231_midpan_tk_rev,	   	"gfx/JRE/emuE231/E231_Suburban.png") 	          { tmpl_std_rev(0, 150) }
spriteset (spriteset_E231_middd_tk_rev,	      "gfx/JRE/emuE231/E231_Suburban.png")          	{ tmpl_std_rev(0, 175) }
spriteset (spriteset_E231_midddwc_tk_rev,	    "gfx/JRE/emuE231/E231_Suburban.png")          	{ tmpl_std_rev(0, 200) }

//E231-0 Sobu
spriteset (spriteset_E231_0_front_sobu,	        	"gfx/JRE/emuE231/E231_0_Soubu.png")       { tmpl_std(0, 0) }
spriteset (spriteset_E231_0_back_sobu,	        	"gfx/JRE/emuE231/E231_0_Soubu.png")       { tmpl_std(0, 25) }
spriteset (spriteset_E231_0_midhd_sobu,	         	"gfx/JRE/emuE231/E231_0_Soubu.png")      	{ tmpl_std(0, 50) }
spriteset (spriteset_E231_0_mid_sobu,	        	"gfx/JRE/emuE231/E231_0_Soubu.png")       { tmpl_std(0, 75) }
spriteset (spriteset_E231_0_midpan_sobu,		   	"gfx/JRE/emuE231/E231_0_Soubu.png") 	    { tmpl_std(0, 100) }

spriteset (spriteset_E231_0_front_sobu_rev,	        	"gfx/JRE/emuE231/E231_0_Soubu.png")       { tmpl_std_rev(0, 0) }
spriteset (spriteset_E231_0_back_sobu_rev,	        	"gfx/JRE/emuE231/E231_0_Soubu.png")       { tmpl_std_rev(0, 25) }
spriteset (spriteset_E231_0_midhd_sobu_rev,	         	"gfx/JRE/emuE231/E231_0_Soubu.png")      	{ tmpl_std_rev(0, 50) }
spriteset (spriteset_E231_0_mid_sobu_rev,	        	"gfx/JRE/emuE231/E231_0_Soubu.png")       { tmpl_std_rev(0, 75) }
spriteset (spriteset_E231_0_midpan_sobu_rev,		   	"gfx/JRE/emuE231/E231_0_Soubu.png") 	    { tmpl_std_rev(0, 100) }

//E231-500 Sobu
spriteset (spriteset_E231_500_front_sobu,	       	"gfx/JRE/emuE231/E231_500_Soubu.png")  	{ tmpl_std(0, 0) }
spriteset (spriteset_E231_500_back_sobu,	     	  "gfx/JRE/emuE231/E231_500_Soubu.png")   { tmpl_std(0, 25) }
spriteset (spriteset_E231_500_midhd_sobu,	      	"gfx/JRE/emuE231/E231_500_Soubu.png")   { tmpl_std(0, 50) }
spriteset (spriteset_E231_500_mid_sobu,	        	"gfx/JRE/emuE231/E231_500_Soubu.png")   { tmpl_std(0, 75) }
spriteset (spriteset_E231_500_midpan_sobu,		   	"gfx/JRE/emuE231/E231_500_Soubu.png") 	{ tmpl_std(0, 100) }

spriteset (spriteset_E231_500_front_sobu_rev,	       	"gfx/JRE/emuE231/E231_500_Soubu.png")  	{ tmpl_std_rev(0, 0) }
spriteset (spriteset_E231_500_back_sobu_rev,	     	  "gfx/JRE/emuE231/E231_500_Soubu.png")   { tmpl_std_rev(0, 25) }
spriteset (spriteset_E231_500_midhd_sobu_rev,	      	"gfx/JRE/emuE231/E231_500_Soubu.png")   { tmpl_std_rev(0, 50) }
spriteset (spriteset_E231_500_mid_sobu_rev,	        	"gfx/JRE/emuE231/E231_500_Soubu.png")   { tmpl_std_rev(0, 75) }
spriteset (spriteset_E231_500_midpan_sobu_rev,		   	"gfx/JRE/emuE231/E231_500_Soubu.png") 	{ tmpl_std_rev(0, 100) }

//E231-500 Yamanote
spriteset (spriteset_E231_front_yamanote,	       	"gfx/JRE/emuE231/E231_500_Yamanote.png")   { tmpl_std(0, 0) }
spriteset (spriteset_E231_back_yamanote,	     	  "gfx/JRE/emuE231/E231_500_Yamanote.png")   { tmpl_std(0, 25) }
spriteset (spriteset_E231_midhd_yamanote,	      	"gfx/JRE/emuE231/E231_500_Yamanote.png")   { tmpl_std(0, 50) }
spriteset (spriteset_E231_mid_yamanote,	        	"gfx/JRE/emuE231/E231_500_Yamanote.png")   { tmpl_std(0, 75) }
spriteset (spriteset_E231_midpan_yamanote,		   	"gfx/JRE/emuE231/E231_500_Yamanote.png") 	{ tmpl_std(0, 100) }

spriteset (spriteset_E231_front_yamanote_rev,	       	"gfx/JRE/emuE231/E231_500_Yamanote.png")   { tmpl_std_rev(0, 0) }
spriteset (spriteset_E231_back_yamanote_rev,	     	  "gfx/JRE/emuE231/E231_500_Yamanote.png")   { tmpl_std_rev(0, 25) }
spriteset (spriteset_E231_midhd_yamanote_rev,	      	"gfx/JRE/emuE231/E231_500_Yamanote.png")   { tmpl_std_rev(0, 50) }
spriteset (spriteset_E231_mid_yamanote_rev,	        	"gfx/JRE/emuE231/E231_500_Yamanote.png")   { tmpl_std_rev(0, 75) }
spriteset (spriteset_E231_midpan_yamanote_rev,		   	"gfx/JRE/emuE231/E231_500_Yamanote.png") 	{ tmpl_std_rev(0, 100) }
/*---END OF SECTION---*/



/*---GFX: Pantograph Positions---*/
//E231-1000 Suburban
switch(FEAT_TRAINS,SELF, sw_E231_gfx_pantograph_pos_tk, position_in_vehid_chain%10){
  1: spriteset_E231_midpan_tk;
  6: spriteset_E231_midpan_tk;
  default: spriteset_E231_mid_tk;
}

//E231-0 Sobu
switch(FEAT_TRAINS,SELF, sw_E231_gfx_pantograph_pos_0sobu_pre2020, position_in_vehid_chain%10){
  1: spriteset_E231_0_midpan_sobu;
  3: spriteset_E231_0_midhd_sobu;
  6: spriteset_E231_0_midpan_sobu;
  default: spriteset_E231_0_mid_sobu;
}
switch(FEAT_TRAINS,SELF, sw_E231_gfx_pantograph_pos_0sobu_post2020, position_in_vehid_chain%10){
  0: spriteset_E231_0_midpan_sobu;
  3: spriteset_E231_0_midpan_sobu;
  6: spriteset_E231_0_midpan_sobu;
  default: spriteset_E231_0_mid_sobu;
}

//E231-500 Sobu
switch(FEAT_TRAINS,SELF, sw_E231_gfx_pantograph_pos_500sobu, position_in_vehid_chain%10){
  0: spriteset_E231_0_midpan_sobu;
  3: spriteset_E231_0_midpan_sobu;
  6: spriteset_E231_0_midpan_sobu;
  default: spriteset_E231_0_mid_sobu;
}

//E231-500 Yamanote
switch(FEAT_TRAINS,SELF, sw_E231_gfx_pantograph_pos_yama_pre2011, position_in_vehid_chain%10){
  1: spriteset_E231_midpan_yamanote;
  4: spriteset_E231_midpan_yamanote;
  5: spriteset_E231_midhd_yamanote;
  7: spriteset_E231_midpan_yamanote;
  8:spriteset_E231_midhd_yamanote;
  default: spriteset_E231_mid_yamanote;
}
switch(FEAT_TRAINS,SELF, sw_E231_gfx_pantograph_pos_yama_post2010, position_in_vehid_chain%10){
  1: spriteset_E231_midpan_yamanote;
  4: spriteset_E231_midpan_yamanote;
  7: spriteset_E231_midpan_yamanote;
  default: spriteset_E231_0_mid_sobu;
}
/*---END OF SECTION---*/



/*---GFX: Train Reversing Switches---*/
//Livery Selection
switch(FEAT_TRAINS,SELF, sw_E231_gfx_rev_cab_livery_back, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  4: spriteset_E231_back_tk_rev;
  3: spriteset_E231_back_tk_rev;
  2: spriteset_E231_back_yamanote_rev;
  1: spriteset_E231_500_back_sobu_rev;
  0: spriteset_E231_0_back_sobu_rev;
}
switch(FEAT_TRAINS,SELF, sw_E231_gfx_rev_cab_livery_front, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  4: spriteset_E231_front_tk_rev;
  3: spriteset_E231_front_tk_rev;
  2: spriteset_E231_front_yamanote_rev;
  1: spriteset_E231_500_front_sobu_rev;
  0: spriteset_E231_0_front_sobu_rev;
}
switch(FEAT_TRAINS,SELF, sw_E231_gfx_rev_cab_livery_front_flipped, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  4: spriteset_E231_front_tk;
  3: spriteset_E231_front_tk;
  2: spriteset_E231_front_yamanote;
  1: spriteset_E231_500_front_sobu;
  0: spriteset_E231_0_front_sobu;
}
switch(FEAT_TRAINS,SELF, sw_E231_gfx_rev_mucar_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  4: spriteset_E231_middd_tk_rev;
  3: spriteset_E231_mid_tk_rev;
  2: spriteset_E231_mid_yamanote_rev;
  1: spriteset_E231_500_mid_sobu_rev;
  0: spriteset_E231_0_mid_sobu_rev;
}
switch(FEAT_TRAINS,SELF, sw_E231_gfx_rev_mucar_livery_flipped, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  4: spriteset_E231_middd_tk;
  3: spriteset_E231_mid_tk;
  2: spriteset_E231_mid_yamanote;
  1: spriteset_E231_500_mid_sobu;
  0: spriteset_E231_0_mid_sobu;
}
switch(FEAT_TRAINS,SELF, sw_E231_gfx_rev_pantograph_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  4: spriteset_E231_middd_tk_rev;
  3: spriteset_E231_midpan_tk_rev;
  2: spriteset_E231_midpan_yamanote_rev;
  1: spriteset_E231_500_midpan_sobu_rev;
  0: spriteset_E231_0_midpan_sobu_rev;
}
switch(FEAT_TRAINS,SELF, sw_E231_gfx_rev_pantograph_livery_flipped, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  4: spriteset_E231_middd_tk;
  3: spriteset_E231_midpan_tk;
  2: spriteset_E231_midpan_yamanote;
  1: spriteset_E231_500_midpan_sobu;
  0: spriteset_E231_0_midpan_sobu;
}
switch(FEAT_TRAINS,SELF, sw_E231_gfx_rev_mucar_hd_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  4: spriteset_E231_middd_tk_rev;
  3: spriteset_E231_mid_tk_rev;
  2: spriteset_E231_midhd_yamanote_rev;
  1: spriteset_E231_500_mid_sobu_rev;
  0: spriteset_E231_0_midhd_sobu_rev;
}
switch(FEAT_TRAINS,SELF, sw_E231_gfx_rev_mucar_hd_livery_flipped, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  4: spriteset_E231_middd_tk;
  3: spriteset_E231_mid_tk;
  2: spriteset_E231_midhd_yamanote;
  1: spriteset_E231_500_mid_sobu;
  0: spriteset_E231_0_midhd_sobu;
}

//Check for flipped vehicles (dual_headed)
switch(FEAT_TRAINS, SELF, sw_E231_gfx_rev_flippedcheck_cab_front, vehicle_is_flipped) {
  1: sw_E231_gfx_rev_cab_livery_back;
 default: sw_E231_gfx_rev_cab_livery_front;
}
switch(FEAT_TRAINS, SELF, sw_E231_gfx_rev_flippedcheck_cab_back, vehicle_is_flipped) {
  1: sw_E231_gfx_rev_cab_livery_front;
 default: sw_E231_gfx_rev_cab_livery_back;
}

switch(FEAT_TRAINS, SELF, sw_E231_gfx_rev_flippedcheck_pantograph_single, vehicle_is_flipped) {
  1: sw_E231_gfx_rev_pantograph_livery_flipped;
 default: sw_E231_gfx_rev_pantograph_livery;
}

switch(FEAT_TRAINS, SELF, sw_E231_gfx_rev_flippedcheck_mucar_hd, vehicle_is_flipped) {
  1: sw_E231_gfx_rev_mucar_hd_livery_flipped;
 default: sw_E231_gfx_rev_mucar_hd_livery;
}

switch(FEAT_TRAINS, SELF, sw_E231_gfx_rev_flippedcheck_mucar, vehicle_is_flipped) {
  1: sw_E231_gfx_rev_mucar_livery_flipped;
 default: sw_E231_gfx_rev_mucar_livery;
}

//Pantograph Position Testing
switch(FEAT_TRAINS, SELF, sw_E231_gfx_rev_pantograph_pos_tk, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%11]){ //look at opposte position_in_vehID_chain
  1: sw_E231_gfx_rev_flippedcheck_pantograph_single;
  6: sw_E231_gfx_rev_flippedcheck_pantograph_single;
  default: sw_E231_gfx_rev_flippedcheck_mucar;
}
switch(FEAT_TRAINS, SELF, sw_E231_gfx_rev_pantograph_pos_yama_pre2011, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%11]){ //look at opposte position_in_vehID_chain
  1: sw_E231_gfx_rev_flippedcheck_pantograph_single;
  4: sw_E231_gfx_rev_flippedcheck_pantograph_single;
  5: sw_E231_gfx_rev_flippedcheck_mucar_hd;
  7: sw_E231_gfx_rev_flippedcheck_pantograph_single;
  8:sw_E231_gfx_rev_flippedcheck_mucar_hd;
  default: sw_E231_gfx_rev_flippedcheck_mucar;
}
switch(FEAT_TRAINS, SELF, sw_E231_gfx_rev_pantograph_pos_yama_post2010, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%11]){ //look at opposte position_in_vehID_chain
  1: sw_E231_gfx_rev_flippedcheck_pantograph_single;
  4: sw_E231_gfx_rev_flippedcheck_pantograph_single;
  7: sw_E231_gfx_rev_flippedcheck_pantograph_single;
  default: sw_E231_gfx_rev_flippedcheck_mucar;
}
switch(FEAT_TRAINS, SELF, sw_E231_gfx_rev_pantograph_pos_500sobu, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%11]){ //look at opposte position_in_vehID_chain
  0: sw_E231_gfx_rev_flippedcheck_pantograph_single;
  3: sw_E231_gfx_rev_flippedcheck_pantograph_single;
  6: sw_E231_gfx_rev_flippedcheck_pantograph_single;
  default: sw_E231_gfx_rev_flippedcheck_mucar;
}
switch(FEAT_TRAINS, SELF, sw_E231_gfx_rev_pantograph_pos_0sobu_pre2020, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%11]){ //look at opposte position_in_vehID_chain
  1: sw_E231_gfx_rev_flippedcheck_pantograph_single;
  3: sw_E231_gfx_rev_flippedcheck_mucar_hd;
  6: sw_E231_gfx_rev_flippedcheck_pantograph_single;
  default: sw_E231_gfx_rev_flippedcheck_mucar;
}
switch(FEAT_TRAINS, SELF, sw_E231_gfx_rev_pantograph_pos_0sobu_post2020, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%11]){ //look at opposte position_in_vehID_chain
  0: sw_E231_gfx_rev_flippedcheck_pantograph_single;
  3: sw_E231_gfx_rev_flippedcheck_pantograph_single;
  6: sw_E231_gfx_rev_flippedcheck_pantograph_single;
  default: sw_E231_gfx_rev_flippedcheck_mucar;
}
switch(FEAT_TRAINS,SELF, sw_E231_gfx_rev_pantograph_pos, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  4: sw_E231_gfx_rev_pantograph_pos_tk;
  3: sw_E231_gfx_rev_pantograph_pos_tk;
  2: sw_E231_gfx_rev_pantograph_pos_yama_pre2011;
  1: sw_E231_gfx_rev_pantograph_pos_500sobu;
  0: sw_E231_gfx_rev_pantograph_pos_0sobu_pre2020;
}

//ID Testing
switch(FEAT_TRAINS, SELF, sw_E231_gfx_rev_cab_idcheck_behind, [STORE_TEMP(position_in_consist_from_end-position_in_consist+1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000: sw_E231_gfx_rev_flippedcheck_cab_front;
  2020: sw_E231_gfx_rev_flippedcheck_cab_back;
}
switch(FEAT_TRAINS, SELF, sw_E231_gfx_rev_cab_idcheck_infront, [STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000: sw_E231_gfx_rev_flippedcheck_cab_back;
  2020: sw_E231_gfx_rev_flippedcheck_cab_front;
  default: sw_E231_gfx_rev_cab_idcheck_behind;
}
switch(FEAT_TRAINS, SELF, sw_E231_gfx_rev_cab_frontcheck, position_in_consist){
  0: sw_E231_gfx_rev_cab_livery_front_flipped;
  default: sw_E231_gfx_rev_cab_idcheck_infront;
}
switch(FEAT_TRAINS, SELF, sw_E231_gfx_rev_idcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000: sw_E231_gfx_rev_pantograph_pos;
  2020: sw_E231_gfx_rev_cab_frontcheck;
}
/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/

//E231-1000 Suburban
switch(FEAT_TRAINS, PARENT, sw_E231_gfx_front_revcheck_tk, vehicle_is_reversed){
 0: spriteset_E231_front_tk;
 default: sw_E231_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, PARENT, sw_E231_gfx_back_revcheck_tk, vehicle_is_reversed){
 0: spriteset_E231_back_tk_rev;
 default: sw_E231_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, SELF, sw_E231_gfx_frontback_tk, vehicle_is_flipped) {
  1: sw_E231_gfx_back_revcheck_tk;
  default: sw_E231_gfx_front_revcheck_tk;
}

//E231-0 Sobu
switch(FEAT_TRAINS, PARENT, sw_E231_gfx_front_revcheck_0sobu, vehicle_is_reversed){
 0: spriteset_E231_0_front_sobu;
 default: sw_E231_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, PARENT, sw_E231_gfx_back_revcheck_0sobu, vehicle_is_reversed){
 0: spriteset_E231_0_back_sobu_rev;
 default: sw_E231_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, SELF, sw_E231_gfx_frontback_0sobu, vehicle_is_flipped) {
  1: sw_E231_gfx_back_revcheck_0sobu;
  default: sw_E231_gfx_front_revcheck_0sobu;
}

//E231-500 Sobu
switch(FEAT_TRAINS, PARENT, sw_E231_gfx_front_revcheck_500sobu, vehicle_is_reversed){
 0: spriteset_E231_500_front_sobu;
 default: sw_E231_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, PARENT, sw_E231_gfx_back_revcheck_500sobu, vehicle_is_reversed){
 0: spriteset_E231_500_back_sobu_rev;
 default: sw_E231_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, SELF, sw_E231_gfx_frontback_500sobu, vehicle_is_flipped) {
  1: sw_E231_gfx_back_revcheck_500sobu;
  default: sw_E231_gfx_front_revcheck_500sobu;
}

//E231-500 Yamanote
switch(FEAT_TRAINS, PARENT, sw_E231_gfx_front_revcheck_yama, vehicle_is_reversed){
 0: spriteset_E231_front_yamanote;
 default: sw_E231_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, PARENT, sw_E231_gfx_back_revcheck_yama, vehicle_is_reversed){
 0: spriteset_E231_back_yamanote_rev;
 default: sw_E231_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, SELF, sw_E231_gfx_frontback_yama, vehicle_is_flipped) {
  1: sw_E231_gfx_back_revcheck_yama;
  default: sw_E231_gfx_front_revcheck_yama;
}
/*---END OF SECTION---*/



/*---GFX: Middle Car Switches---*/

//E231-1000 Suburban
switch(FEAT_TRAINS, PARENT, sw_E231_gfx_mucar_revcheck_dd_tk, vehicle_is_reversed){
 0: spriteset_E231_middd_tk;
 default: sw_E231_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, PARENT, sw_E231_gfx_mucar_revcheck_mid_tk, vehicle_is_reversed){
 0: sw_E231_gfx_pantograph_pos_tk;
 default: sw_E231_gfx_rev_idcheck;
}

//E231-0 Sobu
switch(FEAT_TRAINS, PARENT, sw_E231_gfx_mucar_revcheck_mid_0sobu, vehicle_is_reversed){
 0: sw_E231_gfx_pantograph_pos_0sobu_pre2020;
 default: sw_E231_gfx_rev_idcheck;
}

//E231-500 Sobu
switch(FEAT_TRAINS, PARENT, sw_E231_gfx_mucar_revcheck_mid_500sobu, vehicle_is_reversed){
 0: sw_E231_gfx_pantograph_pos_500sobu;
 default: sw_E231_gfx_rev_idcheck;
}

//E231-500 Yamanote
switch(FEAT_TRAINS, PARENT, sw_E231_gfx_mucar_revcheck_mid_yama, vehicle_is_reversed){
 0: sw_E231_gfx_pantograph_pos_yama_pre2011;
 default: sw_E231_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Livery Refitting Switches---*/

//Main Switches
switch(FEAT_TRAINS, SELF, sw_E231_gfx_mucar,  cargo_subtype) {
  4: sw_E231_gfx_mucar_revcheck_dd_tk;
  3: sw_E231_gfx_mucar_revcheck_mid_tk;
  2: sw_E231_gfx_mucar_revcheck_mid_yama;
  1: sw_E231_gfx_mucar_revcheck_mid_500sobu;
  0: sw_E231_gfx_mucar_revcheck_mid_0sobu;
}
switch(FEAT_TRAINS, SELF, sw_E231_gfx_main,  cargo_subtype) {
  3: sw_E231_gfx_frontback_tk;
  2: sw_E231_gfx_frontback_yama;
  1: sw_E231_gfx_frontback_500sobu;
  0: sw_E231_gfx_frontback_0sobu;
}

//Menu Switches
switch(FEAT_TRAINS, SELF, sw_E231_subtypetext_mucar, cargo_subtype) {
  4: string(SHONAN_LV_DD);
  3: string(SHONAN_LV);
  2: string(YAMANOTE_LV);
  1: string(SOBU_500_LV);
  0: string(SOBU_0_LV);
}
switch(FEAT_TRAINS, SELF, sw_E231_subtypetext_main, cargo_subtype) {
  3: string(SHONAN_LV);
  2: string(YAMANOTE_LV);
  1: string(SOBU_500_LV);
  0: string(SOBU_0_LV);
}
/*---END OF SECTION---*/



//Coupling
  switch(FEAT_TRAINS, SELF, sw_E231_attach_vehid, [vehicle_type_id == emu_E231 || vehicle_type_id == mu_car]) {
  0: return string(MU_UNIQUE);
  }



item(FEAT_TRAINS, emu_E231) {
    property {
        name:                         string(JRE_E231);
        introduction_date:            date(1998, 10, 05);
        model_life:                   13;
        vehicle_life:                 38;
        reliability_decay:            12;

        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_4D;
        cost_factor:                  17;
        running_cost_factor:          51;

        speed:                        120 km/h;
        track_type:                   NARROW_OHLE;
        power:                        380 kW;
        weight:                       34 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  1;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_ELECTRIC;
        engine_class:                 ENGINE_CLASS_ELECTRIC;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                      sw_E231_gfx_main;
		    purchase:                 spriteset_E231_purchase;
		    additional_text:		  return string(JRE_E231_DESC);
        cargo_subtype_text:           sw_E231_subtypetext_main;
        can_attach_wagon:			  sw_E231_attach_vehid;
        //start_stop:                   ;
    }
    /*Multiple Unit Car*/
      livery_override(mu_car){
        default:                      sw_E231_gfx_mucar;
        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_4D;
        cargo_subtype_text:           sw_E231_subtypetext_mucar;
        power: 190;
        weight: 24;
      }

}
# 1 "JPplus.pnml" 4
# 1 "src/JRE/EMU/E217_series.pnml" 1
/*---GFX: Spritesets---*/

//Purchase Sprites
spriteset (spriteset_E217_purchase,	                                                     "gfx/JRE/emuE217/purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_E217_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,         "gfx/JRE/emuE217/purchase_32bpp.png")         {tmpl_purchase_dh_32bpp(0, 0)}

//E217 Yokosuka
spriteset (spriteset_E217_front_yk,    		"gfx/JRE/emuE217/yokosuka.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_E217_back_yk,	       	"gfx/JRE/emuE217/yokosuka.png") 	{ tmpl_std(0, 25) }
spriteset (spriteset_E217_middle_yk,	    	"gfx/JRE/emuE217/yokosuka.png") 	{ tmpl_std(0, 50) }
spriteset (spriteset_E217_midpan_yk,	    	"gfx/JRE/emuE217/yokosuka.png") 	{ tmpl_std(0, 75) }
spriteset (spriteset_E217_middd_yk,	     	"gfx/JRE/emuE217/yokosuka.png") 	{ tmpl_std(0, 125) }

spriteset (spriteset_E217_front_yk_rev,    		"gfx/JRE/emuE217/yokosuka.png") 	{ tmpl_std_rev(0, 0) }
spriteset (spriteset_E217_back_yk_rev, 	       	"gfx/JRE/emuE217/yokosuka.png") 	{ tmpl_std_rev(0, 25) }
spriteset (spriteset_E217_middle_yk_rev, 	    	"gfx/JRE/emuE217/yokosuka.png") 	{ tmpl_std_rev(0, 50) }
spriteset (spriteset_E217_midpan_yk_rev, 	    	"gfx/JRE/emuE217/yokosuka.png") 	{ tmpl_std_rev(0, 75) }
spriteset (spriteset_E217_middd_yk_rev, 	     	"gfx/JRE/emuE217/yokosuka.png") 	{ tmpl_std_rev(0, 125) }

//E217 Tokadio
spriteset (spriteset_E217_front_tk,	   	"gfx/JRE/emuE217/shonan.png")    	{ tmpl_std(0, 0) }
spriteset (spriteset_E217_back_tk,	   	"gfx/JRE/emuE217/shonan.png")   	{ tmpl_std(0, 25) }
spriteset (spriteset_E217_middle_tk,		"gfx/JRE/emuE217/shonan.png")    	{ tmpl_std(0, 50) }
spriteset (spriteset_E217_midpan_tk,		"gfx/JRE/emuE217/shonan.png")   	{ tmpl_std(0, 75) }
spriteset (spriteset_E217_middd_tk,	  	"gfx/JRE/emuE217/shonan.png")   	{ tmpl_std(0, 125) }

spriteset (spriteset_E217_front_tk_rev, 	   	"gfx/JRE/emuE217/shonan.png")    	{ tmpl_std_rev(0, 0) }
spriteset (spriteset_E217_back_tk_rev, 	   	"gfx/JRE/emuE217/shonan.png")   	{ tmpl_std_rev(0, 25) }
spriteset (spriteset_E217_middle_tk_rev, 		"gfx/JRE/emuE217/shonan.png")    	{ tmpl_std_rev(0, 50) }
spriteset (spriteset_E217_midpan_tk_rev, 		"gfx/JRE/emuE217/shonan.png")   	{ tmpl_std_rev(0, 75) }
spriteset (spriteset_E217_middd_tk_rev, 	  	"gfx/JRE/emuE217/shonan.png")   	{ tmpl_std_rev(0, 125) }
/*---END OF SECTION---*/



/*---GFX: Pantograph Positions---*/
//E217 Yokosuka
switch(FEAT_TRAINS,SELF, sw_E217_gfx_pantograph_pos_yoko, position_in_vehid_chain%11){
  1: spriteset_E217_midpan_yk;
  7: spriteset_E217_midpan_yk;
  default: spriteset_E217_middle_yk;
}
//E217 Tokadio
switch(FEAT_TRAINS,SELF, sw_E217_gfx_pantograph_pos_tk, position_in_vehid_chain%11){
  1: spriteset_E217_midpan_tk;
  7: spriteset_E217_midpan_tk;
  default: spriteset_E217_middle_tk;
}
/*---END OF SECTION---*/



/*---GFX: Train Reversing Switches---*/
//Livery Selection
switch(FEAT_TRAINS,SELF, sw_E217_gfx_rev_cab_livery_back, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  1: spriteset_E217_back_tk_rev;
  0: spriteset_E217_back_yk_rev;
}
switch(FEAT_TRAINS,SELF, sw_E217_gfx_rev_cab_livery_front, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  1: spriteset_E217_front_tk_rev;
  0: spriteset_E217_front_yk_rev;
}
switch(FEAT_TRAINS,SELF, sw_E217_gfx_rev_cab_livery_front_flipped, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  1: spriteset_E217_front_tk;
  0: spriteset_E217_front_yk;
}
switch(FEAT_TRAINS,SELF, sw_E217_gfx_rev_mucar_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  3: spriteset_E217_middd_tk_rev;
  2: spriteset_E217_middd_yk_rev;
  1: spriteset_E217_middle_tk_rev;
  0: spriteset_E217_middle_yk_rev;
}
switch(FEAT_TRAINS,SELF, sw_E217_gfx_rev_mucar_livery_flipped, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  3: spriteset_E217_middd_tk;
  2: spriteset_E217_middd_yk;
  1: spriteset_E217_middle_tk;
  0: spriteset_E217_middle_yk;
}
switch(FEAT_TRAINS,SELF, sw_E217_gfx_rev_pantograph_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  3: spriteset_E217_middd_tk_rev;
  2: spriteset_E217_middd_yk_rev;
  1: spriteset_E217_midpan_tk_rev;
  0: spriteset_E217_midpan_yk_rev;
}
switch(FEAT_TRAINS,SELF, sw_E217_gfx_rev_pantograph_livery_flipped, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  3: spriteset_E217_middd_tk;
  2: spriteset_E217_middd_yk;
  1: spriteset_E217_midpan_tk;
  0: spriteset_E217_midpan_yk;
}

//Check for flipped vehicles (dual_headed)
switch(FEAT_TRAINS, SELF, sw_E217_gfx_rev_flippedcheck_cab_front, vehicle_is_flipped) {
  1: sw_E217_gfx_rev_cab_livery_back;
 default: sw_E217_gfx_rev_cab_livery_front;
}
switch(FEAT_TRAINS, SELF, sw_E217_gfx_rev_flippedcheck_cab_back, vehicle_is_flipped) {
  1: sw_E217_gfx_rev_cab_livery_front;
 default: sw_E217_gfx_rev_cab_livery_back;
}

switch(FEAT_TRAINS, SELF, sw_E217_gfx_rev_flippedcheck_pantograph_single, vehicle_is_flipped) {
  1: sw_E217_gfx_rev_pantograph_livery_flipped;
 default: sw_E217_gfx_rev_pantograph_livery;
}

switch(FEAT_TRAINS, SELF, sw_E217_gfx_rev_flippedcheck_mucar, vehicle_is_flipped) {
  1: sw_E217_gfx_rev_mucar_livery_flipped;
 default: sw_E217_gfx_rev_mucar_livery;
}

//Pantograph Position Testing
switch(FEAT_TRAINS, SELF, sw_E217_gfx_rev_pantograph_pos, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%8]){ //look at opposte position_in_vehID_chain
  1: sw_E217_gfx_rev_flippedcheck_pantograph_single;
  7: sw_E217_gfx_rev_flippedcheck_pantograph_single;
  default: sw_E217_gfx_rev_flippedcheck_mucar;
}

//ID Testing
switch(FEAT_TRAINS, SELF, sw_E217_gfx_rev_cab_idcheck_behind, [STORE_TEMP(position_in_consist_from_end-position_in_consist+1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000: sw_E217_gfx_rev_flippedcheck_cab_front;
  2001: sw_E217_gfx_rev_flippedcheck_cab_back;
}
switch(FEAT_TRAINS, SELF, sw_E217_gfx_rev_cab_idcheck_infront, [STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000: sw_E217_gfx_rev_flippedcheck_cab_back;
  2001: sw_E217_gfx_rev_flippedcheck_cab_front;
  default: sw_E217_gfx_rev_cab_idcheck_behind;
}
switch(FEAT_TRAINS, SELF, sw_E217_gfx_rev_cab_frontcheck, position_in_consist){
  0: sw_E217_gfx_rev_cab_livery_front_flipped;
  default: sw_E217_gfx_rev_cab_idcheck_infront;
}
switch(FEAT_TRAINS, SELF, sw_E217_gfx_rev_idcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000: sw_E217_gfx_rev_pantograph_pos;
  2001: sw_E217_gfx_rev_cab_frontcheck;
}
/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/

//E217 Yokosuka
switch(FEAT_TRAINS, PARENT, sw_E217_gfx_front_revcheck_yk, vehicle_is_reversed){
   0: spriteset_E217_front_yk;
   default: sw_E217_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, PARENT, sw_E217_gfx_back_revcheck_yk, vehicle_is_reversed){
 0: spriteset_E217_back_yk_rev;
 default: sw_E217_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, SELF, sw_E217_gfx_frontback_yk, vehicle_is_flipped) {
  1: sw_E217_gfx_back_revcheck_yk;
 default: sw_E217_gfx_front_revcheck_yk;
}

//E217 Tokadio
switch(FEAT_TRAINS, PARENT, sw_E217_gfx_front_revcheck_tk, vehicle_is_reversed){
   0: spriteset_E217_front_tk;
   default: sw_E217_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, PARENT, sw_E217_gfx_back_revcheck_tk, vehicle_is_reversed){
 0: spriteset_E217_back_tk_rev;
 default: sw_E217_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, SELF, sw_E217_gfx_frontback_tk, vehicle_is_flipped) {
  1: sw_E217_gfx_back_revcheck_tk;
 default: sw_E217_gfx_front_revcheck_tk;
}
/*---END OF SECTION---*/



/*---GFX: Middle Car Switches---*/

//E217 Yokosuka
switch(FEAT_TRAINS, PARENT, sw_E217_gfx_mucar_revcheck_dd_yk, vehicle_is_reversed){
 0: spriteset_E217_middd_yk;
 default: sw_E217_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, PARENT, sw_E217_gfx_mucar_revcheck_mid_yk, vehicle_is_reversed){
 0: sw_E217_gfx_pantograph_pos_yoko;
 default: sw_E217_gfx_rev_idcheck;
}

//E217 Tokadio
switch(FEAT_TRAINS, PARENT, sw_E217_gfx_mucar_revcheck_dd_tk, vehicle_is_reversed){
 0: spriteset_E217_middd_tk;
 default: sw_E217_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, PARENT, sw_E217_gfx_mucar_revcheck_mid_tk, vehicle_is_reversed){
 0: sw_E217_gfx_pantograph_pos_tk;
 default: sw_E217_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Livery Refitting Switches---*/

//Main Switches
  switch(FEAT_TRAINS, PARENT, sw_E217_gfx_mucar2,  cargo_subtype) {
  1: sw_E217_gfx_mucar_revcheck_mid_tk;
  0: sw_E217_gfx_mucar_revcheck_mid_yk;
}
switch(FEAT_TRAINS, SELF, sw_E217_gfx_mucar,  cargo_subtype) {
  3: sw_E217_gfx_mucar_revcheck_dd_tk;
  2: sw_E217_gfx_mucar_revcheck_dd_yk;
  1: sw_E217_gfx_mucar2;
  0: sw_E217_gfx_mucar2;
}
switch(FEAT_TRAINS, PARENT, sw_E217_gfx_main,  cargo_subtype) {
  1: sw_E217_gfx_frontback_tk;
  0: sw_E217_gfx_frontback_yk;
}

//Menu Switches
switch(FEAT_TRAINS, SELF, sw_E217_subtypetext_mucar2, cargo_subtype) {
  3: string(SHONAN_LV_DD);
  2: string(YOKOSUKA_LV_DD);
  1: string(BLANK);
  0: string(BLANK);
}
switch(FEAT_TRAINS, SELF, sw_E217_subtypetext_mucar, cargo_subtype) {
  1: string(SHONAN_LV);
  0: string(YOKOSUKA_LV);
  sw_E217_subtypetext_mucar2;
}
switch(FEAT_TRAINS, SELF, sw_E217_subtypetext_main2, cargo_subtype) {
  //3: string(BLANK);
  //2: string(BLANK);
  1: string(SHONAN_LV);
  0: string(YOKOSUKA_LV);
}
switch(FEAT_TRAINS, SELF, sw_E217_subtypetext_main, cargo_subtype) {
  1: string(SHONAN_LV);
  0: string(YOKOSUKA_LV);
  sw_E217_subtypetext_main2;
}
/*---END OF SECTION---*/



//Coupling
  switch(FEAT_TRAINS, SELF, sw_E217_attach_vehid, [vehicle_type_id == emu_E217 || vehicle_type_id == mu_car]) {
  0: return string(MU_UNIQUE);
  }



item(FEAT_TRAINS, emu_E217) {
    property {
        name:                         string(JRE_E217);
        introduction_date:            date(1994, 12, 03);
        model_life:                   5;
        vehicle_life:                 38;
        reliability_decay:            12;

        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_4D;
        cost_factor:                  17;
        running_cost_factor:          51;

        speed:                       	120 km/h;
        track_type:                   NARROW_OHLE;
        power:                        380 kW;
        weight:                       34 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  1;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_ELECTRIC;
        engine_class:                 ENGINE_CLASS_ELECTRIC;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                      sw_E217_gfx_main;
		    purchase:                 spriteset_E217_purchase;
		    additional_text:	      return string(JRE_E217_DESC);
        cargo_subtype_text:           sw_E217_subtypetext_main;
        can_attach_wagon:			  sw_E217_attach_vehid;
        //start_stop:                   ;
    }
    /*Multiple Unit Car*/
      livery_override(mu_car){
        default:                      sw_E217_gfx_mucar;
        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_4D;
        cargo_subtype_text:           sw_E217_subtypetext_mucar;
        power: 190;
        weight: 25;
      }

}
# 1 "JPplus.pnml" 4
# 1 "src/JRE/EMU/209_series.pnml" 1
/*---GFX: Spritesets---*/

//Purchase Sprites
spriteset (spriteset_209_purchase,	                                                     "gfx/JRE/emu209/purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_209_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,          "gfx/JRE/emu209/purchase_32bpp.png")         {tmpl_purchase_dh_32bpp(0, 0)}

//209-0 Keto
spriteset (spriteset_209_front_keto,	  	"gfx/JRE/emu209/209-0_keto.png")          	{ tmpl_std(0, 0) }
spriteset (spriteset_209_back_keto,	  	"gfx/JRE/emu209/209-0_keto.png")            { tmpl_std(0, 25) }
spriteset (spriteset_209_midhd_keto,		"gfx/JRE/emu209/209-0_keto.png")          	{ tmpl_std(0, 50) }
spriteset (spriteset_209_mid_keto,		"gfx/JRE/emu209/209-0_keto.png") 	          { tmpl_std(0, 75) }
spriteset (spriteset_209_midpan_keto,	  "gfx/JRE/emu209/209-0_keto.png")          	{ tmpl_std(0, 100) }

spriteset (spriteset_209_front_keto_rev,	  	"gfx/JRE/emu209/209-0_keto.png")          	{ tmpl_std_rev(0, 0) }
spriteset (spriteset_209_back_keto_rev,	  	"gfx/JRE/emu209/209-0_keto.png")            { tmpl_std_rev(0, 25) }
spriteset (spriteset_209_midhd_keto_rev,		"gfx/JRE/emu209/209-0_keto.png")          	{ tmpl_std_rev(0, 50) }
spriteset (spriteset_209_mid_keto_rev,		"gfx/JRE/emu209/209-0_keto.png") 	          { tmpl_std_rev(0, 75) }
spriteset (spriteset_209_midpan_keto_rev,	  "gfx/JRE/emu209/209-0_keto.png")          	{ tmpl_std_rev(0, 100) }

//209-0 Nanbu
spriteset (spriteset_209_front_nanbu,	  	"gfx/JRE/emu209/209-0_nannbu.png")          	{ tmpl_std(0, 0) }
spriteset (spriteset_209_back_nanbu,	  	"gfx/JRE/emu209/209-0_nannbu.png")            { tmpl_std(0, 25) }
spriteset (spriteset_209_mid_nanbu,		"gfx/JRE/emu209/209-0_nannbu.png") 	          { tmpl_std(0, 50) }
spriteset (spriteset_209_midpan_nanbu,	  "gfx/JRE/emu209/209-0_nannbu.png")          	{ tmpl_std(0, 75) }

spriteset (spriteset_209_front_nanbu_rev,	  	"gfx/JRE/emu209/209-0_nannbu.png")          	{ tmpl_std_rev(0, 0) }
spriteset (spriteset_209_back_nanbu_rev,	  	"gfx/JRE/emu209/209-0_nannbu.png")            { tmpl_std_rev(0, 25) }
spriteset (spriteset_209_mid_nanbu_rev,		"gfx/JRE/emu209/209-0_nannbu.png") 	          { tmpl_std_rev(0, 50) }
spriteset (spriteset_209_midpan_nanbu_rev,	  "gfx/JRE/emu209/209-0_nannbu.png")          	{ tmpl_std_rev(0, 75) }

//209-0 Bousou
spriteset (spriteset_209_front_boso,	  	"gfx/JRE/emu209/209-0_bousou.png")          	{ tmpl_std(0, 0) }
spriteset (spriteset_209_back_boso,	  	"gfx/JRE/emu209/209-0_bousou.png")            { tmpl_std(0, 25) }
spriteset (spriteset_209_mid_boso,		"gfx/JRE/emu209/209-0_bousou.png") 	          { tmpl_std(0, 50) }
spriteset (spriteset_209_midpan_boso,	  "gfx/JRE/emu209/209-0_bousou.png")          	{ tmpl_std(0, 75) }

spriteset (spriteset_209_front_boso_rev,	  	"gfx/JRE/emu209/209-0_bousou.png")          	{ tmpl_std_rev(0, 0) }
spriteset (spriteset_209_back_boso_rev,	  	"gfx/JRE/emu209/209-0_bousou.png")            { tmpl_std_rev(0, 25) }
spriteset (spriteset_209_mid_boso_rev,		"gfx/JRE/emu209/209-0_bousou.png") 	          { tmpl_std_rev(0, 50) }
spriteset (spriteset_209_midpan_boso_rev,	  "gfx/JRE/emu209/209-0_bousou.png")          	{ tmpl_std_rev(0, 75) }
//209-500 Keto
spriteset (spriteset_2095_front_keto,	  	"gfx/JRE/emu209/209-500_keto.png")          	{ tmpl_std(0, 0) }
spriteset (spriteset_2095_back_keto,	  	"gfx/JRE/emu209/209-500_keto.png")            { tmpl_std(0, 25) }
spriteset (spriteset_2095_mid_keto,		"gfx/JRE/emu209/209-500_keto.png") 	          { tmpl_std(0, 50) }
spriteset (spriteset_2095_midpan_keto,	  "gfx/JRE/emu209/209-500_keto.png")          	{ tmpl_std(0, 75) }

spriteset (spriteset_2095_front_keto_rev,	  	"gfx/JRE/emu209/209-500_keto.png")          	{ tmpl_std_rev(0, 0) }
spriteset (spriteset_2095_back_keto_rev,	  	"gfx/JRE/emu209/209-500_keto.png")            { tmpl_std_rev(0, 25) }
spriteset (spriteset_2095_mid_keto_rev,		"gfx/JRE/emu209/209-500_keto.png") 	          { tmpl_std_rev(0, 50) }
spriteset (spriteset_2095_midpan_keto_rev,	  "gfx/JRE/emu209/209-500_keto.png")          	{ tmpl_std_rev(0, 75) }
//209-500 Sobu
spriteset (spriteset_2095_front_sobu,	  	"gfx/JRE/emu209/209-500_sobu.png")          	{ tmpl_std(0, 0) }
spriteset (spriteset_2095_back_sobu,	  	"gfx/JRE/emu209/209-500_sobu.png")            { tmpl_std(0, 25) }
spriteset (spriteset_2095_mid_sobu,		"gfx/JRE/emu209/209-500_sobu.png") 	          { tmpl_std(0, 50) }
spriteset (spriteset_2095_midpan_sobu,	  "gfx/JRE/emu209/209-500_sobu.png")          	{ tmpl_std(0, 75) }

spriteset (spriteset_2095_front_sobu_rev,	  	"gfx/JRE/emu209/209-500_sobu.png")          	{ tmpl_std_rev(0, 0) }
spriteset (spriteset_2095_back_sobu_rev,	  	"gfx/JRE/emu209/209-500_sobu.png")            { tmpl_std_rev(0, 25) }
spriteset (spriteset_2095_mid_sobu_rev,		"gfx/JRE/emu209/209-500_sobu.png") 	          { tmpl_std_rev(0, 50) }
spriteset (spriteset_2095_midpan_sobu_rev,	  "gfx/JRE/emu209/209-500_sobu.png")          	{ tmpl_std_rev(0, 75) }
/*---END OF SECTION---*/



/*---GFX: Pantograph Positions---*/
//209-0 Keto
switch(FEAT_TRAINS,SELF, sw_209_gfx_pantograph_pos_keto, position_in_vehid_chain%10){
  1: spriteset_209_midpan_keto;
  4: spriteset_209_midhd_keto;
  6: spriteset_209_midpan_keto;
  default: spriteset_209_mid_keto;
}

//209-0 Nanbu
switch(FEAT_TRAINS,SELF, sw_209_gfx_pantograph_pos_nanbu, position_in_vehid_chain%6){
  0: spriteset_209_midpan_nanbu;
  2: spriteset_209_midpan_nanbu;
  default: spriteset_209_mid_nanbu;
}

//209-0 Bousou
switch(FEAT_TRAINS,SELF, sw_209_gfx_pantograph_pos_boso, position_in_vehid_chain%6){
  1: spriteset_209_midpan_boso;
  3: spriteset_209_midpan_boso;
  default: spriteset_209_mid_boso;
}

//209-500 Keto
switch(FEAT_TRAINS,SELF, sw_2095_gfx_pantograph_pos_keto, position_in_vehid_chain%10){
  1: spriteset_2095_midpan_keto;
  6: spriteset_2095_midpan_keto;
  default: spriteset_2095_mid_keto;
}

//209-500 Sobu
switch(FEAT_TRAINS,SELF, sw_2095_gfx_pantograph_pos_sobu, position_in_vehid_chain%10){
  1: spriteset_2095_midpan_sobu;
  6: spriteset_2095_midpan_sobu;
  default: spriteset_2095_mid_sobu;
}
/*---END OF SECTION---*/



/*---GFX: Train Reversing Switches---*/
//Livery Selection
switch(FEAT_TRAINS,SELF, sw_209_gfx_rev_cab_livery_back, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  4: spriteset_2095_back_sobu_rev;
  3: spriteset_2095_back_keto_rev;
  2: spriteset_209_back_boso_rev;
  1: spriteset_209_back_nanbu_rev;
  0: spriteset_209_back_keto_rev;
}
switch(FEAT_TRAINS,SELF, sw_209_gfx_rev_cab_livery_front, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  4: spriteset_2095_front_sobu_rev;
  3: spriteset_2095_front_keto_rev;
  2: spriteset_209_front_boso_rev;
  1: spriteset_209_front_nanbu_rev;
  0: spriteset_209_front_keto_rev;
}
switch(FEAT_TRAINS,SELF, sw_209_gfx_rev_cab_livery_front_flipped, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  4: spriteset_2095_front_sobu;
  3: spriteset_2095_front_keto;
  2: spriteset_209_front_boso;
  1: spriteset_209_front_nanbu;
  0: spriteset_209_front_keto;
}
switch(FEAT_TRAINS,SELF, sw_209_gfx_rev_mucar_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  4: spriteset_2095_mid_sobu_rev;
  3: spriteset_2095_mid_keto_rev;
  2: spriteset_209_mid_boso_rev;
  1: spriteset_209_mid_nanbu_rev;
  0: spriteset_209_mid_keto_rev;
}
switch(FEAT_TRAINS,SELF, sw_209_gfx_rev_mucar_livery_flipped, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  4: spriteset_2095_mid_sobu;
  3: spriteset_2095_mid_keto;
  2: spriteset_209_mid_boso;
  1: spriteset_209_mid_nanbu;
  0: spriteset_209_mid_keto;
}
switch(FEAT_TRAINS,SELF, sw_209_gfx_rev_pantograph_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  4: spriteset_2095_midpan_sobu_rev;
  3: spriteset_2095_midpan_keto_rev;
  2: spriteset_209_midpan_boso_rev;
  1: spriteset_209_midpan_nanbu_rev;
  0: spriteset_209_midpan_keto_rev;
}
switch(FEAT_TRAINS,SELF, sw_209_gfx_rev_pantograph_livery_flipped, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  4: spriteset_2095_midpan_sobu;
  3: spriteset_2095_midpan_keto;
  2: spriteset_209_midpan_boso;
  1: spriteset_209_midpan_nanbu;
  0: spriteset_209_midpan_keto;
}
switch(FEAT_TRAINS,SELF, sw_209_gfx_rev_mucar_hd_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  4: spriteset_2095_mid_sobu_rev;
  3: spriteset_2095_mid_keto_rev;
  2: spriteset_209_mid_boso_rev;
  1: spriteset_209_mid_nanbu_rev;
  0: spriteset_209_midhd_keto_rev;
}
switch(FEAT_TRAINS,SELF, sw_209_gfx_rev_mucar_hd_livery_flipped, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  4: spriteset_2095_mid_sobu;
  3: spriteset_2095_mid_keto;
  2: spriteset_209_mid_boso;
  1: spriteset_209_mid_nanbu;
  0: spriteset_209_midhd_keto;
}
//Check for flipped vehicles (dual_headed)
switch(FEAT_TRAINS, SELF, sw_209_gfx_rev_flippedcheck_cab_front, vehicle_is_flipped) {
  1: sw_209_gfx_rev_cab_livery_back;
 default: sw_209_gfx_rev_cab_livery_front;
}
switch(FEAT_TRAINS, SELF, sw_209_gfx_rev_flippedcheck_cab_back, vehicle_is_flipped) {
  1: sw_209_gfx_rev_cab_livery_front;
 default: sw_209_gfx_rev_cab_livery_back;
}

switch(FEAT_TRAINS, SELF, sw_209_gfx_rev_flippedcheck_pantograph_single, vehicle_is_flipped) {
  1: sw_209_gfx_rev_pantograph_livery_flipped;
 default: sw_209_gfx_rev_pantograph_livery;
}

switch(FEAT_TRAINS, SELF, sw_209_gfx_rev_flippedcheck_mucar, vehicle_is_flipped) {
  1: sw_209_gfx_rev_mucar_livery_flipped;
 default: sw_209_gfx_rev_mucar_livery;
}

switch(FEAT_TRAINS, SELF, sw_209_gfx_rev_flippedcheck_mucar_hd, vehicle_is_flipped) {
  1: sw_209_gfx_rev_mucar_hd_livery_flipped;
 default: sw_209_gfx_rev_mucar_hd_livery;
}

//Pantograph Position Testing
switch(FEAT_TRAINS, SELF, sw_209_gfx_rev_pantograph_pos_keto, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%11]){ //look at opposte position_in_vehID_chain
  1: sw_209_gfx_rev_flippedcheck_pantograph_single;
  4: sw_209_gfx_rev_flippedcheck_mucar_hd;
  6: sw_209_gfx_rev_flippedcheck_pantograph_single;
  default: sw_209_gfx_rev_flippedcheck_mucar;
}
switch(FEAT_TRAINS, SELF, sw_209_gfx_rev_pantograph_pos_nanbu, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%11]){ //look at opposte position_in_vehID_chain
  0: sw_209_gfx_rev_flippedcheck_pantograph_single;
  2: sw_209_gfx_rev_flippedcheck_pantograph_single;
  default: sw_209_gfx_rev_flippedcheck_mucar;
}
switch(FEAT_TRAINS, SELF, sw_209_gfx_rev_pantograph_pos_boso, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%11]){ //look at opposte position_in_vehID_chain
  1: sw_209_gfx_rev_flippedcheck_pantograph_single;
  3: sw_209_gfx_rev_flippedcheck_pantograph_single;
  default: sw_209_gfx_rev_flippedcheck_mucar;
}
switch(FEAT_TRAINS, SELF, sw_2095_gfx_rev_pantograph_pos_keto, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%11]){ //look at opposte position_in_vehID_chain
  1: sw_209_gfx_rev_flippedcheck_pantograph_single;
  6: sw_209_gfx_rev_flippedcheck_pantograph_single;
  default: sw_209_gfx_rev_flippedcheck_mucar;
}
switch(FEAT_TRAINS, SELF, sw_2095_gfx_rev_pantograph_pos_sobu, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%11]){ //look at opposte position_in_vehID_chain
  1: sw_209_gfx_rev_flippedcheck_pantograph_single;
  6: sw_209_gfx_rev_flippedcheck_pantograph_single;
  default: sw_209_gfx_rev_flippedcheck_mucar;
}
switch(FEAT_TRAINS,SELF, sw_209_gfx_rev_pantograph_pos, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  4: sw_2095_gfx_rev_pantograph_pos_sobu;
  3: sw_2095_gfx_rev_pantograph_pos_keto;
  2: sw_209_gfx_rev_pantograph_pos_boso;
  1: sw_209_gfx_rev_pantograph_pos_nanbu;
  0: sw_209_gfx_rev_pantograph_pos_keto;
}

//ID Testing
switch(FEAT_TRAINS, SELF, sw_209_gfx_rev_cab_idcheck_behind, [STORE_TEMP(position_in_consist_from_end-position_in_consist+1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000: sw_209_gfx_rev_flippedcheck_cab_front;
  2021: sw_209_gfx_rev_flippedcheck_cab_back;
}
switch(FEAT_TRAINS, SELF, sw_209_gfx_rev_cab_idcheck_infront, [STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000: sw_209_gfx_rev_flippedcheck_cab_back;
  2021: sw_209_gfx_rev_flippedcheck_cab_front;
  default: sw_209_gfx_rev_cab_idcheck_behind;
}
switch(FEAT_TRAINS, SELF, sw_209_gfx_rev_cab_frontcheck, position_in_consist){
  0: sw_209_gfx_rev_cab_livery_front_flipped;
  default: sw_209_gfx_rev_cab_idcheck_infront;
}
switch(FEAT_TRAINS, SELF, sw_209_gfx_rev_idcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000: sw_209_gfx_rev_pantograph_pos;
  2021: sw_209_gfx_rev_cab_frontcheck;
}
/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/
//209-0 Keto
switch(FEAT_TRAINS, PARENT, sw_209_gfx_front_revcheck_keto, vehicle_is_reversed){
   0: spriteset_209_front_keto;
   default: sw_209_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, PARENT, sw_209_gfx_back_revcheck_keto, vehicle_is_reversed){
 0: spriteset_209_back_keto_rev;
 default: sw_209_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, SELF, sw_209_gfx_frontback_keto, vehicle_is_flipped) {
  1: sw_209_gfx_back_revcheck_keto;
 default: sw_209_gfx_front_revcheck_keto;
}

//209-0 Nanbu
switch(FEAT_TRAINS, PARENT, sw_209_gfx_front_revcheck_nanbu, vehicle_is_reversed){
   0: spriteset_209_front_nanbu;
   default: sw_209_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, PARENT, sw_209_gfx_back_revcheck_nanbu, vehicle_is_reversed){
 0: spriteset_209_back_nanbu_rev;
 default: sw_209_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, SELF, sw_209_gfx_frontback_nanbu, vehicle_is_flipped) {
  1: sw_209_gfx_back_revcheck_nanbu;
 default: sw_209_gfx_front_revcheck_nanbu;
}

//209-0 Bousou
switch(FEAT_TRAINS, PARENT, sw_209_gfx_front_revcheck_boso, vehicle_is_reversed){
   0: spriteset_209_front_boso;
   default: sw_209_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, PARENT, sw_209_gfx_back_revcheck_boso, vehicle_is_reversed){
 0: spriteset_209_back_boso_rev;
 default: sw_209_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, SELF, sw_209_gfx_frontback_boso, vehicle_is_flipped) {
  1: sw_209_gfx_back_revcheck_boso;
 default: sw_209_gfx_front_revcheck_boso;
}

//209-500 Keto
switch(FEAT_TRAINS, PARENT, sw_2095_gfx_front_revcheck_keto, vehicle_is_reversed){
   0: spriteset_2095_front_keto;
   default: sw_209_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, PARENT, sw_2095_gfx_back_revcheck_keto, vehicle_is_reversed){
 0: spriteset_2095_back_keto_rev;
 default: sw_209_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, SELF, sw_2095_gfx_frontback_keto, vehicle_is_flipped) {
  1: sw_2095_gfx_back_revcheck_keto;
 default: sw_2095_gfx_front_revcheck_keto;
}

//209-500 Sobu
switch(FEAT_TRAINS, PARENT, sw_2095_gfx_front_revcheck_sobu, vehicle_is_reversed){
   0: spriteset_2095_front_sobu;
   default: sw_209_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, PARENT, sw_2095_gfx_back_revcheck_sobu, vehicle_is_reversed){
 0: spriteset_2095_back_sobu_rev;
 default: sw_209_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, SELF, sw_2095_gfx_frontback_sobu, vehicle_is_flipped) {
  1: sw_2095_gfx_back_revcheck_sobu;
 default: sw_2095_gfx_front_revcheck_sobu;
}
/*---END OF SECTION---*/



/*---GFX: Middle Car Switches---*/
//209-0 Keto
switch(FEAT_TRAINS, PARENT, sw_209_gfx_mucar_revcheck_mid_keto, vehicle_is_reversed){
 0: sw_209_gfx_pantograph_pos_keto;
 default: sw_209_gfx_rev_idcheck;
}

//209-0 Nannbu
switch(FEAT_TRAINS, PARENT, sw_209_gfx_mucar_revcheck_mid_nanbu, vehicle_is_reversed){
 0: sw_209_gfx_pantograph_pos_nanbu;
 default: sw_209_gfx_rev_idcheck;
}

//209-0 Bousou
switch(FEAT_TRAINS, PARENT, sw_209_gfx_mucar_revcheck_mid_boso, vehicle_is_reversed){
 0: sw_209_gfx_pantograph_pos_boso;
 default: sw_209_gfx_rev_idcheck;
}

//209-500 Keto
switch(FEAT_TRAINS, PARENT, sw_2095_gfx_mucar_revcheck_mid_keto, vehicle_is_reversed){
 0: sw_2095_gfx_pantograph_pos_keto;
 default: sw_209_gfx_rev_idcheck;
}

//209-500 Sobu
switch(FEAT_TRAINS, PARENT, sw_2095_gfx_mucar_revcheck_mid_sobu, vehicle_is_reversed){
 0: sw_2095_gfx_pantograph_pos_sobu;
 default: sw_209_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Livery Refitting Switches---*/

//Main Switches
switch(FEAT_TRAINS, SELF, sw_209_gfx_mucar,  cargo_subtype) {
  4: sw_2095_gfx_mucar_revcheck_mid_sobu;
  3: sw_2095_gfx_mucar_revcheck_mid_keto;
  2: sw_209_gfx_mucar_revcheck_mid_boso;
  1: sw_209_gfx_mucar_revcheck_mid_nanbu;
  0: sw_209_gfx_mucar_revcheck_mid_keto;
}
switch(FEAT_TRAINS, SELF, sw_209_gfx_main,  cargo_subtype) {
  4: sw_2095_gfx_frontback_sobu;
  3: sw_2095_gfx_frontback_keto;
  2: sw_209_gfx_frontback_boso;
  1: sw_209_gfx_frontback_nanbu;
  0: sw_209_gfx_frontback_keto;
}

//Menu Switches
switch(FEAT_TRAINS, SELF, sw_209_subtypetext_mucar, cargo_subtype) {
  4: string(SOBU_500_LV);
  3: string(KT_500_LV);
  2: string(BOUSOU_LV);
  1: string(NANNBU_LV);
  0: string(KT_LV);
}
switch(FEAT_TRAINS, SELF, sw_209_subtypetext_main, cargo_subtype) {
  4: string(SOBU_500_LV);
  3: string(KT_500_LV);
  2: string(BOUSOU_LV);
  1: string(NANNBU_LV);
  0: string(KT_LV);
}
/*---END OF SECTION---*/



//Coupling
  switch(FEAT_TRAINS, SELF, sw_209_attach_vehid, [vehicle_type_id == emu_209 || vehicle_type_id == mu_car]) {
  0: return string(MU_UNIQUE);
  }



item(FEAT_TRAINS, emu_209) {
    property {
        name:                         string(JRE_209);
        introduction_date:            date(1992, 04, 16);
        model_life:                   12;
        vehicle_life:                 38;
        reliability_decay:            12;

        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_4D;
        cost_factor:                  17;
        running_cost_factor:          51;

        speed:                        110 km/h;
        track_type:                   NARROW_OHLE;
        power:                        380 kW;
        weight:                       35 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  1;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_ELECTRIC;
        engine_class:                 ENGINE_CLASS_ELECTRIC;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                      sw_209_gfx_main;
		    purchase:                 spriteset_209_purchase;
		    additional_text:	      return string(JRE_209_DESC);
        cargo_subtype_text:           sw_209_subtypetext_main;
        can_attach_wagon:			  sw_209_attach_vehid;
        //start_stop:                   ;
    }
    /*Multiple Unit Car*/
      livery_override(mu_car){
        default:                      sw_209_gfx_mucar;
        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_4D;
        cargo_subtype_text:           sw_209_subtypetext_mucar;
        power: 190;
        weight: 24;
      }

}
# 1 "JPplus.pnml" 4
# 1 "src/JRE/EMU/107_series.pnml" 1
/*---GFX: Spritesets---*/

//Purchase Sprites
spriteset (spriteset_107_purchase,	                                                     "gfx/JRE/emu107/purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_107_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,          "gfx/JRE/emu107/purchase_32bpp.png")         {tmpl_purchase_dh_32bpp(0, 0)}

//107 Standard "Sandwich Train" Livery
spriteset (spriteset_107_front_std,	 	"gfx/JRE/emu107/emu107.png")     	{ tmpl_std(0, 0) }
spriteset (spriteset_107_back_std,	   	"gfx/JRE/emu107/emu107.png")     	{ tmpl_std_rev(0, 25) }
alternative_sprites(spriteset_107_front_std, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "gfx/JRE/emu107/emu107_32bpp.png") {tmpl_std(0, 0)}
alternative_sprites(spriteset_107_back_std, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "gfx/JRE/emu107/emu107_32bpp.png") {tmpl_std_rev(0, 25)}

spriteset (spriteset_107_front_std_rev,	 	"gfx/JRE/emu107/emu107_rev.png")     	{ tmpl_std(0, 0) }
spriteset (spriteset_107_back_std_rev,	   	"gfx/JRE/emu107/emu107_rev.png")     	{ tmpl_std_rev(0, 25) }
alternative_sprites(spriteset_107_front_std_rev, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "gfx/JRE/emu107/emu107_rev_32bpp.png") {tmpl_std(0, 0)}
alternative_sprites(spriteset_107_back_std_rev, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "gfx/JRE/emu107/emu107_rev_32bpp.png") {tmpl_std_rev(0, 25)}
//107 Joshin Electric Railway
spriteset (spriteset_107_front_joshin,    	"gfx/JRE/emu107/emu107.png")          	{ tmpl_std(0, 50) }
spriteset (spriteset_107_back_joshin,   	  "gfx/JRE/emu107/emu107.png")          	{ tmpl_std_rev(0, 75) }
alternative_sprites(spriteset_107_front_joshin, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "gfx/JRE/emu107/emu107_32bpp.png") {tmpl_std(0, 50)}
alternative_sprites(spriteset_107_back_joshin, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "gfx/JRE/emu107/emu107_32bpp.png") {tmpl_std_rev(0, 75)}

spriteset (spriteset_107_front_joshin_rev,    	"gfx/JRE/emu107/emu107_rev.png")          	{ tmpl_std(0, 50) }
spriteset (spriteset_107_back_joshin_rev,   	  "gfx/JRE/emu107/emu107_rev.png")          	{ tmpl_std_rev(0, 75) }
alternative_sprites(spriteset_107_front_joshin_rev, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "gfx/JRE/emu107/emu107_rev_32bpp.png") {tmpl_std(0, 50)}
alternative_sprites(spriteset_107_back_joshin_rev, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "gfx/JRE/emu107/emu107_rev_32bpp.png") {tmpl_std_rev(0, 75)}
//107 Nikko Line Red
spriteset (spriteset_107_front_nikkored,	 	"gfx/JRE/emu107/emu107.png")   	{ tmpl_std(0, 100) }
spriteset (spriteset_107_back_nikkored,	 	"gfx/JRE/emu107/emu107.png")   	{ tmpl_std_rev(0, 125) }
alternative_sprites(spriteset_107_front_nikkored, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "gfx/JRE/emu107/emu107_32bpp.png") {tmpl_std(0, 100)}
alternative_sprites(spriteset_107_back_nikkored, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "gfx/JRE/emu107/emu107_32bpp.png") {tmpl_std_rev(0, 125)}

spriteset (spriteset_107_front_nikkored_rev,	 	"gfx/JRE/emu107/emu107_rev.png")   	{ tmpl_std(0, 100) }
spriteset (spriteset_107_back_nikkored_rev,	 	"gfx/JRE/emu107/emu107_rev.png")   	{ tmpl_std_rev(0, 125) }
alternative_sprites(spriteset_107_front_nikkored_rev, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "gfx/JRE/emu107/emu107_rev_32bpp.png") {tmpl_std(0, 100)}
alternative_sprites(spriteset_107_back_nikkored_rev, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "gfx/JRE/emu107/emu107_rev_32bpp.png") {tmpl_std_rev(0, 125)}
//107 Nikko Line "N"
spriteset (spriteset_107_front_nikko,	 	"gfx/JRE/emu107/emu107.png")   	{ tmpl_std(0, 150) }
spriteset (spriteset_107_back_nikko,	 	"gfx/JRE/emu107/emu107.png")   	{ tmpl_std_rev(0, 175) }
alternative_sprites(spriteset_107_front_nikko, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "gfx/JRE/emu107/emu107_32bpp.png") {tmpl_std(0, 150)}
alternative_sprites(spriteset_107_back_nikko, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "gfx/JRE/emu107/emu107_32bpp.png") {tmpl_std_rev(0, 175)}

spriteset (spriteset_107_front_nikko_rev,	 	"gfx/JRE/emu107/emu107_rev.png")   	{ tmpl_std(0, 150) }
spriteset (spriteset_107_back_nikko_rev,	 	"gfx/JRE/emu107/emu107_rev.png")   	{ tmpl_std_rev(0, 175) }
alternative_sprites(spriteset_107_front_nikko_rev, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "gfx/JRE/emu107/emu107_rev_32bpp.png") {tmpl_std(0, 150)}
alternative_sprites(spriteset_107_back_nikko_rev, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP, "gfx/JRE/emu107/emu107_rev_32bpp.png") {tmpl_std_rev(0, 175)}
/*---END OF SECTION---*/



/*---GFX: Train Reversing Switches---*/
//Livery Selection
switch(FEAT_TRAINS,SELF, sw_107_gfx_rev_cab_livery_back, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  3: spriteset_107_back_joshin_rev;
  2: spriteset_107_back_nikkored_rev;
  1: spriteset_107_back_nikko_rev;
  0: spriteset_107_back_std_rev;
}
switch(FEAT_TRAINS,SELF, sw_107_gfx_rev_cab_livery_front, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  3: spriteset_107_front_joshin_rev;
  2: spriteset_107_front_nikkored_rev;
  1: spriteset_107_front_nikko_rev;
  0: spriteset_107_front_std_rev;
}
switch(FEAT_TRAINS,SELF, sw_107_gfx_rev_cab_livery_front_flipped, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  3: spriteset_107_back_joshin_rev;
  2: spriteset_107_back_nikkored_rev;
  1: spriteset_107_back_nikko_rev;
  0: spriteset_107_back_std_rev;
}

//ID Testing
switch(FEAT_TRAINS, SELF, sw_107_gfx_rev_poscheck, position_in_consist%2){
  0: sw_107_gfx_rev_cab_livery_back;
  1: sw_107_gfx_rev_cab_livery_front;
}
/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/
//107 Standard "Sandwich Train" Livery
switch(FEAT_TRAINS, PARENT, sw_107_gfx_front_revcheck_std, vehicle_is_reversed){
   0: spriteset_107_front_std;
   default: sw_107_gfx_rev_poscheck;
}
switch(FEAT_TRAINS, PARENT, sw_107_gfx_back_revcheck_std, vehicle_is_reversed){
 0: spriteset_107_back_std;
 default: sw_107_gfx_rev_poscheck;
}
switch(FEAT_TRAINS, SELF, sw_107_gfx_frontback_std, vehicle_is_flipped) {
  1: sw_107_gfx_back_revcheck_std;
 default: sw_107_gfx_front_revcheck_std;
}

//107 Joshin Electric Railway
switch(FEAT_TRAINS, PARENT, sw_107_gfx_front_revcheck_joshin, vehicle_is_reversed){
   0: spriteset_107_front_joshin;
   default: sw_107_gfx_rev_poscheck;
}
switch(FEAT_TRAINS, PARENT, sw_107_gfx_back_revcheck_joshin, vehicle_is_reversed){
 0: spriteset_107_back_joshin;
 default: sw_107_gfx_rev_poscheck;
}
switch(FEAT_TRAINS, SELF, sw_107_gfx_frontback_joshin, vehicle_is_flipped) {
  1: sw_107_gfx_back_revcheck_joshin;
 default: sw_107_gfx_front_revcheck_joshin;
}

//107 Nikko Line Red
switch(FEAT_TRAINS, PARENT, sw_107_gfx_front_revcheck_nikkored, vehicle_is_reversed){
   0: spriteset_107_front_nikkored;
   default: sw_107_gfx_rev_poscheck;
}
switch(FEAT_TRAINS, PARENT, sw_107_gfx_back_revcheck_nikkored, vehicle_is_reversed){
 0: spriteset_107_back_nikkored;
 default: sw_107_gfx_rev_poscheck;
}
switch(FEAT_TRAINS, SELF, sw_107_gfx_frontback_nikkored, vehicle_is_flipped) {
  1: sw_107_gfx_back_revcheck_nikkored;
 default: sw_107_gfx_front_revcheck_nikkored;
}

//107 Nikko Line "N"
switch(FEAT_TRAINS, PARENT, sw_107_gfx_front_revcheck_nikko, vehicle_is_reversed){
   0: spriteset_107_front_nikko;
   default: sw_107_gfx_rev_poscheck;
}
switch(FEAT_TRAINS, PARENT, sw_107_gfx_back_revcheck_nikko, vehicle_is_reversed){
 0: spriteset_107_back_nikko;
 default: sw_107_gfx_rev_poscheck;
}
switch(FEAT_TRAINS, SELF, sw_107_gfx_frontback_nikko, vehicle_is_flipped) {
  1: sw_107_gfx_back_revcheck_nikko;
 default: sw_107_gfx_front_revcheck_nikko;
}
/*---END OF SECTION---*/



/*---GFX: Livery Refitting Switches---*/

//Main Switches
switch(FEAT_TRAINS, SELF, sw_107_gfx_main,  cargo_subtype) {
  3: sw_107_gfx_frontback_joshin;
  2: sw_107_gfx_frontback_nikkored;
  1: sw_107_gfx_frontback_nikko;
  0: sw_107_gfx_frontback_std;
}

//Menu Switches
switch(FEAT_TRAINS, SELF, sw_107_subtypetext_main, cargo_subtype) {
  3: return string(JOSHIN_LV);
  2: return string(NIKKORED_LV);
  1: return string(NIKKO_LV);
	0: string(SANDWICH_LV);
}
/*---END OF SECTION---*/



//Coupling
  switch(FEAT_TRAINS, SELF, sw_107_attach_vehid, [vehicle_type_id == emu_107]) {
  0: return string(SAME_UNIQUE);
  }



item(FEAT_TRAINS, emu_107) {
    property {
        name:                         string(JRE_107);
        introduction_date:            date(1988, 05, 01);
        model_life:                   3;
        vehicle_life:                 37;
        reliability_decay:            13;

        cargo_capacity:               param_capacity_rapid;
        loading_speed:                param_loading_3D;
        cost_factor:                  17;
        running_cost_factor:          51;

        speed:                        100 km/h;
        track_type:                   NARROW_OHLE;
        power:                        480 kW;
        weight:                       37 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  1;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_ELECTRIC;
        engine_class:                 ENGINE_CLASS_ELECTRIC;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                sw_107_gfx_main;
		    purchase:               spriteset_107_purchase;
		    additional_text:	      return string(JRE_107_DESC);
        cargo_subtype_text:     sw_107_subtypetext_main;
        can_attach_wagon:			  sw_107_attach_vehid;
        //start_stop:                   ;
    }
}
# 1 "JPplus.pnml" 4


//JR-Central
# 1 "src/JRC/EMU/211_56_series.pnml" 1


/*---GFX: Year Dependent Graphics---*/

//211-56 Tokai
switch(FEAT_TRAINS, SELF, sw_21156_gfx_year_back_pantograph, current_year){
 0..2005: spriteset_21156_back_darm;
 default: spriteset_21156_back_sarm;
}
/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/

//211-56 Tokai
switch(FEAT_TRAINS, SELF, sw_21156_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_21156_front;
 default: sw_21156_gfx_year_back_pantograph;
}
switch(FEAT_TRAINS, PARENT, sw_21156_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_21156_gfx_frontback_flipcheck;
 default: sw_211group_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Middle Car Switches---*/

//211-56 Tokai
switch(FEAT_TRAINS, PARENT, sw_21156_gfx_mucar_revcheck, vehicle_is_reversed){
 0: spriteset_21156_mid;
 default: sw_211group_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



//Coupling
  switch(FEAT_TRAINS, SELF, sw_21156_attach_vehid, [vehicle_type_id == emu_211 || vehicle_type_id == emu_21156 ||vehicle_type_id == emu_213 || vehicle_type_id == emu_313 || vehicle_type_id == emu_311 || vehicle_type_id == mu_car]) {
  0: return string(MU_UNIQUE);
  }



item(FEAT_TRAINS, emu_21156) {
    property {
        name:                         string(JNR_21156);
        introduction_date:            date(1988, 02, 11);
        model_life:                   10;
        vehicle_life:                 40;
        reliability_decay:            14;

        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_3D;
        cost_factor:                  17;
        running_cost_factor:          51;

        speed:                        120 km/h;
        track_type:                   NARROW_OHLE;
        power:                        480 kW;
        weight:                       35 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  1;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_ELECTRIC;
        engine_class:                 ENGINE_CLASS_ELECTRIC;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                      sw_21156_gfx_frontback_revcheck;
		    purchase:                 spriteset_21156_purchase;
		    additional_text:	      return string(JNR_21156_DESC);
        //cargo_subtype_text:           sw_21156_subtypetext_main;
        can_attach_wagon:			  sw_21156_attach_vehid;
        //start_stop:                   ;
    }
    /*Multiple Unit Car*/
      livery_override(mu_car){
        default:                      sw_21156_gfx_mucar_revcheck;
        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_3D;
        //cargo_subtype_text:           sw_21156_subtypetext_mucar;
        power: 120;
        weight: 25;
      }

}
# 1 "JPplus.pnml" 4
# 1 "src/JRC/EMU/311_series.pnml" 1


/*---GFX: Year Dependent Graphics---*/

//311 Tokai
switch(FEAT_TRAINS, SELF, sw_311_gfx_year_back_pantograph, current_year){
 0..2007: spriteset_311_back_darm;
 default: spriteset_311_back_sarm;
}
/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/

//311 Tokai
switch(FEAT_TRAINS, SELF, sw_311_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_311_front;
 default: sw_311_gfx_year_back_pantograph;
}
switch(FEAT_TRAINS, PARENT, sw_311_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_311_gfx_frontback_flipcheck;
 default: sw_211group_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Middle Car Switches---*/

//311 Tokai
switch(FEAT_TRAINS, PARENT, sw_311_gfx_mucar_revcheck, vehicle_is_reversed){
 0: spriteset_311_mid;
 default: sw_211group_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



//Coupling
  switch(FEAT_TRAINS, SELF, sw_311_attach_vehid, [vehicle_type_id == emu_211 || vehicle_type_id == emu_21156 ||vehicle_type_id == emu_213 || vehicle_type_id == emu_313 || vehicle_type_id == emu_311 || vehicle_type_id == mu_car]) {
  0: return string(MU_UNIQUE);
  }



item(FEAT_TRAINS, emu_311) {
    property {
        name:                         string(JRC_311);
        introduction_date:            date(1989, 07, 12);
        model_life:                   2;
        vehicle_life:                 40;
        reliability_decay:            14;

        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_3D;
        cost_factor:                  17;
        running_cost_factor:          51;

        speed:                        120 km/h;
        track_type:                   NARROW_OHLE;
        power:                        480 kW;
        weight:                       35 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  1;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_ELECTRIC;
        engine_class:                 ENGINE_CLASS_ELECTRIC;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                      sw_311_gfx_frontback_revcheck;
		    purchase:                 spriteset_311_purchase;
		    additional_text:	      return string(JRC_311_DESC);
        //cargo_subtype_text:           sw_311_subtypetext_main;
        can_attach_wagon:			  sw_311_attach_vehid;
        //start_stop:                   ;
    }
    /*Multiple Unit Car*/
      livery_override(mu_car){
        default:                      sw_311_gfx_mucar_revcheck;
        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_3D;
        //cargo_subtype_text:           sw_311_subtypetext_mucar;
        power: 120;
        weight: 25;
      }

}
# 1 "JPplus.pnml" 4
# 1 "src/JRC/EMU/313_series.pnml" 1

/*---GFX: Pantograph Positions---*/

//313 Tokai
switch(FEAT_TRAINS,SELF, sw_313_gfx_pantograph_pos_midpanto, position_in_vehid_chain%2){
  0: spriteset_313_mid_onep;
  default: spriteset_313_mid; 
}
switch(FEAT_TRAINS,SELF, sw_313_gfx_pantograph_pos_check, num_vehs_in_vehid_chain){
  0..1: spriteset_313_mid;
  default: sw_313_gfx_pantograph_pos_midpanto;
}
/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/
//313 Tokai
switch(FEAT_TRAINS, SELF, sw_313_gfx_back_livery,  cargo_subtype) {
  1:spriteset_313_back_twop;
  0:spriteset_313_back_onep;
}
switch(FEAT_TRAINS, SELF, sw_313_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_313_front;
 default: sw_313_gfx_back_livery;
}
switch(FEAT_TRAINS, PARENT, sw_313_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_313_gfx_frontback_flipcheck;
 default: sw_211group_gfx_rev_idcheck;
}



/*---END OF SECTION---*/



/*---GFX: Middle Car Switches---*/

//313 Tokai
switch(FEAT_TRAINS, PARENT, sw_313_gfx_mucar_revcheck, vehicle_is_reversed){
 0: sw_313_gfx_pantograph_pos_check;
 default: sw_211group_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Livery Refitting Switches---*/
//Menu Switches
switch(FEAT_TRAINS, SELF, sw_313_subtypetext_mucar, cargo_subtype) {
1: string(TOKAI_313_TWOPANTO);
0: string(TOKAI_313_PANTO);
}
switch(FEAT_TRAINS, SELF, sw_313_subtypetext_main, cargo_subtype) {
1: string(TOKAI_313_TWOPANTO);
0: string(TOKAI_313_PANTO);
}
/*---END OF SECTION---*/

//Coupling
  switch(FEAT_TRAINS, SELF, sw_313_attach_vehid, [vehicle_type_id == emu_211 || vehicle_type_id == emu_21156 ||vehicle_type_id == emu_213 || vehicle_type_id == emu_313 || vehicle_type_id == emu_311 || vehicle_type_id == mu_car]) {
  0: return string(MU_UNIQUE);
  }


item(FEAT_TRAINS, emu_313) {
    property {
        name:                         string(JRC_313);
        introduction_date:            date(1999, 07, 25);
        model_life:                   20;
        vehicle_life:                 40;
        reliability_decay:            12;

        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_3D;
        cost_factor:                  17;
        running_cost_factor:          51;

        speed:                        130 km/h;
        track_type:                   NARROW_OHLE;
        power:                        740 kW;
        weight:                       34 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  1;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_ELECTRIC;
        engine_class:                 ENGINE_CLASS_ELECTRIC;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                sw_313_gfx_frontback_revcheck;
		    purchase:               spriteset_313_purchase;
		    additional_text:	      return string(JRC_313_DESC);
        cargo_subtype_text:     sw_313_subtypetext_main;
        can_attach_wagon:			  sw_313_attach_vehid;
        //start_stop:                   ;
    }
    /*Multiple Unit Car*/
      livery_override(mu_car){
        default:                      sw_313_gfx_mucar_revcheck;
        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_3D;
        cargo_subtype_text:           sw_313_subtypetext_mucar;
        power: 185;
        weight: 24;
      }

}
# 1 "JPplus.pnml" 4


//JR-West
# 1 "src/JRW/EMU/207_series.pnml" 1
/*---GFX: Spritesets---*/

//Purchase Sprites
spriteset (spriteset_207_purchase,	                                                     "gfx/JRW/emu207/purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_207_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,          "gfx/JRW/emu207/purchase_32bpp.png")         {tmpl_purchase_dh_32bpp(0, 0)}

//207 JRWest

spriteset (spriteset_207_front_tp_jrw,	 	"gfx/JRW/emu207/jrw207_original.png")           	{ tmpl_std_panto25(0, 0) }
spriteset (spriteset_207_front_sp_jrw,	 	"gfx/JRW/emu207/jrw207_original.png")          	{ tmpl_std_panto25(0, 26) }
spriteset (spriteset_207_front_np_jrw,	 	"gfx/JRW/emu207/jrw207_original.png")            { tmpl_std(0, 52) }
spriteset (spriteset_207_back_tp_jrw,	  	"gfx/JRW/emu207/jrw207_original.png")          	{ tmpl_std_panto25(0, 77) }
spriteset (spriteset_207_back_sp_jrw,	  	"gfx/JRW/emu207/jrw207_original.png")          	{ tmpl_std_panto25(0, 103) }
spriteset (spriteset_207_back_np_jrw,	  	"gfx/JRW/emu207/jrw207_original.png")          	{ tmpl_std(0, 129) }
spriteset (spriteset_207_mid_sp_jrw,	  	"gfx/JRW/emu207/jrw207_original.png")          	{ tmpl_std_panto25(0, 154) }
spriteset (spriteset_207_mid_tp_jrw,	  	"gfx/JRW/emu207/jrw207_original.png")          	{ tmpl_std_panto25(0, 180) }
spriteset (spriteset_207_mid_jrw,	      	"gfx/JRW/emu207/jrw207_original.png")          	{ tmpl_std(0, 206) }

spriteset (spriteset_207_front_tp_jrw_rev,	 	"gfx/JRW/emu207/jrw207_original.png")           	{ tmpl_std_panto25_rev(0, 0) }
spriteset (spriteset_207_front_sp_jrw_rev,	 	"gfx/JRW/emu207/jrw207_original.png")          	{ tmpl_std_panto25_rev(0, 26) }
spriteset (spriteset_207_front_np_jrw_rev,	 	"gfx/JRW/emu207/jrw207_original.png")            { tmpl_std_rev(0, 52) }
spriteset (spriteset_207_back_tp_jrw_rev,	  	"gfx/JRW/emu207/jrw207_original.png")          	{ tmpl_std_panto25_rev(0, 77) }
spriteset (spriteset_207_back_sp_jrw_rev,	  	"gfx/JRW/emu207/jrw207_original.png")          	{ tmpl_std_panto25_rev(0, 103) }
spriteset (spriteset_207_back_np_jrw_rev,	  	"gfx/JRW/emu207/jrw207_original.png")          	{ tmpl_std_rev(0, 129) }
spriteset (spriteset_207_mid_sp_jrw_rev,	  	"gfx/JRW/emu207/jrw207_original.png")          	{ tmpl_std_panto25_rev(0, 154) }
spriteset (spriteset_207_mid_tp_jrw_rev,	  	"gfx/JRW/emu207/jrw207_original.png")          	{ tmpl_std_panto25_rev(0, 180) }
spriteset (spriteset_207_mid_jrw_rev,	      	"gfx/JRW/emu207/jrw207_original.png")          	{ tmpl_std_rev(0, 206) }

//207 Repaint
spriteset (spriteset_207_front_tp_repaint,	  "gfx/JRW/emu207/jrw207_repaint.png")          	{ tmpl_std_panto25(0, 0) }
spriteset (spriteset_207_front_np_repaint,	 	"gfx/JRW/emu207/jrw207_repaint.png")           	{ tmpl_std(0, 102) }
spriteset (spriteset_207_back_tp_repaint,	  	"gfx/JRW/emu207/jrw207_repaint.png")          	{ tmpl_std_panto25(0, 127) }
spriteset (spriteset_207_back_np_repaint,	  	"gfx/JRW/emu207/jrw207_repaint.png")           	{ tmpl_std(0, 77) }
spriteset (spriteset_207_mid_tp_repaint,	  	"gfx/JRW/emu207/jrw207_repaint.png")           	{ tmpl_std_panto25(0, 26) }
spriteset (spriteset_207_mid_repaint,	       	"gfx/JRW/emu207/jrw207_repaint.png")           	{ tmpl_std(0, 52) }

spriteset (spriteset_207_front_tp_repaint_rev,	  "gfx/JRW/emu207/jrw207_repaint.png")          	{ tmpl_std_panto25_rev(0, 0) }
spriteset (spriteset_207_front_np_repaint_rev,	 	"gfx/JRW/emu207/jrw207_repaint.png")           	{ tmpl_std_rev(0, 102) }
spriteset (spriteset_207_back_tp_repaint_rev,	  	"gfx/JRW/emu207/jrw207_repaint.png")          	{ tmpl_std_panto25_rev(0, 127) }
spriteset (spriteset_207_back_np_repaint_rev,	  	"gfx/JRW/emu207/jrw207_repaint.png")           	{ tmpl_std_rev(0, 77) }
spriteset (spriteset_207_mid_tp_repaint_rev,	  	"gfx/JRW/emu207/jrw207_repaint.png")           	{ tmpl_std_panto25_rev(0, 26) }
spriteset (spriteset_207_mid_repaint_rev,	       	"gfx/JRW/emu207/jrw207_repaint.png")           	{ tmpl_std_rev(0, 52) }

//207 Refurb
spriteset (spriteset_207_front_tp_refurb,	  "gfx/JRW/emu207/jrw207_refurb.png")          	{ tmpl_std_panto25(0, 0) }
spriteset (spriteset_207_front_np_refurb,	 	"gfx/JRW/emu207/jrw207_refurb.png")           	{ tmpl_std(0, 102) }
spriteset (spriteset_207_back_tp_refurb,	  	"gfx/JRW/emu207/jrw207_refurb.png")          	{ tmpl_std_panto25(0, 127) }
spriteset (spriteset_207_back_np_refurb,	  	"gfx/JRW/emu207/jrw207_refurb.png")           	{ tmpl_std(0, 77) }
spriteset (spriteset_207_mid_tp_refurb,	  	"gfx/JRW/emu207/jrw207_refurb.png")           	{ tmpl_std_panto25(0, 26) }
spriteset (spriteset_207_mid_refurb,	       	"gfx/JRW/emu207/jrw207_refurb.png")           	{ tmpl_std(0, 52) }

spriteset (spriteset_207_front_tp_refurb_rev,	  "gfx/JRW/emu207/jrw207_refurb.png")          	{ tmpl_std_panto25_rev(0, 0) }
spriteset (spriteset_207_front_np_refurb_rev,	 	"gfx/JRW/emu207/jrw207_refurb.png")           	{ tmpl_std_rev(0, 102) }
spriteset (spriteset_207_back_tp_refurb_rev,	  	"gfx/JRW/emu207/jrw207_refurb.png")          	{ tmpl_std_panto25_rev(0, 127) }
spriteset (spriteset_207_back_np_refurb_rev,	  	"gfx/JRW/emu207/jrw207_refurb.png")           	{ tmpl_std_rev(0, 77) }
spriteset (spriteset_207_mid_tp_refurb_rev,	  	"gfx/JRW/emu207/jrw207_refurb.png")           	{ tmpl_std_panto25_rev(0, 26) }
spriteset (spriteset_207_mid_refurb_rev,	       	"gfx/JRW/emu207/jrw207_refurb.png")           	{ tmpl_std_rev(0, 52) }

/*---END OF SECTION---*/



/*---GFX: Pantograph Positions---*/
//207 JRWest
switch(FEAT_TRAINS,SELF, sw_207_gfx_pantograph_pos_jrw_middle, position_in_vehid_chain%7){
  0: spriteset_207_mid_tp_jrw;
  4: spriteset_207_mid_tp_jrw;
  default: spriteset_207_mid_jrw;
}
switch(FEAT_TRAINS,SELF, sw_207_gfx_pantograph_pos_jrw_end, position_in_vehid_chain%5){
  1: spriteset_207_mid_sp_jrw;
  3: spriteset_207_mid_sp_jrw;
  default: spriteset_207_mid_jrw;
}
switch(FEAT_TRAINS,SELF, sw_207_gfx_pantograph_pos_jrw_end_4car, position_in_vehid_chain%4){
  2: spriteset_207_mid_sp_jrw;
  default: spriteset_207_mid_jrw;
}
switch(FEAT_TRAINS,SELF, sw_207_gfx_pantograph_pos_jrw_end_maincounter, num_vehs_in_vehid_chain){
0..2:sw_207_gfx_pantograph_pos_jrw_end;
3:sw_207_gfx_pantograph_pos_jrw_end_4car;
default:sw_207_gfx_pantograph_pos_jrw_end;
}


//207 Repaint
switch(FEAT_TRAINS,SELF, sw_207_gfx_pantograph_pos_jrwnew_middle, position_in_vehid_chain%7){
  0: spriteset_207_mid_tp_repaint;
  4: spriteset_207_mid_tp_repaint;
  default: spriteset_207_mid_repaint;
}
switch(FEAT_TRAINS,SELF, sw_207_gfx_pantograph_pos_jrwnew_end, position_in_vehid_chain%4){
  1: spriteset_207_mid_tp_repaint;
  default: spriteset_207_mid_repaint;
}

//207 Refurb
switch(FEAT_TRAINS,SELF, sw_207_gfx_pantograph_pos_jrwref_middle, position_in_vehid_chain%7){
  0: spriteset_207_mid_tp_refurb;
  4: spriteset_207_mid_tp_refurb;
  default: spriteset_207_mid_refurb;
}
switch(FEAT_TRAINS,SELF, sw_207_gfx_pantograph_pos_jrwref_end, position_in_vehid_chain%4){
  1: spriteset_207_mid_tp_refurb;
  default: spriteset_207_mid_refurb;
}
/*---END OF SECTION---*/



/*---GFX: Train Reversing Switches---*/
//Livery Selection
switch(FEAT_TRAINS,SELF, sw_207_gfx_rev_cab_livery_back, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  5: spriteset_207_back_np_refurb_rev;
  4: spriteset_207_back_tp_refurb;
  3: spriteset_207_back_np_repaint_rev;
  2: spriteset_207_back_tp_repaint;
  1: spriteset_207_back_sp_jrw;
  0: spriteset_207_back_np_jrw;
}
switch(FEAT_TRAINS,SELF, sw_207_gfx_rev_cab_livery_back_flipped, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  5: spriteset_207_back_np_refurb;
  4: spriteset_207_back_tp_refurb_rev;
  3: spriteset_207_back_np_repaint;
  2: spriteset_207_back_tp_repaint_rev;
  1: spriteset_207_back_sp_jrw_rev;
  0: spriteset_207_back_np_jrw_rev;
}
switch(FEAT_TRAINS,SELF, sw_207_gfx_rev_cab_livery_front, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  5: spriteset_207_front_np_refurb_rev;
  4: spriteset_207_front_np_refurb_rev;
  3: spriteset_207_front_np_repaint_rev;
  2: spriteset_207_front_np_repaint_rev;
  1: spriteset_207_front_np_jrw_rev;
  0: spriteset_207_front_np_jrw_rev;
}
switch(FEAT_TRAINS,SELF, sw_207_gfx_rev_cab_livery_front_flipped, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  5: spriteset_207_front_np_refurb;
  4: spriteset_207_front_np_refurb;
  3: spriteset_207_front_np_repaint;
  2: spriteset_207_front_np_repaint;
  1: spriteset_207_front_np_jrw;
  0: spriteset_207_front_np_jrw;
}
switch(FEAT_TRAINS,SELF, sw_207_gfx_rev_mucar_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  5: spriteset_207_mid_refurb_rev;
  4: spriteset_207_mid_refurb_rev;
  3: spriteset_207_mid_repaint_rev;
  2: spriteset_207_mid_repaint_rev;
  1: spriteset_207_mid_jrw_rev;
  0: spriteset_207_mid_jrw_rev;
}
switch(FEAT_TRAINS,SELF, sw_207_gfx_rev_mucar_livery_flipped, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  5: spriteset_207_mid_refurb;
  4: spriteset_207_mid_refurb;
  3: spriteset_207_mid_repaint;
  2: spriteset_207_mid_repaint;
  1: spriteset_207_mid_jrw;
  0: spriteset_207_mid_jrw;
}
switch(FEAT_TRAINS,SELF, sw_207_gfx_rev_pantograph_single_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  5: spriteset_207_mid_sp_jrw_rev;
  4: spriteset_207_mid_sp_jrw_rev;
  3: spriteset_207_mid_sp_jrw_rev;
  2: spriteset_207_mid_sp_jrw_rev;
  1: spriteset_207_mid_sp_jrw_rev;
  0: spriteset_207_mid_sp_jrw_rev;
}
switch(FEAT_TRAINS,SELF, sw_207_gfx_rev_pantograph_single_livery_flipped, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  5: spriteset_207_mid_sp_jrw;
  4: spriteset_207_mid_sp_jrw;
  3: spriteset_207_mid_sp_jrw;
  2: spriteset_207_mid_sp_jrw;
  1: spriteset_207_mid_sp_jrw;
  0: spriteset_207_mid_sp_jrw;
}
switch(FEAT_TRAINS,SELF, sw_207_gfx_rev_pantograph_double_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  5: spriteset_207_mid_tp_refurb_rev;
  4: spriteset_207_mid_tp_refurb_rev;
  3: spriteset_207_mid_tp_repaint_rev;
  2: spriteset_207_mid_tp_repaint_rev;
  1: spriteset_207_mid_tp_jrw_rev;
  0: spriteset_207_mid_tp_jrw_rev;
}
switch(FEAT_TRAINS,SELF, sw_207_gfx_rev_pantograph_double_livery_flipped, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  5: spriteset_207_mid_tp_refurb;
  4: spriteset_207_mid_tp_refurb;
  3: spriteset_207_mid_tp_repaint;
  2: spriteset_207_mid_tp_repaint;
  1: spriteset_207_mid_tp_jrw;
  0: spriteset_207_mid_tp_jrw;
}

//Check for flipped vehicles (dual_headed)
switch(FEAT_TRAINS, SELF, sw_207_gfx_rev_flippedcheck_cab_front, vehicle_is_flipped) {
  1: sw_207_gfx_rev_cab_livery_back;
 default: sw_207_gfx_rev_cab_livery_front;
}
switch(FEAT_TRAINS, SELF, sw_207_gfx_rev_flippedcheck_cab_back, vehicle_is_flipped) {
  1: sw_207_gfx_rev_cab_livery_front;
 default: sw_207_gfx_rev_cab_livery_back;
}
switch(FEAT_TRAINS, SELF, sw_207_gfx_rev_flippedcheck_pantograph_single, vehicle_is_flipped) {
  1: sw_207_gfx_rev_pantograph_single_livery_flipped;
 default: sw_207_gfx_rev_pantograph_single_livery;
}
switch(FEAT_TRAINS, SELF, sw_207_gfx_rev_flippedcheck_pantograph_double, vehicle_is_flipped) {
  1: sw_207_gfx_rev_pantograph_double_livery_flipped;
 default: sw_207_gfx_rev_pantograph_double_livery;
}
switch(FEAT_TRAINS, SELF, sw_207_gfx_rev_flippedcheck_mucar, vehicle_is_flipped) {
  1: sw_207_gfx_rev_mucar_livery_flipped;
 default: sw_207_gfx_rev_mucar_livery;
}

//Pantograph Position Testing
switch(FEAT_TRAINS, SELF, sw_207_gfx_rev_pantograph_pos_jrw_sp_4car, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%5]){ //look at opposte position_in_vehID_chain
  2: sw_207_gfx_rev_flippedcheck_pantograph_single;
  default: sw_207_gfx_rev_flippedcheck_mucar;
}
switch(FEAT_TRAINS, SELF, sw_207_gfx_rev_pantograph_pos_jrw_sp_std, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%7]){ //look at opposte position_in_vehID_chain
  1: sw_207_gfx_rev_flippedcheck_pantograph_single;
  3: sw_207_gfx_rev_flippedcheck_pantograph_single;
  default: sw_207_gfx_rev_flippedcheck_mucar;
}
switch(FEAT_TRAINS, SELF, sw_207_gfx_rev_pantograph_pos_jrw_sp, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 16, 0x000000FF, 0x41]]){ //look at opposte position_in_vehID_chain
  0..2: sw_207_gfx_rev_pantograph_pos_jrw_sp_std;
  3: sw_207_gfx_rev_pantograph_pos_jrw_sp_4car;
  default: sw_207_gfx_rev_pantograph_pos_jrw_sp_std;
}
switch(FEAT_TRAINS, SELF, sw_207_gfx_rev_pantograph_pos_jrw_stdmid, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%7]){ //look at opposte position_in_vehID_chain
  0: sw_207_gfx_rev_flippedcheck_pantograph_double;
  4: sw_207_gfx_rev_flippedcheck_pantograph_double;
  default: sw_207_gfx_rev_flippedcheck_mucar;
}
switch(FEAT_TRAINS, SELF, sw_207_gfx_rev_pantograph_pos_jrw_stdcab, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%4]){ //look at opposte position_in_vehID_chain
  1: sw_207_gfx_rev_flippedcheck_pantograph_double;
  default: sw_207_gfx_rev_flippedcheck_mucar;
}
switch(FEAT_TRAINS,SELF, sw_207_gfx_rev_pantograph_pos, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
  5: sw_207_gfx_rev_pantograph_pos_jrw_stdmid;
  4: sw_207_gfx_rev_pantograph_pos_jrw_stdcab;
  3: sw_207_gfx_rev_pantograph_pos_jrw_stdmid;
  2: sw_207_gfx_rev_pantograph_pos_jrw_stdcab;
  1: sw_207_gfx_rev_pantograph_pos_jrw_sp;
  0: sw_207_gfx_rev_pantograph_pos_jrw_stdmid;
}

//ID Testing
switch(FEAT_TRAINS, SELF, sw_207_gfx_rev_cab_idcheck_behind, [STORE_TEMP(position_in_consist_from_end-position_in_consist+1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000: sw_207_gfx_rev_flippedcheck_cab_front;
  2017: sw_207_gfx_rev_flippedcheck_cab_back;
}
switch(FEAT_TRAINS, SELF, sw_207_gfx_rev_cab_idcheck_infront, [STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000: sw_207_gfx_rev_flippedcheck_cab_back;
  2017: sw_207_gfx_rev_flippedcheck_cab_front;
  default: sw_207_gfx_rev_cab_idcheck_behind;
}
switch(FEAT_TRAINS, SELF, sw_207_gfx_rev_cab_frontcheck, position_in_consist){
  0: sw_207_gfx_rev_cab_livery_front_flipped;
  default: sw_207_gfx_rev_cab_idcheck_infront;
}
switch(FEAT_TRAINS, SELF, sw_207_gfx_rev_idcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000: sw_207_gfx_rev_pantograph_pos;
  2017: sw_207_gfx_rev_cab_frontcheck;
}
/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/
//207 JRWest
switch(FEAT_TRAINS, PARENT, sw_207_gfx_front_revcheck_jrw_dp, vehicle_is_reversed){
   0: spriteset_207_front_np_jrw;
   default: sw_207_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, PARENT, sw_207_gfx_back_revcheck_jrw_dp, vehicle_is_reversed){
 0: spriteset_207_back_np_jrw;
 default: sw_207_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, SELF, sw_207_gfx_frontback_revcheck_jrw_dp, vehicle_is_flipped) {
  1: sw_207_gfx_back_revcheck_jrw_dp;
 default: sw_207_gfx_front_revcheck_jrw_dp;
}
switch(FEAT_TRAINS, PARENT, sw_207_gfx_front_revcheck_jrw_sp, vehicle_is_reversed){
   0: spriteset_207_front_sp_jrw;
   default: sw_207_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, PARENT, sw_207_gfx_back_revcheck_jrw_sp, vehicle_is_reversed){
 0: spriteset_207_back_np_jrw;
 default: sw_207_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, SELF, sw_207_gfx_frontback_revcheck_jrw_sp, vehicle_is_flipped) {
  1: sw_207_gfx_back_revcheck_jrw_sp;
 default: sw_207_gfx_front_revcheck_jrw_sp;
}

//207 Repaint
switch(FEAT_TRAINS, PARENT, sw_207_gfx_front_revcheck_jrwnew_cabp, vehicle_is_reversed){
   0: spriteset_207_front_tp_repaint;
   default: sw_207_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, PARENT, sw_207_gfx_back_revcheck_jrwnew_cabp, vehicle_is_reversed){
 0: spriteset_207_back_np_repaint_rev;
 default: sw_207_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, SELF, sw_207_gfx_frontback_revcheck_jrwnew_cabp, vehicle_is_flipped) {
  1: sw_207_gfx_back_revcheck_jrwnew_cabp;
 default: sw_207_gfx_front_revcheck_jrwnew_cabp;
}
switch(FEAT_TRAINS, PARENT, sw_207_gfx_front_revcheck_jrwnew_midp, vehicle_is_reversed){
   0: spriteset_207_front_np_repaint;
   default: sw_207_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, PARENT, sw_207_gfx_back_revcheck_jrwnew_midp, vehicle_is_reversed){
 0: spriteset_207_back_np_repaint_rev;
 default: sw_207_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, SELF, sw_207_gfx_frontback_revcheck_jrwnew_midp, vehicle_is_flipped) {
  1: sw_207_gfx_back_revcheck_jrwnew_midp;
 default: sw_207_gfx_front_revcheck_jrwnew_midp;
}

//207 Refurb
switch(FEAT_TRAINS, PARENT, sw_207_gfx_front_revcheck_jrwref_cabp, vehicle_is_reversed){
   0: spriteset_207_front_tp_refurb;
   default: sw_207_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, PARENT, sw_207_gfx_back_revcheck_jrwref_cabp, vehicle_is_reversed){
 0: spriteset_207_back_np_refurb_rev;
 default: sw_207_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, SELF, sw_207_gfx_frontback_revcheck_jrwref_cabp, vehicle_is_flipped) {
  1: sw_207_gfx_back_revcheck_jrwref_cabp;
 default: sw_207_gfx_front_revcheck_jrwref_cabp;
}
switch(FEAT_TRAINS, PARENT, sw_207_gfx_front_revcheck_jrwref_midp, vehicle_is_reversed){
   0: spriteset_207_front_np_refurb;
   default: sw_207_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, PARENT, sw_207_gfx_back_revcheck_jrwref_midp, vehicle_is_reversed){
 0: spriteset_207_back_np_refurb_rev;
 default: sw_207_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, SELF, sw_207_gfx_frontback_revcheck_jrwref_midp, vehicle_is_flipped) {
  1: sw_207_gfx_back_revcheck_jrwref_midp;
 default: sw_207_gfx_front_revcheck_jrwref_midp;
}
/*---END OF SECTION---*/



/*---GFX: Middle Car Switches---*/
//207 JRWest
switch(FEAT_TRAINS, PARENT, sw_207_gfx_mucar_revcheck_jrw_dp, vehicle_is_reversed){
 0: sw_207_gfx_pantograph_pos_jrw_middle;
 default: sw_207_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, PARENT, sw_207_gfx_mucar_revcheck_jrw_sp, vehicle_is_reversed){
 0: sw_207_gfx_pantograph_pos_jrw_end_maincounter;
 default: sw_207_gfx_rev_idcheck;
}

//207 Repaint
switch(FEAT_TRAINS, PARENT, sw_207_gfx_mucar_revcheck_jrwnew_cabp, vehicle_is_reversed){
 0: sw_207_gfx_pantograph_pos_jrwnew_end;
 default: sw_207_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, PARENT, sw_207_gfx_mucar_revcheck_jrwnew_midp, vehicle_is_reversed){
 0: sw_207_gfx_pantograph_pos_jrwnew_middle;
 default: sw_207_gfx_rev_idcheck;
}

//207 Refurb
switch(FEAT_TRAINS, PARENT, sw_207_gfx_mucar_revcheck_jrwref_cabp, vehicle_is_reversed){
 0: sw_207_gfx_pantograph_pos_jrwref_end;
 default: sw_207_gfx_rev_idcheck;
}
switch(FEAT_TRAINS, PARENT, sw_207_gfx_mucar_revcheck_jrwref_midp, vehicle_is_reversed){
 0: sw_207_gfx_pantograph_pos_jrwref_middle;
 default: sw_207_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Livery Refitting Switches---*/

//Main Switches
switch(FEAT_TRAINS, SELF, sw_207_gfx_mucar,  cargo_subtype) {
  5: sw_207_gfx_mucar_revcheck_jrwref_midp;
  4: sw_207_gfx_mucar_revcheck_jrwref_cabp;
  3: sw_207_gfx_mucar_revcheck_jrwnew_midp;
  2: sw_207_gfx_mucar_revcheck_jrwnew_cabp;
  1: sw_207_gfx_mucar_revcheck_jrw_sp;
  0: sw_207_gfx_mucar_revcheck_jrw_dp;
}
switch(FEAT_TRAINS, SELF, sw_207_gfx_main,  cargo_subtype) {
  5: sw_207_gfx_frontback_revcheck_jrwref_midp;
  4: sw_207_gfx_frontback_revcheck_jrwref_cabp;
  3: sw_207_gfx_frontback_revcheck_jrwnew_midp;
  2: sw_207_gfx_frontback_revcheck_jrwnew_cabp;
  1: sw_207_gfx_frontback_revcheck_jrw_sp;
  0: sw_207_gfx_frontback_revcheck_jrw_dp;
}

//Menu Switches
switch(FEAT_TRAINS, SELF, sw_207_subtypetext_mucar, cargo_subtype) {
  5: string(JRWnewremodelpanto_LV);
  4: string(JRWnewremodel_LV);
  3: string(JRWnewpanto_LV);
  2: string(JRWnew_LV);
  1: string(JRWbluepanto_LV);
  0: string(JRWblue_LV);
}
switch(FEAT_TRAINS, SELF, sw_207_subtypetext_main, cargo_subtype) {
  5: string(JRWnewremodelpanto_LV);
  4: string(JRWnewremodel_LV);
  3: string(JRWnewpanto_LV);
  2: string(JRWnew_LV);
  1: string(JRWbluepanto_LV);
  0: string(JRWblue_LV);
}
/*---END OF SECTION---*/



//Coupling
  switch(FEAT_TRAINS, SELF, sw_207_attach_vehid, [vehicle_type_id == emu_jrw207 || vehicle_type_id == mu_car]) {
  0: return string(MU_UNIQUE);
  }



item(FEAT_TRAINS, emu_jrw207) {
    property {
        name:                         string(JRW_207);
        introduction_date:            date(1991, 04, 20);
        model_life:                   12;
        vehicle_life:                 38;
        reliability_decay:            12;

        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_4D;
        cost_factor:                  17;
        running_cost_factor:          51;

        speed:                        120 km/h;
        track_type:                   NARROW_OHLE;
        power:                        880 kW;
        weight:                       36 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  1;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_ELECTRIC;
        engine_class:                 ENGINE_CLASS_ELECTRIC;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                      sw_207_gfx_main;
		    purchase:                 spriteset_207_purchase;
		    additional_text:	      return string(JRW_207_DESC);
        cargo_subtype_text:           sw_207_subtypetext_main;
        can_attach_wagon:			  sw_207_attach_vehid;
        //start_stop:                   ;
    }
    /*Multiple Unit Car*/
      livery_override(mu_car){
        default:                      sw_207_gfx_mucar;
        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_4D;
        cargo_subtype_text:           sw_207_subtypetext_mucar;
        power: 220;
        weight: 26;
      }

}
# 1 "JPplus.pnml" 4
# 1 "src/JRW/EMU/221_series.pnml" 1
/*---GFX: Spritesets---*/
//Purchase Sprites
spriteset (spriteset_221_purchase,	                                                     "gfx/JRW/emu207/purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_221_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,         "gfx/JRW/emu221/purchase_32bpp.png")         {tmpl_purchase_dh_32bpp(0, 0)}

//221 Orginal
spriteset (spriteset_221_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_221_grfront,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_221_back_sp,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_221_back_dp,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_221_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_221_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_221_rev_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_221_rev_grfront,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_221_rev_back_sp,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_221_rev_back_dp,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_221_rev_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_221_rev_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_221_revflip_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_221_revflip_grfront,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_221_revflip_back_sp,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_221_revflip_back_dp,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_221_revflip_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_221_revflip_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_221_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu221/221-1-1.png")           {tmpl_std(0, 1)}
alternative_sprites(spriteset_221_back_sp,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu221/221-1-2.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_221_back_dp,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu221/221-1-3.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_221_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu221/221-1-4.png")           {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_221_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu221/221-1-5.png")           {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_221_rev_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu221/221-1-1.png")          {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_221_rev_back_sp,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu221/221-1-2.png")       {tmpl_std(0, 1)}
alternative_sprites(spriteset_221_rev_back_dp,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu221/221-1-3.png")       {tmpl_std(0, 1)}
alternative_sprites(spriteset_221_rev_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu221/221-1-4.png")          {tmpl_std(0, 1)}
alternative_sprites(spriteset_221_rev_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu221/221-1-5.png")          {tmpl_std(0, 1)}

alternative_sprites(spriteset_221_revflip_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu221/221-1-1.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_221_revflip_back_sp,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu221/221-1-2.png")     {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_221_revflip_back_dp,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu221/221-1-3.png")     {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_221_revflip_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu221/221-1-4.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_221_revflip_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu221/221-1-5.png")        {tmpl_std_rev(0, 1)}
/*---END OF SECTION---*/



/*---GFX: Pantograph Positions---*/
switch(FEAT_TRAINS,SELF, sw_221_gfx_pantograph_pos_long, position_in_vehid_chain%5){
  1: spriteset_221_mid_panto;
  3: spriteset_221_mid_panto;
  default:spriteset_221_mid;
}
switch(FEAT_TRAINS,SELF, sw_221_gfx_pantograph_pos_short, position_in_vehid_chain){
  1: spriteset_221_mid_panto;
  default:spriteset_221_mid;
}
switch(FEAT_TRAINS,SELF, sw_221_gfx_pantograph_pos, num_vehs_in_vehid_chain){
  0..4: sw_221_gfx_pantograph_pos_short;
  default: sw_221_gfx_pantograph_pos_long;
}
/*---END OF SECTION---*/



/*---GFX: Train Reversing Switches---*/
//Livery Selection
switch(FEAT_TRAINS,SELF, sw_221_gfx_rev_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
1: spriteset_221_rev_grfront;
0: spriteset_221_rev_front;
}
switch(FEAT_TRAINS,SELF, sw_221_gfx_revflip_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
1: spriteset_221_revflip_grfront;
0: spriteset_221_revflip_front;
}

switch(FEAT_TRAINS,SELF, sw_221_gfx_rev_mid_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
1: spriteset_221_rev_mid_panto;
0: spriteset_221_rev_mid_panto;
}
switch(FEAT_TRAINS,SELF, sw_221_gfx_revflip_mid_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
1: spriteset_221_revflip_mid_panto;
0: spriteset_221_revflip_mid_panto;
}

switch(FEAT_TRAINS,SELF, sw_221_gfx_rev_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
1: spriteset_221_rev_mid;
0: spriteset_221_rev_mid;
}
switch(FEAT_TRAINS,SELF, sw_221_gfx_revflip_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
1: spriteset_221_revflip_mid;
0: spriteset_221_revflip_mid;
}

switch(FEAT_TRAINS,SELF, sw_221_gfx_rev_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
1: spriteset_221_rev_back_dp;
0: spriteset_221_rev_back_sp;
}
switch(FEAT_TRAINS,SELF, sw_221_gfx_revflip_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
1: spriteset_221_revflip_back_dp;
0: spriteset_221_revflip_back_sp;
}

//Check for flipped vehicles (dual_headed)
switch(FEAT_TRAINS, SELF, sw_221_gfx_rev_front_flippedcheck, vehicle_is_flipped) {
  1: sw_221_gfx_rev_front_livery;
 default: sw_221_gfx_revflip_front_livery;
}
switch(FEAT_TRAINS, SELF, sw_221_gfx_rev_mid_panto_flippedcheck, vehicle_is_flipped) {
  1: sw_221_gfx_revflip_mid_panto_livery;
 default: sw_221_gfx_rev_mid_panto_livery;
}
switch(FEAT_TRAINS, SELF, sw_221_gfx_rev_mid_flippedcheck, vehicle_is_flipped) {
  1: sw_221_gfx_revflip_mid_livery;
 default: sw_221_gfx_rev_mid_livery;
}
switch(FEAT_TRAINS, SELF, sw_221_gfx_rev_back_flippedcheck, vehicle_is_flipped) {
  1: sw_221_gfx_revflip_back_livery;
 default: sw_221_gfx_rev_back_livery;
}

//Pantograph Position Testing
switch(FEAT_TRAINS, SELF, sw_221_gfx_rev_pantograph_pos_long, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%5]){ //look at opposite position_in_vehID_chain
  1: sw_221_gfx_rev_mid_panto_flippedcheck;
  3: sw_221_gfx_rev_mid_panto_flippedcheck;
  default: sw_221_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_221_gfx_rev_pantograph_pos_short, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  1: sw_221_gfx_rev_mid_panto_flippedcheck;
  default: sw_221_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_221_gfx_rev_pantograph_pos, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 16, 0x000000FF, 0x41]]){ //look at opposite num_vehs_in_vehid_chain
  0..4: sw_221_gfx_rev_pantograph_pos_short;
  default: sw_221_gfx_rev_pantograph_pos_long;
}

//Front/Back Car Position Testing
switch(FEAT_TRAINS, SELF, sw_221_gfx_rev_frontback_nomucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_221_gfx_rev_front_flippedcheck;
  0:sw_221_gfx_rev_back_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_221_gfx_rev_frontback_aftermucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_221_gfx_rev_back_flippedcheck;
  0:sw_221_gfx_rev_front_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_221_gfx_rev_frontback_mucarcheck, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F),STORE_TEMP(var[0x61, 0, 0x000000FF, 0x41],0),  //look at opposite position_in_vehID_chain
STORE_TEMP((position_in_consist_from_end-position_in_consist-1)-LOAD_TEMP(0), 0x10F),                               //look at what is ahead of the first vehicle in the vehID_chain
var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000:sw_221_gfx_rev_frontback_aftermucars;
  default:sw_221_gfx_rev_frontback_nomucars;
}
switch(FEAT_TRAINS, SELF, sw_221_gfx_rev_frontback_sameid, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist+1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle behind of opposite vehicle
  2036:sw_221_gfx_rev_frontback_mucarcheck;
  1000:sw_221_gfx_rev_front_flippedcheck;
  default:sw_221_gfx_rev_back_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_221_gfx_rev_frontback, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle infront of opposite vehicle
  2036:sw_221_gfx_rev_frontback_sameid;
  1000:sw_221_gfx_rev_back_flippedcheck;
  default:sw_221_gfx_rev_front_flippedcheck;
}

//ID Testing
switch(FEAT_TRAINS, SELF, sw_221_gfx_rev_idcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of opposite vehicle
  1000: sw_221_gfx_rev_pantograph_pos;
  2036: sw_221_gfx_rev_frontback;
}
/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/
//221 Sinlge-Pantograph
switch(FEAT_TRAINS, SELF, sw_221_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_221_front;
 default: spriteset_221_back_sp;
}
switch(FEAT_TRAINS, PARENT, sw_221_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_221_gfx_frontback_flipcheck;
 default: sw_221_gfx_rev_idcheck;
}
//221 Dual-Pantograph
switch(FEAT_TRAINS, SELF, sw_221dp_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_221_grfront;
 default: spriteset_221_back_dp;
}
switch(FEAT_TRAINS, PARENT, sw_221dp_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_221dp_gfx_frontback_flipcheck;
 default: sw_221_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Middle Car Switches---*/
//221
switch(FEAT_TRAINS, PARENT, sw_221_gfx_mucar_revcheck_mid, vehicle_is_reversed){
    0: sw_221_gfx_pantograph_pos;
    default: sw_221_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Livery Refitting Switches---*/
//Main Switches
switch(FEAT_TRAINS, SELF, sw_221_gfx_mucar, cargo_subtype){
  1: sw_221_gfx_mucar_revcheck_mid;
  0: sw_221_gfx_mucar_revcheck_mid;
}
switch(FEAT_TRAINS, SELF, sw_221_gfx_main, cargo_subtype) {
  1: sw_221dp_gfx_frontback_revcheck;
  0: sw_221_gfx_frontback_revcheck;
}

//Menu Switches
switch(FEAT_TRAINS, SELF, sw_221_subtypetext_mucar, cargo_subtype) {
  1: string(JRW221_DP_LV);
  0: string(JRW221_SP_LV);
}
switch(FEAT_TRAINS, SELF, sw_221_subtypetext_main, cargo_subtype) {
  1: string(JRW221_DP_LV);
  0: string(JRW221_SP_LV);
}
/*---END OF SECTION---*/



//Coupling
  switch(FEAT_TRAINS, SELF, sw_221_attach_vehid, [vehicle_type_id == emu_221 || vehicle_type_id == mu_car]) {
  0: return string(MU_UNIQUE);
  }



item(FEAT_TRAINS, emu_221) {
    property {
        name:                         string(JRW_221);
        introduction_date:            date(1989, 02, 02);
        model_life:                   3;
        vehicle_life:                 39;
        reliability_decay:            11;

        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_3D;
        cost_factor:                  17;
        running_cost_factor:          51;

        speed:                        120 km/h;
        track_type:                   NARROW_OHLE;
        power:                        480 kW;
        weight:                       37 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  1;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_ELECTRIC;
        engine_class:                 ENGINE_CLASS_ELECTRIC;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                      sw_221_gfx_main;
		    purchase:                 spriteset_221_purchase;
		    additional_text:	      return string(JRW_221_DESC);
        cargo_subtype_text:           sw_221_subtypetext_main;
        can_attach_wagon:			  sw_221_attach_vehid;
        //start_stop:                   ;
    }
    /*Multiple Unit Car*/
      livery_override(mu_car){
        default:                      sw_221_gfx_mucar;
        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_3D;
        cargo_subtype_text:           sw_221_subtypetext_mucar;
        power: 120;
        weight: 27;
      }

}
# 1 "JPplus.pnml" 4
# 1 "src/JRW/EMU/223_0_series.pnml" 1
/*---GFX: Spritesets---*/
//Purchase Sprites
spriteset (spriteset_223_0_purchase,	                                                  "gfx/JRW/emu207/purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_223_0_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,         "gfx/JRW/emu223/purchase_32bpp.png")         {tmpl_purchase_dh_32bpp(0, 0)}

//223_0 Orginal
spriteset (spriteset_223_0_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_0_back,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_0_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_0_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_223_0_rev_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_0_rev_back,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_0_rev_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_0_rev_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_223_0_revflip_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_0_revflip_back,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_0_revflip_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_0_revflip_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_223_0_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-1-1.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_0_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-1-2.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_223_0_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-1-3.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_223_0_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-1-4.png")        {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_223_0_rev_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-1-1.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_223_0_rev_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-1-2.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_0_rev_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-1-3.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_0_rev_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-1-4.png")        {tmpl_std(0, 1)}

alternative_sprites(spriteset_223_0_revflip_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-1-1.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_223_0_revflip_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-1-2.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_223_0_revflip_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-1-3.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_223_0_revflip_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-1-4.png")        {tmpl_std_rev(0, 1)}

//223_0 Refurb
spriteset (spriteset_223_0refurb_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_0refurb_back,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_0refurb_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_0refurb_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_223_0refurb_rev_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_0refurb_rev_back,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_0refurb_rev_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_0refurb_rev_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_223_0refurb_revflip_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_0refurb_revflip_back,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_0refurb_revflip_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_0refurb_revflip_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_223_0refurb_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-2-1.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_0refurb_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-2-2.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_223_0refurb_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-2-3.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_223_0refurb_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-2-4.png")        {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_223_0refurb_rev_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-2-1.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_223_0refurb_rev_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-2-2.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_0refurb_rev_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-2-3.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_0refurb_rev_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-2-4.png")        {tmpl_std(0, 1)}

alternative_sprites(spriteset_223_0refurb_revflip_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-2-1.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_223_0refurb_revflip_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-2-2.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_223_0refurb_revflip_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-2-3.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_223_0refurb_revflip_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-2-4.png")        {tmpl_std_rev(0, 1)}

//223_2500
spriteset (spriteset_223_2500_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_2500_back,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_2500_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_2500_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_223_2500_rev_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_2500_rev_back,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_2500_rev_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_2500_rev_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_223_2500_revflip_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_2500_revflip_back,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_2500_revflip_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_2500_revflip_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_223_2500_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2500/223-2500-1-1.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_2500_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2500/223-2500-1-2.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_223_2500_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2500/223-2500-1-3.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_223_2500_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2500/223-2500-1-4.png")        {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_223_2500_rev_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2500/223-2500-1-1.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_223_2500_rev_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2500/223-2500-1-2.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_2500_rev_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2500/223-2500-1-3.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_2500_rev_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2500/223-2500-1-4.png")        {tmpl_std(0, 1)}

alternative_sprites(spriteset_223_2500_revflip_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2500/223-2500-1-1.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_223_2500_revflip_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2500/223-2500-1-2.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_223_2500_revflip_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2500/223-2500-1-3.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_223_2500_revflip_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2500/223-2500-1-4.png")        {tmpl_std_rev(0, 1)}

//223_5500
spriteset (spriteset_223_5500_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_5500_back,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_5500_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_5500_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_223_5500_rev_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_5500_rev_back,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_5500_rev_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_5500_rev_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_223_5500_revflip_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_5500_revflip_back,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_5500_revflip_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_5500_revflip_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_223_5500_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2500/223-2500-1-1.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_5500_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2500/223-2500-1-2.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_223_5500_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2500/223-2500-1-3.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_223_5500_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2500/223-2500-1-4.png")        {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_223_5500_rev_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2500/223-2500-1-1.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_223_5500_rev_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2500/223-2500-1-2.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_5500_rev_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2500/223-2500-1-3.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_5500_rev_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2500/223-2500-1-4.png")        {tmpl_std(0, 1)}

alternative_sprites(spriteset_223_5500_revflip_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2500/223-2500-1-1.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_223_5500_revflip_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2500/223-2500-1-2.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_223_5500_revflip_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2500/223-2500-1-3.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_223_5500_revflip_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2500/223-2500-1-4.png")        {tmpl_std_rev(0, 1)}

//223_6000
spriteset (spriteset_223_6000_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_6000_back,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_6000_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_6000_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_223_6000_rev_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_6000_rev_back,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_6000_rev_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_6000_rev_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_223_6000_revflip_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_6000_revflip_back,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_6000_revflip_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_6000_revflip_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_223_6000_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-6000/223-6000-1-1.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_6000_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-6000/223-6000-1-2.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_223_6000_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-6000/223-6000-1-3.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_223_6000_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-6000/223-6000-1-4.png")        {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_223_6000_rev_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-6000/223-6000-1-1.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_223_6000_rev_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-6000/223-6000-1-2.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_6000_rev_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-6000/223-6000-1-3.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_6000_rev_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-6000/223-6000-1-4.png")        {tmpl_std(0, 1)}

alternative_sprites(spriteset_223_6000_revflip_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-6000/223-6000-1-1.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_223_6000_revflip_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-6000/223-6000-1-2.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_223_6000_revflip_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-6000/223-6000-1-3.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_223_6000_revflip_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-6000/223-6000-1-4.png")        {tmpl_std_rev(0, 1)}

/*---END OF SECTION---*/



/*---GFX: Pantograph Positions---*/
//223_0
switch(FEAT_TRAINS,SELF, sw_223_0_gfx_pantograph_pos_6car, position_in_vehid_chain){
  1: spriteset_223_0_mid_panto;
  default:spriteset_223_0_mid;
}
switch(FEAT_TRAINS,SELF, sw_223_0_gfx_pantograph_pos_std, position_in_vehid_chain%3){
  0: spriteset_223_0_mid_panto;
  default:spriteset_223_0_mid;
}
switch(FEAT_TRAINS,SELF, sw_223_0_gfx_pantograph_pos, num_vehs_in_vehid_chain){
  4: sw_223_0_gfx_pantograph_pos_6car;
  default: sw_223_0_gfx_pantograph_pos_std;
}

//223_0 Refurb
switch(FEAT_TRAINS,SELF, sw_223_0refurb_gfx_pantograph_pos_6car, position_in_vehid_chain){
  1: spriteset_223_0refurb_mid_panto;
  default:spriteset_223_0refurb_mid;
}
switch(FEAT_TRAINS,SELF, sw_223_0refurb_gfx_pantograph_pos_std, position_in_vehid_chain%3){
  0: spriteset_223_0refurb_mid_panto;
  default:spriteset_223_0refurb_mid;
}
switch(FEAT_TRAINS,SELF, sw_223_0refurb_gfx_pantograph_pos, num_vehs_in_vehid_chain){
  4: sw_223_0refurb_gfx_pantograph_pos_6car;
  default: sw_223_0refurb_gfx_pantograph_pos_std;
}

//223_2500
switch(FEAT_TRAINS,SELF, sw_223_2500_gfx_pantograph_pos_6car, position_in_vehid_chain){
  1: spriteset_223_2500_mid_panto;
  default:spriteset_223_2500_mid;
}
switch(FEAT_TRAINS,SELF, sw_223_2500_gfx_pantograph_pos_std, position_in_vehid_chain%3){
  0: spriteset_223_2500_mid_panto;
  default:spriteset_223_2500_mid;
}
switch(FEAT_TRAINS,SELF, sw_223_2500_gfx_pantograph_pos, num_vehs_in_vehid_chain){
  4: sw_223_2500_gfx_pantograph_pos_6car;
  default: sw_223_2500_gfx_pantograph_pos_std;
}

//223_5500
switch(FEAT_TRAINS,SELF, sw_223_5000_gfx_pantograph_pos_6car, position_in_vehid_chain){
  1: spriteset_223_5500_mid_panto;
  default:spriteset_223_5500_mid;
}
switch(FEAT_TRAINS,SELF, sw_223_5000_gfx_pantograph_pos_std, position_in_vehid_chain%3){
  0: spriteset_223_5500_mid_panto;
  default:spriteset_223_5500_mid;
}
switch(FEAT_TRAINS,SELF, sw_223_5000_gfx_pantograph_pos, num_vehs_in_vehid_chain){
  4: sw_223_5000_gfx_pantograph_pos_6car;
  default: sw_223_5000_gfx_pantograph_pos_std;
}

//223_6000
switch(FEAT_TRAINS,SELF, sw_223_6000_gfx_pantograph_pos_6car, position_in_vehid_chain){
  1: spriteset_223_6000_mid_panto;
  default:spriteset_223_6000_mid;
}
switch(FEAT_TRAINS,SELF, sw_223_6000_gfx_pantograph_pos_std, position_in_vehid_chain%3){
  0: spriteset_223_6000_mid_panto;
  default:spriteset_223_6000_mid;
}
switch(FEAT_TRAINS,SELF, sw_223_6000_gfx_pantograph_pos, num_vehs_in_vehid_chain){
  4: sw_223_6000_gfx_pantograph_pos_6car;
  default: sw_223_6000_gfx_pantograph_pos_std;
}
/*---END OF SECTION---*/



/*---GFX: Train Reversing Switches---*/
//Livery Selection
switch(FEAT_TRAINS,SELF, sw_223_0_gfx_rev_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
3: spriteset_223_6000_rev_front;
2: spriteset_223_5500_rev_front;
1: spriteset_223_2500_rev_front;
0: spriteset_223_0_rev_front;
}
switch(FEAT_TRAINS,SELF, sw_223_0_gfx_revflip_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
3: spriteset_223_6000_revflip_front;
2: spriteset_223_5500_revflip_front;
1: spriteset_223_2500_revflip_front;
0: spriteset_223_0_revflip_front;
}

switch(FEAT_TRAINS,SELF, sw_223_0_gfx_rev_mid_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
3: spriteset_223_6000_rev_mid_panto;
2: spriteset_223_5500_rev_mid_panto;
1: spriteset_223_2500_rev_mid_panto;
0: spriteset_223_0_rev_mid_panto;
}
switch(FEAT_TRAINS,SELF, sw_223_0_gfx_revflip_mid_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
3: spriteset_223_6000_revflip_mid_panto;
2: spriteset_223_5500_revflip_mid_panto;
1: spriteset_223_2500_revflip_mid_panto;
0: spriteset_223_0_revflip_mid_panto;
}

switch(FEAT_TRAINS,SELF, sw_223_0_gfx_rev_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
3: spriteset_223_6000_rev_mid;
2: spriteset_223_5500_rev_mid;
1: spriteset_223_2500_rev_mid;
0: spriteset_223_0_rev_mid;
}
switch(FEAT_TRAINS,SELF, sw_223_0_gfx_revflip_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
3: spriteset_223_6000_revflip_mid;
2: spriteset_223_5500_revflip_mid;
1: spriteset_223_2500_revflip_mid;
0: spriteset_223_0_revflip_mid;
}

switch(FEAT_TRAINS,SELF, sw_223_0_gfx_rev_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
3: spriteset_223_6000_rev_back;
2: spriteset_223_5500_rev_back;
1: spriteset_223_2500_rev_back;
0: spriteset_223_0_rev_back;
}
switch(FEAT_TRAINS,SELF, sw_223_0_gfx_revflip_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
3: spriteset_223_6000_revflip_back;
2: spriteset_223_5500_revflip_back;
1: spriteset_223_2500_revflip_back;
0: spriteset_223_0_revflip_back;
}

//Check for flipped vehicles (dual_headed)
switch(FEAT_TRAINS, SELF, sw_223_0_gfx_rev_front_flippedcheck, vehicle_is_flipped) {
  1: sw_223_0_gfx_rev_front_livery;
 default: sw_223_0_gfx_revflip_front_livery;
}
switch(FEAT_TRAINS, SELF, sw_223_0_gfx_rev_mid_panto_flippedcheck, vehicle_is_flipped) {
  1: sw_223_0_gfx_revflip_mid_panto_livery;
 default: sw_223_0_gfx_rev_mid_panto_livery;
}
switch(FEAT_TRAINS, SELF, sw_223_0_gfx_rev_mid_flippedcheck, vehicle_is_flipped) {
  1: sw_223_0_gfx_revflip_mid_livery;
 default: sw_223_0_gfx_rev_mid_livery;
}
switch(FEAT_TRAINS, SELF, sw_223_0_gfx_rev_back_flippedcheck, vehicle_is_flipped) {
  1: sw_223_0_gfx_revflip_back_livery;
 default: sw_223_0_gfx_rev_back_livery;
}

//Pantograph Position Testing
switch(FEAT_TRAINS, SELF, sw_223_0_gfx_rev_pantograph_pos_6car, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  1: sw_223_0_gfx_rev_mid_panto_flippedcheck;
  default: sw_223_0_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_223_0_gfx_rev_pantograph_pos_std, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%3]){ //look at opposite position_in_vehID_chain
  0: sw_223_0_gfx_rev_mid_panto_flippedcheck;
  default: sw_223_0_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_223_0_gfx_rev_pantograph_pos, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 16, 0x000000FF, 0x41]]){ //look at opposite num_vehs_in_vehid_chain
  4: sw_223_0_gfx_rev_pantograph_pos_6car;
  default: sw_223_0_gfx_rev_pantograph_pos_std;
}

//Front/Back Car Position Testing
switch(FEAT_TRAINS, SELF, sw_223_0_gfx_rev_frontback_nomucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_223_0_gfx_rev_front_flippedcheck;
  0:sw_223_0_gfx_rev_back_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_223_0_gfx_rev_frontback_aftermucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_223_0_gfx_rev_back_flippedcheck;
  0:sw_223_0_gfx_rev_front_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_223_0_gfx_rev_frontback_mucarcheck, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F),STORE_TEMP(var[0x61, 0, 0x000000FF, 0x41],0),  //look at opposite position_in_vehID_chain
STORE_TEMP((position_in_consist_from_end-position_in_consist-1)-LOAD_TEMP(0), 0x10F),                               //look at what is ahead of the first vehicle in the vehID_chain
var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000:sw_223_0_gfx_rev_frontback_aftermucars;
  default:sw_223_0_gfx_rev_frontback_nomucars;
}
switch(FEAT_TRAINS, SELF, sw_223_0_gfx_rev_frontback_sameid, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist+1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle behind of opposite vehicle
  2034:sw_223_0_gfx_rev_frontback_mucarcheck;
  1000:sw_223_0_gfx_rev_front_flippedcheck;
  default:sw_223_0_gfx_rev_back_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_223_0_gfx_rev_frontback, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle infront of opposite vehicle
  2034:sw_223_0_gfx_rev_frontback_sameid;
  1000:sw_223_0_gfx_rev_back_flippedcheck;
  default:sw_223_0_gfx_rev_front_flippedcheck;
}

//ID Testing
switch(FEAT_TRAINS, SELF, sw_223_0_gfx_rev_idcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of opposite vehicle
  1000: sw_223_0_gfx_rev_pantograph_pos;
  2034: sw_223_0_gfx_rev_frontback;
}
/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/
//223_0
switch(FEAT_TRAINS, SELF, sw_223_0_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_223_0_front;
 default: spriteset_223_0_back;
}
switch(FEAT_TRAINS, PARENT, sw_223_0_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_223_0_gfx_frontback_flipcheck;
 default: sw_223_0_gfx_rev_idcheck;
}
//223_2500
switch(FEAT_TRAINS, SELF, sw_223_2500_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_223_2500_front;
 default: spriteset_223_2500_back;
}
switch(FEAT_TRAINS, PARENT, sw_223_2500_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_223_0_gfx_rev_idcheck;
 default: sw_223_0_gfx_rev_idcheck;
}
//223_5500
switch(FEAT_TRAINS, SELF, sw_223_5500_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_223_5500_front;
 default: spriteset_223_5500_back;
}
switch(FEAT_TRAINS, PARENT, sw_223_5500_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_223_5500_gfx_frontback_flipcheck;
 default: sw_223_0_gfx_rev_idcheck;
}
//223_6000
switch(FEAT_TRAINS, SELF, sw_223_6000_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_223_6000_front;
 default: spriteset_223_6000_back;
}
switch(FEAT_TRAINS, PARENT, sw_223_6000_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_223_6000_gfx_frontback_flipcheck;
 default: sw_223_0_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Middle Car Switches---*/
//223_0
switch(FEAT_TRAINS, PARENT, sw_223_0_gfx_mucar_revcheck_mid, vehicle_is_reversed){
    0: sw_223_0_gfx_pantograph_pos;
    default: sw_223_0_gfx_rev_idcheck;
}
//223_2500
switch(FEAT_TRAINS, PARENT, sw_223_2500_gfx_mucar_revcheck_mid, vehicle_is_reversed){
    0: sw_223_2500_gfx_pantograph_pos;
    default: sw_223_0_gfx_rev_idcheck;
}
//223_5500
switch(FEAT_TRAINS, PARENT, sw_223_5500_gfx_mucar_revcheck_mid, vehicle_is_reversed){
    0: sw_223_5000_gfx_pantograph_pos;
    default: sw_223_0_gfx_rev_idcheck;
}
//223_6000
switch(FEAT_TRAINS, PARENT, sw_223_6000_gfx_mucar_revcheck_mid, vehicle_is_reversed){
    0: sw_223_6000_gfx_pantograph_pos;
    default: sw_223_0_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Livery Refitting Switches---*/
//Main Switches
switch(FEAT_TRAINS, SELF, sw_223_0_gfx_mucar, cargo_subtype) {
  3: sw_223_6000_gfx_mucar_revcheck_mid;
  2: sw_223_5500_gfx_mucar_revcheck_mid;
  1: sw_223_2500_gfx_mucar_revcheck_mid;
  0: sw_223_0_gfx_mucar_revcheck_mid;
}
switch(FEAT_TRAINS, SELF, sw_223_0_gfx_main, cargo_subtype) {
  3: sw_223_6000_gfx_frontback_revcheck;
  2: sw_223_5500_gfx_frontback_revcheck;
  1: sw_223_2500_gfx_frontback_revcheck;
  0: sw_223_0_gfx_frontback_revcheck;
}

//Menu Switches

switch(FEAT_TRAINS, SELF, sw_223_0_subtypetext_mucar, cargo_subtype) {
  3: string(JRW223_6000_LV);
  2: string(JRW223_5500_LV);
  1: string(JRW223_2500_LV);
  0: string(JRW223_0_LV);
}
switch(FEAT_TRAINS, SELF, sw_223_0_subtypetext_main, cargo_subtype) {
  3: string(JRW223_6000_LV);
  2: string(JRW223_5500_LV);
  1: string(JRW223_2500_LV);
  0: string(JRW223_0_LV);
}
/*---END OF SECTION---*/



//Coupling
  switch(FEAT_TRAINS, SELF, sw_223_0_attach_vehid, [vehicle_type_id == emu_223_0 || vehicle_type_id == mu_car]) {
  0: return string(MU_UNIQUE);
  }



item(FEAT_TRAINS, emu_223_0) {
    property {
        name:                         string(JRW_223_0);
        introduction_date:            date(1994, 04, 01);
        model_life:                   14;
        vehicle_life:                 39;
        reliability_decay:            11;

        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_3D;
        cost_factor:                  17;
        running_cost_factor:          51;

        speed:                        120 km/h;
        track_type:                   NARROW_OHLE;
        power:                        480 kW;
        weight:                       37 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  1;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_ELECTRIC;
        engine_class:                 ENGINE_CLASS_ELECTRIC;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                      sw_223_0_gfx_main;
		    purchase:                 spriteset_223_0_purchase;
		    additional_text:	      return string(JRW_223_0_DESC);
        cargo_subtype_text:           sw_223_0_subtypetext_main;
        can_attach_wagon:			  sw_223_0_attach_vehid;
        //start_stop:                   ;
    }
    /*Multiple Unit Car*/
      livery_override(mu_car){
        default:                      sw_223_0_gfx_mucar;
        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_3D;
        cargo_subtype_text:           sw_223_0_subtypetext_mucar;
        power: 120;
        weight: 27;
      }

}
# 1 "JPplus.pnml" 4
# 1 "src/JRW/EMU/223_1000_series.pnml" 1
/*---GFX: Spritesets---*/
//Purchase Sprites
spriteset (spriteset_223_1000_purchase,	                                                     "gfx/JRW/emu207/purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_223_1000_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,         "gfx/JRW/emu223/purchase_1000_32bpp.png")         {tmpl_purchase_dh_32bpp(0, 0)}

//223_1000 Orginal
spriteset (spriteset_223_1000_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_1000_grfront,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_1000_back,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_1000_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_1000_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_223_1000_rev_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_1000_rev_grfront,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_1000_rev_back,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_1000_rev_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_1000_rev_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_223_1000_revflip_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_1000_revflip_grfront,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_1000_revflip_back,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_1000_revflip_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_1000_revflip_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_223_1000_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-1000/223-1000-1-1.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_1000_grfront,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-1000/223-1000-3-1.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_1000_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-1000/223-1000-1-2.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_223_1000_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-1000/223-1000-1-3.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_223_1000_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-1000/223-1000-1-4.png")        {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_223_1000_rev_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-1000/223-1000-1-1.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_223_1000_rev_grfront,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-1000/223-1000-3-1.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_223_1000_rev_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-1000/223-1000-1-2.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_1000_rev_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-1000/223-1000-1-3.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_1000_rev_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-1000/223-1000-1-4.png")        {tmpl_std(0, 1)}

alternative_sprites(spriteset_223_1000_revflip_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-1000/223-1000-1-1.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_223_1000_revflip_grfront,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-1000/223-1000-3-1.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_223_1000_revflip_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-1000/223-1000-1-2.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_223_1000_revflip_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-1000/223-1000-1-3.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_223_1000_revflip_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-1000/223-1000-1-4.png")        {tmpl_std_rev(0, 1)}

//223_1000 Refurb
spriteset (spriteset_223_1000refurb_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_1000refurb_back,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_1000refurb_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_1000refurb_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_223_1000refurb_rev_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_1000refurb_rev_back,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_1000refurb_rev_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_1000refurb_rev_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_223_1000refurb_revflip_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_1000refurb_revflip_back,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_1000refurb_revflip_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_1000refurb_revflip_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_223_1000refurb_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-1000-2-1.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_1000refurb_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-1000-2-2.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_223_1000refurb_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-1000-2-3.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_223_1000refurb_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-1000-2-4.png")        {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_223_1000refurb_rev_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-1000-2-1.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_223_1000refurb_rev_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-1000-2-2.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_1000refurb_rev_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-1000-2-3.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_1000refurb_rev_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-1000-2-4.png")        {tmpl_std(0, 1)}

alternative_sprites(spriteset_223_1000refurb_revflip_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-1000-2-1.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_223_1000refurb_revflip_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-1000-2-2.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_223_1000refurb_revflip_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-1000-2-3.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_223_1000refurb_revflip_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-0/223-1000-2-4.png")        {tmpl_std_rev(0, 1)}

//223_2000
spriteset (spriteset_223_2000_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_2000_back,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_2000_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_2000_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_223_2000_rev_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_2000_rev_back,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_2000_rev_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_2000_rev_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_223_2000_revflip_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_2000_revflip_back,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_2000_revflip_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_223_2000_revflip_mid_panto,    		"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_223_2000_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2000/223-2000-1-1.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_2000_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2000/223-2000-1-2.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_223_2000_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2000/223-2000-1-3.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_223_2000_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2000/223-2000-1-4.png")        {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_223_2000_rev_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2000/223-2000-1-1.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_223_2000_rev_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2000/223-2000-1-2.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_2000_rev_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2000/223-2000-1-3.png")        {tmpl_std(0, 1)}
alternative_sprites(spriteset_223_2000_rev_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2000/223-2000-1-4.png")        {tmpl_std(0, 1)}

alternative_sprites(spriteset_223_2000_revflip_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2000/223-2000-1-1.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_223_2000_revflip_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2000/223-2000-1-2.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_223_2000_revflip_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2000/223-2000-1-3.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_223_2000_revflip_mid_panto,     ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRW/emu223/223-2000/223-2000-1-4.png")        {tmpl_std_rev(0, 1)}

/*---END OF SECTION---*/



/*---GFX: Pantograph Positions---*/
//223_1000
switch(FEAT_TRAINS,SELF, sw_223_1000_gfx_pantograph_pos_6car, position_in_vehid_chain){
  1: spriteset_223_1000_mid_panto;
  default:spriteset_223_1000_mid;
}
switch(FEAT_TRAINS,SELF, sw_223_1000_gfx_pantograph_pos_std, position_in_vehid_chain%3){
  0: spriteset_223_1000_mid_panto;
  default:spriteset_223_1000_mid;
}
switch(FEAT_TRAINS,SELF, sw_223_1000_gfx_pantograph_pos, num_vehs_in_vehid_chain){
  4: sw_223_1000_gfx_pantograph_pos_6car;
  default: sw_223_1000_gfx_pantograph_pos_std;
}

//223_1000 Refurb
switch(FEAT_TRAINS,SELF, sw_223_1000refurb_gfx_pantograph_pos_6car, position_in_vehid_chain){
  1: spriteset_223_1000refurb_mid_panto;
  default:spriteset_223_1000refurb_mid;
}
switch(FEAT_TRAINS,SELF, sw_223_1000refurb_gfx_pantograph_pos_std, position_in_vehid_chain%3){
  0: spriteset_223_1000refurb_mid_panto;
  default:spriteset_223_1000refurb_mid;
}
switch(FEAT_TRAINS,SELF, sw_223_1000refurb_gfx_pantograph_pos, num_vehs_in_vehid_chain){
  4: sw_223_1000refurb_gfx_pantograph_pos_6car;
  default: sw_223_1000refurb_gfx_pantograph_pos_std;
}

//223_2000
switch(FEAT_TRAINS,SELF, sw_223_2000_gfx_pantograph_pos_6car, position_in_vehid_chain){
  1: spriteset_223_2000_mid_panto;
  default:spriteset_223_2000_mid;
}
switch(FEAT_TRAINS,SELF, sw_223_2000_gfx_pantograph_pos_std, position_in_vehid_chain%3){
  0: spriteset_223_2000_mid_panto;
  default:spriteset_223_2000_mid;
}
switch(FEAT_TRAINS,SELF, sw_223_2000_gfx_pantograph_pos, num_vehs_in_vehid_chain){
  4: sw_223_2000_gfx_pantograph_pos_6car;
  default: sw_223_2000_gfx_pantograph_pos_std;
}
/*---END OF SECTION---*/



/*---GFX: Train Reversing Switches---*/
//Livery Selection
switch(FEAT_TRAINS,SELF, sw_223_1000_gfx_rev_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
2: spriteset_223_2000_rev_front;
1: spriteset_223_1000_rev_grfront;
0: spriteset_223_1000_rev_front;
}
switch(FEAT_TRAINS,SELF, sw_223_1000_gfx_revflip_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
2: spriteset_223_2000_revflip_front;
1: spriteset_223_1000_revflip_grfront;
0: spriteset_223_1000_revflip_front;
}

switch(FEAT_TRAINS,SELF, sw_223_1000_gfx_rev_mid_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
2: spriteset_223_2000_rev_mid_panto;
1: spriteset_223_1000_rev_mid_panto;
0: spriteset_223_1000_rev_mid_panto;
}
switch(FEAT_TRAINS,SELF, sw_223_1000_gfx_revflip_mid_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
2: spriteset_223_2000_revflip_mid_panto;
1: spriteset_223_1000_revflip_mid_panto;
0: spriteset_223_1000_revflip_mid_panto;
}

switch(FEAT_TRAINS,SELF, sw_223_1000_gfx_rev_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
2: spriteset_223_2000_rev_mid;
1: spriteset_223_1000_rev_mid;
0: spriteset_223_1000_rev_mid;
}
switch(FEAT_TRAINS,SELF, sw_223_1000_gfx_revflip_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
2: spriteset_223_2000_revflip_mid;
1: spriteset_223_1000_revflip_mid;
0: spriteset_223_1000_revflip_mid;
}

switch(FEAT_TRAINS,SELF, sw_223_1000_gfx_rev_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
2: spriteset_223_2000_rev_back;
1: spriteset_223_1000_rev_back;
0: spriteset_223_1000_rev_back;
}
switch(FEAT_TRAINS,SELF, sw_223_1000_gfx_revflip_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
2: spriteset_223_2000_revflip_back;
1: spriteset_223_1000_revflip_back;
0: spriteset_223_1000_revflip_back;
}

//Check for flipped vehicles (dual_headed)
switch(FEAT_TRAINS, SELF, sw_223_1000_gfx_rev_front_flippedcheck, vehicle_is_flipped) {
  1: sw_223_1000_gfx_rev_front_livery;
 default: sw_223_1000_gfx_revflip_front_livery;
}
switch(FEAT_TRAINS, SELF, sw_223_1000_gfx_rev_mid_panto_flippedcheck, vehicle_is_flipped) {
  1: sw_223_1000_gfx_revflip_mid_panto_livery;
 default: sw_223_1000_gfx_rev_mid_panto_livery;
}
switch(FEAT_TRAINS, SELF, sw_223_1000_gfx_rev_mid_flippedcheck, vehicle_is_flipped) {
  1: sw_223_1000_gfx_revflip_mid_livery;
 default: sw_223_1000_gfx_rev_mid_livery;
}
switch(FEAT_TRAINS, SELF, sw_223_1000_gfx_rev_back_flippedcheck, vehicle_is_flipped) {
  1: sw_223_1000_gfx_revflip_back_livery;
 default: sw_223_1000_gfx_rev_back_livery;
}

//Pantograph Position Testing
switch(FEAT_TRAINS, SELF, sw_223_1000_gfx_rev_pantograph_pos_6car, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]]){ //look at opposite position_in_vehID_chain
  1: sw_223_1000_gfx_rev_mid_panto_flippedcheck;
  default: sw_223_1000_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_223_1000_gfx_rev_pantograph_pos_std, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%3]){ //look at opposite position_in_vehID_chain
  0: sw_223_1000_gfx_rev_mid_panto_flippedcheck;
  default: sw_223_1000_gfx_rev_mid_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_223_1000_gfx_rev_pantograph_pos, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 16, 0x000000FF, 0x41]]){ //look at opposite num_vehs_in_vehid_chain
  4: sw_223_1000_gfx_rev_pantograph_pos_6car;
  default: sw_223_1000_gfx_rev_pantograph_pos_std;
}

//Front/Back Car Position Testing
switch(FEAT_TRAINS, SELF, sw_223_1000_gfx_rev_frontback_nomucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_223_1000_gfx_rev_front_flippedcheck;
  0:sw_223_1000_gfx_rev_back_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_223_1000_gfx_rev_frontback_aftermucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_223_1000_gfx_rev_back_flippedcheck;
  0:sw_223_1000_gfx_rev_front_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_223_1000_gfx_rev_frontback_mucarcheck, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F),STORE_TEMP(var[0x61, 0, 0x000000FF, 0x41],0),  //look at opposite position_in_vehID_chain
STORE_TEMP((position_in_consist_from_end-position_in_consist-1)-LOAD_TEMP(0), 0x10F),                               //look at what is ahead of the first vehicle in the vehID_chain
var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000:sw_223_1000_gfx_rev_frontback_aftermucars;
  default:sw_223_1000_gfx_rev_frontback_nomucars;
}
switch(FEAT_TRAINS, SELF, sw_223_1000_gfx_rev_frontback_sameid, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist+1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle behind of opposite vehicle
  2035:sw_223_1000_gfx_rev_frontback_mucarcheck;
  1000:sw_223_1000_gfx_rev_front_flippedcheck;
  default:sw_223_1000_gfx_rev_back_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_223_1000_gfx_rev_frontback, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle infront of opposite vehicle
  2035:sw_223_1000_gfx_rev_frontback_sameid;
  1000:sw_223_1000_gfx_rev_back_flippedcheck;
  default:sw_223_1000_gfx_rev_front_flippedcheck;
}

//ID Testing
switch(FEAT_TRAINS, SELF, sw_223_1000_gfx_rev_idcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of opposite vehicle
  1000: sw_223_1000_gfx_rev_pantograph_pos;
  2035: sw_223_1000_gfx_rev_frontback;
}
/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/
//223_1000
switch(FEAT_TRAINS, SELF, sw_223_1000_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_223_1000_front;
 default: spriteset_223_1000_back;
}
switch(FEAT_TRAINS, PARENT, sw_223_1000_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_223_1000_gfx_frontback_flipcheck;
 default: sw_223_1000_gfx_rev_idcheck;
}
//223_1000 A-SEAT
switch(FEAT_TRAINS, SELF, sw_223_1000as_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_223_1000_grfront;
 default: spriteset_223_1000_back;
}
switch(FEAT_TRAINS, PARENT, sw_223_1000as_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_223_1000as_gfx_frontback_flipcheck;
 default: sw_223_1000_gfx_rev_idcheck;
}
//223_2000
switch(FEAT_TRAINS, SELF, sw_223_2000_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_223_2000_front;
 default: spriteset_223_2000_back;
}
switch(FEAT_TRAINS, PARENT, sw_223_2000_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_223_2000_gfx_frontback_flipcheck;
 default: sw_223_1000_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Middle Car Switches---*/
//223_1000
switch(FEAT_TRAINS, PARENT, sw_223_1000_gfx_mucar_revcheck_mid, vehicle_is_reversed){
    0: sw_223_1000_gfx_pantograph_pos;
    default: sw_223_1000_gfx_rev_idcheck;
}
//223_2000
switch(FEAT_TRAINS, PARENT, sw_223_2000_gfx_mucar_revcheck_mid, vehicle_is_reversed){
    0: sw_223_2000_gfx_pantograph_pos;
    default: sw_223_1000_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Livery Refitting Switches---*/
//Main Switches
switch(FEAT_TRAINS, SELF, sw_223_1000_gfx_mucar, cargo_subtype){
  2: sw_223_2000_gfx_mucar_revcheck_mid;
  1: sw_223_1000_gfx_mucar_revcheck_mid;
  0: sw_223_1000_gfx_mucar_revcheck_mid;
}
switch(FEAT_TRAINS, SELF, sw_223_1000_gfx_main, cargo_subtype) {
  2: sw_223_2000_gfx_frontback_revcheck;
  1: sw_223_1000as_gfx_frontback_revcheck;
  0: sw_223_1000_gfx_frontback_revcheck;
}

//Menu Switches
switch(FEAT_TRAINS, SELF, sw_223_1000_subtypetext_mucar, cargo_subtype) {
  2: string(JRW223_2000_LV);
  1: string(JRW223_1000as_LV);
  0: string(JRW223_1000_LV);
}
switch(FEAT_TRAINS, SELF, sw_223_1000_subtypetext_main, cargo_subtype) {
  2: string(JRW223_2000_LV);
  1: string(JRW223_1000as_LV);
  0: string(JRW223_1000_LV);
}
/*---END OF SECTION---*/



//Coupling
  switch(FEAT_TRAINS, SELF, sw_223_1000_attach_vehid, [vehicle_type_id == emu_223_1000 || vehicle_type_id == mu_car]) {
  0: return string(MU_UNIQUE);
  }



item(FEAT_TRAINS, emu_223_1000) {
    property {
        name:                         string(JRW_223_1000);
        introduction_date:            date(1995, 12, 08);
        model_life:                   13;
        vehicle_life:                 39;
        reliability_decay:            11;

        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_3D;
        cost_factor:                  17;
        running_cost_factor:          51;

        speed:                        130 km/h;
        track_type:                   NARROW_OHLE;
        power:                        480 kW;
        weight:                       37 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  1;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_ELECTRIC;
        engine_class:                 ENGINE_CLASS_ELECTRIC;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                      sw_223_1000_gfx_main;
		    purchase:                 spriteset_223_1000_purchase;
		    additional_text:	      return string(JRW_223_1000_DESC);
        cargo_subtype_text:           sw_223_1000_subtypetext_main;
        can_attach_wagon:			  sw_223_1000_attach_vehid;
        //start_stop:                   ;
    }
    /*Multiple Unit Car*/
      livery_override(mu_car){
        default:                      sw_223_1000_gfx_mucar;
        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_3D;
        cargo_subtype_text:           sw_223_1000_subtypetext_mucar;
        power: 120;
        weight: 27;
      }

}
# 1 "JPplus.pnml" 4


//JR-Shikoku
# 1 "src/JRS/EMU/6000_series.pnml" 1
/*---GFX: Spritesets---*/
//Purchase Sprites
spriteset (spriteset_6000_purchase,	                                                     "gfx/JRW/emu207/purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_6000_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,         "gfx/JRS/emu6000/purchase_32bpp.png")         {tmpl_purchase_dh_32bpp(0, 0)}

//6000
spriteset (spriteset_6000_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_6000_back,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_6000_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_6000_rev_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_6000_rev_back,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_6000_rev_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_6000_revflip_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_6000_revflip_back,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_6000_revflip_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_6000_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRS/emu6000/6000-1-1.png")           {tmpl_std(0, 1)}
alternative_sprites(spriteset_6000_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRS/emu6000/6000-1-2.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_6000_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRS/emu6000/6000-1-3.png")           {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_6000_rev_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRS/emu6000/6000-1-1.png")          {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_6000_rev_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRS/emu6000/6000-1-2.png")       {tmpl_std(0, 1)}
alternative_sprites(spriteset_6000_rev_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRS/emu6000/6000-1-3.png")          {tmpl_std(0, 1)}

alternative_sprites(spriteset_6000_revflip_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRS/emu6000/6000-1-1.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_6000_revflip_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRS/emu6000/6000-1-2.png")     {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_6000_revflip_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRS/emu6000/6000-1-3.png")        {tmpl_std_rev(0, 1)}
/*---END OF SECTION---*/



/*---GFX: Train Reversing Switches---*/
//Livery Selection
switch(FEAT_TRAINS,SELF, sw_6000_gfx_rev_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0: spriteset_6000_rev_front;
}
switch(FEAT_TRAINS,SELF, sw_6000_gfx_revflip_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0: spriteset_6000_revflip_front;
}

switch(FEAT_TRAINS,SELF, sw_6000_gfx_rev_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0: spriteset_6000_rev_mid;
}
switch(FEAT_TRAINS,SELF, sw_6000_gfx_revflip_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0: spriteset_6000_revflip_mid;
}

switch(FEAT_TRAINS,SELF, sw_6000_gfx_rev_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0: spriteset_6000_rev_back;
}
switch(FEAT_TRAINS,SELF, sw_6000_gfx_revflip_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){

0: spriteset_6000_revflip_back;
}

//Check for flipped vehicles (dual_headed)
switch(FEAT_TRAINS, SELF, sw_6000_gfx_rev_front_flippedcheck, vehicle_is_flipped) {
  1: sw_6000_gfx_rev_front_livery;
 default: sw_6000_gfx_revflip_front_livery;
}
switch(FEAT_TRAINS, SELF, sw_6000_gfx_rev_mid_flippedcheck, vehicle_is_flipped) {
  1: sw_6000_gfx_revflip_mid_livery;
 default: sw_6000_gfx_rev_mid_livery;
}
switch(FEAT_TRAINS, SELF, sw_6000_gfx_rev_back_flippedcheck, vehicle_is_flipped) {
  1: sw_6000_gfx_revflip_back_livery;
 default: sw_6000_gfx_rev_back_livery;
}

//Front/Back Car Position Testing
switch(FEAT_TRAINS, SELF, sw_6000_gfx_rev_frontback_nomucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_6000_gfx_rev_front_flippedcheck;
  0:sw_6000_gfx_rev_back_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_6000_gfx_rev_frontback_aftermucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_6000_gfx_rev_back_flippedcheck;
  0:sw_6000_gfx_rev_front_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_6000_gfx_rev_frontback_mucarcheck, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F),STORE_TEMP(var[0x61, 0, 0x000000FF, 0x41],0),  //look at opposite position_in_vehID_chain
STORE_TEMP((position_in_consist_from_end-position_in_consist-1)-LOAD_TEMP(0), 0x10F),                               //look at what is ahead of the first vehicle in the vehID_chain
var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000:sw_6000_gfx_rev_frontback_aftermucars;
  default:sw_6000_gfx_rev_frontback_nomucars;
}
switch(FEAT_TRAINS, SELF, sw_6000_gfx_rev_frontback_sameid, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist+1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle behind of opposite vehicle
  2011:sw_6000_gfx_rev_frontback_mucarcheck;
  1000:sw_6000_gfx_rev_front_flippedcheck;
  default:sw_6000_gfx_rev_back_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_6000_gfx_rev_frontback, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle infront of opposite vehicle
  2011:sw_6000_gfx_rev_frontback_sameid;
  1000:sw_6000_gfx_rev_back_flippedcheck;
  default:sw_6000_gfx_rev_front_flippedcheck;
}

//ID Testing
switch(FEAT_TRAINS, SELF, sw_6000_gfx_rev_idcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of opposite vehicle
  1000: sw_6000_gfx_rev_mid_flippedcheck;
  2011: sw_6000_gfx_rev_frontback;
}
/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/
//6000
switch(FEAT_TRAINS, SELF, sw_6000_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_6000_front;
 default: spriteset_6000_back;
}
switch(FEAT_TRAINS, PARENT, sw_6000_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_6000_gfx_frontback_flipcheck;
 default: sw_6000_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Middle Car Switches---*/
//6000
switch(FEAT_TRAINS, PARENT, sw_6000_gfx_mucar_revcheck_mid, vehicle_is_reversed){
    0: spriteset_6000_mid;
    default: sw_6000_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Livery Refitting Switches---*/
//Main Switches
switch(FEAT_TRAINS, SELF, sw_6000_gfx_mucar, cargo_subtype){
  0: sw_6000_gfx_mucar_revcheck_mid;
}
switch(FEAT_TRAINS, SELF, sw_6000_gfx_main, cargo_subtype) {
  0: sw_6000_gfx_frontback_revcheck;
}

//Menu Switches
/*
switch(FEAT_TRAINS, SELF, sw_6000_subtypetext_mucar, cargo_subtype) {
  4: string(JRS6000_SPACEWORLD2);
  3: string(JRS6000_SPACEWORLD);
  2: string(JRS6000_GREENLAND);
  1: string(JRS6000_RENEWAL);
  0: string(JRS6000_INITIAL);
}
switch(FEAT_TRAINS, SELF, sw_6000_subtypetext_main, cargo_subtype) {
  4: string(JRS6000_SPACEWORLD2);
  3: string(JRS6000_SPACEWORLD);
  2: string(JRS6000_GREENLAND);
  1: string(JRS6000_RENEWAL);
  0: string(JRS6000_INITIAL);
}
*/
/*---END OF SECTION---*/



//Coupling
  switch(FEAT_TRAINS, SELF, sw_6000_attach_vehid, [vehicle_type_id == emu_6000 || vehicle_type_id == mu_car]) {
  0: return string(MU_UNIQUE);
  }



item(FEAT_TRAINS, emu_6000) {
    property {
        name:                         string(JRS_6000);
        introduction_date:            date(1995, 04, 16);
        model_life:                   2;
        vehicle_life:                 30;
        reliability_decay:            16;

        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_3D;
        cost_factor:                  17;
        running_cost_factor:          51;

        speed:                        110 km/h;
        track_type:                   NARROW_OHLE;
        power:                        520 kW;
        weight:                       37 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  1;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_ELECTRIC;
        engine_class:                 ENGINE_CLASS_ELECTRIC;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                      sw_6000_gfx_main;
		    purchase:                 spriteset_6000_purchase;
		    additional_text:	      return string(JRS_6000_DESC);
        //cargo_subtype_text:           sw_6000_subtypetext_main;
        can_attach_wagon:			  sw_6000_attach_vehid;
        //start_stop:                   ;
    }
    /*Multiple Unit Car*/
      livery_override(mu_car){
        default:                      sw_6000_gfx_mucar;
        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_3D;
        //cargo_subtype_text:           sw_6000_subtypetext_mucar;
        power: 120;
        weight: 27;
      }

}
# 1 "JPplus.pnml" 4

//JR-Kyushu
# 1 "src/JRK/EMU/303_series.pnml" 1
/*---GFX: Spritesets---*/
//Purchase Sprites
spriteset (spriteset_303_purchase,	                                                     "gfx/JRW/emu207/purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_303_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,          "gfx/JRK/emu303/purchase_32bpp.png")         {tmpl_purchase_dh_32bpp(0, 0)}

//303 Standard
spriteset (spriteset_303_front,    	      	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }
spriteset (spriteset_303_back,        	    "gfx/OTHER/mucar.png")       	{ tmpl_std(0, 0) }
spriteset (spriteset_303_mid,    		        "gfx/OTHER/mucar.png")       	{ tmpl_std(0, 0) }
spriteset (spriteset_303_mid_panto,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_303_rev_front,    	      	"gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }
spriteset (spriteset_303_rev_back,        	    "gfx/OTHER/mucar.png")       	{ tmpl_std(0, 0) }
spriteset (spriteset_303_rev_mid,    		        "gfx/OTHER/mucar.png")      	{ tmpl_std(0, 0) }
spriteset (spriteset_303_rev_mid_panto,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_303_revflip_front,    	    	"gfx/OTHER/mucar.png") 	      { tmpl_std(0, 0) }
spriteset (spriteset_303_revflip_back,    		    "gfx/OTHER/mucar.png") 	      { tmpl_std(0, 0) }
spriteset (spriteset_303_revflip_mid,    		      "gfx/OTHER/mucar.png") 	      { tmpl_std(0, 0) }
spriteset (spriteset_303_revflip_mid_panto,    		      "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_303_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRK/emu303/303-1-1.png")           {tmpl_std(0, 1)}
alternative_sprites(spriteset_303_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRK/emu303/303-1-1.png")           {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_303_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRK/emu303/303-1-2.png")           {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_303_mid_panto,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu303/303-1-3.png")           {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_303_rev_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRK/emu303/303-1-1.png")          {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_303_rev_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRK/emu303/303-1-1.png")          {tmpl_std(0, 1)}
alternative_sprites(spriteset_303_rev_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRK/emu303/303-1-2.png")          {tmpl_std(0, 1)}
alternative_sprites(spriteset_303_rev_mid_panto,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu303/303-1-3.png")          {tmpl_std(0, 1)}

alternative_sprites(spriteset_303_revflip_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRK/emu303/303-1-1.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_303_revflip_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRK/emu303/303-1-1.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_303_revflip_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,             "gfx/JRK/emu303/303-1-2.png")        {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_303_revflip_mid_panto,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu303/303-1-3.png")        {tmpl_std_rev(0, 1)}

/*---END OF SECTION---*/



/*---GFX: Pantograph Positions---*/
switch(FEAT_TRAINS,SELF, sw_303_gfx_pantograph_pos, position_in_vehid_chain%6){
  0: spriteset_303_mid_panto;
  3: spriteset_303_mid_panto;
  default: spriteset_303_mid;
}
/*---END OF SECTION---*/



/*---GFX: Train Reversing Switches---*/
//Livery Selection
switch(FEAT_TRAINS,SELF, sw_303_gfx_rev_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0: spriteset_303_rev_front;
}
switch(FEAT_TRAINS,SELF, sw_303_gfx_revflip_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0: spriteset_303_revflip_front;
}

switch(FEAT_TRAINS,SELF, sw_303_gfx_rev_mid_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0: spriteset_303_rev_mid_panto;
}
switch(FEAT_TRAINS,SELF, sw_303_gfx_revflip_mid_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0: spriteset_303_revflip_mid_panto;
}

switch(FEAT_TRAINS,SELF, sw_303_gfx_rev_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0: spriteset_303_rev_mid;
}
switch(FEAT_TRAINS,SELF, sw_303_gfx_revflip_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0: spriteset_303_revflip_mid;
}

switch(FEAT_TRAINS,SELF, sw_303_gfx_rev_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0: spriteset_303_rev_back;
}
switch(FEAT_TRAINS,SELF, sw_303_gfx_revflip_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
0: spriteset_303_revflip_back;
}

//Check for flipped vehicles (dual_headed)
switch(FEAT_TRAINS, SELF, sw_303_gfx_rev_front_flippedcheck, vehicle_is_flipped) {
  1: sw_303_gfx_rev_front_livery;
 default: sw_303_gfx_revflip_front_livery;
}
switch(FEAT_TRAINS, SELF, sw_303_gfx_rev_mid_panto_flippedcheck, vehicle_is_flipped) {
  1: sw_303_gfx_revflip_mid_panto_livery;
 default: sw_303_gfx_rev_mid_panto_livery;
}
switch(FEAT_TRAINS, SELF, sw_303_gfx_rev_mid_flippedcheck, vehicle_is_flipped) {
  1: sw_303_gfx_revflip_mid_livery;
 default: sw_303_gfx_rev_mid_livery;
}
switch(FEAT_TRAINS, SELF, sw_303_gfx_rev_back_flippedcheck, vehicle_is_flipped) {
  1: sw_303_gfx_revflip_back_livery;
 default: sw_303_gfx_rev_back_livery;
}

//Pantograph Position Testing
switch(FEAT_TRAINS, SELF, sw_303_gfx_rev_pantograph_pos_std, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%6]){ //look at opposite position_in_vehID_chain
  0: sw_303_gfx_rev_mid_panto_flippedcheck;
  3: sw_303_gfx_rev_mid_panto_flippedcheck;
  default: sw_303_gfx_rev_mid_flippedcheck;
}

//Front/Back Car Position Testing
switch(FEAT_TRAINS, SELF, sw_303_gfx_rev_frontback_nomucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_303_gfx_rev_front_flippedcheck;
  0:sw_303_gfx_rev_back_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_303_gfx_rev_frontback_aftermucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_303_gfx_rev_back_flippedcheck;
  0:sw_303_gfx_rev_front_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_303_gfx_rev_frontback_mucarcheck, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F),STORE_TEMP(var[0x61, 0, 0x000000FF, 0x41],0),  //look at opposite position_in_vehID_chain
STORE_TEMP((position_in_consist_from_end-position_in_consist-1)-LOAD_TEMP(0), 0x10F),                               //look at what is ahead of the first vehicle in the vehID_chain
var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000:sw_303_gfx_rev_frontback_aftermucars;
  default:sw_303_gfx_rev_frontback_nomucars;
}
switch(FEAT_TRAINS, SELF, sw_303_gfx_rev_frontback_sameid, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist+1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle behind of opposite vehicle
  2039:sw_303_gfx_rev_frontback_mucarcheck;
  1000:sw_303_gfx_rev_front_flippedcheck;
  default:sw_303_gfx_rev_back_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_303_gfx_rev_frontback, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle infront of opposite vehicle
  2039:sw_303_gfx_rev_frontback_sameid;
  1000:sw_303_gfx_rev_back_flippedcheck;
  default:sw_303_gfx_rev_front_flippedcheck;
}

//ID Testing
switch(FEAT_TRAINS, SELF, sw_303_gfx_rev_idcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of opposite vehicle
  1000: sw_303_gfx_rev_pantograph_pos_std;
  2039: sw_303_gfx_rev_frontback;
}
/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/
//303 Standard
switch(FEAT_TRAINS, SELF, sw_303_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_303_front;
 default: spriteset_303_back;
}
switch(FEAT_TRAINS, PARENT, sw_303_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_303_gfx_frontback_flipcheck;
 default: sw_303_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Middle Car Switches---*/
//303 Standard
switch(FEAT_TRAINS, PARENT, sw_303_gfx_mucar_revcheck_mid, vehicle_is_reversed){
    0: sw_303_gfx_pantograph_pos;
    default: sw_303_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Livery Refitting Switches---*/
//Main Switches
switch(FEAT_TRAINS, SELF, sw_303_gfx_mucar, cargo_subtype){
  0: sw_303_gfx_mucar_revcheck_mid;
}
switch(FEAT_TRAINS, SELF, sw_303_gfx_main, cargo_subtype) {
  0: sw_303_gfx_frontback_revcheck;
}

//Menu Switches
/*
switch(FEAT_TRAINS, SELF, sw_303_subtypetext_mucar, cargo_subtype) {
  0: string(JRK303_STD);
}
switch(FEAT_TRAINS, SELF, sw_303_subtypetext_main, cargo_subtype) {
  0: string(JRK303_STD);
}
*/
/*---END OF SECTION---*/



//Coupling
  switch(FEAT_TRAINS, SELF, sw_303_attach_vehid, [vehicle_type_id == emu_303 || vehicle_type_id == mu_car]) {
  0: return string(MU_UNIQUE);
  }



item(FEAT_TRAINS, emu_303) {
    property {
        name:                         string(JRK_303);
        introduction_date:            date(2000, 01, 22);
        model_life:                   3;
        vehicle_life:                 39;
        reliability_decay:            11;

        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_4D;
        cost_factor:                  17;
        running_cost_factor:          51;

        speed:                        85 km/h;
        track_type:                   NARROW_OHLE;
        power:                        480 kW;
        weight:                       37 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  1;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_ELECTRIC;
        engine_class:                 ENGINE_CLASS_ELECTRIC;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                      sw_303_gfx_main;
		    purchase:                 spriteset_303_purchase;
		    additional_text:	      return string(JRK_303_DESC);
        //cargo_subtype_text:           sw_303_subtypetext_main;
        can_attach_wagon:			  sw_303_attach_vehid;
        //start_stop:                   ;
    }
    /*Multiple Unit Car*/
      livery_override(mu_car){
        default:                      sw_303_gfx_mucar;
        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_4D;
        //cargo_subtype_text:           sw_303_subtypetext_mucar;
        power: 120;
        weight: 27;
      }

}
# 1 "JPplus.pnml" 4
# 1 "src/JRK/EMU/811_series.pnml" 1
/*---GFX: Spritesets---*/
//Purchase Sprites
spriteset (spriteset_811_purchase,	                                                     "gfx/JRW/emu207/purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_811_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,         "gfx/JRK/emu811/purchase_32bpp.png")         {tmpl_purchase_dh_32bpp(0, 0)}

//811 Orginal
spriteset (spriteset_811_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_back,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_811_rev_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_rev_back,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_rev_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_811_revflip_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_revflip_back,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_revflip_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_811_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/Initial/811-1-1.png")           {tmpl_std(0, 1)}
alternative_sprites(spriteset_811_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/Initial/811-1-2.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_811_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/Initial/811-1-3.png")           {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_811_rev_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/Initial/811-1-1.png")          {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_811_rev_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/Initial/811-1-2.png")       {tmpl_std(0, 1)}
alternative_sprites(spriteset_811_rev_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/Initial/811-1-3.png")          {tmpl_std(0, 1)}

alternative_sprites(spriteset_811_revflip_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/Initial/811-1-1.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_811_revflip_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/Initial/811-1-2.png")     {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_811_revflip_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/Initial/811-1-3.png")        {tmpl_std_rev(0, 1)}

//811 Renewal
spriteset (spriteset_811_front_renewal,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_back_renewal,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_mid_renewal,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_811_rev_front_renewal,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_rev_back_renewal,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_rev_mid_renewal,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_811_revflip_front_renewal,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_revflip_back_renewal,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_revflip_mid_renewal,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_811_front_renewal,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/Renewal/811-5-1.png")           {tmpl_std(0, 1)}
alternative_sprites(spriteset_811_back_renewal,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/Renewal/811-5-2.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_811_mid_renewal,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/Renewal/811-5-3.png")           {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_811_rev_front_renewal,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/Renewal/811-5-1.png")          {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_811_rev_back_renewal,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/Renewal/811-5-2.png")       {tmpl_std(0, 1)}
alternative_sprites(spriteset_811_rev_mid_renewal,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/Renewal/811-5-3.png")          {tmpl_std(0, 1)}

alternative_sprites(spriteset_811_revflip_front_renewal,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/Renewal/811-5-1.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_811_revflip_back_renewal,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/Renewal/811-5-2.png")     {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_811_revflip_mid_renewal,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/Renewal/811-5-3.png")        {tmpl_std_rev(0, 1)}

//811 Greenland
spriteset (spriteset_811_front_greenland,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_back_greenland,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_mid_greenland,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_811_rev_front_greenland,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_rev_back_greenland,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_rev_mid_greenland,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_811_revflip_front_greenland,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_revflip_back_greenland,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_revflip_mid_greenland,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_811_front_greenland,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/greenland/811-4-1.png")           {tmpl_std(0, 1)}
alternative_sprites(spriteset_811_back_greenland,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/greenland/811-4-2.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_811_mid_greenland,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/greenland/811-4-3.png")           {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_811_rev_front_greenland,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/greenland/811-4-1.png")          {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_811_rev_back_greenland,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/greenland/811-4-2.png")       {tmpl_std(0, 1)}
alternative_sprites(spriteset_811_rev_mid_greenland,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/greenland/811-4-3.png")          {tmpl_std(0, 1)}

alternative_sprites(spriteset_811_revflip_front_greenland,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/greenland/811-4-1.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_811_revflip_back_greenland,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/greenland/811-4-2.png")     {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_811_revflip_mid_greenland,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/greenland/811-4-3.png")        {tmpl_std_rev(0, 1)}

//811 Spaceworld
spriteset (spriteset_811_front_spaceworld,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_back_spaceworld,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_mid_spaceworld,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_811_rev_front_spaceworld,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_rev_back_spaceworld,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_rev_mid_spaceworld,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_811_revflip_front_spaceworld,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_revflip_back_spaceworld,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_revflip_mid_spaceworld,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_811_front_spaceworld,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/spaceworld/811-2-1.png")           {tmpl_std(0, 1)}
alternative_sprites(spriteset_811_back_spaceworld,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/spaceworld/811-2-2.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_811_mid_spaceworld,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/spaceworld/811-2-3.png")           {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_811_rev_front_spaceworld,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/spaceworld/811-2-1.png")          {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_811_rev_back_spaceworld,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/spaceworld/811-2-2.png")       {tmpl_std(0, 1)}
alternative_sprites(spriteset_811_rev_mid_spaceworld,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/spaceworld/811-2-3.png")          {tmpl_std(0, 1)}

alternative_sprites(spriteset_811_revflip_front_spaceworld,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/spaceworld/811-2-1.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_811_revflip_back_spaceworld,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/spaceworld/811-2-2.png")     {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_811_revflip_mid_spaceworld,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/spaceworld/811-2-3.png")        {tmpl_std_rev(0, 1)}

//811 Spaceworld New
spriteset (spriteset_811_front_spaceworldnew,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_back_spaceworldnew,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_mid_spaceworldnew,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_811_rev_front_spaceworldnew,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_rev_back_spaceworldnew,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_rev_mid_spaceworldnew,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_811_revflip_front_spaceworldnew,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_revflip_back_spaceworldnew,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_811_revflip_mid_spaceworldnew,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_811_front_spaceworldnew,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/spaceworldnew/811-3-1.png")           {tmpl_std(0, 1)}
alternative_sprites(spriteset_811_back_spaceworldnew,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/spaceworldnew/811-3-2.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_811_mid_spaceworldnew,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/spaceworldnew/811-3-3.png")           {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_811_rev_front_spaceworldnew,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/spaceworldnew/811-3-1.png")          {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_811_rev_back_spaceworldnew,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/spaceworldnew/811-3-2.png")       {tmpl_std(0, 1)}
alternative_sprites(spriteset_811_rev_mid_spaceworldnew,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/spaceworldnew/811-3-3.png")          {tmpl_std(0, 1)}

alternative_sprites(spriteset_811_revflip_front_spaceworldnew,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/spaceworldnew/811-3-1.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_811_revflip_back_spaceworldnew,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/spaceworldnew/811-3-2.png")     {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_811_revflip_mid_spaceworldnew,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu811/spaceworldnew/811-3-3.png")        {tmpl_std_rev(0, 1)}
/*---END OF SECTION---*/



/*---GFX: Train Reversing Switches---*/
//Livery Selection
switch(FEAT_TRAINS,SELF, sw_811_gfx_rev_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
4: spriteset_811_rev_front_spaceworldnew;
3: spriteset_811_rev_front_spaceworld;
2: spriteset_811_rev_front_greenland;
1: spriteset_811_rev_front_renewal;
0: spriteset_811_rev_front;
}
switch(FEAT_TRAINS,SELF, sw_811_gfx_revflip_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
4: spriteset_811_revflip_front_spaceworldnew;
3: spriteset_811_revflip_front_spaceworld;
2: spriteset_811_revflip_front_greenland;
1: spriteset_811_revflip_front_renewal;
0: spriteset_811_revflip_front;
}

switch(FEAT_TRAINS,SELF, sw_811_gfx_rev_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
4: spriteset_811_rev_mid_spaceworldnew;
3: spriteset_811_rev_mid_spaceworld;
2: spriteset_811_rev_mid_greenland;
1: spriteset_811_rev_mid_renewal;
0: spriteset_811_rev_mid;
}
switch(FEAT_TRAINS,SELF, sw_811_gfx_revflip_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
4: spriteset_811_revflip_mid_spaceworldnew;
3: spriteset_811_revflip_mid_spaceworld;
2: spriteset_811_revflip_mid_greenland;
1: spriteset_811_revflip_mid_renewal;
0: spriteset_811_revflip_mid;
}

switch(FEAT_TRAINS,SELF, sw_811_gfx_rev_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
4: spriteset_811_rev_back_spaceworldnew;
3: spriteset_811_rev_back_spaceworld;
2: spriteset_811_rev_back_greenland;
1: spriteset_811_rev_back_renewal;
0: spriteset_811_rev_back;
}
switch(FEAT_TRAINS,SELF, sw_811_gfx_revflip_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
4: spriteset_811_revflip_back_spaceworldnew;
3: spriteset_811_revflip_back_spaceworld;
2: spriteset_811_revflip_back_greenland;
1: spriteset_811_revflip_back_renewal;
0: spriteset_811_revflip_back;
}

//Check for flipped vehicles (dual_headed)
switch(FEAT_TRAINS, SELF, sw_811_gfx_rev_front_flippedcheck, vehicle_is_flipped) {
  1: sw_811_gfx_rev_front_livery;
 default: sw_811_gfx_revflip_front_livery;
}
switch(FEAT_TRAINS, SELF, sw_811_gfx_rev_mid_flippedcheck, vehicle_is_flipped) {
  1: sw_811_gfx_revflip_mid_livery;
 default: sw_811_gfx_rev_mid_livery;
}
switch(FEAT_TRAINS, SELF, sw_811_gfx_rev_back_flippedcheck, vehicle_is_flipped) {
  1: sw_811_gfx_revflip_back_livery;
 default: sw_811_gfx_rev_back_livery;
}

//Front/Back Car Position Testing
switch(FEAT_TRAINS, SELF, sw_811_gfx_rev_frontback_nomucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_811_gfx_rev_front_flippedcheck;
  0:sw_811_gfx_rev_back_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_811_gfx_rev_frontback_aftermucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_811_gfx_rev_back_flippedcheck;
  0:sw_811_gfx_rev_front_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_811_gfx_rev_frontback_mucarcheck, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F),STORE_TEMP(var[0x61, 0, 0x000000FF, 0x41],0),  //look at opposite position_in_vehID_chain
STORE_TEMP((position_in_consist_from_end-position_in_consist-1)-LOAD_TEMP(0), 0x10F),                               //look at what is ahead of the first vehicle in the vehID_chain
var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000:sw_811_gfx_rev_frontback_aftermucars;
  default:sw_811_gfx_rev_frontback_nomucars;
}
switch(FEAT_TRAINS, SELF, sw_811_gfx_rev_frontback_sameid, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist+1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle behind of opposite vehicle
  2037:sw_811_gfx_rev_frontback_mucarcheck;
  1000:sw_811_gfx_rev_front_flippedcheck;
  default:sw_811_gfx_rev_back_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_811_gfx_rev_frontback, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle infront of opposite vehicle
  2037:sw_811_gfx_rev_frontback_sameid;
  1000:sw_811_gfx_rev_back_flippedcheck;
  default:sw_811_gfx_rev_front_flippedcheck;
}

//ID Testing
switch(FEAT_TRAINS, SELF, sw_811_gfx_rev_idcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of opposite vehicle
  1000: sw_811_gfx_rev_mid_flippedcheck;
  2037: sw_811_gfx_rev_frontback;
}
/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/
//811 Orginal
switch(FEAT_TRAINS, SELF, sw_811_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_811_front;
 default: spriteset_811_back;
}
switch(FEAT_TRAINS, PARENT, sw_811_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_811_gfx_frontback_flipcheck;
 default: sw_811_gfx_rev_idcheck;
}
//811 Renewal
switch(FEAT_TRAINS, SELF, sw_811_renewal_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_811_front_renewal;
 default: spriteset_811_back_renewal;
}
switch(FEAT_TRAINS, PARENT, sw_811_renewal_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_811_renewal_gfx_frontback_flipcheck;
 default: sw_811_gfx_rev_idcheck;
}
//811 Greenland
switch(FEAT_TRAINS, SELF, sw_811_greenland_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_811_front_greenland;
 default: spriteset_811_back_greenland;
}
switch(FEAT_TRAINS, PARENT, sw_811_greenland_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_811_greenland_gfx_frontback_flipcheck;
 default: sw_811_gfx_rev_idcheck;
}
//811 Spaceworld
switch(FEAT_TRAINS, SELF, sw_811_spaceworld_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_811_front_spaceworld;
 default: spriteset_811_back_spaceworld;
}
switch(FEAT_TRAINS, PARENT, sw_811_spaceworld_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_811_spaceworld_gfx_frontback_flipcheck;
 default: sw_811_gfx_rev_idcheck;
}
//811 Spaceworld New
switch(FEAT_TRAINS, SELF, sw_811_spaceworldnew_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_811_front_spaceworldnew;
 default: spriteset_811_back_spaceworldnew;
}
switch(FEAT_TRAINS, PARENT, sw_811_spaceworldnew_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_811_spaceworldnew_gfx_frontback_flipcheck;
 default: sw_811_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Middle Car Switches---*/
//811 Orginal
switch(FEAT_TRAINS, PARENT, sw_811_gfx_mucar_revcheck_mid, vehicle_is_reversed){
    0: spriteset_811_mid;
    default: sw_811_gfx_rev_idcheck;
}
//811 Renewal
switch(FEAT_TRAINS, PARENT, sw_811_renewal_gfx_mucar_revcheck_mid, vehicle_is_reversed){
    0: spriteset_811_mid_renewal;
    default: sw_811_gfx_rev_idcheck;
}
//811 Greenland
switch(FEAT_TRAINS, PARENT, sw_811_greenland_gfx_mucar_revcheck_mid, vehicle_is_reversed){
    0: spriteset_811_mid_greenland;
    default: sw_811_gfx_rev_idcheck;
}
//811 Spaceworld
switch(FEAT_TRAINS, PARENT, sw_811_spaceworld_gfx_mucar_revcheck_mid, vehicle_is_reversed){
    0: spriteset_811_mid_spaceworld;
    default: sw_811_gfx_rev_idcheck;
}
//811 Spaceworld New
switch(FEAT_TRAINS, PARENT, sw_811_spaceworldnew_gfx_mucar_revcheck_mid, vehicle_is_reversed){
    0: spriteset_811_mid_spaceworldnew;
    default: sw_811_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Livery Refitting Switches---*/
//Main Switches
switch(FEAT_TRAINS, SELF, sw_811_gfx_mucar, cargo_subtype){
  4: sw_811_spaceworldnew_gfx_mucar_revcheck_mid;
  3: sw_811_spaceworld_gfx_mucar_revcheck_mid;
  2: sw_811_greenland_gfx_mucar_revcheck_mid;
  1: sw_811_renewal_gfx_mucar_revcheck_mid;
  0: sw_811_gfx_mucar_revcheck_mid;
}
switch(FEAT_TRAINS, SELF, sw_811_gfx_main, cargo_subtype) {
  4: sw_811_spaceworldnew_gfx_frontback_revcheck;
  3: sw_811_spaceworld_gfx_frontback_revcheck;
  2: sw_811_greenland_gfx_frontback_revcheck;
  1: sw_811_renewal_gfx_frontback_revcheck;
  0: sw_811_gfx_frontback_revcheck;
}

//Menu Switches
switch(FEAT_TRAINS, SELF, sw_811_subtypetext_mucar, cargo_subtype) {
  4: string(JRK811_SPACEWORLD2);
  3: string(JRK811_SPACEWORLD);
  2: string(JRK811_GREENLAND);
  1: string(JRK811_RENEWAL);
  0: string(JRK811_INITIAL);
}
switch(FEAT_TRAINS, SELF, sw_811_subtypetext_main, cargo_subtype) {
  4: string(JRK811_SPACEWORLD2);
  3: string(JRK811_SPACEWORLD);
  2: string(JRK811_GREENLAND);
  1: string(JRK811_RENEWAL);
  0: string(JRK811_INITIAL);
}
/*---END OF SECTION---*/



//Coupling
  switch(FEAT_TRAINS, SELF, sw_811_attach_vehid, [vehicle_type_id == emu_811 || vehicle_type_id == mu_car]) {
  0: return string(MU_UNIQUE);
  }



item(FEAT_TRAINS, emu_811) {
    property {
        name:                         string(JRK_811);
        introduction_date:            date(1989, 07, 07);
        model_life:                   4;
        vehicle_life:                 39;
        reliability_decay:            11;

        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_3D;
        cost_factor:                  17;
        running_cost_factor:          51;

        speed:                        120 km/h;
        track_type:                   NARROW_OHLE;
        power:                        480 kW;
        weight:                       37 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  1;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_ELECTRIC;
        engine_class:                 ENGINE_CLASS_ELECTRIC;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                      sw_811_gfx_main;
		    purchase:                 spriteset_811_purchase;
		    additional_text:	      return string(JRK_811_DESC);
        cargo_subtype_text:           sw_811_subtypetext_main;
        can_attach_wagon:			  sw_811_attach_vehid;
        //start_stop:                   ;
    }
    /*Multiple Unit Car*/
      livery_override(mu_car){
        default:                      sw_811_gfx_mucar;
        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_3D;
        cargo_subtype_text:           sw_811_subtypetext_mucar;
        power: 120;
        weight: 27;
      }

}
# 1 "JPplus.pnml" 4
# 1 "src/JRK/EMU/813_series.pnml" 1
/*---GFX: Spritesets---*/
//Purchase Sprites
spriteset (spriteset_813_purchase,	                                                     "gfx/JRW/emu207/purchase.png")               {tmpl_purchase_dh(0, 0)}
alternative_sprites(spriteset_813_purchase, ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,         "gfx/JRK/emu813/purchase_32bpp.png")         {tmpl_purchase_dh_32bpp(0, 0)}

//813 Standard
spriteset (spriteset_813_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_813_back,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_813_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_813_rev_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_813_rev_back,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_813_rev_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_813_revflip_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_813_revflip_back,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_813_revflip_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_813_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/Standard/813-1-1.png")           {tmpl_std(0, 1)}
alternative_sprites(spriteset_813_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/Standard/813-1-2.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_813_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/Standard/813-1-3.png")           {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_813_rev_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/Standard/813-1-1.png")          {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_813_rev_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/Standard/813-1-2.png")       {tmpl_std(0, 1)}
alternative_sprites(spriteset_813_rev_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/Standard/813-1-3.png")          {tmpl_std(0, 1)}

alternative_sprites(spriteset_813_revflip_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/Standard/813-1-1.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_813_revflip_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/Standard/813-1-2.png")     {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_813_revflip_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/Standard/813-1-3.png")        {tmpl_std_rev(0, 1)}

//813 Standard 2
spriteset (spriteset_813_midtype_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_813_midtype_back,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_813_midtype_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_813_midtype_rev_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_813_midtype_rev_back,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_813_midtype_rev_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_813_midtype_revflip_front,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_813_midtype_revflip_back,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_813_midtype_revflip_mid,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_813_midtype_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/Standard/813-2-1.png")           {tmpl_std(0, 1)}
alternative_sprites(spriteset_813_midtype_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/Standard/813-2-2.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_813_midtype_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/Standard/813-2-3.png")           {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_813_midtype_rev_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/Standard/813-2-1.png")          {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_813_midtype_rev_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/Standard/813-2-2.png")       {tmpl_std(0, 1)}
alternative_sprites(spriteset_813_midtype_rev_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/Standard/813-2-3.png")          {tmpl_std(0, 1)}

alternative_sprites(spriteset_813_midtype_revflip_front,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/Standard/813-2-1.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_813_midtype_revflip_back,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/Standard/813-2-2.png")     {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_813_midtype_revflip_mid,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/Standard/813-2-3.png")        {tmpl_std_rev(0, 1)}


//813 Fukuhoku Yutaka
spriteset (spriteset_813_front_fuku,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_813_back_fuku,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_813_mid_fuku,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_813_rev_front_fuku,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_813_rev_back_fuku,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_813_rev_mid_fuku,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_813_revflip_front_fuku,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_813_revflip_back_fuku,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_813_revflip_mid_fuku,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_813_front_fuku,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/FukuhokuYutaka/813-3-1.png")           {tmpl_std(0, 1)}
alternative_sprites(spriteset_813_back_fuku,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/FukuhokuYutaka/813-3-2.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_813_mid_fuku,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/FukuhokuYutaka/813-3-3.png")           {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_813_rev_front_fuku,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/FukuhokuYutaka/813-3-1.png")          {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_813_rev_back_fuku,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/FukuhokuYutaka/813-3-2.png")       {tmpl_std(0, 1)}
alternative_sprites(spriteset_813_rev_mid_fuku,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/FukuhokuYutaka/813-3-3.png")          {tmpl_std(0, 1)}

alternative_sprites(spriteset_813_revflip_front_fuku,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/FukuhokuYutaka/813-3-1.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_813_revflip_back_fuku,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/FukuhokuYutaka/813-3-2.png")     {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_813_revflip_mid_fuku,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/FukuhokuYutaka/813-3-3.png")        {tmpl_std_rev(0, 1)}

//813 Fukuhoku Yutaka 2
spriteset (spriteset_813_midtype_front_fuku,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_813_midtype_back_fuku,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_813_midtype_mid_fuku,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_813_midtype_rev_front_fuku,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_813_midtype_rev_back_fuku,        	    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_813_midtype_rev_mid_fuku,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

spriteset (spriteset_813_midtype_revflip_front_fuku,    	    	"gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_813_midtype_revflip_back_fuku,    		    "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }
spriteset (spriteset_813_midtype_revflip_mid_fuku,    		        "gfx/OTHER/mucar.png") 	{ tmpl_std(0, 0) }

alternative_sprites(spriteset_813_midtype_front_fuku,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/FukuhokuYutaka/813-4-1.png")           {tmpl_std(0, 1)}
alternative_sprites(spriteset_813_midtype_back_fuku,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/FukuhokuYutaka/813-4-2.png")        {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_813_midtype_mid_fuku,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/FukuhokuYutaka/813-4-3.png")           {tmpl_std_rev(0, 1)}

alternative_sprites(spriteset_813_midtype_rev_front_fuku,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/FukuhokuYutaka/813-4-1.png")          {tmpl_std_rev(0, 26)}
alternative_sprites(spriteset_813_midtype_rev_back_fuku,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/FukuhokuYutaka/813-4-2.png")       {tmpl_std(0, 1)}
alternative_sprites(spriteset_813_midtype_rev_mid_fuku,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/FukuhokuYutaka/813-4-3.png")          {tmpl_std(0, 1)}

alternative_sprites(spriteset_813_midtype_revflip_front_fuku,         ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/FukuhokuYutaka/813-4-1.png")        {tmpl_std(0, 26)}
alternative_sprites(spriteset_813_midtype_revflip_back_fuku,          ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/FukuhokuYutaka/813-4-2.png")     {tmpl_std_rev(0, 1)}
alternative_sprites(spriteset_813_midtype_revflip_mid_fuku,           ZOOM_LEVEL_NORMAL, BIT_DEPTH_32BPP,       "gfx/JRK/emu813/FukuhokuYutaka/813-4-3.png")        {tmpl_std_rev(0, 1)}


/*---END OF SECTION---*/



/*---GFX: Pantograph Positions---*/
switch(FEAT_TRAINS,SELF, sw_813_gfx_pantograph_pos, position_in_vehid_chain%2){
  0: spriteset_813_midtype_mid;
  default:spriteset_813_mid;
}

switch(FEAT_TRAINS,SELF, sw_813_gfx_pantograph_pos_fuku, position_in_vehid_chain%2){
  0: spriteset_813_midtype_mid_fuku;
  default:spriteset_813_mid_fuku;
}
/*---END OF SECTION---*/



/*---GFX: Train Reversing Switches---*/
//Livery Selection
switch(FEAT_TRAINS,SELF, sw_813_gfx_rev_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
3: spriteset_813_midtype_rev_front_fuku;
2: spriteset_813_rev_front_fuku;
1: spriteset_813_midtype_rev_front;
0: spriteset_813_rev_front;
}
switch(FEAT_TRAINS,SELF, sw_813_gfx_revflip_front_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
3: spriteset_813_midtype_revflip_front_fuku;
2: spriteset_813_revflip_front_fuku;
1: spriteset_813_midtype_revflip_front;
0: spriteset_813_revflip_front;
}

switch(FEAT_TRAINS,SELF, sw_813_gfx_rev_mid_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
3: spriteset_813_midtype_rev_mid_fuku;
2: spriteset_813_rev_mid_fuku;
1: spriteset_813_midtype_rev_mid;
0: spriteset_813_rev_mid;
}
switch(FEAT_TRAINS,SELF, sw_813_gfx_revflip_mid_panto_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
3: spriteset_813_midtype_revflip_mid_fuku;
2: spriteset_813_revflip_mid_fuku;
1: spriteset_813_midtype_revflip_mid;
0: spriteset_813_revflip_mid;
}

switch(FEAT_TRAINS,SELF, sw_813_gfx_rev_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
3: spriteset_813_rev_mid_fuku;
2: spriteset_813_rev_mid_fuku;
1: spriteset_813_rev_mid;
0: spriteset_813_rev_mid;
}
switch(FEAT_TRAINS,SELF, sw_813_gfx_revflip_mid_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
3: spriteset_813_revflip_mid_fuku;
2: spriteset_813_revflip_mid_fuku;
1: spriteset_813_revflip_mid;
0: spriteset_813_revflip_mid;
}

switch(FEAT_TRAINS,SELF, sw_813_gfx_rev_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
3: spriteset_813_midtype_rev_back_fuku;
2: spriteset_813_rev_back_fuku;
1: spriteset_813_midtype_rev_back;
0: spriteset_813_rev_back;
}
switch(FEAT_TRAINS,SELF, sw_813_gfx_revflip_back_livery, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xF2]]){
3: spriteset_813_midtype_revflip_back_fuku;
2: spriteset_813_revflip_back_fuku;
1: spriteset_813_midtype_revflip_back;
0: spriteset_813_revflip_back;
}

//Check for flipped vehicles (dual_headed)
switch(FEAT_TRAINS, SELF, sw_813_gfx_rev_front_flippedcheck, vehicle_is_flipped) {
  1: sw_813_gfx_rev_front_livery;
 default: sw_813_gfx_revflip_front_livery;
}
switch(FEAT_TRAINS, SELF, sw_813_gfx_rev_mid_panto_flippedcheck, vehicle_is_flipped) {
  1: sw_813_gfx_revflip_mid_panto_livery;
 default: sw_813_gfx_rev_mid_panto_livery;
}
switch(FEAT_TRAINS, SELF, sw_813_gfx_rev_mid_flippedcheck, vehicle_is_flipped) {
  1: sw_813_gfx_revflip_mid_livery;
 default: sw_813_gfx_rev_mid_livery;
}
switch(FEAT_TRAINS, SELF, sw_813_gfx_rev_back_flippedcheck, vehicle_is_flipped) {
  1: sw_813_gfx_revflip_back_livery;
 default: sw_813_gfx_rev_back_livery;
}

//Pantograph Position Testing
switch(FEAT_TRAINS, SELF, sw_813_gfx_rev_pantograph_pos_std, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  0: sw_813_gfx_rev_mid_panto_flippedcheck;
  default: sw_813_gfx_rev_mid_flippedcheck;
}

//Front/Back Car Position Testing
switch(FEAT_TRAINS, SELF, sw_813_gfx_rev_frontback_nomucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_813_gfx_rev_front_flippedcheck;
  0:sw_813_gfx_rev_back_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_813_gfx_rev_frontback_aftermucars, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x000000FF, 0x41]%2]){ //look at opposite position_in_vehID_chain
  1:sw_813_gfx_rev_back_flippedcheck;
  0:sw_813_gfx_rev_front_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_813_gfx_rev_frontback_mucarcheck, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F),STORE_TEMP(var[0x61, 0, 0x000000FF, 0x41],0),  //look at opposite position_in_vehID_chain
STORE_TEMP((position_in_consist_from_end-position_in_consist-1)-LOAD_TEMP(0), 0x10F),                               //look at what is ahead of the first vehicle in the vehID_chain
var[0x61, 0, 0x0000FFFF, 0xC6]]){
  1000:sw_813_gfx_rev_frontback_aftermucars;
  default:sw_813_gfx_rev_frontback_nomucars;
}
switch(FEAT_TRAINS, SELF, sw_813_gfx_rev_frontback_sameid, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist+1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle behind of opposite vehicle
  2038:sw_813_gfx_rev_frontback_mucarcheck;
  1000:sw_813_gfx_rev_front_flippedcheck;
  default:sw_813_gfx_rev_back_flippedcheck;
}
switch(FEAT_TRAINS, SELF, sw_813_gfx_rev_frontback, 
[STORE_TEMP(position_in_consist_from_end-position_in_consist-1, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of vehicle infront of opposite vehicle
  2038:sw_813_gfx_rev_frontback_sameid;
  1000:sw_813_gfx_rev_back_flippedcheck;
  default:sw_813_gfx_rev_front_flippedcheck;
}

//ID Testing
switch(FEAT_TRAINS, SELF, sw_813_gfx_rev_idcheck, [STORE_TEMP(position_in_consist_from_end-position_in_consist, 0x10F), var[0x61, 0, 0x0000FFFF, 0xC6]]){ //check ID of opposite vehicle
  1000: sw_813_gfx_rev_pantograph_pos_std;
  2038: sw_813_gfx_rev_frontback;
}
/*---END OF SECTION---*/



/*---GFX: Front/Back Cab Car Switches + DUAL_HEADED fix---*/
//813 Standard
switch(FEAT_TRAINS, SELF, sw_813_std_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_813_front;
 default: spriteset_813_back;
}
switch(FEAT_TRAINS, PARENT, sw_813_std_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_813_std_gfx_frontback_flipcheck;
 default: sw_813_gfx_rev_idcheck;
}
//813 Standard 2
switch(FEAT_TRAINS, SELF, sw_813_std2_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_813_midtype_front;
 default: spriteset_813_midtype_back;
}
switch(FEAT_TRAINS, PARENT, sw_813_std2_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_813_std2_gfx_frontback_flipcheck;
 default: sw_813_gfx_rev_idcheck;
}
//813 Fukuhoku Yutaka
switch(FEAT_TRAINS, SELF, sw_813_fuku_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_813_front_fuku;
 default: spriteset_813_back_fuku;
}
switch(FEAT_TRAINS, PARENT, sw_813_fuku_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_813_fuku_gfx_frontback_flipcheck;
 default: sw_813_gfx_rev_idcheck;
}
//813 Fukuhoku Yutaka 2
switch(FEAT_TRAINS, SELF, sw_813_fuku2_gfx_frontback_flipcheck, vehicle_is_flipped){
 0: spriteset_813_midtype_front_fuku;
 default: spriteset_813_midtype_back_fuku;
}
switch(FEAT_TRAINS, PARENT, sw_813_fuku2_gfx_frontback_revcheck, vehicle_is_reversed){
 0: sw_813_fuku2_gfx_frontback_flipcheck;
 default: sw_813_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Middle Car Switches---*/
//813 Standard
switch(FEAT_TRAINS, PARENT, sw_813_std_gfx_mucar_revcheck_mid, vehicle_is_reversed){
    0: spriteset_813_mid;
    default: sw_813_gfx_rev_idcheck;
}
//813 Standard 2
switch(FEAT_TRAINS, PARENT, sw_813_std2_gfx_mucar_revcheck_mid, vehicle_is_reversed){
    0: sw_813_gfx_pantograph_pos;
    default: sw_813_gfx_rev_idcheck;
}
//813 Fukuhoku Yutaka
switch(FEAT_TRAINS, PARENT, sw_813_fuku_gfx_mucar_revcheck_mid, vehicle_is_reversed){
    0: spriteset_813_mid_fuku;
    default: sw_813_gfx_rev_idcheck;
}
//813 Fukuhoku Yutaka 2
switch(FEAT_TRAINS, PARENT, sw_813_fuku2_gfx_mucar_revcheck_mid, vehicle_is_reversed){
    0: sw_813_gfx_pantograph_pos_fuku;
    default: sw_813_gfx_rev_idcheck;
}
/*---END OF SECTION---*/



/*---GFX: Livery Refitting Switches---*/
//Main Switches
switch(FEAT_TRAINS, SELF, sw_813_gfx_mucar, cargo_subtype){
  3: sw_813_fuku2_gfx_mucar_revcheck_mid;
  2: sw_813_fuku_gfx_mucar_revcheck_mid;
  1: sw_813_std2_gfx_mucar_revcheck_mid;
  0: sw_813_std_gfx_mucar_revcheck_mid;
}
switch(FEAT_TRAINS, SELF, sw_813_gfx_main, cargo_subtype) {
  3: sw_813_fuku2_gfx_frontback_revcheck;
  2: sw_813_fuku_gfx_frontback_revcheck;
  1: sw_813_std2_gfx_frontback_revcheck;
  0: sw_813_std_gfx_frontback_revcheck;
}

//Menu Switches
switch(FEAT_TRAINS, SELF, sw_813_subtypetext_mucar, cargo_subtype) {
  3: string(JRK813_FUKU2);
  2: string(JRK813_FUKU);
  1: string(JRK813_STD2);
  0: string(JRK813_STD);
}
switch(FEAT_TRAINS, SELF, sw_813_subtypetext_main, cargo_subtype) {
  3: string(JRK813_FUKU2);
  2: string(JRK813_FUKU);
  1: string(JRK813_STD2);
  0: string(JRK813_STD);
}
/*---END OF SECTION---*/



//Coupling
  switch(FEAT_TRAINS, SELF, sw_813_attach_vehid, [vehicle_type_id == emu_813 || vehicle_type_id == mu_car]) {
  0: return string(MU_UNIQUE);
  }



item(FEAT_TRAINS, emu_813) {
    property {
        name:                         string(JRK_813);
        introduction_date:            date(1994, 04, 01);
        model_life:                   16;
        vehicle_life:                 39;
        reliability_decay:            11;

        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_3D;
        cost_factor:                  17;
        running_cost_factor:          51;

        speed:                        120 km/h;
        track_type:                   NARROW_OHLE;
        power:                        480 kW;
        weight:                       37 ton;

        climates_available:           ALL_CLIMATES;
        ai_special_flag:              AI_FLAG_PASSENGER;
        sprite_id:                    SPRITE_ID_NEW_TRAIN;
        misc_flags:                   bitmask(TRAIN_FLAG_MU);
        refittable_cargo_classes:     bitmask(CC_PASSENGERS);
        non_refittable_cargo_classes: bitmask();
        refit_cost:                   0;
        dual_headed:                  1;
        ai_engine_rank:               0;

        running_cost_base:            RUNNING_COST_ELECTRIC;
        engine_class:                 ENGINE_CLASS_ELECTRIC;
        visual_effect_and_powered:    visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 4, ENABLE_WAGON_POWER);

        tractive_effort_coefficient:  0.2;
        air_drag_coefficient:         0.07;
        bitmask_vehicle_info:         0;
        length: 8;
    }
    /*Graphics and Callbacks*/
      graphics {
        default:                      sw_813_gfx_main;
		    purchase:                 spriteset_813_purchase;
		    additional_text:	      return string(JRK_813_DESC);
        cargo_subtype_text:           sw_813_subtypetext_main;
        can_attach_wagon:			  sw_813_attach_vehid;
        //start_stop:                   ;
    }
    /*Multiple Unit Car*/
      livery_override(mu_car){
        default:                      sw_813_gfx_mucar;
        cargo_capacity:               param_capacity_local;
        loading_speed:                param_loading_3D;
        cargo_subtype_text:           sw_813_subtypetext_mucar;
        power: 120;
        weight: 27;
      }

}
# 1 "JPplus.pnml" 4


//GRF OVERRIDE
# 1 "src/grfoverrides.pnml" 1

//JPSet3 DUPLICATION
engine_override("SZ\0D\00");

basecost {
		 PR_BUILD_VEHICLE : param_basecostbuy -1;
		 PR_BUILD_VEHICLE_WAGON: param_basecostbuy +3;
		 PR_RUNNING: param_basecostrun -2; //3
		 PR_RUNNING_TRAIN_STEAM: param_basecostrun -2;
         PR_RUNNING_TRAIN_DIESEL: param_basecostrun +1;
         PR_RUNNING_TRAIN_ELECTRIC:param_basecostrun -2;

}

item(FEAT_TRAINS, japanset_113, 0x49) {
	property {
		climates_available: NO_CLIMATE;
	}
} 
item(FEAT_TRAINS, japanset_151, 0x13) {
	property {
		climates_available: NO_CLIMATE;
	}
} 
item(FEAT_TRAINS, japanset_485, 0x38) {
	property {
		climates_available: NO_CLIMATE;
	}
} 
item(FEAT_TRAINS, japanset_80, 0x11) {
	property {
		climates_available: NO_CLIMATE;
	}
} 
item(FEAT_TRAINS, japanset_101, 0x30) {
	property {
		climates_available: NO_CLIMATE;
	}
} 
item(FEAT_TRAINS, japanset_103, 0x60) {
	property {
		climates_available: NO_CLIMATE;
	}
} 
item(FEAT_TRAINS, japanset_201, 0x25) {
	property {
		climates_available: NO_CLIMATE;
	}
} 
item(FEAT_TRAINS, japanset_205, 0x28) {
	property {
		climates_available: NO_CLIMATE;
	}
} 
item(FEAT_TRAINS, japanset_209, 0x68) {
	property {
		climates_available: NO_CLIMATE;
	}
} 
item(FEAT_TRAINS, japanset_223, 0x42) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, japanset_E231, 0x44) {
	property {
		climates_available: NO_CLIMATE;
	}
} 
item(FEAT_TRAINS, japanset_E233, 0x5B) {
	property {
		climates_available: NO_CLIMATE;
	}
} 
item(FEAT_TRAINS, japanset_281, 0x41) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, japanset_415, 0x62) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, japanset_789, 0x64) {
	property {
		climates_available: NO_CLIMATE;
	}
}


/*
NATS DUPLICATION DEPRECIATED
engine_override("EN\21\01");

//disable the 211
item(FEAT_TRAINS, JRC211_6, 0x20D) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, JRC211_5, 0x20C) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, JRC211_4, 0x20B) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, JRC211_3, 0x20A) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, JRC211_2, 0x209) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, JRC313_2, 0x205) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, JRC313_3, 0x206) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, JRC313_4, 0x207) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, JRC313_6, 0x208) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, JRC311, 0x205) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, JRCKIHA25, 0x201) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, JRCKIHA75, 0x202) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, JRCKIHA11, 0x200) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, JRC119_1, 0x203) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, JRC119_2, 0x204) {
	property {
		climates_available: NO_CLIMATE;
	}
}
item(FEAT_TRAINS, JRC373, 0x250) {
	property {
		climates_available: NO_CLIMATE;
	}
}
*/


//engine_override("JD\A1\E1"); jpsecret
//jnr_ef63, 1040
# 1 "JPplus.pnml" 4

